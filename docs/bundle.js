(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var i=e.g.document;if(!t&&i&&(i.currentScript&&"SCRIPT"===i.currentScript.tagName.toUpperCase()&&(t=i.currentScript.src),!t)){var o=i.getElementsByTagName("script");if(o.length)for(var a=o.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=o[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();class t{constructor(){this.keys={up:!1,down:!1,left:!1,right:!1}}setKey(e,t){this.keys.hasOwnProperty(e)&&(this.keys[e]=t)}getInputDirection(){let e=0,t=0;return this.keys.up&&(t-=1),this.keys.down&&(t+=1),this.keys.left&&(e-=1),this.keys.right&&(e+=1),{x:e,y:t}}}class i{static scoreElement=null;static targetElement=null;static controlsContainer=null;static questionOverlay=null;static questionTextElement=null;static answerButtonsContainer=null;static floorSelectionPanel=null;static floorButtonsContainer=null;static flashMessageContainer=null;static gameplayManagerInstance=null;static flashMessageTimeouts={};static setGameplayManager(e){e?(this.gameplayManagerInstance=e,console.log("[UIManager] GameplayManager instance registered successfully with UIManager.")):console.error("[UIManager] Attempted to set GameplayManager instance to null or undefined!")}static initializeUI(e){console.log("[UIManager] Initializing base UI elements (controls, panels)..."),e||console.error("[UIManager] InputManager is required for initializeUI to create controls."),this.createControls(e),this.createQuestionUI(),this.createFloorSelectionUI(),this.ensureFlashMessageContainer(),this.gameplayManagerInstance||console.warn("[UIManager] WARNING: GameplayManager instance is NOT SET at the end of initializeUI. Ensure Game.js calls UIManager.setGameplayManager() *before* UIManager.initializeUI() or related show methods."),console.log("[UIManager] Base UI element initialization complete.")}static createControls(e){this.controlsContainer=document.getElementById("controls-container"),this.controlsContainer||(this.controlsContainer=document.createElement("div"),this.controlsContainer.id="controls-container",this.controlsContainer.classList.add("controls-container"),document.body.appendChild(this.controlsContainer)),this.controlsContainer.innerHTML="",[{direction:"up",icon:"↑",gridArea:"up"},{direction:"left",icon:"←",gridArea:"left"},{direction:"right",icon:"→",gridArea:"right"},{direction:"down",icon:"↓",gridArea:"down"}].forEach((({direction:t,icon:i,gridArea:o})=>{const a=document.createElement("button");if(a.className=`control-btn ${t}`,a.textContent=i,a.style.gridArea=o,a.dataset.direction=t,e){const i=i=>{e.setKey(t,!0),a.classList.add("active"),i.preventDefault()},o=i=>{e.keys[t]&&e.setKey(t,!1),a.classList.remove("active"),i.preventDefault()};a.addEventListener("touchstart",i,{passive:!1}),a.addEventListener("touchend",o,{passive:!1}),a.addEventListener("touchcancel",o,{passive:!1}),a.addEventListener("mousedown",i),a.addEventListener("mouseup",o),a.addEventListener("mouseleave",o)}this.controlsContainer.appendChild(a)}));const t=document.getElementById("score-display");if(t)this.scoreElement=t.querySelector("#score-value"),this.targetElement=t.querySelector("#score-target"),this.scoreElement&&(this.scoreElement.textContent="0"),this.targetElement&&(this.targetElement.textContent="?");else{const e=document.createElement("div");e.id="score-display",e.classList.add("score-display"),e.innerHTML='Books: <span id="score-value">0</span> / <span id="score-target">?</span>',document.body.appendChild(e),this.scoreElement=e.querySelector("#score-value"),this.targetElement=e.querySelector("#score-target")}}static createQuestionUI(){this.questionOverlay=document.getElementById("question-overlay"),this.questionOverlay||(this.questionOverlay=document.createElement("div"),this.questionOverlay.id="question-overlay",this.questionOverlay.classList.add("ui-panel"),this.questionOverlay.innerHTML='\n        <div id="blackboard-content">\n          <h2>Question</h2>\n          <div id="question-box">\n            <p id="question-text"></p>\n            <div id="answer-buttons"></div>\n          </div>\n        </div>',document.body.appendChild(this.questionOverlay)),this.questionTextElement=this.questionOverlay.querySelector("#question-text"),this.answerButtonsContainer=this.questionOverlay.querySelector("#answer-buttons"),this.questionTextElement&&this.answerButtonsContainer||console.error("[UIManager] Failed to find/create child elements of question UI!")}static createFloorSelectionUI(){this.floorSelectionPanel=document.getElementById("floor-selection-ui"),this.floorSelectionPanel||(this.floorSelectionPanel=document.createElement("div"),this.floorSelectionPanel.id="floor-selection-ui",this.floorSelectionPanel.classList.add("ui-panel"),this.floorSelectionPanel.innerHTML='\n        <h2>Select Floor</h2>\n        <div id="floor-buttons-container"></div>',document.body.appendChild(this.floorSelectionPanel)),this.floorButtonsContainer=this.floorSelectionPanel.querySelector("#floor-buttons-container"),this.floorButtonsContainer||console.error("[UIManager] Failed to find/create floor buttons container!")}static ensureFlashMessageContainer(){return this.flashMessageContainer=document.getElementById("flash-message-container"),this.flashMessageContainer||(this.flashMessageContainer=document.createElement("div"),this.flashMessageContainer.id="flash-message-container",document.body.appendChild(this.flashMessageContainer)),this.flashMessageContainer}static flashMessage(e,t="info",i=3e3){const o=this.ensureFlashMessageContainer();if(!o)return void console.error("[UIManager] Flash message container not found or creatable.");const a=document.createElement("div");a.textContent=e,a.className="flash-message",a.classList.add(`flash-${t}`);const s=`flash-${Date.now()}-${Math.random().toString(36).substr(2,5)}`;a.id=s,o.appendChild(a),requestAnimationFrame((()=>{a.classList.add("visible")})),clearTimeout(this.flashMessageTimeouts[s]),this.flashMessageTimeouts[s]=setTimeout((()=>{a.classList.remove("visible");const e=e=>{"opacity"!==e.propertyName&&"transform"!==e.propertyName||(a.parentNode&&a.parentNode.removeChild(a),delete this.flashMessageTimeouts[s])};a.addEventListener("transitionend",e,{once:!0}),setTimeout((()=>{a.parentNode&&(a.removeEventListener("transitionend",e),a.parentNode.removeChild(a)),delete this.flashMessageTimeouts[s]}),500)}),i)}static showQuestion(e){if(this.questionOverlay&&this.questionTextElement&&this.answerButtonsContainer||(console.error("[UIManager] Question UI not ready. Call createQuestionUI() or initializeUI()."),this.createQuestionUI(),this.questionOverlay&&this.questionTextElement&&this.answerButtonsContainer))if(e){if(!this.gameplayManagerInstance||"function"!=typeof this.gameplayManagerInstance.handleAnswer)return console.error("[UIManager] CRITICAL: GameplayManager or its handleAnswer method is not set or invalid! Cannot show question."),this.flashMessage("Error: Game interaction system failed (Q). Cannot display question.","error",5e3),void this.hideQuestion();this.questionTextElement.textContent=e.question,this.answerButtonsContainer.innerHTML="",e.options.forEach(((e,t)=>{const i=document.createElement("button");i.textContent=e,i.dataset.index=t,i.classList.add("answer-button"),i.addEventListener("click",(e=>{const t=parseInt(e.target.dataset.index,10);this.gameplayManagerInstance.handleAnswer(t)})),this.answerButtonsContainer.appendChild(i)})),this.questionOverlay.classList.add("visible")}else console.error("[UIManager] Cannot show question - no questionData provided.")}static hideQuestion(){this.questionOverlay&&(this.questionOverlay.classList.remove("visible"),this.questionTextElement&&(this.questionTextElement.textContent=""),this.answerButtonsContainer&&(this.answerButtonsContainer.innerHTML=""))}static showFloorSelectionUI(e,t,i){if(this.floorSelectionPanel&&this.floorButtonsContainer||(console.error("[UIManager] Floor selection UI not ready. Call createFloorSelectionUI() or initializeUI()."),this.createFloorSelectionUI(),this.floorSelectionPanel&&this.floorButtonsContainer)){if(!this.gameplayManagerInstance||"function"!=typeof this.gameplayManagerInstance.handleFloorSelection)return console.error("[UIManager] CRITICAL: GameplayManager or its handleFloorSelection method is not set or invalid! Cannot show floor selection."),this.flashMessage("Error: Game interaction system failed (F). Cannot display floor selection.","error",5e3),void this.hideFloorSelectionUI();this.floorButtonsContainer.innerHTML="";for(let o=e;o<=t;o++){const e=document.createElement("button");e.textContent=`Floor ${o}`,e.classList.add("floor-button"),e.dataset.floor=o,o===i?(e.disabled=!0,e.classList.add("current")):e.addEventListener("click",(()=>{this.gameplayManagerInstance.handleFloorSelection(o)})),this.floorButtonsContainer.appendChild(e)}this.floorSelectionPanel.classList.add("visible")}}static hideFloorSelectionUI(){this.floorSelectionPanel&&this.floorSelectionPanel.classList.remove("visible")}static updateScore(e,t){this.scoreElement||(this.scoreElement=document.getElementById("score-value")),this.targetElement||(this.targetElement=document.getElementById("score-target")),this.scoreElement&&(this.scoreElement.textContent=e),this.targetElement&&(this.targetElement.textContent=t)}static showGameUI(){const e=document.getElementById("game-canvas")||document.getElementById("gameCanvas"),t=document.getElementById("menu-container"),i=document.getElementById("score-display");e?e.style.display="block":console.warn("[UIManager] Canvas element not found to show."),t&&!t.classList.contains("hidden")&&(console.warn("[UIManager] Menu container was not hidden before showing game UI. Hiding it now."),t.classList.add("hidden")),this.controlsContainer?this.controlsContainer.classList.add("visible"):console.warn("[UIManager] Controls container not found to show."),i?i.classList.add("visible"):console.warn("[UIManager] Score display not found to show."),this.hideQuestion(),this.hideFloorSelectionUI()}static hideGameUI(){const e=document.getElementById("game-canvas")||document.getElementById("gameCanvas"),t=document.getElementById("score-display");e&&(e.style.display="none"),this.controlsContainer&&this.controlsContainer.classList.remove("visible"),t&&t.classList.remove("visible"),this.hideQuestion(),this.hideFloorSelectionUI()}}class o{static Direction={DOWN:0,RIGHT:1,UP:2,LEFT:3};constructor(e,t,i={}){this.ctx=e,this.sprite=new Image,this.frameSize=i.frameSize||32,this.frameCount=i.frameCount||4,this.scale=i.scale||2,this.renderSize=this.frameSize*this.scale,this.speed=i.speed||3,this.animationSpeed=i.animationSpeed||150,this.collisionBoxWidthRatio=i.collisionBoxWidthRatio||.4,this.collisionBoxHeightRatio=i.collisionBoxHeightRatio||.2,this.collisionBoxFeetOffsetRatio=i.collisionBoxFeetOffsetRatio||.4,this.x=0,this.y=0,this.currentDirection=o.Direction.DOWN,this.currentFrame=0,this.isMoving=!1,this.lastFrameTime=0,this.sprite.onload=()=>{console.log(`[Character] Sprite loaded successfully: ${t}`)},this.sprite.onerror=()=>{console.error(`[Character] Failed to load sprite: ${t}`)},this.sprite.src=t}updateAnimation(e){if(!this.isMoving)return this.currentFrame=0,void(this.lastFrameTime=e);this.lastFrameTime||(this.lastFrameTime=e),e-this.lastFrameTime>this.animationSpeed&&(this.currentFrame=(this.currentFrame+1)%this.frameCount,this.lastFrameTime=e)}getCollisionBox(e,t){const i=this.renderSize*this.collisionBoxWidthRatio,o=this.renderSize*this.collisionBoxHeightRatio,a=i/2,s=this.renderSize*this.collisionBoxFeetOffsetRatio;return{top:t+s-o/2,bottom:t+s+o/2,left:e-a,right:e+a,width:i,height:o}}draw(e,t){if(!this.sprite.complete||0===this.sprite.naturalHeight)return;const i=this.currentFrame*this.frameSize,o=this.currentDirection*this.frameSize,a=Math.floor(this.x-this.renderSize/2+e),s=Math.floor(this.y-this.renderSize/2+t);try{this.ctx.drawImage(this.sprite,i,o,this.frameSize,this.frameSize,a,s,this.renderSize,this.renderSize)}catch(e){console.error("[Character] Error drawing sprite:",e)}}}class a{constructor(e,t,i,o){this.x=e,this.y=t,this.id=i,this.tileSize=o,this.size=.6*o,this.collected=!1,this.isCollected=!1}draw(e,t,i,o){const a=Math.floor(this.x+t-this.size/2),s=Math.floor(this.y+i-this.size/2);o?e.drawImage(o,a,s,this.size,this.size):(e.fillStyle="#8d6e63",e.fillRect(a,s,this.size,this.size),e.strokeStyle="#5d4037",e.strokeRect(a,s,this.size,this.size),e.fillStyle="#eee",e.font=.6*this.size+"px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText("?",a+this.size/2,s+this.size/2+2))}}const s={LOADING:"LOADING",MENU:"MENU",PLAYING:"PLAYING",ASKING_QUESTION:"ASKING_QUESTION",SELECTING_FLOOR:"SELECTING_FLOOR",TRANSITIONING:"TRANSITIONING",GAME_OVER:"GAME_OVER"},n=[{question:"Który język programowania jest znany ze swojej wszechstronności i używany zarówno w backendzie (Node.js), jak i frontendzie?",options:["Python","Java","JavaScript","C#"],correctAnswer:2},{question:"Co oznacza skrót HTML?",options:["HyperText Markup Language","High Transfer Machine Language","Hyperlink and Text Management Language","Home Tool Markup Language"],correctAnswer:0},{question:"Która struktura danych działa na zasadzie LIFO (Last-In, First-Out)?",options:["Kolejka (Queue)","Stos (Stack)","Lista (List)","Drzewo (Tree)"],correctAnswer:1},{question:"Jak nazywa się proces znajdowania i naprawiania błędów w kodzie?",options:["Kompilacja","Testowanie","Debugowanie","Refaktoryzacja"],correctAnswer:2},{question:"Który paradygmat programowania opiera się na koncepcji 'obiektów', które mogą zawierać dane i kod?",options:["Programowanie funkcyjne","Programowanie proceduralne","Programowanie obiektowe","Programowanie logiczne"],correctAnswer:2},{question:"Co oznacza CSS?",options:["Cascading Style Sheets","Computer Style Syntax","Creative Styling System","Colorful Style Scripts"],correctAnswer:0},{question:"Który operator w JavaScript służy do ścisłego porównania (wartość i typ)?",options:["==","=","===","!="],correctAnswer:2},{question:"Jak nazywa się popularny system kontroli wersji używany przez programistów?",options:["Subversion (SVN)","Git","Mercurial","CVS"],correctAnswer:1},{question:"Który typ pętli w większości języków programowania jest najbardziej odpowiedni do iteracji po elementach tablicy, gdy nie znamy ich liczby?",options:["for","while","do...while","foreach (lub for...of)"],correctAnswer:3},{question:"Co to jest API?",options:["Advanced Programming Interface","Application Programming Interface","Automated Program Interaction","Algorithmic Processing Input"],correctAnswer:1}];function r(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function l(e){let t=3735928559^e;return t=Math.imul(t^t>>>16,2246822507),t=Math.imul(t^t>>>13,3266489909),(t^=t>>>16)>>>0}function c(e,t){if(!e||"string"!=typeof e||e.length<7)return e;let i=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return i=Math.min(255,Math.max(0,Math.round(i*t))),o=Math.min(255,Math.max(0,Math.round(o*t))),a=Math.min(255,Math.max(0,Math.round(a*t))),`#${i.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`}class h{constructor(e){this.tileSize=e,this.tileColors={},this.baseWallColor="#1c1e22",this.baseCorridorColor="#a0a0a0",this.baseRoomFloorColor="#c0c0c0",this.liftColor="#707080",this.errorColor="#ff00ff"}resetColorCache(){this.tileColors={}}getTileColor(e,t,i,o){const a=`${e},${t}`;if(this.tileColors[a])return this.tileColors[a];let s;switch(i){case 0:s=this.baseWallColor;break;case 1:s=this.baseCorridorColor;break;case 2:s=this.baseRoomFloorColor;break;case 3:s=this.liftColor;break;default:s=this.errorColor}return this.tileColors[a]=s,s}draw(e,t,i=null){const{map:o,rooms:a,books:s,liftPosition:n,offsetX:r,offsetY:l,cols:c,rows:h}=t,d=Math.floor(r),u=Math.floor(l),m=Math.max(0,Math.floor(-d/this.tileSize)-1),g=Math.min(c,Math.ceil((-d+e.canvas.width)/this.tileSize)+1),f=Math.max(0,Math.floor(-u/this.tileSize)-1),p=Math.min(h,Math.ceil((-u+e.canvas.height)/this.tileSize)+1);e.save(),this.drawBaseTiles(e,o,a,d,u,c,h,f,p,m,g),this.drawRoomDetails(e,o,a,n,d,u,c,h,f,p,m,g),this.drawLiftDetails(e,n,d,u),this.drawBooks(e,s,d,u,i),e.restore()}drawBaseTiles(e,t,i,o,a,s,n,r,l,c,h){e.save(),e.shadowColor="transparent";const d="#383838",u="#606060",m="#757575";for(let g=r;g<l;g++)for(let r=c;r<h;r++){const l=t[g]?.[r];if(void 0===l)continue;const c=Math.floor(r*this.tileSize+o),h=Math.floor(g*this.tileSize+a),f=this.getTileColor(g,r,l,i);if(e.fillStyle=f,e.fillRect(c,h,this.tileSize,this.tileSize),0===l){e.fillStyle="rgba(0,0,0,0.06)";for(let t=0;t<5;t++)e.fillRect(c+Math.random()*this.tileSize,h+Math.random()*this.tileSize,1,1);const i=2;g>0&&0!==t[g-1]?.[r]&&(e.fillStyle=m,e.fillRect(c,h,this.tileSize,i)),g<n-1&&0!==t[g+1]?.[r]&&(e.fillStyle=d,e.fillRect(c,h+this.tileSize-i,this.tileSize,i)),r>0&&0!==t[g]?.[r-1]&&(e.fillStyle=u,e.fillRect(c,h+i,i,this.tileSize-i)),r<s-1&&0!==t[g]?.[r+1]&&(e.fillStyle=d,e.fillRect(c+this.tileSize-i,h+i,i,this.tileSize-i)),g>0&&r>0&&0!==t[g-1]?.[r]&&0!==t[g]?.[r-1]&&0!==t[g-1]?.[r-1]&&(e.fillStyle=u,e.fillRect(c,h,i,i)),g>0&&r<s-1&&0!==t[g-1]?.[r]&&0!==t[g]?.[r+1]&&0!==t[g-1]?.[r+1]&&(e.fillStyle=m,e.fillRect(c+this.tileSize-i,h,i,i))}else if(1===l){e.fillStyle="rgba(255,255,255,0.03)";for(let t=0;t<3;t++)e.fillRect(c+Math.random()*this.tileSize,h+Math.random()*this.tileSize,1,1)}}e.restore()}drawRoomDetails(e,t,i,o,a,s,n,r,h,d,u,m){e.save(),e.shadowColor="transparent";for(const o of i){if(o.col+o.width<u||o.col>m||o.row+o.height<h||o.row>d)continue;const i=Math.floor(o.col*this.tileSize+a),n=Math.floor(o.row*this.tileSize+s),r=o.width*this.tileSize,g=o.height*this.tileSize;let f=this.baseRoomFloorColor;const p="number"==typeof this.floorNumber?this.floorNumber:0;let y=l(o.id)+100*p;switch(o.type){case"classroom":f=c("#a0c8e0",.9+l(y)%11/100);break;case"office":f=c("#f0e8c0",.9+l(y+1)%11/100);break;case"library":f=c("#d8c0a8",.9+l(y+2)%11/100);break;case"gym":f=c("#b0d0b0",.9+l(y+3)%11/100);break;case"lab":f=c("#e0e0ff",.9+l(y+4)%11/100);break;case"storage":f=c("#b0a090",.9+l(y+5)%11/100);break;case"utility":f=c("#b0b0b0",.9+l(y+6)%11/100)}for(let i=Math.max(o.row,h);i<Math.min(o.row+o.height,d);i++)for(let n=Math.max(o.col,u);n<Math.min(o.col+o.width,m);n++){const r=t[i]?.[n];if(2===r){const t=Math.floor(n*this.tileSize+a),r=Math.floor(i*this.tileSize+s),h=.98+(l(5e3*i+3*n+y)%11-5)/100;e.fillStyle=c(f,h),e.fillRect(t,r,this.tileSize,this.tileSize),"lab"===o.type&&(e.strokeStyle="rgba(0,0,0,0.08)",e.lineWidth=1,e.strokeRect(t+.5,r+.5,this.tileSize-1,this.tileSize-1))}}this.drawRoomDecorations(e,o,i,n,r,g)}e.restore()}drawLiftDetails(e,t,i,o){if(!t)return;const a=Math.floor(t.tileX*this.tileSize+i),s=Math.floor(t.tileY*this.tileSize+o);if(a+this.tileSize<0||a>e.canvas.width||s+this.tileSize<0||s>e.canvas.height)return;e.save(),e.shadowColor="transparent",e.strokeStyle="#d0d0d0",e.lineWidth=1,e.strokeRect(a+.5,s+.5,this.tileSize-1,this.tileSize-1),e.strokeStyle="#404040",e.strokeRect(a+1.5,s+1.5,this.tileSize-3,this.tileSize-3);const n=.15*this.tileSize,r=a+.8*this.tileSize,l=s+.5*this.tileSize;e.fillStyle="#444",e.beginPath(),e.arc(r,l,n,0,2*Math.PI),e.fill(),e.fillStyle="#ff4444",e.beginPath(),e.arc(r,l,.8*n,0,2*Math.PI),e.fill(),e.fillStyle="rgba(255, 255, 255, 0.5)",e.beginPath(),e.arc(r-.2*n,l-.2*n,.3*n,0,2*Math.PI),e.fill(),e.restore()}drawRoomDecorations(e,t,i,o,a,s){const n=this.tileSize,r=.2*n,l=.1*n;e.lineWidth=1,e.strokeStyle="#444";const c=(t,a,s,n,r,l=!0)=>{e.fillStyle=r;const c=Math.floor(i+t),h=Math.floor(o+a),d=Math.floor(s),u=Math.floor(n);e.fillRect(c,h,d,u),l&&e.strokeRect(c+.5,h+.5,d-1,u-1)},h=(t,a,s,n,r=!0)=>{e.fillStyle=n;const l=Math.floor(i+t),c=Math.floor(o+a);e.beginPath(),e.arc(l,c,Math.floor(s),0,2*Math.PI),e.fill(),r&&e.stroke()};switch(t.type){case"classroom":e.strokeStyle="#5d4037";const t=.6*n,d=.4*n,u=.25*n,m=1*n,g=.9*n;c(.25*a,r,.5*a,.2*n,"#333",!0),c(.25*a+2,r+2,.5*a-4,.2*n-4,"#4CAF50",!1);for(let e=0;;e++){const i=r+.5*n+e*g;if(i+d+u>s-r)break;for(let e=0;;e++){const o=r+e*m;if(o+t>a-r)break;c(o,i,t,d,"#8B4513"),c(o+.1*t,i+d+l,.8*t,u,"#6a4a3a")}}break;case"office":e.strokeStyle="#5d4037";const f=Math.min(.6*a,2.5*n),p=Math.min(.4*s,1.2*n);c(r,r,f,p,"#a0522d"),c(r+f+l,r+.1*p,.6*n,.6*n,"#444");const y=.8*n;c(a-r-y,r,y,s-2*r,"#6B4F41"),c(r+l,r+l,.5*n,.4*n,"#333"),c(r+l+.1*n,r+l+.4*n+2,.3*n,.1*n,"#555");break;case"library":e.strokeStyle="#402a10";const w=.6*n,M=1.5*n;for(let t=r;t<a-r-w;t+=M){c(t,r,w,s-2*r,"#654321"),e.strokeStyle="rgba(0,0,0,0.3)";for(let a=r+.5*n;a<s-r;a+=.7*n)e.beginPath(),e.moveTo(i+t,o+a),e.lineTo(i+t+w,o+a),e.stroke();e.strokeStyle="#402a10"}if(a>1.5*M){const e=w+r+(a-2*w-2*r-1.5*n)/2;e>w+r&&(c(e,.3*s,1.5*n,.4*s,"#966F33"),c(e+.2*n,.3*s-.3*n,.5*n,.25*n,"#6a4a3a"),c(e+.2*n,.3*s+.4*s+l,.5*n,.25*n,"#6a4a3a"))}break;case"gym":e.strokeStyle="#555",c(r,r,.4*a,.3*s,"#778899"),c(a-r-.3*a,s-r-.4*s,.3*a,.4*s,"#778899"),c(.6*a,r,.8*n,1.8*n,"#333"),c(.6*a+.1*n,r+.1*n,.6*n,1.6*n,"#555",!1),c(r,.5*s,1.5*n,.4*n,"#8B4513"),c(a-r-.5*n,r,.5*n,1.5*n,"#444"),h(a-r-.25*n,r+.3*n,.15*n,"#666"),h(a-r-.25*n,r+.7*n,.15*n,"#666"),h(a-r-.25*n,r+1.1*n,.15*n,"#666");break;case"lab":e.strokeStyle="#668";const S=.8*n;c(r,r,a-2*r,S,"#d0d0d8"),c(r,s-r-S,a-2*r,S,"#d0d0d8"),c(r+.2*n,r+.1*n,.5*n,.5*n,"#4a90e2"),c(r+1*n,r+.1*n,.3*n,.6*n,"#f5a623"),h(a-2*r-.4*n,r+.5*S,.2*n,"#e04040",!0),c(.4*a,r+S+l,n,s-2*r-2*S-2*l,"#a0a0b0");break;case"storage":e.strokeStyle="#4d4030";const b=a-2*r,v=.5*n;c(r,r,b,v,"#9e9e9e"),c(r,s-r-v,b,v,"#9e9e9e");const C=.6*n;c(r+.2*n,r+v+l,C,C,"#bf8f6f"),c(r+1*n,r+v+l,C,C,"#bf8f6f"),c(a-r-1.5*C,r+v+3*l,1.2*C,.8*C,"#bf8f6f"),c(a-r-n,s-r-n,.8*n,.8*n,"#6a4a3a");break;default:e.strokeStyle="#5d4037",c(.1*a,.15*s,.3*a,.25*s,"#A0522D"),c(.6*a,.5*s,.3*a,.4*s,"#A0522D"),c(a-r-.5*n,r,.5*n,s-2*r,"#777"),e.strokeStyle="#555",e.lineWidth=3,e.beginPath(),e.moveTo(i+r,o+.8*s),e.lineTo(i+a-r,o+.8*s),e.stroke(),e.beginPath(),e.moveTo(i+.7*a,o+r),e.lineTo(i+.7*a,o+s-r),e.stroke(),e.lineWidth=1}}drawBooks(e,t,i,o,a){if(!t||0===t.length)return;const s=.6*this.tileSize;for(const n of t)if(!n.isCollected&&!n.collected){const t=n.size||s,r=Math.floor(n.x+i-t/2),l=Math.floor(n.y+o-t/2);r+t>0&&r<e.canvas.width&&l+t>0&&l<e.canvas.height&&("function"==typeof n.draw?n.draw(e,i,o,a):a?e.drawImage(a,r,l,t,t):(e.fillStyle="#8d6e63",e.fillRect(r,l,t,t),e.strokeStyle="#5d4037",e.lineWidth=1,e.strokeRect(r+.5,l+.5,t-1,t-1)))}}}let d=null;const u={minRoomSize:5,maxRoomSize:10,corridorThickness:1,numRooms:12,maxRoomAttempts:200,roomTypeWeights:{classroom:50,office:25,library:15,gym:0,utility:10}};function m(e,t,i,o,a){const{centerTileX:s,centerTileY:n}=t,{centerTileX:r,centerTileY:l}=i;Math.random()<.5?(g(e,n,s,r,o,a),f(e,r,n,l,o,a)):(f(e,s,n,l,o,a),g(e,l,s,r,o,a))}function g(e,t,i,o,a,s){if(t<0||t>=s)return;const n=Math.max(0,Math.min(i,o)),r=Math.min(a-1,Math.max(i,o));for(let i=n;i<=r;i++)0===e[t]?.[i]&&(e[t][i]=1)}function f(e,t,i,o,a,s){if(t<0||t>=a)return;const n=Math.max(0,Math.min(i,o)),r=Math.min(s-1,Math.max(i,o));for(let i=n;i<=r;i++)0===e[i]?.[t]&&(e[i][t]=1)}function p(e,t,i,o,a){console.log(`  [MapGen Connect] Trying to connect wall at tile(${t}, ${i}) to walkable area...`);const s=[[0,-1],[0,1],[-1,0],[1,0]];let n=!1,r=null;for(const[o,a]of s){const s=t+o,l=i+a,c=e[l]?.[s];if(1===c||2===c||3===c){n=!0,r={x:s,y:l};break}}if(n)return console.log(`  [MapGen Connect] Target(${t}, ${i}) is adjacent to walkable at (${r.x}, ${r.y}). Setting target to Corridor.`),e[i][t]=1,!0;console.log("  [MapGen Connect] Target not adjacent. Searching nearest walkable (Corridor/Floor) via BFS...");const l=[[t,i,0]],c=new Set([`${t},${i}`]),h=[0,1,2,3],d=[1,2];let u=null,m=1/0;for(;l.length>0;){const[t,i,n]=l.shift();if(!(n>=m))for(const[r,g]of s){const s=t+r,f=i+g,p=`${s},${f}`;if(s>=0&&s<o&&f>=0&&f<a&&!c.has(p)){const t=e[f]?.[s];c.add(p),d.includes(t)?n+1<m&&(m=n+1,u={x:s,y:f,dist:m},console.log(`    [BFS] Found potential target at (${s}, ${f}), dist ${m}`)):h.includes(t)&&n+1<m&&l.push([s,f,n+1])}}}return u?(console.log(`  [MapGen Connect] Found closest walkable at tile(${u.x}, ${u.y}) distance ${u.dist}. Carving path...`),g(e,i,t,u.x,o,a),f(e,u.x,i,u.y,o,a),console.log("  [MapGen Connect] Carved path attempt finished."),1===e[i][t]||2===e[i][t]?(console.log(`    [Verify] Target tile (${t},${i}) is now walkable (Type: ${e[i][t]})`),!0):(console.warn(`  [MapGen Connect] Carving done, but target tile(${t}, ${i}) is still WALL (Value: ${e[i][t]}). Setting manually.`),e[i][t]=1,!0)):(console.error(`  [MapGen Connect] FAILED to find ANY nearby walkable (Corridor/Floor) via BFS from wall at tile(${t}, ${i}). Cannot connect.`),!1)}function y(e,t,i,o){if(!t)return!1;const{tileX:a,tileY:s}=t;if(s<0||s>=o||a<0||a>=i||3!==e[s]?.[a])return console.error(`[MapValidation Reachability] Invalid lift position provided: (${a}, ${s})`),!1;const{reachable:n}=function(e,t,i,o,a,s){const n=[[t,i]],r=new Set([`${t},${i}`]),l=[[0,-1],[0,1],[-1,0],[1,0]];let c=!1;for(e[i];n.length>0;){const[t,i]=n.shift();for(const[h,d]of l){const l=t+h,u=i+d,m=`${l},${u}`;if(l>=0&&l<o&&u>=0&&u<a&&!r.has(m)){const t=e[u]?.[l];r.add(m),s.includes(t)&&(n.push([l,u]),1!==t&&2!==t||(c=!0))}}}return{reachable:c}}(e,a,s,i,o,[1,2,3]);return n||console.error(`[MapValidation Reachability] FAILED. Lift at tile(${a}, ${s}) is isolated from corridors/rooms.`),n}class w{constructor(e,t,i,o,a){this.tileSize=32,this.cols=40,this.rows=30,this.width=this.cols*this.tileSize,this.height=this.rows*this.tileSize,this.offsetX=0,this.offsetY=0,this.floorNumber=i,this.minFloor=o,this.maxFloor=a,this.map=null,this.rooms=[],this.books=[],this.liftPosition=null,this.renderer=new h(this.tileSize);const s={minRoomSize:5,maxRoomSize:10,corridorThickness:1,numRooms:12,maxRoomAttempts:200,booksPerMap:5,roomTypeWeights:{classroom:50,office:25,library:15,lab:10,storage:5,utility:10}};try{const e={cols:this.cols,rows:this.rows,floorNumber:this.floorNumber,minFloor:this.minFloor,maxFloor:this.maxFloor,tileSize:this.tileSize,generationParams:s},{map:t,rooms:i,liftPosition:o}=function(e){const{cols:t,rows:i,floorNumber:o,minFloor:a,tileSize:s,generationParams:n}=e,l={...u,...n};l.roomTypeWeights.gym=o===a?60:0,o===a&&(d=null,console.log(`[MapGen Floor ${o}] Reset consistent lift coords for the first floor.`)),console.log(`[MapGen Floor ${o}] Starting map generation (${t}x${i})...`);const c=Array.from({length:i},(()=>Array(t).fill(0))),h=[];let g=null;!function(e,t,i,o,a){const{minRoomSize:s,maxRoomSize:n,numRooms:l,maxRoomAttempts:c,roomTypeWeights:h}=a;let d=0;const u=[];let m=0;for(const e in h){const t=h[e];if(t>0){m+=t;for(let i=0;i<t;i++)u.push(e)}}for(0===u.length&&(u.push("utility"),console.warn("[MapGen Rooms] No room type weights provided or all are zero. Defaulting to 'utility'."));t.length<l&&d<c;){d++;const a=r(s,n),l=r(s,n),c=r(1,i-a-1),h=r(1,o-l-1),m={col:c,row:h,width:a,height:l,type:u[r(0,u.length-1)],id:`room_${t.length+1}`,centerTileX:Math.floor(c+a/2),centerTileY:Math.floor(h+l/2),connected:!1};let g=!1;const f=2;for(const e of t)if(m.col<e.col+e.width+f&&m.col+m.width+f>e.col&&m.row<e.row+e.height+f&&m.row+m.height+f>e.row){g=!0;break}if(!g){t.push(m);for(let t=m.row;t<m.row+m.height;t++)for(let a=m.col;a<m.col+m.width;a++)t>=0&&t<o&&a>=0&&a<i&&(e[t][a]=2)}}t.length<l?console.warn(`[MapGen Rooms] Placed only ${t.length}/${l} rooms after ${d} attempts.`):console.log(`[MapGen Rooms] Placed ${t.length} rooms after ${d} attempts.`)}(c,h,t,i,l),h.length<2&&o!==a?console.warn(`[MapGen Floor ${o}] Placed only ${h.length} rooms. Expect limited connectivity.`):h.length>=2&&function(e,t,i,o){if(t.length<2)return;console.log(`[MapGen Connect] Connecting ${t.length} rooms (improved)...`);const a=new Set([t[0].id]);let s=t.slice(1);for(;s.length>0;){let n=1/0,r=null,l=null,c=-1;for(let e=0;e<s.length;e++){const i=s[e];for(const o of t)if(a.has(o.id)){const t=i.centerTileX-o.centerTileX,a=i.centerTileY-o.centerTileY,s=t*t+a*a;s<n&&(n=s,r=i,l=o.id,c=e)}}if(!r||null===l){console.error("[MapGen Connect] Could not find next pair of rooms to connect. Breaking loop. Remaining unconnected:",s.map((e=>e.id)));break}{const n=t.find((e=>e.id===l));if(!n){console.error(`[MapGen Connect] Error: Could not find connected room with ID ${l}. Skipping connection.`),s.splice(c,1);continue}m(e,n,r,i,o),a.add(r.id),s.splice(c,1)}}console.log(`[MapGen Connect] Finished connecting rooms. Connected count: ${a.size}`)}(c,h,t,i);try{const e=function(e,t,i,o,a,s,n){let r=n,l=null;if(o!==a||r){if(!r&&o>a)throw new Error(`[MapGen Lift] Missing consistent coordinates for floor ${o}.`)}else console.log(`[MapGen Floor ${o}] Finding initial lift placement location...`),r=function(e,t,i){const o=Math.floor(t/2),a=Math.floor(i/2);let s=null,n=1/0;const r=Math.max(o,a);console.log(`  [MapGen FindLift] Searching for lift spot, max radius ${r}...`);for(let l=0;l<=r;l++){for(let r=-l;r<=l;r++)for(let c=-l;c<=l;c++){if(l>0&&Math.abs(c)<l&&Math.abs(r)<l)continue;const h=o+c,d=a+r;if(d>=1&&d<i-1&&h>=1&&h<t-1){const t=e[d][h];if(1===t||2===t){let t=!1;const i=[[0,-1],[0,1],[-1,0],[1,0]];for(const[o,a]of i){const i=h+o,s=d+a,n=e[s]?.[i];if(1===n||2===n||3===n){t=!0;break}}if(t){const e=c*c+r*r;e<n&&(n=e,s={tileX:h,tileY:d})}}}}if(s)return console.log(`  [MapGen FindLift] Selected best spot at tile(${s.tileX}, ${s.tileY}) radius ${l}.`),s}return console.warn("[MapGen FindLift] No suitable CORRIDOR or ROOM_FLOOR location found near center."),null}(e,t,i),r||(console.warn(`[MapGen Floor ${o}] No ideal lift location found. Forcing placement near center.`),r={tileX:Math.floor(t/2),tileY:Math.floor(i/2)}),console.log(`[MapGen Floor ${o}] Established consistent lift coords at tile(${r.tileX}, ${r.tileY})`),l=r;const{tileX:c,tileY:h}=r;if(h<0||h>=i||c<0||c>=t)throw new Error(`[MapGen Lift] Coords (${c}, ${h}) are outside map bounds on floor ${o}.`);0===e[h][c]?(console.warn(`[MapGen Floor ${o}] Lift location tile(${c}, ${h}) is a wall. Forcing connection...`),p(e,c,h,t,i)?(console.log("  [MapGen Lift Connect] Connection attempt finished for wall at lift location."),0===e[h][c]&&(console.warn(`  [MapGen Lift Connect] Force connection completed, but target tile (${c},${h}) remained WALL. Setting to CORRIDOR.`),e[h][c]=1)):console.error(`[MapGen Lift Connect] FAILED to connect wall at lift location tile(${c}, ${h}). Lift might be isolated.`)):console.log(`  [MapGen Lift] Lift location tile(${c}, ${h}) is already walkable (Type: ${e[h][c]}).`),e[h][c]=3;const d={x:(c+.5)*s,y:(h+.5)*s,tileX:c,tileY:h};return console.log(`[MapGen Floor ${o}] Placed/Confirmed lift at tile(${c}, ${h}). World: (${d.x.toFixed(1)}, ${d.y.toFixed(1)})`),{position:d,coords:l||r}}(c,t,i,o,a,s,d);g=e.position,e.coords&&(d=e.coords)}catch(e){throw console.error(`[MapGen Floor ${o}] CRITICAL: Lift placement failed:`,e),new Error(`Lift placement failed on floor ${o}: ${e.message}`)}if(function(e,t,i){console.log("  [MapGen] Ensuring map borders are walls.");for(let o=0;o<t;o++)void 0!==e[0]?.[o]&&(e[0][o]=0),void 0!==e[i-1]?.[o]&&(e[i-1][o]=0);for(let o=0;o<i;o++)void 0!==e[o]?.[0]&&(e[o][0]=0),void 0!==e[o]?.[t-1]&&(e[o][t-1]=0)}(c,t,i),g&&!y(c,g,t,i)){if(console.warn(`[MapValidation Floor ${o}] Lift at tile(${g.tileX}, ${g.tileY}) initially unreachable. Attempting final force connection.`),!p(c,g.tileX,g.tileY,t,i)||!y(c,g,t,i)){const e=`CRITICAL: Placed lift at tile(${g.tileX}, ${g.tileY}) is UNREACHABLE even after force connect! Generation failed.`;throw console.error(`[MapGen Floor ${o}] ${e}`),new Error(`Lift is unreachable on floor ${o}. Cannot proceed.`)}console.log(`[MapValidation Floor ${o}] Lift connection successful after second attempt.`)}else{if(!g)throw new Error(`Map generated without a valid lift position on floor ${o}.`);console.log(`[MapValidation Floor ${o}] Lift at tile(${g.tileX}, ${g.tileY}) is reachable.`)}return console.log(`[MapGen Floor ${o}] Map generation completed successfully.`),{map:c,rooms:h,liftPosition:g}}(e);this.map=t,this.rooms=i,this.liftPosition=o,this.renderer.resetColorCache(),this.placeBooksReliably(s.booksPerMap),console.log(`[ProcMap Piętro ${this.floorNumber}] Inicjalizacja zakończona. ${this.rooms.length} pokoi, Winda: ${this.liftPosition?`OK w (${this.liftPosition.tileX}, ${this.liftPosition.tileY})`:"BŁĄD"}, ${this.books.length} książek.`)}catch(e){throw console.error(`[ProcMap Piętro ${this.floorNumber}] BŁĄD KRYTYCZNY podczas generowania mapy lub konfiguracji:`,e),e}}placeBooksReliably(e){this.books=[];const t=[],i=new Set;console.log(`[ProcMap Piętro ${this.floorNumber}] Umieszczanie do ${e} książek...`);for(let e=0;e<this.rows;e++)for(let i=0;i<this.cols;i++){const o=this.map[e]?.[i],a=this.liftPosition&&e===this.liftPosition.tileY&&i===this.liftPosition.tileX;1!==o&&2!==o||a||t.push({r:e,c:i})}let o=0;for(;o<e&&t.length>0;){const e=Math.floor(Math.random()*t.length),{r:s,c:n}=t.splice(e,1)[0],r=`${n},${s}`;if((1===this.map[s]?.[n]||2===this.map[s]?.[n])&&!i.has(r)){const e=(n+.5)*this.tileSize,t=(s+.5)*this.tileSize,l=`book_${this.floorNumber}_${o+1}`;this.books.push(new a(e,t,l,this.tileSize)),i.add(r),o++}}o<e?console.warn(`[ProcMap Książki] Umieszczono tylko ${o}/${e} książek.`):console.log(`[ProcMap Książki] Umieszczono ${o} książek.`)}isWalkable(e,t){if(!this.map)return!1;const i=Math.floor(e/this.tileSize),o=Math.floor(t/this.tileSize);if(i<0||i>=this.cols||o<0||o>=this.rows)return!1;const a=this.map[o]?.[i];return 1===a||2===a||3===a}findRandomInitialSpawnPosition(){if(!this.map)return;const e=[];for(let t=1;t<this.rows-1;t++)for(let i=1;i<this.cols-1;i++){const o=this.map[t]?.[i],a=this.liftPosition&&t===this.liftPosition.tileY&&i===this.liftPosition.tileX;1!==o&&2!==o||a||0!==this.map[t-1]?.[i]&&0!==this.map[t+1]?.[i]&&0!==this.map[t]?.[i-1]&&0!==this.map[t]?.[i+1]&&e.push({r:t,c:i})}if(0===e.length){console.warn("[MapGen Spawn] Nie znaleziono 'otwartych' punktów startowych, używam dowolnego przechodniego kafelka nie będącego windą.");for(let t=0;t<this.rows;t++)for(let i=0;i<this.cols;i++){const o=this.map[t]?.[i],a=this.liftPosition&&t===this.liftPosition.tileY&&i===this.liftPosition.tileX;1!==o&&2!==o||a||e.push({r:t,c:i})}}if(0===e.length)return void console.error("[MapGen Spawn] KRYTYCZNY: Nie znaleziono odpowiednich kafelków startowych (podłoga/korytarz niebędący windą)!");const{r:t,c:i}=e[Math.floor(Math.random()*e.length)],o=(i+.5)*this.tileSize,a=(t+.5)*this.tileSize;return console.log(`[MapGen Spawn] Znaleziono początkowy spawn na kratce(${i}, ${t})`),{x:o,y:a}}findNearestWalkableTile(e,t,i=8,o=!1){if(!this.map)return null;const a=Math.floor(e/this.tileSize),s=Math.floor(t/this.tileSize);console.log(`[MapUtil] Szukanie najbliższej BEZPIECZNEJ kratki (excludeLift=${o}) blisko świata(${e.toFixed(1)}, ${t.toFixed(1)}) -> kratka(${a}, ${s})`);const n=[1,2],r=this.map[s]?.[a];if(n.includes(r)&&(!o||3!==r))return console.log(`  [MapUtil] Kratka docelowa (${a}, ${s}) jest już bezpieczna.`),{x:(a+.5)*this.tileSize,y:(s+.5)*this.tileSize};for(let e=1;e<=i;e++)for(let t=-e;t<=e;t++)for(let i=-e;i<=e;i++){if(Math.abs(i)<e&&Math.abs(t)<e)continue;const o=a+i,n=s+t;if(o<0||o>=this.cols||n<0||n>=this.rows)continue;const r=this.map[n]?.[o];if(1===r||2===r)return console.log(`  [MapUtil] Znaleziono bezpieczną kratkę przez wyszukiwanie promieniowe na kratce(${o}, ${n})`),{x:(o+.5)*this.tileSize,y:(n+.5)*this.tileSize}}console.warn(`[MapUtil] Wyszukiwanie promieniowe nie powiodło się (maxPromień ${i}). Rozpoczynam BFS od kratki(${a}, ${s})...`);const l=[[a,s]],c=new Set([`${a},${s}`]),h=[[0,-1],[0,1],[-1,0],[1,0]],d=[1,2,3];for(;l.length>0;){const[e,t]=l.shift();for(const[i,a]of h){const s=e+i,r=t+a,h=`${s},${r}`;if(s>=0&&s<this.cols&&r>=0&&r<this.rows&&!c.has(h)){const e=this.map[r]?.[s];if(c.add(h),n.includes(e)&&(!o||3!==e))return console.log(`  [MapUtil] Znaleziono bezpieczną kratkę przez BFS na (${s}, ${r})`),{x:(s+.5)*this.tileSize,y:(r+.5)*this.tileSize};d.includes(e)&&l.push([s,r])}}}return console.error(`[MapUtil] KRYTYCZNA PORAŻKA: BFS nie mógł znaleźć ŻADNEJ bezpiecznej przechodniej kratki (Korytarz/Podłoga Pokoju, excludeLift=${o}) zaczynając od kratki(${a}, ${s})!`),null}findNearbyUnansweredBook(e,t,i=.8*this.tileSize){if(!this.books)return null;let o=null,a=i*i;for(const i of this.books)if(!i.isCollected&&!i.collected){const s=i.x-e,n=i.y-t,r=s*s+n*n;r<a&&(a=r,o=i)}return o}markBookAsCollected(e){if(!e||!this.books)return!1;const t=this.books.find((t=>t===e||t.id===e.id));return!(!t||t.isCollected||t.collected||(t.isCollected=!0,t.collected=!0,console.log(`[Map] Oznaczono książkę ${t.id} jako zebraną.`),0))}findNearbyLift(e,t,i=.7*this.tileSize){if(!this.liftPosition)return null;const o=e-this.liftPosition.x,a=t-this.liftPosition.y;return o*o+a*a<i*i?this.liftPosition:null}getLiftPosition(){return this.liftPosition}draw(e,t=null){if(!this.map||!this.renderer)return;const i={map:this.map,rooms:this.rooms,books:this.books,liftPosition:this.liftPosition,offsetX:this.offsetX,offsetY:this.offsetY,cols:this.cols,rows:this.rows,tileSize:this.tileSize};this.renderer.draw(e,i,t)}logMapGrid(){if(!this.map)return void console.log("Siatka mapy niedostępna.");console.log(`--- Siatka Mapy Piętro ${this.floorNumber} (${this.cols}x${this.rows}) ---`);let e="   ";for(let t=0;t<this.cols;t++)e+=t%10==0?Math.floor(t/10):" ";console.log(e),e="   ";for(let t=0;t<this.cols;t++)e+=t%10;console.log(e);for(let e=0;e<this.rows;e++){const t=e.toString().padStart(2," "),i=this.map[e].map((e=>{switch(e){case 0:return"#";case 1:return".";case 2:return" ";case 3:return"L";default:return"?"}})).join("");console.log(`${t} ${i}`)}this.liftPosition?console.log(`Winda na kratce: (${this.liftPosition.tileX}, ${this.liftPosition.tileY})`):console.log("Pozycja windy nie ustawiona."),console.log(`--- Koniec Siatki Mapy Piętro ${this.floorNumber} ---`)}}class M{constructor(e=1,t=3){e>=t?(console.warn(`Level constructor: minFloor (${e}) must be less than maxFloor (${t}). Using defaults 1 and 3.`),this.minFloor=1,this.maxFloor=3):(this.minFloor=e,this.maxFloor=t),this.currentFloor=this.minFloor,this.currentMap=null,this.tileSize=32}async loadFloor(e,t,i){if(e<this.minFloor||e>this.maxFloor){const t=`Attempted to load invalid floor: ${e}. Allowed range: [${this.minFloor}-${this.maxFloor}]`;throw console.error(`[Level] ${t}`),new Error(t)}console.log(`[Level] Loading floor ${e}...`),this.currentFloor=e;try{if(this.currentMap=new w(t,i,this.currentFloor,this.minFloor,this.maxFloor),!(this.currentMap.tileSize&&this.currentMap.map&&this.currentMap.books&&this.currentMap.getLiftPosition()))throw new Error("[Level] ProceduralMap instance is missing essential properties after creation (tileSize, map, books, or liftPosition).");this.tileSize=this.currentMap.tileSize;const o=this.currentMap.getLiftPosition();console.log(`  [Level] Map generated for floor ${this.currentFloor}. TileSize: ${this.tileSize}. Lift at tile(${o.tileX}, ${o.tileY}).`),console.log(`[Level] Floor ${e} loaded successfully. Map size: ${this.currentMap.cols}x${this.currentMap.rows}. ${this.currentMap.books.length} books placed.`)}catch(t){throw console.error(`[Level] CRITICAL FAILURE loading floor ${e}: Failed to create or validate ProceduralMap:`,t),this.currentMap=null,new Error(`Map generation/validation failed for floor ${e}. ${t.message||t}`)}return Promise.resolve()}getCurrentBooks(){return this.currentMap?this.currentMap.books:[]}}class S{constructor(e){this.game=e,this.canvas=null,this.ctx=null}initializeCanvas(){if(this.canvas=document.getElementById("game-canvas"),!this.canvas)throw new Error("[Renderer] Canvas 'game-canvas' not found!");if(this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("[Renderer] Failed to get 2D context.");return this.ctx.imageSmoothingEnabled=!1,this.resizeCanvas(),console.log("[Renderer] Canvas initialized."),{canvas:this.canvas,ctx:this.ctx}}resizeCanvas(){this.canvas&&(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.game.character&&this.game.level?.currentMap&&this.centerCameraOnCharacter(),console.log(`[Renderer] Canvas resized to ${this.canvas.width}x${this.canvas.height}`))}centerCameraOnCharacter(){const{character:e,level:t,canvas:i}=this.game;e&&t?.currentMap&&i&&(t.currentMap.offsetX=Math.floor(i.width/2-e.x),t.currentMap.offsetY=Math.floor(i.height/2-e.y))}drawFrame(){if(!this.ctx||!this.canvas)return;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const e=this.game.level?.currentMap,t=this.game.character;e&&e.draw(this.ctx,this.game.bookImage),t&&e&&t.draw(e.offsetX,e.offsetY)}drawWinScreen(){this.ctx&&this.canvas&&(this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle="lime",this.ctx.font='clamp(32px, 8vw, 48px) "Press Start 2P", cursive, Arial, sans-serif',this.ctx.fillText("ZWYCIĘSTWO!",this.canvas.width/2,this.canvas.height/2-80),this.ctx.fillStyle="white",this.ctx.font="clamp(24px, 5vw, 32px) Arial, sans-serif",this.ctx.fillText(`Zebrano wszystkie ${this.game.targetBooksToWin} książki!`,this.canvas.width/2,this.canvas.height/2),this.ctx.font="clamp(18px, 4vw, 24px) Arial, sans-serif",this.ctx.fillText("Uniwersytet uratowany!",this.canvas.width/2,this.canvas.height/2+60),this.ctx.font="clamp(14px, 3vw, 18px) Arial, sans-serif",this.ctx.fillStyle="#ccc",this.ctx.fillText("(Odśwież stronę, aby zagrać ponownie)",this.canvas.width/2,this.canvas.height-50))}}class b{constructor(e){this.game=e,this.handleAnswer=this.handleAnswer.bind(this),this.handleFloorSelection=this.handleFloorSelection.bind(this)}update(e){this.game.gameState===s.PLAYING&&this.updatePlayingState(e)}updatePlayingState(e){const t=this.game.character;if(!this.game.level?.currentMap||!t||!this.game.inputManager)return;const{moved:i}=this.handleMovement();t&&"function"==typeof t.updateAnimation&&t.updateAnimation(e),i||this.game.gameState!==s.PLAYING||this.handleInteractions()}handleMovement(){const e=this.game.character,t=this.game.level.currentMap,i=this.game.inputManager;if(!e||!t||!i)return{moved:!1};const a=i.getInputDirection();let s=a.x*e.speed,n=a.y*e.speed,r=0,l=0,c=!1;if(0!==s||0!==n){const t=0!==s&&!this.checkCollision(e.x+s,e.y),i=0!==n&&!this.checkCollision(e.x,e.y+n);t&&(r=s),i&&(l=n),0!==s&&0!==n&&this.checkCollision(e.x+s,e.y+n)&&(t?l=0:i?r=0:(r=0,l=0)),0===r&&0===l||(e.x+=r,e.y+=l,c=!0,Math.abs(r)>=Math.abs(l)?0!==r&&(e.currentDirection=r>0?o.Direction.RIGHT:o.Direction.LEFT):0!==l&&(e.currentDirection=l>0?o.Direction.DOWN:o.Direction.UP))}return e.isMoving=c,{moved:c}}checkCollision(e,t){const i=this.game.level?.currentMap,o=this.game.character;if(!i||!o)return!0;const a=o.getCollisionBox(e,t),s=[{x:a.left,y:a.top},{x:a.right,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:e,y:a.bottom},{x:e,y:a.top},{x:a.left,y:t+o.renderSize*o.collisionBoxFeetOffsetRatio},{x:a.right,y:t+o.renderSize*o.collisionBoxFeetOffsetRatio}];for(const e of s)if(!i.isWalkable(e.x,e.y))return!0;return!1}handleInteractions(){const e=this.game.level?.currentMap,t=this.game.character;if(!e||!t||this.game.gameState!==s.PLAYING)return;const i=e.findNearbyUnansweredBook(t.x,t.y);i?this.initiateQuestion(i):this.game.liftCooldownActive||e.findNearbyLift(t.x,t.y)&&this.initiateFloorSelection()}initiateQuestion(e){if(this.game.gameState!==s.PLAYING)return;if(this.game.setGameState(s.ASKING_QUESTION),this.game.character&&(this.game.character.isMoving=!1),this.game.currentBookTarget=e,0===this.game.availableQuestions.length&&(this.game.availableQuestions=[...n],0===this.game.availableQuestions.length))return i.flashMessage("Błąd: Brak dostępnych pytań!","error"),this.game.setGameState(s.PLAYING),void(this.game.currentBookTarget=null);const t=Math.floor(Math.random()*this.game.availableQuestions.length);this.game.currentQuestionData=this.game.availableQuestions.splice(t,1)[0],i.showQuestion(this.game.currentQuestionData)}handleAnswer(e){const{gameState:t,currentQuestionData:o,currentBookTarget:a,level:n}=this.game;if(t!==s.ASKING_QUESTION||!o||!a)return i.hideQuestion(),this.game.currentBookTarget=null,this.game.currentQuestionData=null,void(this.game.gameState!==s.GAME_OVER&&this.game.setGameState(s.PLAYING));if(e===o.correctAnswer){i.flashMessage("Prawidłowo!","success",1500);const e=n?.currentMap?.markBookAsCollected(a);if(e){if(this.game.totalBooksCollectedGlobally++,i.updateScore(this.game.totalBooksCollectedGlobally,this.game.targetBooksToWin),this.game.totalBooksCollectedGlobally>=this.game.targetBooksToWin)return i.hideQuestion(),void this.game._setGameOver(!0)}else i.flashMessage("Błąd zbierania książki!","error")}else i.flashMessage("Nieprawidłowa odpowiedź!","error"),this.game.availableQuestions.push(o);i.hideQuestion(),this.game.currentBookTarget=null,this.game.currentQuestionData=null,this.game.gameState!==s.GAME_OVER&&this.game.setGameState(s.PLAYING)}initiateFloorSelection(){this.game.gameState!==s.PLAYING||this.game.liftCooldownActive||(this.game.setGameState(s.SELECTING_FLOOR),this.game.character&&(this.game.character.isMoving=!1),i.showFloorSelectionUI(this.game.level.minFloor,this.game.level.maxFloor,this.game.level.currentFloor))}handleFloorSelection(e){this.game.gameState===s.SELECTING_FLOOR?(i.hideFloorSelectionUI(),e===this.game.level.currentFloor||e<this.game.level.minFloor||e>this.game.level.maxFloor?this.game.setGameState(s.PLAYING):this.handleLiftTransition(e).catch((e=>{this.game._handleFatalError(`Błąd przejścia na piętro: ${e.message}`)}))):i.hideFloorSelectionUI()}async handleLiftTransition(e){const t=this.game;if(t.gameState!==s.SELECTING_FLOOR||t.liftCooldownActive)t.gameState!==s.GAME_OVER&&t.gameState!==s.PLAYING&&t.gameState!==s.TRANSITIONING&&t.setGameState(s.PLAYING);else{t.setGameState(s.TRANSITIONING),t.character&&(t.character.isMoving=!1),i.hideQuestion(),i.hideFloorSelectionUI(),t.liftCooldownActive=!0,i.flashMessage(`Przejście na piętro ${e}...`,"info",1800);try{await t.level.loadFloor(e,t.canvas.width,t.canvas.height);const i=t.level.currentMap;if(!i)throw new Error(`Nie udało się załadować mapy dla piętra ${e}. Obiekt mapy jest null.`);const a=i.getLiftPosition();if(!a)throw new Error(`Brak pozycji windy na załadowanym piętrze ${e}!`);const s=i.findNearestWalkableTile(a.x,a.y,3,!0);if(s)t.character.x=s.x,t.character.y=s.y,console.log(`[LiftTransition] Lądowanie obok windy w: (${t.character.x.toFixed(1)}, ${t.character.y.toFixed(1)})`);else{console.warn(`[LiftTransition] Nie znaleziono bezpiecznego miejsca obok windy na (${a.tileX}, ${a.tileY}). Szukam losowego...`);const o=i.findRandomInitialSpawnPosition();if(!o)throw new Error(`Nie można znaleźć ŻADNEGO bezpiecznego miejsca do lądowania na piętrze ${e}!`);t.character.x=o.x,t.character.y=o.y,console.log(`[LiftTransition] Awaryjne lądowanie w losowym miejscu: (${t.character.x.toFixed(1)}, ${t.character.y.toFixed(1)})`)}t.character.currentDirection=o.Direction.DOWN,t.character.isMoving=!1,t.renderer?.centerCameraOnCharacter(),t.startLiftCooldownTimer()}catch(i){console.error(`[LiftTransition] Błąd podczas przejścia na piętro ${e}:`,i),t.liftCooldownActive=!1,t.gameState!==s.GAME_OVER&&t.setGameState(s.PLAYING),t._handleFatalError(`Krytyczny błąd podczas przejścia na piętro ${e}: ${i.message||i}`)}}}ensureCharacterIsOnWalkableTile(e=!1){const t=this.game.character,i=this.game.level?.currentMap;if(!t||!i)return;const o=Math.floor(t.x/i.tileSize),a=Math.floor(t.y/i.tileSize),s=o>=0&&o<i.cols&&a>=0&&a<i.rows?i.map[a]?.[o]:0;let n=i.isWalkable(t.x,t.y)&&(!(3===s)||e);const r=this.checkCollision(t.x,t.y);if(r||!n){console.warn(`[AntiStuck] Postać w świecie(${t.x.toFixed(1)}, ${t.y.toFixed(1)}) / kratce(${o}, ${a}) utknęła (kolizja: ${r}, isSafeToStand: ${n}, tileValue: ${s}, allowLift: ${e}). Próba wypchnięcia.`);const l=i.findNearestWalkableTile(t.x,t.y,8,!0);if(l)console.log(`[AntiStuck] Wypychamy postać do bezpiecznego miejsca: świat(${l.x.toFixed(1)}, ${l.y.toFixed(1)})`),t.x=l.x,t.y=l.y,this.game.renderer?.centerCameraOnCharacter();else{console.error(`[AntiStuck] BŁĄD KRYTYCZNY: Nie udało się znaleźć bezpiecznego przechodniego miejsca (korytarz/pokój) w pobliżu kratki (${o}, ${a})! Postać może pozostać w teksturze.`);const e=i.findRandomInitialSpawnPosition();e?(console.warn(`[AntiStuck] Wyjście awaryjne: Przenosimy na LOSOWĄ bezpieczną kratkę świat(${e.x.toFixed(1)}, ${e.y.toFixed(1)})`),t.x=e.x,t.y=e.y,this.game.renderer?.centerCameraOnCharacter()):(console.error("[AntiStuck] W ogóle nie znaleziono bezpiecznych kratek! Gra może być zepsuta."),this.game._handleFatalError("Błąd krytyczny: Nie można znaleźć bezpiecznego miejsca dla postaci!"))}}}}const v=e.p+"assets/images/character_rede709519cf9b780c45fdb.png",C=e.p+"assets/images/character_bluece4c2defaf23e82f5910.png",z=e.p+"assets/images/character_yellow668dedc80c468984f233.png",k=e.p+"assets/images/character_green668dedc80c468984f233.png",$=e.p+"assets/images/booka54431ef16a38389c12e.png";class L{constructor(e){console.log(`[Game] Initializing with character: ${e}`),this.characterColor=e,this._gameState=s.LOADING,this.isRunning=!1,this.totalBooksCollectedGlobally=0,this.targetBooksToWin=15,this.availableQuestions=[],this.currentBookTarget=null,this.currentQuestionData=null,this.liftCooldownActive=!1,this.liftCooldownTimer=null,this.canvas=null,this.ctx=null,this.character=null,this.level=null,this.inputManager=null,this.renderer=null,this.gameplayManager=null,this.sprites={red:v,blue:C,yellow:z,green:k},this.bookImage=null,this.gameLoop=this.gameLoop.bind(this),this._handleFatalError=this._handleFatalError.bind(this),this._boundKeyDownHandler=null,this._boundKeyUpHandler=null;try{this._initializeCoreComponents(),this.gameplayManager=new b(this),console.log("[Game] GameplayManager created."),this.renderer=new S(this);const{canvas:e,ctx:t}=this.renderer.initializeCanvas();this.canvas=e,this.ctx=t,console.log("[Game] Renderer and Canvas initialized."),this._initializeUIManager(),console.log("[Game] UIManager setup initiated."),this._addEventListeners(),this._loadAssetsAndThenStartLogic().then((()=>{console.log("[Game] Async loading and game logic start sequence completed.")})).catch((e=>{console.error("[Game] Unhandled error from _loadAssetsAndThenStartLogic in constructor:",e);const t=document.querySelector(".loading-overlay");t&&t.classList.remove("visible")}))}catch(e){console.error("[Game] Synchronous core initialization failed:",e),alert(`Critical initialization error: ${e.message}. Game cannot start.`),this._handleFatalError(`Initialization error: ${e.message}`,!1)}}get gameState(){return this._gameState}setGameState(e){this._gameState!==e&&(console.log(`[Game State] ${this._gameState} -> ${e}`),this._gameState=e)}_initializeCoreComponents(){this.inputManager=new t,this.level=new M(1,3)}_initializeUIManager(){if(!this.gameplayManager)throw new Error("[Game] GameplayManager is NOT defined when _initializeUIManager is called!");if(!this.inputManager)throw new Error("[Game] InputManager is NOT defined when _initializeUIManager is called!");i.setGameplayManager(this.gameplayManager),i.initializeUI(this.inputManager)}_addEventListeners(){window.addEventListener("resize",(()=>this.renderer?.resizeCanvas()))}async _loadAssetsAndThenStartLogic(){const e=document.querySelector(".loading-overlay");try{this.setGameState(s.LOADING),await this._loadAssets(),await this._startGameLogic(),e&&e.classList.remove("visible")}catch(t){throw console.error("[Game] Asset loading or game logic start failed:",t),e&&e.classList.remove("visible"),this._handleFatalError(`Asset/Start Logic Error: ${t.message}`),t}}async _loadAssets(){console.log("[Game] Loading assets...");const e=[],t=this.sprites[this.characterColor]||this.sprites.red;if(!this.ctx)throw new Error("Canvas context not available for Character creation.");this.character=new o(this.ctx,t,{speed:3,frameSize:32,scale:2,animationSpeed:150,frameCount:4}),e.push(new Promise(((e,i)=>{this.character.sprite.onload=()=>{console.log(`  [Assets] Character sprite loaded: ${t}`),e()},this.character.sprite.onerror=e=>i(new Error(`Failed to load character sprite: ${t}. Details: ${e}`))}))),$?(this.bookImage=new Image,this.bookImage.src=$,e.push(new Promise((e=>{this.bookImage.onload=()=>{console.log(`  [Assets] Book image loaded: ${$}`),e()},this.bookImage.onerror=()=>{console.warn(` [Assets] Failed to load book image: ${$}. Using fallback rendering.`),this.bookImage=null,e()}})))):(console.warn("[Assets] No book sprite path provided. Book will use fallback rendering."),this.bookImage=null),await Promise.all(e),console.log("[Game] All assets loaded successfully.")}async _startGameLogic(){if(console.log("[Game] Starting core game logic..."),!(this.level&&this.character&&this.canvas&&this.renderer&&this.gameplayManager))throw new Error("Cannot start game - essential components are missing.");this.setGameState(s.LOADING_LEVEL);try{await this.level.loadFloor(this.level.minFloor,this.canvas.width,this.canvas.height);const e=this.level.currentMap;if(!e)throw new Error("Failed to load initial map. Map object is null.");const t=e.findRandomInitialSpawnPosition();if(!t)throw new Error("Failed to find a valid starting position on the map!");this.character.x=t.x,this.character.y=t.y,this.character.currentDirection=o.Direction.DOWN,this.character.isMoving=!1,this.gameplayManager.ensureCharacterIsOnWalkableTile(!1),this.totalBooksCollectedGlobally=0,this.availableQuestions=[...n],this.liftCooldownActive=!1,clearTimeout(this.liftCooldownTimer),this.liftCooldownTimer=null,this.currentBookTarget=null,this.currentQuestionData=null,this.renderer.centerCameraOnCharacter(),i.updateScore(this.totalBooksCollectedGlobally,this.targetBooksToWin),i.showGameUI(),this._boundKeyDownHandler=this.handleKeyDown.bind(this),this._boundKeyUpHandler=this.handleKeyUp.bind(this),window.addEventListener("keydown",this._boundKeyDownHandler),window.addEventListener("keyup",this._boundKeyUpHandler),this.setGameState(s.PLAYING),this.isRunning||(this.isRunning=!0,requestAnimationFrame(this.gameLoop),console.log("[Game] Game logic started. Loop is running."))}catch(e){throw console.error("[Game] Error during _startGameLogic:",e),this._handleFatalError(`Level start process error: ${e.message}`),e}}_setGameOver(e=!0){if(this.gameState!==s.GAME_OVER){if(this.setGameState(s.GAME_OVER),this.isRunning=!1,this.character&&(this.character.isMoving=!1),clearTimeout(this.liftCooldownTimer),this._boundKeyDownHandler&&window.removeEventListener("keydown",this._boundKeyDownHandler),this._boundKeyUpHandler&&window.removeEventListener("keyup",this._boundKeyUpHandler),this._boundKeyDownHandler=null,this._boundKeyUpHandler=null,i.hideGameUI(),i.hideQuestion(),i.hideFloorSelectionUI(),e)requestAnimationFrame((()=>this.renderer?.drawWinScreen()));else{const e=document.getElementById("menu-container");e&&e.classList.remove("hidden")}console.log(`[Game] Game Over. Win: ${e}`)}}stopGame(){console.log("[Game] Explicit stopGame requested."),this._setGameOver(!1),console.log("[Game] Game stopped.")}_handleFatalError(e,t=!0){console.error("[Game] FATAL ERROR:",e),t&&this.gameState!==s.GAME_OVER&&(i.flashMessageContainer&&i.flashMessage?i.flashMessage(`FATAL ERROR: ${e}`,"error",15e3):alert(`FATAL ERROR: ${e}`)),this._setGameOver(!1)}handleKeyDown(e){if(this.gameState!==s.PLAYING||!this.inputManager)return;let t=!1;const i=e.key.toLowerCase();["arrowup","w"].includes(i)?(this.inputManager.setKey("up",!0),t=!0):["arrowdown","s"].includes(i)?(this.inputManager.setKey("down",!0),t=!0):["arrowleft","a"].includes(i)?(this.inputManager.setKey("left",!0),t=!0):["arrowright","d"].includes(i)&&(this.inputManager.setKey("right",!0),t=!0),t&&e.preventDefault()}handleKeyUp(e){if(!this.inputManager)return;const t=e.key.toLowerCase();["arrowup","w"].includes(t)?this.inputManager.setKey("up",!1):["arrowdown","s"].includes(t)?this.inputManager.setKey("down",!1):["arrowleft","a"].includes(t)?this.inputManager.setKey("left",!1):["arrowright","d"].includes(t)&&this.inputManager.setKey("right",!1)}gameLoop(e){this.isRunning&&this.gameState!==s.GAME_OVER&&(this.gameplayManager?.update(e),this.renderer?.centerCameraOnCharacter(),this.renderer?.drawFrame(),requestAnimationFrame(this.gameLoop))}startLiftCooldownTimer(){clearTimeout(this.liftCooldownTimer),console.log("[Game] Starting lift cooldown timer: 2000ms."),this.liftCooldownTimer=setTimeout((()=>{this.liftCooldownActive=!1,this.liftCooldownTimer=null,this.gameState===s.TRANSITIONING?(this.setGameState(s.PLAYING),i.flashMessage(`Arrived at floor ${this.level?.currentFloor}`,"success",1500)):console.warn(`[GameTimer] Lift cooldown ended, but game state is ${this.gameState}. No state change applied.`)}),2e3)}}let I=null;class x{constructor(){this.selectedCharacter=null,this.userInteracted=!1,console.log("[Menu] Constructor called. Initializing elements..."),this.initializeElements(),console.log("[Menu] Adding event listeners..."),this.addEventListeners(),console.log("[Menu] Instance created.")}initializeElements(){this.menuContainer=document.querySelector(".menu-container"),this.menuContainer||console.error("[Menu] CRITICAL: .menu-container not found!"),this.settingsButton=document.querySelector(".settings-button"),this.playButton=document.querySelector(".play-button"),this.characterButton=document.querySelector(".character-button"),this.playButton||console.warn("[Menu] .play-button not found."),this.characterButton||console.warn("[Menu] .character-button not found."),this.settingsPanel=document.querySelector(".settings-panel"),this.settingsPanel?(this.settingsPanel.parentNode!==document.body&&(document.body.appendChild(this.settingsPanel),console.log("[Menu Debug] Moved .settings-panel to document.body")),this.musicVolume=this.settingsPanel.querySelector("#music-volume"),this.sfxVolume=this.settingsPanel.querySelector("#sfx-volume"),this.closeSettingsButton=this.settingsPanel.querySelector(".panel-close-button"),this.musicVolume||console.warn("[Menu] #music-volume not found in .settings-panel"),this.sfxVolume||console.warn("[Menu] #sfx-volume not found in .settings-panel"),this.closeSettingsButton||console.warn("[Menu] .panel-close-button not found in .settings-panel")):console.warn("[Menu] .settings-panel not found."),this.characterPanel=document.querySelector(".character-panel"),this.characterPanel?(this.characterPanel.parentNode!==document.body&&(document.body.appendChild(this.characterPanel),console.log("[Menu Debug] Moved .character-panel to document.body")),this.characterGrid=this.characterPanel.querySelector(".character-grid"),this.characterGrid?this.characterGrid.addEventListener("click",(e=>{console.log("[Menu Debug] Character grid clicked. Target:",e.target);const t=e.target.closest(".character-card");console.log("[Menu Debug] Clicked card element:",t),this.characterPanel?(console.log("[Menu Debug] Character panel current classList:",this.characterPanel.classList.value),console.log("[Menu Debug] Character panel .visible class present?:",this.characterPanel.classList.contains("visible"))):console.error("[Menu Debug] CRITICAL: this.characterPanel is null/undefined inside characterGrid click listener."),t&&this.characterPanel&&this.characterPanel.classList.contains("visible")?(console.log("[Menu Debug] Conditions for selectCharacter met. Calling selectCharacter..."),this.handleFirstInteraction(),this.selectCharacter(t)):(console.warn("[Menu Debug] Conditions for selectCharacter NOT met."),t||console.log("[Menu Debug] Reason: No .character-card found at or above the click target."),this.characterPanel||console.log("[Menu Debug] Reason: this.characterPanel is null/undefined."),this.characterPanel&&!this.characterPanel.classList.contains("visible")&&console.log('[Menu Debug] Reason: Character panel does not have "visible" class.'))})):console.warn("[Menu] .character-grid not found in .character-panel"),this.closeCharacterPanelButton=this.characterPanel.querySelector(".panel-close-button"),this.closeCharacterPanelButton||console.warn("[Menu] .panel-close-button not found in .character-panel")):console.error("[Menu] CRITICAL: .character-panel not found during initialization!"),this.selectedCharacterDisplay=document.createElement("div"),this.selectedCharacterDisplay.className="selected-character-display";const e=this.menuContainer?this.menuContainer.querySelector(".main-menu-buttons"):null;this.playButton&&this.playButton.parentNode?this.playButton.parentNode.insertBefore(this.selectedCharacterDisplay,this.playButton):e?e.insertBefore(this.selectedCharacterDisplay,e.children[1]||null):this.menuContainer?(this.menuContainer.appendChild(this.selectedCharacterDisplay),console.warn("[Menu] .main-menu-buttons container not found. Appended selectedCharacterDisplay to .menu-container.")):console.error("[Menu] Cannot append selectedCharacterDisplay: no suitable parent found."),this.updateSelectedCharacterDisplay()}handleFirstInteraction(){this.userInteracted||(this.userInteracted=!0,console.log("[Menu] First user interaction detected."))}addEventListeners(){const e=(e,t,i)=>{e&&e.addEventListener(t,(e=>{this.handleFirstInteraction(),i(e)}))};e(this.settingsButton,"click",(()=>this.toggleSettings())),e(this.playButton,"click",(()=>this.startGame())),e(this.characterButton,"click",(()=>this.openCharacterModal())),this.closeSettingsButton&&this.closeSettingsButton.addEventListener("click",(()=>this.closeSettings())),this.closeCharacterPanelButton&&this.closeCharacterPanelButton.addEventListener("click",(()=>this.closeCharacterModal())),this.musicVolume&&this.musicVolume.addEventListener("input",(e=>{console.log("Music volume changed (audio disabled)")})),this.sfxVolume&&this.sfxVolume.addEventListener("input",(e=>{console.log("SFX volume changed (audio disabled)")}))}openCharacterModal(){console.log("[Menu Debug] openCharacterModal() called."),this.characterPanel&&this.characterGrid?(console.log("[Menu] Opening character modal."),this.characterPanel.classList.add("visible"),console.log('[Menu Debug] "visible" class ADDED to characterPanel. Current classes:',this.characterPanel.classList.value),this.settingsPanel?.classList.contains("visible")&&this.closeSettings(),this.overlay||(this.overlay=document.createElement("div"),this.overlay.className="character-modal-overlay",this.overlay.addEventListener("click",(e=>{e.target===this.overlay?(console.log("[Menu Debug] Overlay clicked, closing character modal."),this.closeCharacterModal()):console.log("[Menu Debug] Click was on something other than overlay itself. Target:",e.target)})),document.body.appendChild(this.overlay),console.log("[Menu Debug] Overlay created and appended to body.")),this.overlay.classList.add("visible"),console.log('[Menu Debug] "visible" class ADDED to overlay. Current classes:',this.overlay.classList.value)):console.warn("[Menu] Character panel or grid not found, cannot open modal. Check initialization logs.")}closeCharacterModal(){console.log("[Menu Debug] closeCharacterModal() called."),this.characterPanel&&(this.characterPanel.classList.remove("visible"),console.log('[Menu Debug] "visible" class REMOVED from characterPanel. Current classes:',this.characterPanel.classList.value)),this.overlay&&(this.overlay.classList.remove("visible"),console.log('[Menu Debug] "visible" class REMOVED from overlay. Current classes:',this.overlay.classList.value)),console.log("[Menu] Character modal closed.")}selectCharacter(e){console.log("[Menu Debug] selectCharacter() called with card:",e),this.characterGrid&&e?.dataset?.character?(console.log(`[Menu] Character selected: ${e.dataset.character}`),this.characterGrid.querySelectorAll(".character-card").forEach((e=>e.classList.remove("selected"))),e.classList.add("selected"),this.selectedCharacter=e.dataset.character,this.playButton?(this.playButton.disabled=!1,console.log("[Menu] Play button enabled.")):console.warn("[Menu] Play button not found to enable."),this.updateSelectedCharacterDisplay(),this.closeCharacterModal()):console.warn("[Menu] Cannot select character: invalid card or missing data attribute. Grid:",this.characterGrid,"Card:",e)}updateSelectedCharacterDisplay(){if(this.selectedCharacterDisplay)if(console.log("[Menu Debug] updateSelectedCharacterDisplay() called. Selected character:",this.selectedCharacter),this.selectedCharacter&&this.characterGrid){const e=this.characterGrid.querySelector(`.character-card[data-character="${this.selectedCharacter}"]`);if(e){const t=e.querySelector("img"),i=e.querySelector("h3"),o=t?t.src:"",a=i?i.textContent:"Character";this.selectedCharacterDisplay.innerHTML=`<img src="${o}" alt="${a}" style="width:40px;height:40px;vertical-align:middle;margin-right:0.75rem; border-radius:50%; object-fit:cover; background-color: #333;"> <span>${a}</span>`,console.log(`[Menu] Updated display for: ${a}`)}else this.selectedCharacterDisplay.innerHTML='<span style="color:#aaa;">Selected character data not found in grid.</span>',console.warn(`[Menu] Could not find .character-card[data-character="${this.selectedCharacter}"] in characterGrid for display update.`)}else this.selectedCharacterDisplay.innerHTML='<span style="color:#aaa;">No character selected</span>',this.characterGrid||console.warn("[Menu Debug] updateSelectedCharacterDisplay: characterGrid not found.");else console.warn("[Menu Debug] updateSelectedCharacterDisplay: selectedCharacterDisplay element not found.")}toggleSettings(){this.settingsPanel?(console.log("[Menu] Toggling settings panel."),this.settingsPanel.classList.contains("visible")?this.closeSettings():this.openSettings()):console.warn("[Menu Debug] toggleSettings: settingsPanel not found.")}openSettings(){this.settingsPanel?(console.log("[Menu] Opening settings panel."),this.settingsPanel.classList.add("visible"),this.characterPanel?.classList.contains("visible")&&this.closeCharacterModal()):console.warn("[Menu Debug] openSettings: settingsPanel not found.")}closeSettings(){this.settingsPanel&&this.settingsPanel.classList.contains("visible")&&(console.log("[Menu] Closing settings panel."),this.settingsPanel.classList.remove("visible"))}async startGame(){if(!this.selectedCharacter)return i.flashMessage("Please select a character first!","warning",2500),void console.warn("[Menu] startGame: No character selected.");console.log("[Menu] Preparing to start game.");const e=document.querySelector(".loading-overlay");if(e&&e.classList.add("visible"),!this.menuContainer)return console.error("[Menu] CRITICAL: .menu-container not found for hiding!"),void(e&&e.classList.remove("visible"));this.menuContainer.classList.add("hidden"),console.log(`[Menu] Attempting to start game with character: ${this.selectedCharacter}`);try{I?.stopGame&&I.stopGame(),I=new L(this.selectedCharacter)}catch(t){console.error("[Menu] Critical error during game initialization:",t),i.flashMessage(`Game Start Failed: ${t.message}`,"error",1e4),this.menuContainer&&this.menuContainer.classList.remove("hidden"),e&&e.classList.remove("visible"),I=null}}}document.addEventListener("DOMContentLoaded",(()=>{console.log("[main.js] DOMContentLoaded. Initializing Menu..."),new x}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2svYm9vdHN0cmFwIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvLi9qcy9Db3JlL0lucHV0TWFuYWdlci5qcyIsIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvLi9qcy9VSS9VSU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvQ29yZS9DaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvbWFwL0Jvb2suanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL3V0aWxzL21hcC5qcyIsIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvLi9qcy9tYXAvTWFwUmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvbWFwL01hcEdlbi5qcyIsIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvLi9qcy9tYXAvUHJvY2VkdXJhbE1hcC5qcyIsIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvLi9qcy9Db3JlL0xldmVsLmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL0NvcmUvR2FtZVJlbmRlcmVyLmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL0NvcmUvR2FtZXBsYXlNYW5hZ2VyLmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL0NvcmUvR2FtZS5qcyIsIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvLi9qcy9VSS9tZW51LmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0ICYmIGRvY3VtZW50LmN1cnJlbnRTY3JpcHQudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnU0NSSVBUJylcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgKCFzY3JpcHRVcmwgfHwgIS9eaHR0cChzPyk6Ly50ZXN0KHNjcmlwdFVybCkpKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC9eYmxvYjovLCBcIlwiKS5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiLy8gc3JjL2NvcmUvSW5wdXRNYW5hZ2VyLmpzXHJcbmV4cG9ydCBjbGFzcyBJbnB1dE1hbmFnZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5rZXlzID0ge1xyXG4gICAgICB1cDogZmFsc2UsXHJcbiAgICAgIGRvd246IGZhbHNlLFxyXG4gICAgICBsZWZ0OiBmYWxzZSxcclxuICAgICAgcmlnaHQ6IGZhbHNlLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldEtleShrZXksIGlzUHJlc3NlZCkge1xyXG4gICAgaWYgKHRoaXMua2V5cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgIHRoaXMua2V5c1trZXldID0gaXNQcmVzc2VkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXREaXJlY3Rpb24oKSB7XHJcbiAgICBsZXQgeCA9IDA7XHJcbiAgICBsZXQgeSA9IDA7XHJcbiAgICBpZiAodGhpcy5rZXlzLnVwKSB5IC09IDE7XHJcbiAgICBpZiAodGhpcy5rZXlzLmRvd24pIHkgKz0gMTtcclxuICAgIGlmICh0aGlzLmtleXMubGVmdCkgeCAtPSAxO1xyXG4gICAgaWYgKHRoaXMua2V5cy5yaWdodCkgeCArPSAxO1xyXG4gICAgcmV0dXJuIHsgeCwgeSB9O1xyXG4gIH1cclxufVxyXG4iLCIvLyBzcmMvVUkvVUlNYW5hZ2VyLmpzXHJcbi8vIGltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7IC8vINCV0YHQu9C4INC90YPQttC90L4g0LTQu9GPINC70L7Qs9C40LrQuCDQstC90YPRgtGA0LggVUlNYW5hZ2VyXHJcblxyXG5leHBvcnQgY2xhc3MgVUlNYW5hZ2VyIHtcclxuICBzdGF0aWMgc2NvcmVFbGVtZW50ID0gbnVsbDtcclxuICBzdGF0aWMgdGFyZ2V0RWxlbWVudCA9IG51bGw7XHJcbiAgc3RhdGljIGNvbnRyb2xzQ29udGFpbmVyID0gbnVsbDtcclxuICBzdGF0aWMgcXVlc3Rpb25PdmVybGF5ID0gbnVsbDtcclxuICBzdGF0aWMgcXVlc3Rpb25UZXh0RWxlbWVudCA9IG51bGw7XHJcbiAgc3RhdGljIGFuc3dlckJ1dHRvbnNDb250YWluZXIgPSBudWxsO1xyXG4gIHN0YXRpYyBmbG9vclNlbGVjdGlvblBhbmVsID0gbnVsbDtcclxuICBzdGF0aWMgZmxvb3JCdXR0b25zQ29udGFpbmVyID0gbnVsbDtcclxuICBzdGF0aWMgZmxhc2hNZXNzYWdlQ29udGFpbmVyID0gbnVsbDtcclxuXHJcbiAgc3RhdGljIGdhbWVwbGF5TWFuYWdlckluc3RhbmNlID0gbnVsbDsgLy8g0KHRgdGL0LvQutCwINC90LAgR2FtZXBsYXlNYW5hZ2VyXHJcbiAgc3RhdGljIGZsYXNoTWVzc2FnZVRpbWVvdXRzID0ge307XHJcblxyXG4gIC8qKlxyXG4gICAqINCS0YvQt9GL0LLQsNC10YLRgdGPINC40LcgR2FtZS5qcyDQtNC70Y8g0YDQtdCz0LjRgdGC0YDQsNGG0LjQuCDRjdC60LfQtdC80L/Qu9GP0YDQsCBHYW1lcGxheU1hbmFnZXIuXHJcbiAgICog0K3RgtC+INC00L7Qu9C20L3QviDQv9GA0L7QuNC30L7QudGC0Lgg0JTQniDQstGL0LfQvtCy0LAgVUlNYW5hZ2VyLmluaXRpYWxpemVVSSgpINC40LvQuCDQu9GO0LHRi9GFINC80LXRgtC+0LTQvtCyLFxyXG4gICAqINC60L7RgtC+0YDRi9C1INC40YHQv9C+0LvRjNC30YPRjtGCIGdhbWVwbGF5TWFuYWdlckluc3RhbmNlIChzaG93UXVlc3Rpb24sIHNob3dGbG9vclNlbGVjdGlvblVJKS5cclxuICAgKiBAcGFyYW0ge0dhbWVwbGF5TWFuYWdlcn0gbWFuYWdlciAtINCt0LrQt9C10LzQv9C70Y/RgCBHYW1lcGxheU1hbmFnZXIuXHJcbiAgICovXHJcbiAgc3RhdGljIHNldEdhbWVwbGF5TWFuYWdlcihtYW5hZ2VyKSB7XHJcbiAgICBpZiAoIW1hbmFnZXIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1VJTWFuYWdlcl0gQXR0ZW1wdGVkIHRvIHNldCBHYW1lcGxheU1hbmFnZXIgaW5zdGFuY2UgdG8gbnVsbCBvciB1bmRlZmluZWQhJyk7XHJcbiAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIkdhbWVwbGF5TWFuYWdlciBpbnN0YW5jZSBjYW5ub3QgYmUgbnVsbC91bmRlZmluZWQgZm9yIFVJTWFuYWdlci5cIik7IC8vINCc0L7QttC90L4g0YHQtNC10LvQsNGC0Ywg0L7RiNC40LHQutGDINGE0LDRgtCw0LvRjNC90L7QuVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmdhbWVwbGF5TWFuYWdlckluc3RhbmNlID0gbWFuYWdlcjtcclxuICAgIGNvbnNvbGUubG9nKCdbVUlNYW5hZ2VyXSBHYW1lcGxheU1hbmFnZXIgaW5zdGFuY2UgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHkgd2l0aCBVSU1hbmFnZXIuJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDQmNC90LjRhtC40LDQu9C40LfQuNGA0YPQtdGCINCx0LDQt9C+0LLRi9C1INGN0LvQtdC80LXQvdGC0YsgVUkuXHJcbiAgICogR2FtZS5qcyDQtNC+0LvQttC10L0g0LLRi9C30LLQsNGC0Ywgc2V0R2FtZXBsYXlNYW5hZ2VyINCf0JXQoNCV0JQg0Y3RgtC40Lwg0LzQtdGC0L7QtNC+0LwuXHJcbiAgICovXHJcbiAgc3RhdGljIGluaXRpYWxpemVVSShpbnB1dE1hbmFnZXIpIHtcclxuICAgIGNvbnNvbGUubG9nKCdbVUlNYW5hZ2VyXSBJbml0aWFsaXppbmcgYmFzZSBVSSBlbGVtZW50cyAoY29udHJvbHMsIHBhbmVscykuLi4nKTtcclxuICAgIGlmICghaW5wdXRNYW5hZ2VyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVSU1hbmFnZXJdIElucHV0TWFuYWdlciBpcyByZXF1aXJlZCBmb3IgaW5pdGlhbGl6ZVVJIHRvIGNyZWF0ZSBjb250cm9scy4nKTtcclxuICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiSW5wdXRNYW5hZ2VyIGlzIHJlcXVpcmVkIGZvciBVSU1hbmFnZXIuaW5pdGlhbGl6ZVVJXCIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jcmVhdGVDb250cm9scyhpbnB1dE1hbmFnZXIpOyAvLyDQl9Cw0LLQuNGB0LjRgiDQvtGCIGlucHV0TWFuYWdlclxyXG4gICAgdGhpcy5jcmVhdGVRdWVzdGlvblVJKCk7IC8vINCd0LUg0LfQsNCy0LjRgdC40YIg0L3QsNC/0YDRj9C80YPRjiDQvtGCIGdhbWVwbGF5TWFuYWdlciDQtNC70Y8g0YHQvtC30LTQsNC90LjRjywg0L3QviDQtNC70Y8g0L/QvtC60LDQt9CwIC0g0LTQsFxyXG4gICAgdGhpcy5jcmVhdGVGbG9vclNlbGVjdGlvblVJKCk7IC8vINCQ0L3QsNC70L7Qs9C40YfQvdC+XHJcbiAgICB0aGlzLmVuc3VyZUZsYXNoTWVzc2FnZUNvbnRhaW5lcigpO1xyXG5cclxuICAgIC8vINCf0YDQvtCy0LXRgNC60LAsINCx0YvQuyDQu9C4IGdhbWVwbGF5TWFuYWdlckluc3RhbmNlINGD0YHRgtCw0L3QvtCy0LvQtdC9INGA0LDQvdC10LUg0YfQtdGA0LXQtyBzZXRHYW1lcGxheU1hbmFnZXJcclxuICAgIGlmICghdGhpcy5nYW1lcGxheU1hbmFnZXJJbnN0YW5jZSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgJ1tVSU1hbmFnZXJdIFdBUk5JTkc6IEdhbWVwbGF5TWFuYWdlciBpbnN0YW5jZSBpcyBOT1QgU0VUIGF0IHRoZSBlbmQgb2YgaW5pdGlhbGl6ZVVJLiAnICtcclxuICAgICAgICAgICdFbnN1cmUgR2FtZS5qcyBjYWxscyBVSU1hbmFnZXIuc2V0R2FtZXBsYXlNYW5hZ2VyKCkgKmJlZm9yZSogVUlNYW5hZ2VyLmluaXRpYWxpemVVSSgpIG9yIHJlbGF0ZWQgc2hvdyBtZXRob2RzLidcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKCdbVUlNYW5hZ2VyXSBCYXNlIFVJIGVsZW1lbnQgaW5pdGlhbGl6YXRpb24gY29tcGxldGUuJyk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlQ29udHJvbHMoaW5wdXRNYW5hZ2VyKSB7XHJcbiAgICB0aGlzLmNvbnRyb2xzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRyb2xzLWNvbnRhaW5lcicpO1xyXG4gICAgaWYgKCF0aGlzLmNvbnRyb2xzQ29udGFpbmVyKSB7XHJcbiAgICAgIHRoaXMuY29udHJvbHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgdGhpcy5jb250cm9sc0NvbnRhaW5lci5pZCA9ICdjb250cm9scy1jb250YWluZXInO1xyXG4gICAgICB0aGlzLmNvbnRyb2xzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbnRyb2xzLWNvbnRhaW5lcicpOyAvLyDQmNC3INCy0LDRiNC10LPQviBDU1NcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRyb2xzQ29udGFpbmVyKTtcclxuICAgIH1cclxuICAgIHRoaXMuY29udHJvbHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vINCe0YfQuNGB0YLQuNGC0Ywg0L/RgNC10LTRi9C00YPRidC40LVcclxuXHJcbiAgICBjb25zdCBhcnJvd3MgPSBbXHJcbiAgICAgIHsgZGlyZWN0aW9uOiAndXAnLCBpY29uOiAn4oaRJywgZ3JpZEFyZWE6ICd1cCcgfSxcclxuICAgICAgeyBkaXJlY3Rpb246ICdsZWZ0JywgaWNvbjogJ+KGkCcsIGdyaWRBcmVhOiAnbGVmdCcgfSxcclxuICAgICAgeyBkaXJlY3Rpb246ICdyaWdodCcsIGljb246ICfihpInLCBncmlkQXJlYTogJ3JpZ2h0JyB9LFxyXG4gICAgICB7IGRpcmVjdGlvbjogJ2Rvd24nLCBpY29uOiAn4oaTJywgZ3JpZEFyZWE6ICdkb3duJyB9LFxyXG4gICAgXTtcclxuXHJcbiAgICBhcnJvd3MuZm9yRWFjaCgoeyBkaXJlY3Rpb24sIGljb24sIGdyaWRBcmVhIH0pID0+IHtcclxuICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgIGJ0bi5jbGFzc05hbWUgPSBgY29udHJvbC1idG4gJHtkaXJlY3Rpb259YDtcclxuICAgICAgYnRuLnRleHRDb250ZW50ID0gaWNvbjtcclxuICAgICAgYnRuLnN0eWxlLmdyaWRBcmVhID0gZ3JpZEFyZWE7XHJcbiAgICAgIGJ0bi5kYXRhc2V0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbjsgLy8g0JTQu9GPINCy0L7Qt9C80L7QttC90L7Qs9C+INC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPXHJcblxyXG4gICAgICBpZiAoaW5wdXRNYW5hZ2VyKSB7XHJcbiAgICAgICAgLy8g0KLQvtC70YzQutC+INC10YHQu9C4IGlucHV0TWFuYWdlciDQv9C10YDQtdC00LDQvVxyXG4gICAgICAgIGNvbnN0IHN0YXJ0UHJlc3MgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgaW5wdXRNYW5hZ2VyLnNldEtleShkaXJlY3Rpb24sIHRydWUpO1xyXG4gICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgZW5kUHJlc3MgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgaWYgKGlucHV0TWFuYWdlci5rZXlzW2RpcmVjdGlvbl0pIHtcclxuICAgICAgICAgICAgLy8g0KLQvtC70YzQutC+INC10YHQu9C4INCx0YvQu9CwINCw0LrRgtC40LLQvdCwXHJcbiAgICAgICAgICAgIGlucHV0TWFuYWdlci5zZXRLZXkoZGlyZWN0aW9uLCBmYWxzZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHN0YXJ0UHJlc3MsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XHJcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZW5kUHJlc3MsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XHJcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgZW5kUHJlc3MsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XHJcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHN0YXJ0UHJlc3MpO1xyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZW5kUHJlc3MpO1xyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZW5kUHJlc3MpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY29udHJvbHNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnRuKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHNjb3JlRGlzcGxheUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZS1kaXNwbGF5Jyk7XHJcbiAgICBpZiAoIXNjb3JlRGlzcGxheUNvbnRhaW5lcikge1xyXG4gICAgICBjb25zdCBzY29yZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBzY29yZURpdi5pZCA9ICdzY29yZS1kaXNwbGF5JztcclxuICAgICAgc2NvcmVEaXYuY2xhc3NMaXN0LmFkZCgnc2NvcmUtZGlzcGxheScpOyAvLyDQmNC3INCy0LDRiNC10LPQviBDU1NcclxuICAgICAgc2NvcmVEaXYuaW5uZXJIVE1MID0gYEJvb2tzOiA8c3BhbiBpZD1cInNjb3JlLXZhbHVlXCI+MDwvc3Bhbj4gLyA8c3BhbiBpZD1cInNjb3JlLXRhcmdldFwiPj88L3NwYW4+YDtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY29yZURpdik7XHJcbiAgICAgIHRoaXMuc2NvcmVFbGVtZW50ID0gc2NvcmVEaXYucXVlcnlTZWxlY3RvcignI3Njb3JlLXZhbHVlJyk7XHJcbiAgICAgIHRoaXMudGFyZ2V0RWxlbWVudCA9IHNjb3JlRGl2LnF1ZXJ5U2VsZWN0b3IoJyNzY29yZS10YXJnZXQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2NvcmVFbGVtZW50ID0gc2NvcmVEaXNwbGF5Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNzY29yZS12YWx1ZScpO1xyXG4gICAgICB0aGlzLnRhcmdldEVsZW1lbnQgPSBzY29yZURpc3BsYXlDb250YWluZXIucXVlcnlTZWxlY3RvcignI3Njb3JlLXRhcmdldCcpO1xyXG4gICAgICBpZiAodGhpcy5zY29yZUVsZW1lbnQpIHRoaXMuc2NvcmVFbGVtZW50LnRleHRDb250ZW50ID0gJzAnO1xyXG4gICAgICBpZiAodGhpcy50YXJnZXRFbGVtZW50KSB0aGlzLnRhcmdldEVsZW1lbnQudGV4dENvbnRlbnQgPSAnPyc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlUXVlc3Rpb25VSSgpIHtcclxuICAgIHRoaXMucXVlc3Rpb25PdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9uLW92ZXJsYXknKTtcclxuICAgIGlmICghdGhpcy5xdWVzdGlvbk92ZXJsYXkpIHtcclxuICAgICAgdGhpcy5xdWVzdGlvbk92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgdGhpcy5xdWVzdGlvbk92ZXJsYXkuaWQgPSAncXVlc3Rpb24tb3ZlcmxheSc7XHJcbiAgICAgIHRoaXMucXVlc3Rpb25PdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3VpLXBhbmVsJyk7IC8vINCR0LDQt9C+0LLRi9C5INC60LvQsNGB0YEg0LTQu9GPINGB0LrRgNGL0YLQuNGPL9C/0L7QutCw0LfQsCDQuCDRgdGC0LjQu9C10LlcclxuICAgICAgdGhpcy5xdWVzdGlvbk92ZXJsYXkuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxkaXYgaWQ9XCJibGFja2JvYXJkLWNvbnRlbnRcIj5cclxuICAgICAgICAgIDxoMj5RdWVzdGlvbjwvaDI+XHJcbiAgICAgICAgICA8ZGl2IGlkPVwicXVlc3Rpb24tYm94XCI+XHJcbiAgICAgICAgICAgIDxwIGlkPVwicXVlc3Rpb24tdGV4dFwiPjwvcD5cclxuICAgICAgICAgICAgPGRpdiBpZD1cImFuc3dlci1idXR0b25zXCI+PC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5gO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMucXVlc3Rpb25PdmVybGF5KTtcclxuICAgIH1cclxuICAgIHRoaXMucXVlc3Rpb25UZXh0RWxlbWVudCA9IHRoaXMucXVlc3Rpb25PdmVybGF5LnF1ZXJ5U2VsZWN0b3IoJyNxdWVzdGlvbi10ZXh0Jyk7XHJcbiAgICB0aGlzLmFuc3dlckJ1dHRvbnNDb250YWluZXIgPSB0aGlzLnF1ZXN0aW9uT3ZlcmxheS5xdWVyeVNlbGVjdG9yKCcjYW5zd2VyLWJ1dHRvbnMnKTtcclxuICAgIGlmICghdGhpcy5xdWVzdGlvblRleHRFbGVtZW50IHx8ICF0aGlzLmFuc3dlckJ1dHRvbnNDb250YWluZXIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1VJTWFuYWdlcl0gRmFpbGVkIHRvIGZpbmQvY3JlYXRlIGNoaWxkIGVsZW1lbnRzIG9mIHF1ZXN0aW9uIFVJIScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZUZsb29yU2VsZWN0aW9uVUkoKSB7XHJcbiAgICB0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxvb3Itc2VsZWN0aW9uLXVpJyk7XHJcbiAgICBpZiAoIXRoaXMuZmxvb3JTZWxlY3Rpb25QYW5lbCkge1xyXG4gICAgICB0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgdGhpcy5mbG9vclNlbGVjdGlvblBhbmVsLmlkID0gJ2Zsb29yLXNlbGVjdGlvbi11aSc7XHJcbiAgICAgIHRoaXMuZmxvb3JTZWxlY3Rpb25QYW5lbC5jbGFzc0xpc3QuYWRkKCd1aS1wYW5lbCcpOyAvLyDQkdCw0LfQvtCy0YvQuSDQutC70LDRgdGBXHJcbiAgICAgIHRoaXMuZmxvb3JTZWxlY3Rpb25QYW5lbC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGgyPlNlbGVjdCBGbG9vcjwvaDI+XHJcbiAgICAgICAgPGRpdiBpZD1cImZsb29yLWJ1dHRvbnMtY29udGFpbmVyXCI+PC9kaXY+YDtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5mbG9vckJ1dHRvbnNDb250YWluZXIgPSB0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwucXVlcnlTZWxlY3RvcignI2Zsb29yLWJ1dHRvbnMtY29udGFpbmVyJyk7XHJcbiAgICBpZiAoIXRoaXMuZmxvb3JCdXR0b25zQ29udGFpbmVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVSU1hbmFnZXJdIEZhaWxlZCB0byBmaW5kL2NyZWF0ZSBmbG9vciBidXR0b25zIGNvbnRhaW5lciEnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBlbnN1cmVGbGFzaE1lc3NhZ2VDb250YWluZXIoKSB7XHJcbiAgICB0aGlzLmZsYXNoTWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFzaC1tZXNzYWdlLWNvbnRhaW5lcicpO1xyXG4gICAgaWYgKCF0aGlzLmZsYXNoTWVzc2FnZUNvbnRhaW5lcikge1xyXG4gICAgICB0aGlzLmZsYXNoTWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICB0aGlzLmZsYXNoTWVzc2FnZUNvbnRhaW5lci5pZCA9ICdmbGFzaC1tZXNzYWdlLWNvbnRhaW5lcic7XHJcbiAgICAgIC8vINCh0YLQuNC70Lgg0LTQu9GPIGZsYXNoLW1lc3NhZ2UtY29udGFpbmVyINC00L7Qu9C20L3RiyDQsdGL0YLRjCDQsiBDU1NcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmZsYXNoTWVzc2FnZUNvbnRhaW5lcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5mbGFzaE1lc3NhZ2VDb250YWluZXI7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZmxhc2hNZXNzYWdlKG1lc3NhZ2UsIHR5cGUgPSAnaW5mbycsIGR1cmF0aW9uID0gMzAwMCkge1xyXG4gICAgLy8gLi4uICjQstCw0Ygg0YPQu9GD0YfRiNC10L3QvdGL0Lkg0LrQvtC0IGZsYXNoTWVzc2FnZSDQvtGB0YLQsNC10YLRgdGPINCx0LXQtyDQuNC30LzQtdC90LXQvdC40LkpIC4uLlxyXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5lbnN1cmVGbGFzaE1lc3NhZ2VDb250YWluZXIoKTtcclxuICAgIGlmICghY29udGFpbmVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVSU1hbmFnZXJdIEZsYXNoIG1lc3NhZ2UgY29udGFpbmVyIG5vdCBmb3VuZCBvciBjcmVhdGFibGUuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBtZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcbiAgICBtZXNzYWdlRWxlbWVudC5jbGFzc05hbWUgPSAnZmxhc2gtbWVzc2FnZSc7XHJcbiAgICBtZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGBmbGFzaC0ke3R5cGV9YCk7XHJcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBgZmxhc2gtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA1KX1gO1xyXG4gICAgbWVzc2FnZUVsZW1lbnQuaWQgPSBtZXNzYWdlSWQ7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWVzc2FnZUVsZW1lbnQpO1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgbWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgfSk7XHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5mbGFzaE1lc3NhZ2VUaW1lb3V0c1ttZXNzYWdlSWRdKTtcclxuICAgIGNvbnN0IHJlbW92ZUVsZW1lbnQgPSAoKSA9PiB7XHJcbiAgICAgIG1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcclxuICAgICAgY29uc3QgaGFuZGxlVHJhbnNpdGlvbkVuZCA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChldmVudC5wcm9wZXJ0eU5hbWUgPT09ICdvcGFjaXR5JyB8fCBldmVudC5wcm9wZXJ0eU5hbWUgPT09ICd0cmFuc2Zvcm0nKSB7XHJcbiAgICAgICAgICBpZiAobWVzc2FnZUVsZW1lbnQucGFyZW50Tm9kZSkgbWVzc2FnZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZXNzYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICBkZWxldGUgdGhpcy5mbGFzaE1lc3NhZ2VUaW1lb3V0c1ttZXNzYWdlSWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgbWVzc2FnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQsIHsgb25jZTogdHJ1ZSB9KTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2VFbGVtZW50LnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgIG1lc3NhZ2VFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKTtcclxuICAgICAgICAgIG1lc3NhZ2VFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobWVzc2FnZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5mbGFzaE1lc3NhZ2VUaW1lb3V0c1ttZXNzYWdlSWRdO1xyXG4gICAgICB9LCA1MDApOyAvLyBTbGlnaHRseSBsb25nZXIgdGhhbiBDU1MgdHJhbnNpdGlvblxyXG4gICAgfTtcclxuICAgIHRoaXMuZmxhc2hNZXNzYWdlVGltZW91dHNbbWVzc2FnZUlkXSA9IHNldFRpbWVvdXQocmVtb3ZlRWxlbWVudCwgZHVyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNob3dRdWVzdGlvbihxdWVzdGlvbkRhdGEpIHtcclxuICAgIGlmICghdGhpcy5xdWVzdGlvbk92ZXJsYXkgfHwgIXRoaXMucXVlc3Rpb25UZXh0RWxlbWVudCB8fCAhdGhpcy5hbnN3ZXJCdXR0b25zQ29udGFpbmVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgJ1tVSU1hbmFnZXJdIFF1ZXN0aW9uIFVJIG5vdCByZWFkeS4gQ2FsbCBjcmVhdGVRdWVzdGlvblVJKCkgb3IgaW5pdGlhbGl6ZVVJKCkuJ1xyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmNyZWF0ZVF1ZXN0aW9uVUkoKTsgLy8g0J/QvtC/0YvRgtC60LAg0YHQvtC30LTQsNGC0YwsINC10YHQu9C4INC+0YLRgdGD0YLRgdGC0LLRg9C10YJcclxuICAgICAgaWYgKCF0aGlzLnF1ZXN0aW9uT3ZlcmxheSB8fCAhdGhpcy5xdWVzdGlvblRleHRFbGVtZW50IHx8ICF0aGlzLmFuc3dlckJ1dHRvbnNDb250YWluZXIpXHJcbiAgICAgICAgcmV0dXJuOyAvLyDQktGL0YXQvtC0LCDQtdGB0LvQuCDQstGB0LUg0LXRidC1INC90LXRglxyXG4gICAgfVxyXG4gICAgaWYgKCFxdWVzdGlvbkRhdGEpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1VJTWFuYWdlcl0gQ2Fubm90IHNob3cgcXVlc3Rpb24gLSBubyBxdWVzdGlvbkRhdGEgcHJvdmlkZWQuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgIXRoaXMuZ2FtZXBsYXlNYW5hZ2VySW5zdGFuY2UgfHxcclxuICAgICAgdHlwZW9mIHRoaXMuZ2FtZXBsYXlNYW5hZ2VySW5zdGFuY2UuaGFuZGxlQW5zd2VyICE9PSAnZnVuY3Rpb24nXHJcbiAgICApIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAnW1VJTWFuYWdlcl0gQ1JJVElDQUw6IEdhbWVwbGF5TWFuYWdlciBvciBpdHMgaGFuZGxlQW5zd2VyIG1ldGhvZCBpcyBub3Qgc2V0IG9yIGludmFsaWQhIENhbm5vdCBzaG93IHF1ZXN0aW9uLidcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5mbGFzaE1lc3NhZ2UoXHJcbiAgICAgICAgJ0Vycm9yOiBHYW1lIGludGVyYWN0aW9uIHN5c3RlbSBmYWlsZWQgKFEpLiBDYW5ub3QgZGlzcGxheSBxdWVzdGlvbi4nLFxyXG4gICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgNTAwMFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmhpZGVRdWVzdGlvbigpOyAvLyDQodC60YDRi9GC0YwgVUksINGH0YLQvtCx0Ysg0L3QtSDQsdGL0LvQviDQt9Cw0LLQuNGB0LDQvdC40Y9cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucXVlc3Rpb25UZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IHF1ZXN0aW9uRGF0YS5xdWVzdGlvbjtcclxuICAgIHRoaXMuYW5zd2VyQnV0dG9uc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICBxdWVzdGlvbkRhdGEub3B0aW9ucy5mb3JFYWNoKChvcHRpb25UZXh0LCBpbmRleCkgPT4ge1xyXG4gICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gb3B0aW9uVGV4dDtcclxuICAgICAgYnV0dG9uLmRhdGFzZXQuaW5kZXggPSBpbmRleDtcclxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2Fuc3dlci1idXR0b24nKTsgLy8g0JrQu9Cw0YHRgSDQuNC3IENTU1xyXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBwYXJzZUludChlLnRhcmdldC5kYXRhc2V0LmluZGV4LCAxMCk7XHJcbiAgICAgICAgdGhpcy5nYW1lcGxheU1hbmFnZXJJbnN0YW5jZS5oYW5kbGVBbnN3ZXIoc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmFuc3dlckJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5xdWVzdGlvbk92ZXJsYXkuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGhpZGVRdWVzdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnF1ZXN0aW9uT3ZlcmxheSkge1xyXG4gICAgICB0aGlzLnF1ZXN0aW9uT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbiAgICAgIC8vINCe0YfQuNGB0YLQutCwINC/0L7RgdC70LUg0YHQutGA0YvRgtC40Y8gKNC40LvQuCDQvdC10LzQtdC00LvQtdC90L3QvilcclxuICAgICAgaWYgKHRoaXMucXVlc3Rpb25UZXh0RWxlbWVudCkgdGhpcy5xdWVzdGlvblRleHRFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgIGlmICh0aGlzLmFuc3dlckJ1dHRvbnNDb250YWluZXIpIHRoaXMuYW5zd2VyQnV0dG9uc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBzaG93Rmxvb3JTZWxlY3Rpb25VSShtaW5GbG9vciwgbWF4Rmxvb3IsIGN1cnJlbnRGbG9vcikge1xyXG4gICAgaWYgKCF0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwgfHwgIXRoaXMuZmxvb3JCdXR0b25zQ29udGFpbmVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgJ1tVSU1hbmFnZXJdIEZsb29yIHNlbGVjdGlvbiBVSSBub3QgcmVhZHkuIENhbGwgY3JlYXRlRmxvb3JTZWxlY3Rpb25VSSgpIG9yIGluaXRpYWxpemVVSSgpLidcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5jcmVhdGVGbG9vclNlbGVjdGlvblVJKCk7IC8vINCf0L7Qv9GL0YLQutCwINGB0L7Qt9C00LDRgtGMXHJcbiAgICAgIGlmICghdGhpcy5mbG9vclNlbGVjdGlvblBhbmVsIHx8ICF0aGlzLmZsb29yQnV0dG9uc0NvbnRhaW5lcikgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICAhdGhpcy5nYW1lcGxheU1hbmFnZXJJbnN0YW5jZSB8fFxyXG4gICAgICB0eXBlb2YgdGhpcy5nYW1lcGxheU1hbmFnZXJJbnN0YW5jZS5oYW5kbGVGbG9vclNlbGVjdGlvbiAhPT0gJ2Z1bmN0aW9uJ1xyXG4gICAgKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgJ1tVSU1hbmFnZXJdIENSSVRJQ0FMOiBHYW1lcGxheU1hbmFnZXIgb3IgaXRzIGhhbmRsZUZsb29yU2VsZWN0aW9uIG1ldGhvZCBpcyBub3Qgc2V0IG9yIGludmFsaWQhIENhbm5vdCBzaG93IGZsb29yIHNlbGVjdGlvbi4nXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuZmxhc2hNZXNzYWdlKFxyXG4gICAgICAgICdFcnJvcjogR2FtZSBpbnRlcmFjdGlvbiBzeXN0ZW0gZmFpbGVkIChGKS4gQ2Fubm90IGRpc3BsYXkgZmxvb3Igc2VsZWN0aW9uLicsXHJcbiAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICA1MDAwXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuaGlkZUZsb29yU2VsZWN0aW9uVUkoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZmxvb3JCdXR0b25zQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gICAgZm9yIChsZXQgZmxvb3IgPSBtaW5GbG9vcjsgZmxvb3IgPD0gbWF4Rmxvb3I7IGZsb29yKyspIHtcclxuICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGBGbG9vciAke2Zsb29yfWA7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdmbG9vci1idXR0b24nKTsgLy8g0JrQu9Cw0YHRgSDQuNC3IENTU1xyXG4gICAgICBidXR0b24uZGF0YXNldC5mbG9vciA9IGZsb29yO1xyXG4gICAgICBpZiAoZmxvb3IgPT09IGN1cnJlbnRGbG9vcikge1xyXG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmdhbWVwbGF5TWFuYWdlckluc3RhbmNlLmhhbmRsZUZsb29yU2VsZWN0aW9uKGZsb29yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmZsb29yQnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5mbG9vclNlbGVjdGlvblBhbmVsLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBoaWRlRmxvb3JTZWxlY3Rpb25VSSgpIHtcclxuICAgIGlmICh0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwpIHtcclxuICAgICAgdGhpcy5mbG9vclNlbGVjdGlvblBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyB1cGRhdGVTY29yZShzY29yZSwgdGFyZ2V0KSB7XHJcbiAgICBpZiAoIXRoaXMuc2NvcmVFbGVtZW50KSB0aGlzLnNjb3JlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZS12YWx1ZScpO1xyXG4gICAgaWYgKCF0aGlzLnRhcmdldEVsZW1lbnQpIHRoaXMudGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZS10YXJnZXQnKTtcclxuICAgIGlmICh0aGlzLnNjb3JlRWxlbWVudCkgdGhpcy5zY29yZUVsZW1lbnQudGV4dENvbnRlbnQgPSBzY29yZTtcclxuICAgIGlmICh0aGlzLnRhcmdldEVsZW1lbnQpIHRoaXMudGFyZ2V0RWxlbWVudC50ZXh0Q29udGVudCA9IHRhcmdldDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzaG93R2FtZVVJKCkge1xyXG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzJykgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVDYW52YXMnKTsgLy8g0J/QvtC00LTQtdGA0LbQutCwINC+0LHQvtC40YUgSURcclxuICAgIGNvbnN0IG1lbnVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1jb250YWluZXInKTtcclxuICAgIGNvbnN0IHNjb3JlRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZS1kaXNwbGF5Jyk7XHJcblxyXG4gICAgaWYgKGNhbnZhcykgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAvLyDQmNC70LggJ2ZsZXgnLCAnZ3JpZCdcclxuICAgIGVsc2UgY29uc29sZS53YXJuKCdbVUlNYW5hZ2VyXSBDYW52YXMgZWxlbWVudCBub3QgZm91bmQgdG8gc2hvdy4nKTtcclxuXHJcbiAgICAvLyDQnNC10L3RjiDQtNC+0LvQttC90L4g0LHRi9GC0Ywg0YPQttC1INGB0LrRgNGL0YLQviDQuNC3IE1lbnUuanNcclxuICAgIGlmIChtZW51Q29udGFpbmVyICYmICFtZW51Q29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcclxuICAgICAgY29uc29sZS53YXJuKFxyXG4gICAgICAgICdbVUlNYW5hZ2VyXSBNZW51IGNvbnRhaW5lciB3YXMgbm90IGhpZGRlbiBiZWZvcmUgc2hvd2luZyBnYW1lIFVJLiBIaWRpbmcgaXQgbm93LidcclxuICAgICAgKTtcclxuICAgICAgbWVudUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5jb250cm9sc0NvbnRhaW5lcikgdGhpcy5jb250cm9sc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XHJcbiAgICBlbHNlIGNvbnNvbGUud2FybignW1VJTWFuYWdlcl0gQ29udHJvbHMgY29udGFpbmVyIG5vdCBmb3VuZCB0byBzaG93LicpO1xyXG5cclxuICAgIGlmIChzY29yZURpc3BsYXkpIHNjb3JlRGlzcGxheS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XHJcbiAgICBlbHNlIGNvbnNvbGUud2FybignW1VJTWFuYWdlcl0gU2NvcmUgZGlzcGxheSBub3QgZm91bmQgdG8gc2hvdy4nKTtcclxuXHJcbiAgICB0aGlzLmhpZGVRdWVzdGlvbigpOyAvLyDQo9Cx0LXQtNC40LzRgdGPLCDRh9GC0L4g0L7QstC10YDQu9C10Lgg0YHQutGA0YvRgtGLXHJcbiAgICB0aGlzLmhpZGVGbG9vclNlbGVjdGlvblVJKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGlkZUdhbWVVSSgpIHtcclxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLWNhbnZhcycpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lQ2FudmFzJyk7XHJcbiAgICBjb25zdCBzY29yZURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUtZGlzcGxheScpO1xyXG4gICAgLy8gY29uc3QgbWVudUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWNvbnRhaW5lcicpOyAvLyDQndC1INC/0L7QutCw0LfRi9Cy0LDQtdC8INC80LXQvdGOINC+0YLRgdGO0LTQsCDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuFxyXG5cclxuICAgIGlmIChjYW52YXMpIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgaWYgKHRoaXMuY29udHJvbHNDb250YWluZXIpIHRoaXMuY29udHJvbHNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG4gICAgaWYgKHNjb3JlRGlzcGxheSkgc2NvcmVEaXNwbGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcclxuXHJcbiAgICB0aGlzLmhpZGVRdWVzdGlvbigpO1xyXG4gICAgdGhpcy5oaWRlRmxvb3JTZWxlY3Rpb25VSSgpO1xyXG5cclxuICAgIC8vINCf0L7QutCw0Lcg0LzQtdC90Y4g0LTQvtC70LbQtdC9INGD0L/RgNCw0LLQu9GP0YLRjNGB0Y8g0LvQvtCz0LjQutC+0Lkg0LjQs9GA0YsgKNC90LDQv9GA0LjQvNC10YAsINCyIEdhbWUuX3NldEdhbWVPdmVyINC40LvQuCDQuNC3IE1lbnUuanMpXHJcbiAgfVxyXG59XHJcbiIsIi8vIHNyYy9jb3JlL0NoYXJhY3Rlci5qc1xyXG5cclxuZXhwb3J0IGNsYXNzIENoYXJhY3RlciB7XHJcbiAgLyoqIFN0YXRpYyBvYmplY3QgZm9yIGRpcmVjdGlvbiBjb25zdGFudHMgKi9cclxuICBzdGF0aWMgRGlyZWN0aW9uID0ge1xyXG4gICAgRE9XTjogMCxcclxuICAgIFJJR0hUOiAxLFxyXG4gICAgVVA6IDIsXHJcbiAgICBMRUZUOiAzLFxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBuZXcgQ2hhcmFjdGVyIGluc3RhbmNlLlxyXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjdHggLSBUaGUgcmVuZGVyaW5nIGNvbnRleHQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNwcml0ZVVybCAtIFVSTCBvZiB0aGUgY2hhcmFjdGVyJ3Mgc3ByaXRlIHNoZWV0LlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5mcmFtZVNpemU9MzJdIC0gU2l6ZSBvZiBvbmUgZnJhbWUgaW4gdGhlIHNwcml0ZSBzaGVldCAocGl4ZWxzKS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuZnJhbWVDb3VudD00XSAtIE51bWJlciBvZiBmcmFtZXMgcGVyIGFuaW1hdGlvbiBjeWNsZSAocGVyIGRpcmVjdGlvbikuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNjYWxlPTJdIC0gU2NhbGluZyBmYWN0b3IgZm9yIHJlbmRlcmluZy5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuc3BlZWQ9M10gLSBNb3ZlbWVudCBzcGVlZCBpbiBwaXhlbHMgcGVyIHVwZGF0ZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuYW5pbWF0aW9uU3BlZWQ9MTUwXSAtIE1pbGxpc2Vjb25kcyBwZXIgYW5pbWF0aW9uIGZyYW1lLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5jb2xsaXNpb25Cb3hXaWR0aFJhdGlvPTAuNF0gLSBXaWR0aCBvZiBjb2xsaXNpb24gYm94IHJlbGF0aXZlIHRvIHJlbmRlclNpemUuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmNvbGxpc2lvbkJveEhlaWdodFJhdGlvPTAuMl0gLSBIZWlnaHQgb2YgY29sbGlzaW9uIGJveCByZWxhdGl2ZSB0byByZW5kZXJTaXplLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5jb2xsaXNpb25Cb3hGZWV0T2Zmc2V0UmF0aW89MC40XSAtIFZlcnRpY2FsIG9mZnNldCBvZiBjb2xsaXNpb24gYm94IGNlbnRlciBmcm9tIGNoYXJhY3RlciBjZW50ZXIgKHRvd2FyZHMgZmVldCksIHJlbGF0aXZlIHRvIHJlbmRlclNpemUuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoY3R4LCBzcHJpdGVVcmwsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgdGhpcy5jdHggPSBjdHg7XHJcbiAgICB0aGlzLnNwcml0ZSA9IG5ldyBJbWFnZSgpO1xyXG5cclxuICAgIC8vIENvbmZpZ3VyYXRpb24gd2l0aCBkZWZhdWx0c1xyXG4gICAgdGhpcy5mcmFtZVNpemUgPSBvcHRpb25zLmZyYW1lU2l6ZSB8fCAzMjtcclxuICAgIHRoaXMuZnJhbWVDb3VudCA9IG9wdGlvbnMuZnJhbWVDb3VudCB8fCA0OyAvLyBOdW1iZXIgb2YgZnJhbWVzIHBlciBkaXJlY3Rpb25cclxuICAgIHRoaXMuc2NhbGUgPSBvcHRpb25zLnNjYWxlIHx8IDI7XHJcbiAgICB0aGlzLnJlbmRlclNpemUgPSB0aGlzLmZyYW1lU2l6ZSAqIHRoaXMuc2NhbGU7XHJcbiAgICB0aGlzLnNwZWVkID0gb3B0aW9ucy5zcGVlZCB8fCAzO1xyXG4gICAgdGhpcy5hbmltYXRpb25TcGVlZCA9IG9wdGlvbnMuYW5pbWF0aW9uU3BlZWQgfHwgMTUwOyAvLyBtcyBwZXIgZnJhbWVcclxuXHJcbiAgICAvLyBDb2xsaXNpb24gQm94IENvbmZpZ3VyYXRpb25cclxuICAgIHRoaXMuY29sbGlzaW9uQm94V2lkdGhSYXRpbyA9IG9wdGlvbnMuY29sbGlzaW9uQm94V2lkdGhSYXRpbyB8fCAwLjQ7XHJcbiAgICB0aGlzLmNvbGxpc2lvbkJveEhlaWdodFJhdGlvID0gb3B0aW9ucy5jb2xsaXNpb25Cb3hIZWlnaHRSYXRpbyB8fCAwLjI7XHJcbiAgICB0aGlzLmNvbGxpc2lvbkJveEZlZXRPZmZzZXRSYXRpbyA9IG9wdGlvbnMuY29sbGlzaW9uQm94RmVldE9mZnNldFJhdGlvIHx8IDAuNDtcclxuXHJcbiAgICAvLyBTdGF0ZVxyXG4gICAgdGhpcy54ID0gMDsgLy8gV29ybGQgWCBjb29yZGluYXRlXHJcbiAgICB0aGlzLnkgPSAwOyAvLyBXb3JsZCBZIGNvb3JkaW5hdGVcclxuICAgIHRoaXMuY3VycmVudERpcmVjdGlvbiA9IENoYXJhY3Rlci5EaXJlY3Rpb24uRE9XTjsgLy8gU3RhcnQgZmFjaW5nIGRvd25cclxuICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDsgLy8gQ3VycmVudCBhbmltYXRpb24gZnJhbWUgaW5kZXhcclxuICAgIHRoaXMuaXNNb3ZpbmcgPSBmYWxzZTsgLy8gSXMgdGhlIGNoYXJhY3RlciBjdXJyZW50bHkgbW92aW5nP1xyXG4gICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gMDsgLy8gVGltZXN0YW1wIG9mIHRoZSBsYXN0IGZyYW1lIHVwZGF0ZVxyXG5cclxuICAgIC8vIExvYWQgc3ByaXRlIGFuZCBhZGQgaGFuZGxlcnNcclxuICAgIHRoaXMuc3ByaXRlLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYFtDaGFyYWN0ZXJdIFNwcml0ZSBsb2FkZWQgc3VjY2Vzc2Z1bGx5OiAke3Nwcml0ZVVybH1gKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNwcml0ZS5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbQ2hhcmFjdGVyXSBGYWlsZWQgdG8gbG9hZCBzcHJpdGU6ICR7c3ByaXRlVXJsfWApO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc3ByaXRlLnNyYyA9IHNwcml0ZVVybDsgLy8gU3RhcnQgbG9hZGluZ1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgY2hhcmFjdGVyJ3MgYW5pbWF0aW9uIGZyYW1lIGJhc2VkIG9uIG1vdmVtZW50IHN0YXRlIGFuZCB0aW1lLlxyXG4gICAqIFNob3VsZCBiZSBjYWxsZWQgaW4gdGhlIGdhbWUncyB1cGRhdGUgbG9vcC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZXN0YW1wIC0gVGhlIGN1cnJlbnQgaGlnaC1yZXNvbHV0aW9uIHRpbWVzdGFtcCAoZS5nLiwgZnJvbSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUpLlxyXG4gICAqL1xyXG4gIHVwZGF0ZUFuaW1hdGlvbih0aW1lc3RhbXApIHtcclxuICAgIGlmICghdGhpcy5pc01vdmluZykge1xyXG4gICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XHJcbiAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IHRpbWVzdGFtcDtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLmxhc3RGcmFtZVRpbWUpIHtcclxuICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZWxhcHNlZCA9IHRpbWVzdGFtcCAtIHRoaXMubGFzdEZyYW1lVGltZTtcclxuICAgIGlmIChlbGFwc2VkID4gdGhpcy5hbmltYXRpb25TcGVlZCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9ICh0aGlzLmN1cnJlbnRGcmFtZSArIDEpICUgdGhpcy5mcmFtZUNvdW50O1xyXG4gICAgICB0aGlzLmxhc3RGcmFtZVRpbWUgPSB0aW1lc3RhbXA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxjdWxhdGVzIHRoZSBjb2xsaXNpb24gYm91bmRpbmcgYm94IGJhc2VkIG9uIGEgcG90ZW50aWFsIHBvc2l0aW9uLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwb3NYIC0gVGhlIHBvdGVudGlhbCBYIGNvb3JkaW5hdGUgZm9yIHRoZSBjb2xsaXNpb24gY2hlY2suXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBvc1kgLSBUaGUgcG90ZW50aWFsIFkgY29vcmRpbmF0ZSBmb3IgdGhlIGNvbGxpc2lvbiBjaGVjay5cclxuICAgKiBAcmV0dXJucyB7e3RvcDogbnVtYmVyLCBib3R0b206IG51bWJlciwgbGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcn19IFRoZSBjb2xsaXNpb24gYm94IHByb3BlcnRpZXMuXHJcbiAgICovXHJcbiAgZ2V0Q29sbGlzaW9uQm94KHBvc1gsIHBvc1kpIHtcclxuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5yZW5kZXJTaXplICogdGhpcy5jb2xsaXNpb25Cb3hXaWR0aFJhdGlvO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5yZW5kZXJTaXplICogdGhpcy5jb2xsaXNpb25Cb3hIZWlnaHRSYXRpbztcclxuICAgIGNvbnN0IGhhbGZXaWR0aCA9IHdpZHRoIC8gMjtcclxuICAgIGNvbnN0IGZlZXRPZmZzZXRZID0gdGhpcy5yZW5kZXJTaXplICogdGhpcy5jb2xsaXNpb25Cb3hGZWV0T2Zmc2V0UmF0aW87XHJcbiAgICBjb25zdCB0b3AgPSBwb3NZICsgZmVldE9mZnNldFkgLSBoZWlnaHQgLyAyO1xyXG4gICAgY29uc3QgYm90dG9tID0gcG9zWSArIGZlZXRPZmZzZXRZICsgaGVpZ2h0IC8gMjtcclxuICAgIGNvbnN0IGxlZnQgPSBwb3NYIC0gaGFsZldpZHRoO1xyXG4gICAgY29uc3QgcmlnaHQgPSBwb3NYICsgaGFsZldpZHRoO1xyXG4gICAgcmV0dXJuIHsgdG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0LCB3aWR0aCwgaGVpZ2h0IH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEcmF3cyB0aGUgY2hhcmFjdGVyIG9udG8gdGhlIGNhbnZhcyBhdCBpdHMgY3VycmVudCBwb3NpdGlvbixcclxuICAgKiBjb25zaWRlcmluZyB0aGUgY2FtZXJhIG9mZnNldC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WCAtIFRoZSBjYW1lcmEncyBYIG9mZnNldC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSAtIFRoZSBjYW1lcmEncyBZIG9mZnNldC5cclxuICAgKi9cclxuICBkcmF3KG9mZnNldFgsIG9mZnNldFkpIHtcclxuICAgIGlmICghdGhpcy5zcHJpdGUuY29tcGxldGUgfHwgdGhpcy5zcHJpdGUubmF0dXJhbEhlaWdodCA9PT0gMCkge1xyXG4gICAgICByZXR1cm47IC8vIERvbid0IGRyYXcgaWYgc3ByaXRlIGlzbid0IHJlYWR5XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFtZVggPSB0aGlzLmN1cnJlbnRGcmFtZSAqIHRoaXMuZnJhbWVTaXplO1xyXG4gICAgY29uc3QgZnJhbWVZID0gdGhpcy5jdXJyZW50RGlyZWN0aW9uICogdGhpcy5mcmFtZVNpemU7XHJcbiAgICBjb25zdCBzY3JlZW5YID0gTWF0aC5mbG9vcih0aGlzLnggLSB0aGlzLnJlbmRlclNpemUgLyAyICsgb2Zmc2V0WCk7XHJcbiAgICBjb25zdCBzY3JlZW5ZID0gTWF0aC5mbG9vcih0aGlzLnkgLSB0aGlzLnJlbmRlclNpemUgLyAyICsgb2Zmc2V0WSk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKFxyXG4gICAgICAgIHRoaXMuc3ByaXRlLFxyXG4gICAgICAgIGZyYW1lWCxcclxuICAgICAgICBmcmFtZVksXHJcbiAgICAgICAgdGhpcy5mcmFtZVNpemUsXHJcbiAgICAgICAgdGhpcy5mcmFtZVNpemUsIC8vIFNvdXJjZSByZWN0XHJcbiAgICAgICAgc2NyZWVuWCxcclxuICAgICAgICBzY3JlZW5ZLFxyXG4gICAgICAgIHRoaXMucmVuZGVyU2l6ZSxcclxuICAgICAgICB0aGlzLnJlbmRlclNpemUgLy8gRGVzdCByZWN0XHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGFyYWN0ZXJdIEVycm9yIGRyYXdpbmcgc3ByaXRlOicsIGUpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvLyBzcmMvbWFwL0Jvb2suanNcclxuZXhwb3J0IGNsYXNzIEJvb2sge1xyXG4gIGNvbnN0cnVjdG9yKHgsIHksIGlkLCB0aWxlU2l6ZSkge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB0aGlzLnRpbGVTaXplID0gdGlsZVNpemU7XHJcbiAgICB0aGlzLnNpemUgPSB0aWxlU2l6ZSAqIDAuNjtcclxuICAgIHRoaXMuY29sbGVjdGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmlzQ29sbGVjdGVkID0gZmFsc2U7XHJcbiAgfVxyXG4gIGRyYXcoY3R4LCBvZmZzZXRYLCBvZmZzZXRZLCBib29rSW1hZ2UpIHtcclxuICAgIGNvbnN0IHNjcmVlblggPSBNYXRoLmZsb29yKHRoaXMueCArIG9mZnNldFggLSB0aGlzLnNpemUgLyAyKTtcclxuICAgIGNvbnN0IHNjcmVlblkgPSBNYXRoLmZsb29yKHRoaXMueSArIG9mZnNldFkgLSB0aGlzLnNpemUgLyAyKTtcclxuICAgIGlmIChib29rSW1hZ2UpIHtcclxuICAgICAgY3R4LmRyYXdJbWFnZShib29rSW1hZ2UsIHNjcmVlblgsIHNjcmVlblksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzhkNmU2Myc7XHJcbiAgICAgIGN0eC5maWxsUmVjdChzY3JlZW5YLCBzY3JlZW5ZLCB0aGlzLnNpemUsIHRoaXMuc2l6ZSk7XHJcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNWQ0MDM3JztcclxuICAgICAgY3R4LnN0cm9rZVJlY3Qoc2NyZWVuWCwgc2NyZWVuWSwgdGhpcy5zaXplLCB0aGlzLnNpemUpO1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gJyNlZWUnO1xyXG4gICAgICBjdHguZm9udCA9IGAke3RoaXMuc2l6ZSAqIDAuNn1weCBBcmlhbGA7XHJcbiAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xyXG4gICAgICBjdHguZmlsbFRleHQoJz8nLCBzY3JlZW5YICsgdGhpcy5zaXplIC8gMiwgc2NyZWVuWSArIHRoaXMuc2l6ZSAvIDIgKyAyKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8gc3JjL3V0aWxzL2NvbnN0YW50cy5qc1xyXG5cclxuLy8gRGVmaW5pY2plIHR5cMOzdyBrYWZlbGvDs3cgbWFweVxyXG5leHBvcnQgY29uc3QgVElMRV9XQUxMID0gMDsgLy8gxZpjaWFuYVxyXG5leHBvcnQgY29uc3QgVElMRV9DT1JSSURPUiA9IDE7IC8vIEtvcnl0YXJ6XHJcbmV4cG9ydCBjb25zdCBUSUxFX1JPT01fRkxPT1IgPSAyOyAvLyBQb2TFgm9nYSBwb2tvanVcclxuZXhwb3J0IGNvbnN0IFRJTEVfTElGVCA9IDM7IC8vIFdpbmRhXHJcbi8vIE1vxbxuYSBkb2RhxIcgd2nEmWNlaiB0eXDDs3csIG5wLiBUSUxFX0RPT1IsIFRJTEVfV0lORE9XIGl0cC5cclxuXHJcbi8vIFN0YW55IGdyeVxyXG5leHBvcnQgY29uc3QgR2FtZVN0YXRlID0ge1xyXG4gIExPQURJTkc6ICdMT0FESU5HJywgLy8gxYFhZG93YW5pZSB6YXNvYsOzdywgZ2VuZXJvd2FuaWUgcG96aW9tdVxyXG4gIE1FTlU6ICdNRU5VJywgLy8gTWVudSBnxYLDs3duZSAod3liw7NyIHBvc3RhY2kpXHJcbiAgUExBWUlORzogJ1BMQVlJTkcnLCAvLyBHxYLDs3duYSByb3pncnl3a2FcclxuICBBU0tJTkdfUVVFU1RJT046ICdBU0tJTkdfUVVFU1RJT04nLCAvLyBXecWbd2lldGxhbmllIHB5dGFuaWFcclxuICBTRUxFQ1RJTkdfRkxPT1I6ICdTRUxFQ1RJTkdfRkxPT1InLCAvLyBXecWbd2lldGxhbmllIFVJIHd5Ym9ydSBwacSZdHJhXHJcbiAgVFJBTlNJVElPTklORzogJ1RSQU5TSVRJT05JTkcnLCAvLyBBbmltYWNqYS9vY3pla2l3YW5pZSBuYSBwcnplasWbY2llIHdpbmR5XHJcbiAgR0FNRV9PVkVSOiAnR0FNRV9PVkVSJywgLy8gS29uaWVjIGdyeSAod3lncmFuYSBsdWIgcHJ6ZWdyYW5hKVxyXG59O1xyXG5cclxuLy8gUGFyYW1ldHJ5IHJvemdyeXdraVxyXG5leHBvcnQgY29uc3QgVEFSR0VUX0JPT0tTX1RPX1dJTiA9IDE1OyAvLyBMaWN6YmEga3NpxIXFvGVrIGRvIHplYnJhbmlhLCBhYnkgd3lncmHEhyAoZ2xvYmFsbmllKVxyXG5leHBvcnQgY29uc3QgTElGVF9DT09MRE9XTl9NUyA9IDIwMDA7IC8vIEN6YXMgb2Rub3dpZW5pYSB3aW5keSB3IG1pbGlzZWt1bmRhY2ggKDIgc2VrdW5keSlcclxuZXhwb3J0IGNvbnN0IExJRlRfSU5URVJBQ1RJT05fUkFESVVTX01VTFRJUExJRVIgPSAwLjc7IC8vIE1ub8W8bmlrIHByb21pZW5pYSBpbnRlcmFrY2ppIHogd2luZMSFICh3emdsxJlkZW0gdGlsZVNpemUpXHJcblxyXG4vLyBTemFuc2EgbmEgcG9qYXdpZW5pZSBzacSZIHNpxYJvd25pIG5hIHBpZXJ3c3p5bSBwacSZdHJ6ZSAoMC4wIGRvIDEuMClcclxuZXhwb3J0IGNvbnN0IEdZTV9DSEFOQ0VfT05fRklSU1RfRkxPT1IgPSAwLjY7IC8vIDYwJSBzemFuc3lcclxuXHJcbi8vIFB5dGFuaWEgaSBvZHBvd2llZHppXHJcbmV4cG9ydCBjb25zdCBxdWVzdGlvbnMgPSBbXHJcbiAge1xyXG4gICAgcXVlc3Rpb246XHJcbiAgICAgICdLdMOzcnkgasSZenlrIHByb2dyYW1vd2FuaWEgamVzdCB6bmFueSB6ZSBzd29qZWogd3N6ZWNoc3Ryb25ub8WbY2kgaSB1xbx5d2FueSB6YXLDs3dubyB3IGJhY2tlbmR6aWUgKE5vZGUuanMpLCBqYWsgaSBmcm9udGVuZHppZT8nLFxyXG4gICAgb3B0aW9uczogWydQeXRob24nLCAnSmF2YScsICdKYXZhU2NyaXB0JywgJ0MjJ10sXHJcbiAgICBjb3JyZWN0QW5zd2VyOiAyLCAvLyBJbmRla3MgcG9wcmF3bmVqIG9kcG93aWVkemkgKEphdmFTY3JpcHQpXHJcbiAgfSxcclxuICB7XHJcbiAgICBxdWVzdGlvbjogJ0NvIG96bmFjemEgc2tyw7N0IEhUTUw/JyxcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAgJ0h5cGVyVGV4dCBNYXJrdXAgTGFuZ3VhZ2UnLFxyXG4gICAgICAnSGlnaCBUcmFuc2ZlciBNYWNoaW5lIExhbmd1YWdlJyxcclxuICAgICAgJ0h5cGVybGluayBhbmQgVGV4dCBNYW5hZ2VtZW50IExhbmd1YWdlJyxcclxuICAgICAgJ0hvbWUgVG9vbCBNYXJrdXAgTGFuZ3VhZ2UnLFxyXG4gICAgXSxcclxuICAgIGNvcnJlY3RBbnN3ZXI6IDAsXHJcbiAgfSxcclxuICB7XHJcbiAgICBxdWVzdGlvbjogJ0t0w7NyYSBzdHJ1a3R1cmEgZGFueWNoIGR6aWHFgmEgbmEgemFzYWR6aWUgTElGTyAoTGFzdC1JbiwgRmlyc3QtT3V0KT8nLFxyXG4gICAgb3B0aW9uczogWydLb2xlamthIChRdWV1ZSknLCAnU3RvcyAoU3RhY2spJywgJ0xpc3RhIChMaXN0KScsICdEcnpld28gKFRyZWUpJ10sXHJcbiAgICBjb3JyZWN0QW5zd2VyOiAxLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgcXVlc3Rpb246ICdKYWsgbmF6eXdhIHNpxJkgcHJvY2VzIHpuYWpkb3dhbmlhIGkgbmFwcmF3aWFuaWEgYsWCxJlkw7N3IHcga29kemllPycsXHJcbiAgICBvcHRpb25zOiBbJ0tvbXBpbGFjamEnLCAnVGVzdG93YW5pZScsICdEZWJ1Z293YW5pZScsICdSZWZha3Rvcnl6YWNqYSddLFxyXG4gICAgY29ycmVjdEFuc3dlcjogMixcclxuICB9LFxyXG4gIHtcclxuICAgIHF1ZXN0aW9uOlxyXG4gICAgICBcIkt0w7NyeSBwYXJhZHlnbWF0IHByb2dyYW1vd2FuaWEgb3BpZXJhIHNpxJkgbmEga29uY2VwY2ppICdvYmlla3TDs3cnLCBrdMOzcmUgbW9nxIUgemF3aWVyYcSHIGRhbmUgaSBrb2Q/XCIsXHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgICdQcm9ncmFtb3dhbmllIGZ1bmtjeWpuZScsXHJcbiAgICAgICdQcm9ncmFtb3dhbmllIHByb2NlZHVyYWxuZScsXHJcbiAgICAgICdQcm9ncmFtb3dhbmllIG9iaWVrdG93ZScsXHJcbiAgICAgICdQcm9ncmFtb3dhbmllIGxvZ2ljem5lJyxcclxuICAgIF0sXHJcbiAgICBjb3JyZWN0QW5zd2VyOiAyLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgcXVlc3Rpb246ICdDbyBvem5hY3phIENTUz8nLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICAnQ2FzY2FkaW5nIFN0eWxlIFNoZWV0cycsXHJcbiAgICAgICdDb21wdXRlciBTdHlsZSBTeW50YXgnLFxyXG4gICAgICAnQ3JlYXRpdmUgU3R5bGluZyBTeXN0ZW0nLFxyXG4gICAgICAnQ29sb3JmdWwgU3R5bGUgU2NyaXB0cycsXHJcbiAgICBdLFxyXG4gICAgY29ycmVjdEFuc3dlcjogMCxcclxuICB9LFxyXG4gIHtcclxuICAgIHF1ZXN0aW9uOiAnS3TDs3J5IG9wZXJhdG9yIHcgSmF2YVNjcmlwdCBzxYJ1xbx5IGRvIMWbY2lzxYJlZ28gcG9yw7N3bmFuaWEgKHdhcnRvxZvEhyBpIHR5cCk/JyxcclxuICAgIG9wdGlvbnM6IFsnPT0nLCAnPScsICc9PT0nLCAnIT0nXSxcclxuICAgIGNvcnJlY3RBbnN3ZXI6IDIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBxdWVzdGlvbjogJ0phayBuYXp5d2Egc2nEmSBwb3B1bGFybnkgc3lzdGVtIGtvbnRyb2xpIHdlcnNqaSB1xbx5d2FueSBwcnpleiBwcm9ncmFtaXN0w7N3PycsXHJcbiAgICBvcHRpb25zOiBbJ1N1YnZlcnNpb24gKFNWTiknLCAnR2l0JywgJ01lcmN1cmlhbCcsICdDVlMnXSxcclxuICAgIGNvcnJlY3RBbnN3ZXI6IDEsXHJcbiAgfSxcclxuICB7XHJcbiAgICBxdWVzdGlvbjpcclxuICAgICAgJ0t0w7NyeSB0eXAgcMSZdGxpIHcgd2nEmWtzem/Fm2NpIGrEmXp5a8OzdyBwcm9ncmFtb3dhbmlhIGplc3QgbmFqYmFyZHppZWogb2Rwb3dpZWRuaSBkbyBpdGVyYWNqaSBwbyBlbGVtZW50YWNoIHRhYmxpY3ksIGdkeSBuaWUgem5hbXkgaWNoIGxpY3pieT8nLFxyXG4gICAgb3B0aW9uczogWydmb3InLCAnd2hpbGUnLCAnZG8uLi53aGlsZScsICdmb3JlYWNoIChsdWIgZm9yLi4ub2YpJ10sXHJcbiAgICBjb3JyZWN0QW5zd2VyOiAzLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgcXVlc3Rpb246ICdDbyB0byBqZXN0IEFQST8nLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICAnQWR2YW5jZWQgUHJvZ3JhbW1pbmcgSW50ZXJmYWNlJyxcclxuICAgICAgJ0FwcGxpY2F0aW9uIFByb2dyYW1taW5nIEludGVyZmFjZScsXHJcbiAgICAgICdBdXRvbWF0ZWQgUHJvZ3JhbSBJbnRlcmFjdGlvbicsXHJcbiAgICAgICdBbGdvcml0aG1pYyBQcm9jZXNzaW5nIElucHV0JyxcclxuICAgIF0sXHJcbiAgICBjb3JyZWN0QW5zd2VyOiAxLFxyXG4gIH0sXHJcbiAgLy8gRG9kYWogd2nEmWNlaiBweXRhxYQgdHV0YWpcclxuXTtcclxuIiwiLy8gc3JjL3V0aWxzL21hcC5qc1xyXG5pbXBvcnQgeyBUSUxFX0NPUlJJRE9SLCBUSUxFX1JPT01fRkxPT1IsIFRJTEVfTElGVCB9IGZyb20gJy4vY29uc3RhbnRzLmpzJzsgLy8gUG90cnplYm5lIGRvIEJGU1xyXG5cclxuLyoqXHJcbiAqIEdlbmVydWplIGxvc293xIUgbGljemLEmSBjYcWCa293aXTEhSB6IHByemVkemlhxYJ1IFttaW4sIG1heF0gKHfFgsSFY3puaWUpLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIERvbG5hIGdyYW5pY2EuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggR8Ozcm5hIGdyYW5pY2EuXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IExvc293YSBsaWN6YmEgY2HFgmtvd2l0YS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByYW5kb21JbnQobWluLCBtYXgpIHtcclxuICBtaW4gPSBNYXRoLmNlaWwobWluKTtcclxuICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9zdGEgKG5pZWtyeXB0b2dyYWZpY3puYSkgZnVua2NqYSBoYXNodWrEhWNhLlxyXG4gKiBVxbx5d2FuYSBkbyB1enlza2FuaWEgcHNldWRvbG9zb3dlaiwgYWxlIGRldGVybWluaXN0eWN6bmVqIHdhcnRvxZtjaSB6IGxpY3pieSAoa29vcmR5bmF0w7N3KS5cclxuICogQHBhcmFtIHtudW1iZXJ9IHNlZWQgWmlhcm5vIChucC4gc2tvbWJpbm93YW5lIGtvb3JkeW5hdHkpLlxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBCZXp6bmFrb3dhIDMyLWJpdG93YSBsaWN6YmEgY2HFgmtvd2l0YS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzaW1wbGVIYXNoKHNlZWQpIHtcclxuICBsZXQgaCA9IHNlZWQgXiAweGRlYWRiZWVmOyAvLyBYT1IgeiB3YXJ0b8WbY2nEhSBwb2N6xIV0a293xIVcclxuICBoID0gTWF0aC5pbXVsKGggXiAoaCA+Pj4gMTYpLCAyMjQ2ODIyNTA3KTtcclxuICBoID0gTWF0aC5pbXVsKGggXiAoaCA+Pj4gMTMpLCAzMjY2NDg5OTA5KTtcclxuICByZXR1cm4gKGggXj0gaCA+Pj4gMTYpID4+PiAwOyAvLyBLb253ZXJzamEgZG8gbGljemJ5IGJleiB6bmFrdSAzMi1iaXRvd2VqXHJcbn1cclxuXHJcbi8vIC0tLSBGdW5rY2plIGtvbG9yw7N3IC0tLVxyXG5cclxuLyoqXHJcbiAqIEdlbmVydWplIGxvc293eSBvZGNpZcWEIHN6YXJvxZtjaSB3IHphZGFueW0gemFrcmVzaWUgamFzbm/Fm2NpICgwLTI1NSkuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5CcmlnaHRuZXNzIE1pbmltYWxuYSBqYXNub8WbxIcuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhCcmlnaHRuZXNzIE1ha3N5bWFsbmEgamFzbm/Fm8SHLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBLb2xvciB3IGZvcm1hY2llIHJnYigpLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbUdyYXkobWluQnJpZ2h0bmVzcywgbWF4QnJpZ2h0bmVzcykge1xyXG4gIGNvbnN0IGJyaWdodG5lc3MgPSByYW5kb21JbnQobWluQnJpZ2h0bmVzcywgbWF4QnJpZ2h0bmVzcyk7XHJcbiAgcmV0dXJuIGByZ2IoJHticmlnaHRuZXNzfSwke2JyaWdodG5lc3N9LCR7YnJpZ2h0bmVzc30pYDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdlbmVydWplIGxvc293eSBvZGNpZcWEIHN6YXJvxZtjaSBkbGEga29yeXRhcnp5LlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbWluQnJpZ2h0bmVzcyBNaW5pbWFsbmEgamFzbm/Fm8SHLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4QnJpZ2h0bmVzcyBNYWtzeW1hbG5hIGphc25vxZvEhy5cclxuICogQHJldHVybnMge3N0cmluZ30gS29sb3IgdyBmb3JtYWNpZSByZ2IoKS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByYW5kb21Db3JyaWRvckdyYXkobWluQnJpZ2h0bmVzcywgbWF4QnJpZ2h0bmVzcykge1xyXG4gIC8vIE1vxbxuYSB1xbx5xIcgdGVqIHNhbWVqIGxvZ2lraSBjbyByYW5kb21HcmF5IGx1YiB1Y3p5bmnEhyBqZSBuaWVjbyBjaWVwbGVqc3p5bWkvY2jFgm9kbmllanN6eW1pXHJcbiAgY29uc3QgYnJpZ2h0bmVzcyA9IHJhbmRvbUludChtaW5CcmlnaHRuZXNzLCBtYXhCcmlnaHRuZXNzKTtcclxuICByZXR1cm4gYHJnYigke2JyaWdodG5lc3N9LCR7YnJpZ2h0bmVzc30sJHticmlnaHRuZXNzfSlgO1xyXG59XHJcblxyXG4vKipcclxuICogRG9zdG9zb3d1amUgamFzbm/Fm8SHIGtvbG9ydSBIRVggKG5wLiAnI1JSR0dCQicpLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGV4Q29sb3IgS29sb3IgdyBmb3JtYWNpZSBIRVguXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBmYWN0b3IgV3Nww7PFgmN6eW5uaWsgamFzbm/Fm2NpICgxLjAgPSBiZXogem1pYW4sIDwxIGNpZW1uaWVqLCA+MSBqYcWbbmllaikuXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IE5vd3kga29sb3IgdyBmb3JtYWNpZSBIRVguXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRqdXN0Q29sb3JCcmlnaHRuZXNzKGhleENvbG9yLCBmYWN0b3IpIHtcclxuICBpZiAoIWhleENvbG9yIHx8IHR5cGVvZiBoZXhDb2xvciAhPT0gJ3N0cmluZycgfHwgaGV4Q29sb3IubGVuZ3RoIDwgNykgcmV0dXJuIGhleENvbG9yOyAvLyBad3LDs8SHLCBqZcWbbGkga29sb3IgamVzdCBuaWVwcmF3aWTFgm93eVxyXG5cclxuICBsZXQgciA9IHBhcnNlSW50KGhleENvbG9yLnNsaWNlKDEsIDMpLCAxNik7XHJcbiAgbGV0IGcgPSBwYXJzZUludChoZXhDb2xvci5zbGljZSgzLCA1KSwgMTYpO1xyXG4gIGxldCBiID0gcGFyc2VJbnQoaGV4Q29sb3Iuc2xpY2UoNSwgNyksIDE2KTtcclxuXHJcbiAgciA9IE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChyICogZmFjdG9yKSkpO1xyXG4gIGcgPSBNYXRoLm1pbigyNTUsIE1hdGgubWF4KDAsIE1hdGgucm91bmQoZyAqIGZhY3RvcikpKTtcclxuICBiID0gTWF0aC5taW4oMjU1LCBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKGIgKiBmYWN0b3IpKSk7XHJcblxyXG4gIGNvbnN0IHJIZXggPSByLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gIGNvbnN0IGdIZXggPSBnLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gIGNvbnN0IGJIZXggPSBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpO1xyXG5cclxuICByZXR1cm4gYCMke3JIZXh9JHtnSGV4fSR7YkhleH1gO1xyXG59XHJcblxyXG4vKipcclxuICogV3lrb251amUgYWxnb3J5dG0gcHJ6ZXN6dWtpd2FuaWEgd3N6ZXJ6IChCRlMpIG5hIHNpYXRjZSBtYXB5LlxyXG4gKiBNb8W8ZSBiecSHIHXFvHl3YW55IGRvIHpuYWpkb3dhbmlhIMWbY2llxbxraSBsdWIgc3ByYXdkemFuaWEgb3NpxIVnYWxub8WbY2kuXHJcbiAqIEBwYXJhbSB7bnVtYmVyW11bXX0gbWFwR3JpZCBTaWF0a2EgbWFweSAoMkQgYXJyYXkgeiB3YXJ0b8WbY2lhbWkga2FmZWxrw7N3KS5cclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WCBQb2N6xIV0a293YSB3c3DDs8WCcnrEmWRuYSBYIGthZmVsa2EuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFkgUG9jesSFdGtvd2Egd3Nww7PFgnJ6xJlkbmEgWSBrYWZlbGthLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gY29scyBMaWN6YmEga29sdW1uIHcgbWFwR3JpZC5cclxuICogQHBhcmFtIHtudW1iZXJ9IHJvd3MgTGljemJhIHJ6xJlkw7N3IHcgbWFwR3JpZC5cclxuICogQHBhcmFtIHtudW1iZXJbXX0gd2Fsa2FibGVUaWxlVmFsdWVzIFRhYmxpY2Egd2FydG/Fm2NpIGthZmVsa8OzdyB1d2HFvGFueWNoIHphIHByemVjaG9kbmllIGRsYSB0ZWdvIEJGUy5cclxuICogQHJldHVybnMge3tyZWFjaGFibGU6IGJvb2xlYW59fSBPYmlla3Qgd3NrYXp1asSFY3ksIGN6eSBCRlMgb3NpxIVnbsSFxYIgb2tyZcWbbG9ueSBjZWwgKHcgdHltIHByenlwYWRrdSwgY3p5IHogcHVua3R1IHN0YXJ0b3dlZ28gbW/FvG5hIGRvasWbxIcgZG8ga29yeXRhcnphL3Bva29qdSkuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGVyZm9ybUJGUyhtYXBHcmlkLCBzdGFydFgsIHN0YXJ0WSwgY29scywgcm93cywgd2Fsa2FibGVUaWxlVmFsdWVzKSB7XHJcbiAgY29uc3QgcXVldWUgPSBbW3N0YXJ0WCwgc3RhcnRZXV07XHJcbiAgY29uc3QgdmlzaXRlZCA9IG5ldyBTZXQoW2Ake3N0YXJ0WH0sJHtzdGFydFl9YF0pO1xyXG4gIGNvbnN0IGRpcmVjdGlvbnMgPSBbXHJcbiAgICBbMCwgLTFdLCAvLyBHw7NyYVxyXG4gICAgWzAsIDFdLCAvLyBEw7PFglxyXG4gICAgWy0xLCAwXSwgLy8gTGV3b1xyXG4gICAgWzEsIDBdLCAvLyBQcmF3b1xyXG4gIF07XHJcbiAgbGV0IHJlYWNoYWJsZSA9IGZhbHNlOyAvLyBGbGFnYSwgY3p5IEJGUyBkb3RhcsWCIGRvIGthZmVsa8OzdyBrb3J5dGFyemEvcG9rb2p1IChqZcWbbGkgc3p1a2FubyBvZCB3aW5keSlcclxuXHJcbiAgLy8gU3ByYXdkemVuaWUgcHVua3R1IHN0YXJ0b3dlZ28gKGplxZtsaSBzenVrYW15IG9zacSFZ2Fsbm/Fm2NpIHogd2luZHkpXHJcbiAgY29uc3Qgc3RhcnRUaWxlVmFsdWUgPSBtYXBHcmlkW3N0YXJ0WV0/LltzdGFydFhdO1xyXG4gIC8vIEN6eSBwdW5rdCBzdGFydG93eSAobnAuIHdpbmRhKSBqZXN0IGp1xbwgbmEgYmV6cGllY3pueW0gdGVyZW5pZSAoZGxhIGNlbHUgc3ByYXdkemVuaWEgb3NpxIVnYWxub8WbY2kpP1xyXG4gIC8vIFcgdHltIGtvbmtyZXRueW0gdcW8eWNpdSAoc3ByYXdkemVuaWUgd2luZHkpIGludGVyZXN1amUgbmFzLCBjenkgeiB3aW5keSBtb8W8bmEgZG90cnplxIcgZG8gS09SWVRBUlpBL1BPS09KVS5cclxuICAvLyBTYW1vIHN0YW5pZSBuYSB3aW5kemllIG5pZSBvem5hY3phIG9zacSFZ2Fsbm/Fm2NpIGJlenBpZWN6bmVqIHN0cmVmeS5cclxuICAvLyBTcHJhd2R6aW15IHPEhXNpYWTDs3cgd2luZHkuXHJcblxyXG4gIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCBbY3VyclgsIGN1cnJZXSA9IHF1ZXVlLnNoaWZ0KCk7XHJcblxyXG4gICAgZm9yIChjb25zdCBbZHgsIGR5XSBvZiBkaXJlY3Rpb25zKSB7XHJcbiAgICAgIGNvbnN0IG5leHRYID0gY3VyclggKyBkeDtcclxuICAgICAgY29uc3QgbmV4dFkgPSBjdXJyWSArIGR5O1xyXG4gICAgICBjb25zdCBrZXkgPSBgJHtuZXh0WH0sJHtuZXh0WX1gO1xyXG5cclxuICAgICAgLy8gU3ByYXdkemVuaWUgZ3JhbmljIGkgY3p5IGp1xbwgb2R3aWVkem9uZVxyXG4gICAgICBpZiAobmV4dFggPj0gMCAmJiBuZXh0WCA8IGNvbHMgJiYgbmV4dFkgPj0gMCAmJiBuZXh0WSA8IHJvd3MgJiYgIXZpc2l0ZWQuaGFzKGtleSkpIHtcclxuICAgICAgICBjb25zdCB0aWxlVmFsdWUgPSBtYXBHcmlkW25leHRZXT8uW25leHRYXTtcclxuICAgICAgICB2aXNpdGVkLmFkZChrZXkpOyAvLyBPZHdpZWR6YW15IG5pZXphbGXFvG5pZSBvZCB0eXB1XHJcblxyXG4gICAgICAgIC8vIEN6eSB0ZW4ga2FmZWxlayBqZXN0IHByemVjaG9kbmkgRExBIFRFR08gQkZTP1xyXG4gICAgICAgIGlmICh3YWxrYWJsZVRpbGVWYWx1ZXMuaW5jbHVkZXModGlsZVZhbHVlKSkge1xyXG4gICAgICAgICAgcXVldWUucHVzaChbbmV4dFgsIG5leHRZXSk7XHJcblxyXG4gICAgICAgICAgLy8gQ3p5IHRlbiBrYWZlbGVrIGplc3QgS09SWVRBUlpFTSBsdWIgUE9ExYFPR8SEIFBPS09KVT9cclxuICAgICAgICAgIC8vIEplxZtsaSB0YWssIHRvIHpuYWxlxbpsacWbbXkgYmV6cGllY3puxIUgc3RyZWbEmSBvc2nEhWdhbG7EhSB6IHB1bmt0dSBzdGFydG93ZWdvLlxyXG4gICAgICAgICAgaWYgKHRpbGVWYWx1ZSA9PT0gVElMRV9DT1JSSURPUiB8fCB0aWxlVmFsdWUgPT09IFRJTEVfUk9PTV9GTE9PUikge1xyXG4gICAgICAgICAgICByZWFjaGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBNb8W8bmEgYnkgdHUgemFrb8WEY3p5xIcgcMSZdGzEmSwgamXFm2xpIGludGVyZXN1amUgbmFzIHR5bGtvIENaWSBqZXN0IG9zacSFZ2FsbmVcclxuICAgICAgICAgICAgLy8gcmV0dXJuIHsgcmVhY2hhYmxlOiB0cnVlIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIFp3csOzxIcgd3luaWsgQkZTIC0gdyB0eW0gcHJ6eXBhZGt1LCBmbGFnxJkgb3NpxIVnYWxub8WbY2kgYmV6cGllY3puZWogc3RyZWZ5XHJcbiAgcmV0dXJuIHsgcmVhY2hhYmxlIH07XHJcbn1cclxuXHJcbi8vIC4uLiAoaW5uZSBuYXJ6xJlkemlhIG1hcHksIGplxZtsaSBpc3RuaWVqxIUpXHJcbiIsIi8vIHNyYy9tYXAvbWFwUmVuZGVyZXIuanNcclxuXHJcbmltcG9ydCB7IFRJTEVfV0FMTCwgVElMRV9DT1JSSURPUiwgVElMRV9ST09NX0ZMT09SLCBUSUxFX0xJRlQgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG4vLyBSZW1vdmVkIHVudXNlZCByYW5kb21HcmF5LCByYW5kb21Db3JyaWRvckdyYXkgaW1wb3J0c1xyXG5pbXBvcnQgeyBhZGp1c3RDb2xvckJyaWdodG5lc3MsIHNpbXBsZUhhc2ggfSBmcm9tICcuLi91dGlscy9tYXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1hcFJlbmRlcmVyIHtcclxuICBjb25zdHJ1Y3Rvcih0aWxlU2l6ZSkge1xyXG4gICAgdGhpcy50aWxlU2l6ZSA9IHRpbGVTaXplO1xyXG4gICAgLy8gQ2FjaGUgaXMgbGVzcyBjcml0aWNhbCBub3cgZm9yIGJhc2UgdGlsZXMgYnV0IHN0aWxsIHVzZWZ1bCBmb3Igcm9vbSBmbG9vcnMvb3RoZXIgZWxlbWVudHNcclxuICAgIHRoaXMudGlsZUNvbG9ycyA9IHt9O1xyXG4gICAgdGhpcy5iYXNlV2FsbENvbG9yID0gJyMxYzFlMjInOyAvLyBTaW5nbGUsIGNvbnNpc3RlbnQgd2FsbCBjb2xvclxyXG4gICAgdGhpcy5iYXNlQ29ycmlkb3JDb2xvciA9ICcjYTBhMGEwJzsgLy8gU2luZ2xlLCBjb25zaXN0ZW50IGNvcnJpZG9yIGNvbG9yXHJcbiAgICB0aGlzLmJhc2VSb29tRmxvb3JDb2xvciA9ICcjYzBjMGMwJzsgLy8gRGVmYXVsdCByb29tIGZsb29yIChvdmVyd3JpdHRlbiBieSBkcmF3Um9vbURldGFpbHMpXHJcbiAgICB0aGlzLmxpZnRDb2xvciA9ICcjNzA3MDgwJzsgLy8gQ29uc2lzdGVudCBsaWZ0IGNvbG9yXHJcbiAgICB0aGlzLmVycm9yQ29sb3IgPSAnI2ZmMDBmZic7IC8vIEVycm9yIGNvbG9yXHJcbiAgfVxyXG5cclxuICAvLyBSZXNldCBjb2xvciBjYWNoZSB3aGVuIGEgbmV3IG1hcCBpcyBkcmF3biAoY2FsbGVkIGJ5IFByb2NlZHVyYWxNYXApXHJcbiAgcmVzZXRDb2xvckNhY2hlKCkge1xyXG4gICAgdGhpcy50aWxlQ29sb3JzID0ge307XHJcbiAgfVxyXG5cclxuICAvKiogR2V0IG9yIGdlbmVyYXRlIHRoZSBjb2xvciBmb3IgYSBzcGVjaWZpYyB0aWxlICovXHJcbiAgZ2V0VGlsZUNvbG9yKHIsIGMsIHRpbGVWYWx1ZSwgcm9vbXMpIHtcclxuICAgIC8vIE5PVEU6IFdlIHN0aWxsIHVzZSB0aGUgY2FjaGUga2V5LCBtYWlubHkgdXNlZnVsIGlmIHJvb21zIG5lZWQgc3BlY2lmaWNcclxuICAgIC8vIHRpbGUgY29sb3JzIG5vdCBoYW5kbGVkIGJ5IGRyYXdSb29tRGV0YWlscyBsYXRlciwgb3IgaWYgd2UgYWRkIG1vcmUgY29tcGxleCBsb2dpYy5cclxuICAgIC8vIEZvciB0aGUgYmFzZSB0aWxlcyBtb2RpZmllZCBiZWxvdywgaXQncyBsZXNzIGVzc2VudGlhbC5cclxuICAgIGNvbnN0IGtleSA9IGAke3J9LCR7Y31gO1xyXG4gICAgaWYgKHRoaXMudGlsZUNvbG9yc1trZXldKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRpbGVDb2xvcnNba2V5XTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY29sb3I7XHJcblxyXG4gICAgLy8gLS0tIFJFTU9WRUQgcGVyLXRpbGUgaGFzaC92YXJpYXRpb24gZm9yIGJhc2UgdHlwZXMgLS0tXHJcbiAgICAvLyBjb25zdCBoYXNoID0gc2ltcGxlSGFzaChyICogMTAwMCArIGMpO1xyXG4gICAgLy8gY29uc3QgdmFyaWF0aW9uID0gKChoYXNoICUgMjEpIC0gMTApIC8gMTAwO1xyXG5cclxuICAgIHN3aXRjaCAodGlsZVZhbHVlKSB7XHJcbiAgICAgIGNhc2UgVElMRV9XQUxMOlxyXG4gICAgICAgIC8vIFVzZSB0aGUgc2luZ2xlLCBjb25zaXN0ZW50IGJhc2UgY29sb3IgZGlyZWN0bHlcclxuICAgICAgICBjb2xvciA9IHRoaXMuYmFzZVdhbGxDb2xvcjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBUSUxFX0NPUlJJRE9SOlxyXG4gICAgICAgIC8vIFVzZSB0aGUgc2luZ2xlLCBjb25zaXN0ZW50IGJhc2UgY29sb3IgZGlyZWN0bHlcclxuICAgICAgICBjb2xvciA9IHRoaXMuYmFzZUNvcnJpZG9yQ29sb3I7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVElMRV9ST09NX0ZMT09SOlxyXG4gICAgICAgIC8vIFVzZSB0aGUgY29uc2lzdGVudCBiYXNlIHJvb20gZmxvb3IgY29sb3IuXHJcbiAgICAgICAgLy8gVGhpcyB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IGRyYXdSb29tRGV0YWlscyBmb3IgYWN0dWFsIHJvb20gdGlsZXMuXHJcbiAgICAgICAgLy8gSXQgc2VydmVzIGFzIHRoZSBjb2xvciBpZiBhIFRJTEVfUk9PTV9GTE9PUiBzb21laG93IGV4aXN0cyBvdXRzaWRlIGEgZGVmaW5lZCByb29tLlxyXG4gICAgICAgIGNvbG9yID0gdGhpcy5iYXNlUm9vbUZsb29yQ29sb3I7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVElMRV9MSUZUOlxyXG4gICAgICAgIC8vIFVzZSB0aGUgY29uc2lzdGVudCBsaWZ0IGNvbG9yXHJcbiAgICAgICAgY29sb3IgPSB0aGlzLmxpZnRDb2xvcjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBjb2xvciA9IHRoaXMuZXJyb3JDb2xvcjsgLy8gRXJyb3IgY29sb3JcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGlsbCBjYWNoZSB0aGUgcmVzdWx0XHJcbiAgICB0aGlzLnRpbGVDb2xvcnNba2V5XSA9IGNvbG9yO1xyXG4gICAgcmV0dXJuIGNvbG9yO1xyXG4gIH1cclxuXHJcbiAgLyoqIE1haW4gZHJhd2luZyBmdW5jdGlvbiAqL1xyXG4gIGRyYXcoY3R4LCBtYXBEYXRhLCBib29rSW1hZ2UgPSBudWxsKSB7XHJcbiAgICBjb25zdCB7IG1hcCwgcm9vbXMsIGJvb2tzLCBsaWZ0UG9zaXRpb24sIG9mZnNldFgsIG9mZnNldFksIGNvbHMsIHJvd3MgfSA9IG1hcERhdGE7XHJcblxyXG4gICAgLy8gUm91bmQgb2Zmc2V0cyBmb3Igc2hhcnBuZXNzXHJcbiAgICBjb25zdCBjdXJyZW50T2Zmc2V0WCA9IE1hdGguZmxvb3Iob2Zmc2V0WCk7XHJcbiAgICBjb25zdCBjdXJyZW50T2Zmc2V0WSA9IE1hdGguZmxvb3Iob2Zmc2V0WSk7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIHZpc2libGUgdGlsZXMgd2l0aCBhIHNtYWxsIGJ1ZmZlclxyXG4gICAgY29uc3Qgc3RhcnRDb2wgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKC1jdXJyZW50T2Zmc2V0WCAvIHRoaXMudGlsZVNpemUpIC0gMSk7XHJcbiAgICBjb25zdCBlbmRDb2wgPSBNYXRoLm1pbihcclxuICAgICAgY29scyxcclxuICAgICAgTWF0aC5jZWlsKCgtY3VycmVudE9mZnNldFggKyBjdHguY2FudmFzLndpZHRoKSAvIHRoaXMudGlsZVNpemUpICsgMVxyXG4gICAgKTtcclxuICAgIGNvbnN0IHN0YXJ0Um93ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcigtY3VycmVudE9mZnNldFkgLyB0aGlzLnRpbGVTaXplKSAtIDEpO1xyXG4gICAgY29uc3QgZW5kUm93ID0gTWF0aC5taW4oXHJcbiAgICAgIHJvd3MsXHJcbiAgICAgIE1hdGguY2VpbCgoLWN1cnJlbnRPZmZzZXRZICsgY3R4LmNhbnZhcy5oZWlnaHQpIC8gdGhpcy50aWxlU2l6ZSkgKyAxXHJcbiAgICApO1xyXG5cclxuICAgIGN0eC5zYXZlKCk7IC8vIFNhdmUgY29udGV4dCBzdGF0ZVxyXG5cclxuICAgIC8vIDEuIERyYXcgYmFzZSB0aWxlcyAod2FsbHMsIGNvcnJpZG9ycywgZGVmYXVsdCBmbG9vciwgbGlmdCBiYXNlKVxyXG4gICAgLy8gICAgVGhlc2Ugd2lsbCBub3cgdXNlIHRoZSBjb25zaXN0ZW50IGNvbG9ycyBmcm9tIGdldFRpbGVDb2xvci5cclxuICAgIHRoaXMuZHJhd0Jhc2VUaWxlcyhcclxuICAgICAgY3R4LFxyXG4gICAgICBtYXAsXHJcbiAgICAgIHJvb21zLFxyXG4gICAgICBjdXJyZW50T2Zmc2V0WCxcclxuICAgICAgY3VycmVudE9mZnNldFksXHJcbiAgICAgIGNvbHMsXHJcbiAgICAgIHJvd3MsXHJcbiAgICAgIHN0YXJ0Um93LFxyXG4gICAgICBlbmRSb3csXHJcbiAgICAgIHN0YXJ0Q29sLFxyXG4gICAgICBlbmRDb2xcclxuICAgICk7XHJcblxyXG4gICAgLy8gMi4gRHJhdyBzcGVjaWZpYyByb29tIGZsb29ycyBhbmQgZGVjb3JhdGlvbnNcclxuICAgIC8vICAgIFRoaXMgZnVuY3Rpb24gV0lMTCBhcHBseSBzcGVjaWZpYyBjb2xvcnMgYmFzZWQgb24gcm9vbSB0eXBlLFxyXG4gICAgLy8gICAgYW5kIHN1YnRsZSBwZXItdGlsZSB2YXJpYXRpb25zIFdJVEhJTiB0aGUgcm9vbSBmbG9vci5cclxuICAgIHRoaXMuZHJhd1Jvb21EZXRhaWxzKFxyXG4gICAgICBjdHgsXHJcbiAgICAgIG1hcCxcclxuICAgICAgcm9vbXMsXHJcbiAgICAgIGxpZnRQb3NpdGlvbixcclxuICAgICAgY3VycmVudE9mZnNldFgsXHJcbiAgICAgIGN1cnJlbnRPZmZzZXRZLFxyXG4gICAgICBjb2xzLFxyXG4gICAgICByb3dzLFxyXG4gICAgICBzdGFydFJvdyxcclxuICAgICAgZW5kUm93LFxyXG4gICAgICBzdGFydENvbCxcclxuICAgICAgZW5kQ29sXHJcbiAgICApO1xyXG5cclxuICAgIC8vIDMuIERyYXcgbGlmdCBkZXRhaWxzIChvdmVybGF5aW5nIHJvb20gZmxvb3JzIGlmIG5lZWRlZClcclxuICAgIHRoaXMuZHJhd0xpZnREZXRhaWxzKGN0eCwgbGlmdFBvc2l0aW9uLCBjdXJyZW50T2Zmc2V0WCwgY3VycmVudE9mZnNldFkpO1xyXG5cclxuICAgIC8vIDQuIERyYXcgYm9va3NcclxuICAgIHRoaXMuZHJhd0Jvb2tzKGN0eCwgYm9va3MsIGN1cnJlbnRPZmZzZXRYLCBjdXJyZW50T2Zmc2V0WSwgYm9va0ltYWdlKTtcclxuXHJcbiAgICBjdHgucmVzdG9yZSgpOyAvLyBSZXN0b3JlIGNvbnRleHQgc3RhdGVcclxuICB9XHJcblxyXG4gIC8qKiBEcmF3IGJhc2UgdGlsZXMgKi9cclxuICBkcmF3QmFzZVRpbGVzKGN0eCwgbWFwLCByb29tcywgb2Zmc2V0WCwgb2Zmc2V0WSwgY29scywgcm93cywgc3RhcnRSb3csIGVuZFJvdywgc3RhcnRDb2wsIGVuZENvbCkge1xyXG4gICAgY3R4LnNhdmUoKTtcclxuICAgIGN0eC5zaGFkb3dDb2xvciA9ICd0cmFuc3BhcmVudCc7XHJcblxyXG4gICAgY29uc3Qgd2FsbEVkZ2VDb2xvckRhcmsgPSAnIzM4MzgzOCc7XHJcbiAgICBjb25zdCB3YWxsRWRnZUNvbG9yTGlnaHQgPSAnIzYwNjA2MCc7XHJcbiAgICBjb25zdCB3YWxsVG9wRWRnZUNvbG9yID0gJyM3NTc1NzUnO1xyXG5cclxuICAgIGZvciAobGV0IHIgPSBzdGFydFJvdzsgciA8IGVuZFJvdzsgcisrKSB7XHJcbiAgICAgIGZvciAobGV0IGMgPSBzdGFydENvbDsgYyA8IGVuZENvbDsgYysrKSB7XHJcbiAgICAgICAgY29uc3QgdGlsZVZhbHVlID0gbWFwW3JdPy5bY107XHJcbiAgICAgICAgaWYgKHRpbGVWYWx1ZSA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NyZWVuWCA9IE1hdGguZmxvb3IoYyAqIHRoaXMudGlsZVNpemUgKyBvZmZzZXRYKTtcclxuICAgICAgICBjb25zdCBzY3JlZW5ZID0gTWF0aC5mbG9vcihyICogdGhpcy50aWxlU2l6ZSArIG9mZnNldFkpO1xyXG4gICAgICAgIC8vIEdldCB0aGUgY29sb3IgLSBub3cgY29uc2lzdGVudCBmb3Igd2FsbHMvY29ycmlkb3JzL2RlZmF1bHQgZmxvb3IvbGlmdFxyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5nZXRUaWxlQ29sb3IociwgYywgdGlsZVZhbHVlLCByb29tcyk7XHJcblxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICBjdHguZmlsbFJlY3Qoc2NyZWVuWCwgc2NyZWVuWSwgdGhpcy50aWxlU2l6ZSwgdGhpcy50aWxlU2l6ZSk7XHJcblxyXG4gICAgICAgIC8vIC0tLSBXYWxsIEVkZ2VzIGFuZCBOb2lzZSAoU3RpbGwgQXBwbGllZCBmb3IgRGV0YWlsKSAtLS1cclxuICAgICAgICBpZiAodGlsZVZhbHVlID09PSBUSUxFX1dBTEwpIHtcclxuICAgICAgICAgIC8vIE5vaXNlIHRleHR1cmUgKGFwcGxpZWQgT04gVE9QIG9mIHRoZSBjb25zaXN0ZW50IGJhc2UgY29sb3IpXHJcbiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMC4wNiknO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KFxyXG4gICAgICAgICAgICAgIHNjcmVlblggKyBNYXRoLnJhbmRvbSgpICogdGhpcy50aWxlU2l6ZSxcclxuICAgICAgICAgICAgICBzY3JlZW5ZICsgTWF0aC5yYW5kb20oKSAqIHRoaXMudGlsZVNpemUsXHJcbiAgICAgICAgICAgICAgMSxcclxuICAgICAgICAgICAgICAxXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gRWRnZSByZW5kZXJpbmcgKGFwcGxpZWQgT04gVE9QKVxyXG4gICAgICAgICAgY29uc3QgZWRnZVNpemUgPSAyO1xyXG4gICAgICAgICAgaWYgKHIgPiAwICYmIG1hcFtyIC0gMV0/LltjXSAhPT0gVElMRV9XQUxMKSB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB3YWxsVG9wRWRnZUNvbG9yO1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NyZWVuWCwgc2NyZWVuWSwgdGhpcy50aWxlU2l6ZSwgZWRnZVNpemUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHIgPCByb3dzIC0gMSAmJiBtYXBbciArIDFdPy5bY10gIT09IFRJTEVfV0FMTCkge1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gd2FsbEVkZ2VDb2xvckRhcms7XHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdChzY3JlZW5YLCBzY3JlZW5ZICsgdGhpcy50aWxlU2l6ZSAtIGVkZ2VTaXplLCB0aGlzLnRpbGVTaXplLCBlZGdlU2l6ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoYyA+IDAgJiYgbWFwW3JdPy5bYyAtIDFdICE9PSBUSUxFX1dBTEwpIHtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHdhbGxFZGdlQ29sb3JMaWdodDtcclxuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHNjcmVlblgsIHNjcmVlblkgKyBlZGdlU2l6ZSwgZWRnZVNpemUsIHRoaXMudGlsZVNpemUgLSBlZGdlU2l6ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoYyA8IGNvbHMgLSAxICYmIG1hcFtyXT8uW2MgKyAxXSAhPT0gVElMRV9XQUxMKSB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB3YWxsRWRnZUNvbG9yRGFyaztcclxuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KFxyXG4gICAgICAgICAgICAgIHNjcmVlblggKyB0aGlzLnRpbGVTaXplIC0gZWRnZVNpemUsXHJcbiAgICAgICAgICAgICAgc2NyZWVuWSArIGVkZ2VTaXplLFxyXG4gICAgICAgICAgICAgIGVkZ2VTaXplLFxyXG4gICAgICAgICAgICAgIHRoaXMudGlsZVNpemUgLSBlZGdlU2l6ZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gQ29ybmVyIGxvZ2ljIChyZW1haW5zIHRoZSBzYW1lKVxyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICByID4gMCAmJlxyXG4gICAgICAgICAgICBjID4gMCAmJlxyXG4gICAgICAgICAgICBtYXBbciAtIDFdPy5bY10gIT09IFRJTEVfV0FMTCAmJlxyXG4gICAgICAgICAgICBtYXBbcl0/LltjIC0gMV0gIT09IFRJTEVfV0FMTCAmJlxyXG4gICAgICAgICAgICBtYXBbciAtIDFdPy5bYyAtIDFdICE9PSBUSUxFX1dBTExcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gd2FsbEVkZ2VDb2xvckxpZ2h0O1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NyZWVuWCwgc2NyZWVuWSwgZWRnZVNpemUsIGVkZ2VTaXplKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgciA+IDAgJiZcclxuICAgICAgICAgICAgYyA8IGNvbHMgLSAxICYmXHJcbiAgICAgICAgICAgIG1hcFtyIC0gMV0/LltjXSAhPT0gVElMRV9XQUxMICYmXHJcbiAgICAgICAgICAgIG1hcFtyXT8uW2MgKyAxXSAhPT0gVElMRV9XQUxMICYmXHJcbiAgICAgICAgICAgIG1hcFtyIC0gMV0/LltjICsgMV0gIT09IFRJTEVfV0FMTFxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB3YWxsVG9wRWRnZUNvbG9yO1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NyZWVuWCArIHRoaXMudGlsZVNpemUgLSBlZGdlU2l6ZSwgc2NyZWVuWSwgZWRnZVNpemUsIGVkZ2VTaXplKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIC4uLiBwb3RlbnRpYWxseSBvdGhlciBjb3JuZXJzXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aWxlVmFsdWUgPT09IFRJTEVfQ09SUklET1IpIHtcclxuICAgICAgICAgIC8vIENvcnJpZG9yIE5vaXNlIChhcHBsaWVkIE9OIFRPUCBvZiB0aGUgY29uc2lzdGVudCBiYXNlIGNvbG9yKVxyXG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpJztcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdChcclxuICAgICAgICAgICAgICBzY3JlZW5YICsgTWF0aC5yYW5kb20oKSAqIHRoaXMudGlsZVNpemUsXHJcbiAgICAgICAgICAgICAgc2NyZWVuWSArIE1hdGgucmFuZG9tKCkgKiB0aGlzLnRpbGVTaXplLFxyXG4gICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgMVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBOT1RFOiBObyBzcGVjaWFsIGRyYXdpbmcgbmVlZGVkIGhlcmUgZm9yIFRJTEVfUk9PTV9GTE9PUiBvciBUSUxFX0xJRlRcclxuICAgICAgICAvLyBhcyBkcmF3Um9vbURldGFpbHMgYW5kIGRyYXdMaWZ0RGV0YWlscyBoYW5kbGUgdGhlaXIgc3BlY2lmaWNzLlxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjdHgucmVzdG9yZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqIERyYXcgc3BlY2lmaWMgcm9vbSBmbG9vcnMgYW5kIGRlY29yYXRpb25zICovXHJcbiAgZHJhd1Jvb21EZXRhaWxzKFxyXG4gICAgY3R4LFxyXG4gICAgbWFwLFxyXG4gICAgcm9vbXMsXHJcbiAgICBsaWZ0UG9zaXRpb24sXHJcbiAgICBvZmZzZXRYLFxyXG4gICAgb2Zmc2V0WSxcclxuICAgIGNvbHMsXHJcbiAgICByb3dzLFxyXG4gICAgc3RhcnRSb3csXHJcbiAgICBlbmRSb3csXHJcbiAgICBzdGFydENvbCxcclxuICAgIGVuZENvbFxyXG4gICkge1xyXG4gICAgY3R4LnNhdmUoKTtcclxuICAgIGN0eC5zaGFkb3dDb2xvciA9ICd0cmFuc3BhcmVudCc7XHJcblxyXG4gICAgZm9yIChjb25zdCByb29tIG9mIHJvb21zKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICByb29tLmNvbCArIHJvb20ud2lkdGggPCBzdGFydENvbCB8fFxyXG4gICAgICAgIHJvb20uY29sID4gZW5kQ29sIHx8XHJcbiAgICAgICAgcm9vbS5yb3cgKyByb29tLmhlaWdodCA8IHN0YXJ0Um93IHx8XHJcbiAgICAgICAgcm9vbS5yb3cgPiBlbmRSb3dcclxuICAgICAgKVxyXG4gICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgY29uc3Qgcm9vbVNjcmVlblggPSBNYXRoLmZsb29yKHJvb20uY29sICogdGhpcy50aWxlU2l6ZSArIG9mZnNldFgpO1xyXG4gICAgICBjb25zdCByb29tU2NyZWVuWSA9IE1hdGguZmxvb3Iocm9vbS5yb3cgKiB0aGlzLnRpbGVTaXplICsgb2Zmc2V0WSk7XHJcbiAgICAgIGNvbnN0IHJvb21TY3JlZW5XID0gcm9vbS53aWR0aCAqIHRoaXMudGlsZVNpemU7XHJcbiAgICAgIGNvbnN0IHJvb21TY3JlZW5IID0gcm9vbS5oZWlnaHQgKiB0aGlzLnRpbGVTaXplO1xyXG5cclxuICAgICAgLy8gLS0tIERldGVybWluZSBGbG9vciBDb2xvciBCYXNlZCBvbiBSb29tIFR5cGUgKFRoaXMgbG9naWMgcmVtYWlucykgLS0tXHJcbiAgICAgIGxldCBmbG9vckNvbG9yID0gdGhpcy5iYXNlUm9vbUZsb29yQ29sb3I7IC8vIFN0YXJ0IHdpdGggZGVmYXVsdFxyXG4gICAgICAvLyBVc2UgYSBzZWVkIHRoYXQgY2hhbmdlcyBwZXIgcm9vbSBidXQgaXMgY29uc2lzdGVudCBmb3IgdGhhdCByb29tXHJcbiAgICAgIC8vIEFkZGVkIGZsb29yTnVtYmVyIGRlcGVuZGVuY3kgaWYgYXZhaWxhYmxlIGluIGB0aGlzYCwgb3RoZXJ3aXNlIHVzZSByb29tLmlkXHJcbiAgICAgIGNvbnN0IGZsb29yTnVtID0gdHlwZW9mIHRoaXMuZmxvb3JOdW1iZXIgPT09ICdudW1iZXInID8gdGhpcy5mbG9vck51bWJlciA6IDA7XHJcbiAgICAgIGxldCByb29tU2VlZCA9IHNpbXBsZUhhc2gocm9vbS5pZCkgKyBmbG9vck51bSAqIDEwMDsgLy8gVXNlIGhhc2ggb2YgSUQgZm9yIG1vcmUgdmFyaWF0aW9uXHJcblxyXG4gICAgICBzd2l0Y2ggKHJvb20udHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ2NsYXNzcm9vbSc6XHJcbiAgICAgICAgICBmbG9vckNvbG9yID0gYWRqdXN0Q29sb3JCcmlnaHRuZXNzKCcjYTBjOGUwJywgMC45ICsgKHNpbXBsZUhhc2gocm9vbVNlZWQpICUgMTEpIC8gMTAwKTtcclxuICAgICAgICAgIGJyZWFrOyAvLyBCbHVpc2hcclxuICAgICAgICBjYXNlICdvZmZpY2UnOlxyXG4gICAgICAgICAgZmxvb3JDb2xvciA9IGFkanVzdENvbG9yQnJpZ2h0bmVzcyhcclxuICAgICAgICAgICAgJyNmMGU4YzAnLFxyXG4gICAgICAgICAgICAwLjkgKyAoc2ltcGxlSGFzaChyb29tU2VlZCArIDEpICUgMTEpIC8gMTAwXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgYnJlYWs7IC8vIEJlaWdlXHJcbiAgICAgICAgY2FzZSAnbGlicmFyeSc6XHJcbiAgICAgICAgICBmbG9vckNvbG9yID0gYWRqdXN0Q29sb3JCcmlnaHRuZXNzKFxyXG4gICAgICAgICAgICAnI2Q4YzBhOCcsXHJcbiAgICAgICAgICAgIDAuOSArIChzaW1wbGVIYXNoKHJvb21TZWVkICsgMikgJSAxMSkgLyAxMDBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBicmVhazsgLy8gV29vZGVuXHJcbiAgICAgICAgY2FzZSAnZ3ltJzpcclxuICAgICAgICAgIGZsb29yQ29sb3IgPSBhZGp1c3RDb2xvckJyaWdodG5lc3MoXHJcbiAgICAgICAgICAgICcjYjBkMGIwJyxcclxuICAgICAgICAgICAgMC45ICsgKHNpbXBsZUhhc2gocm9vbVNlZWQgKyAzKSAlIDExKSAvIDEwMFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGJyZWFrOyAvLyBHcmVlbmlzaFxyXG4gICAgICAgIGNhc2UgJ2xhYic6XHJcbiAgICAgICAgICBmbG9vckNvbG9yID0gYWRqdXN0Q29sb3JCcmlnaHRuZXNzKFxyXG4gICAgICAgICAgICAnI2UwZTBmZicsXHJcbiAgICAgICAgICAgIDAuOSArIChzaW1wbGVIYXNoKHJvb21TZWVkICsgNCkgJSAxMSkgLyAxMDBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBicmVhazsgLy8gTGlnaHQgYmx1ZS1wdXJwbGVcclxuICAgICAgICBjYXNlICdzdG9yYWdlJzpcclxuICAgICAgICAgIGZsb29yQ29sb3IgPSBhZGp1c3RDb2xvckJyaWdodG5lc3MoXHJcbiAgICAgICAgICAgICcjYjBhMDkwJyxcclxuICAgICAgICAgICAgMC45ICsgKHNpbXBsZUhhc2gocm9vbVNlZWQgKyA1KSAlIDExKSAvIDEwMFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGJyZWFrOyAvLyBHcmF5LWJyb3duXHJcbiAgICAgICAgY2FzZSAndXRpbGl0eSc6XHJcbiAgICAgICAgICBmbG9vckNvbG9yID0gYWRqdXN0Q29sb3JCcmlnaHRuZXNzKFxyXG4gICAgICAgICAgICAnI2IwYjBiMCcsXHJcbiAgICAgICAgICAgIDAuOSArIChzaW1wbGVIYXNoKHJvb21TZWVkICsgNikgJSAxMSkgLyAxMDBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBicmVhazsgLy8gR3JheSBjb25jcmV0ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAtLS0gRHJhdyBSb29tIEZsb29yIChUaWxlIGJ5IFRpbGUgd2l0aGluIFZpc2libGUgQXJlYSkgLS0tXHJcbiAgICAgIGZvciAoXHJcbiAgICAgICAgbGV0IHIgPSBNYXRoLm1heChyb29tLnJvdywgc3RhcnRSb3cpO1xyXG4gICAgICAgIHIgPCBNYXRoLm1pbihyb29tLnJvdyArIHJvb20uaGVpZ2h0LCBlbmRSb3cpO1xyXG4gICAgICAgIHIrK1xyXG4gICAgICApIHtcclxuICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgbGV0IGMgPSBNYXRoLm1heChyb29tLmNvbCwgc3RhcnRDb2wpO1xyXG4gICAgICAgICAgYyA8IE1hdGgubWluKHJvb20uY29sICsgcm9vbS53aWR0aCwgZW5kQ29sKTtcclxuICAgICAgICAgIGMrK1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3QgdGlsZVZhbHVlID0gbWFwW3JdPy5bY107XHJcbiAgICAgICAgICAvLyBPbmx5IGRyYXcgaWYgaXQncyBhY3R1YWxseSBhIFRJTEVfUk9PTV9GTE9PUlxyXG4gICAgICAgICAgaWYgKHRpbGVWYWx1ZSA9PT0gVElMRV9ST09NX0ZMT09SKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjcmVlblggPSBNYXRoLmZsb29yKGMgKiB0aGlzLnRpbGVTaXplICsgb2Zmc2V0WCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjcmVlblkgPSBNYXRoLmZsb29yKHIgKiB0aGlzLnRpbGVTaXplICsgb2Zmc2V0WSk7XHJcblxyXG4gICAgICAgICAgICAvLyAtLS0gU3VidGxlIFBlci1UaWxlIFZhcmlhdGlvbiBXSVRISU4gUm9vbSBGbG9vciAoS2VwdCBmb3IgdGV4dHVyZSkgLS0tXHJcbiAgICAgICAgICAgIGNvbnN0IHRpbGVIYXNoID0gc2ltcGxlSGFzaChyICogNTAwMCArIGMgKiAzICsgcm9vbVNlZWQpOyAvLyBJbmNsdWRlIHJvb21TZWVkXHJcbiAgICAgICAgICAgIGNvbnN0IHZhcmlhdGlvbiA9ICgodGlsZUhhc2ggJSAxMSkgLSA1KSAvIDEwMDsgLy8gVmFyaWF0aW9uIC0wLjA1IHRvICswLjA1XHJcbiAgICAgICAgICAgIGNvbnN0IGJyaWdodG5lc3NGYWN0b3IgPSAwLjk4ICsgdmFyaWF0aW9uO1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYWRqdXN0Q29sb3JCcmlnaHRuZXNzKGZsb29yQ29sb3IsIGJyaWdodG5lc3NGYWN0b3IpO1xyXG4gICAgICAgICAgICAvLyAtLS0gRW5kIFBlci1UaWxlIFZhcmlhdGlvbiAtLS1cclxuXHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdChzY3JlZW5YLCBzY3JlZW5ZLCB0aGlzLnRpbGVTaXplLCB0aGlzLnRpbGVTaXplKTtcclxuXHJcbiAgICAgICAgICAgIC8vIE9wdGlvbmFsIGZsb29yIHRleHR1cmUgKHJlbWFpbnMgdGhlIHNhbWUpXHJcbiAgICAgICAgICAgIGlmIChyb29tLnR5cGUgPT09ICdsYWInKSB7XHJcbiAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMCwwLDAsMC4wOCknO1xyXG4gICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAxO1xyXG4gICAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KHNjcmVlblggKyAwLjUsIHNjcmVlblkgKyAwLjUsIHRoaXMudGlsZVNpemUgLSAxLCB0aGlzLnRpbGVTaXplIC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIC0tLSBEcmF3IERlY29yYXRpb25zIChyZW1haW5zIHRoZSBzYW1lKSAtLS1cclxuICAgICAgdGhpcy5kcmF3Um9vbURlY29yYXRpb25zKGN0eCwgcm9vbSwgcm9vbVNjcmVlblgsIHJvb21TY3JlZW5ZLCByb29tU2NyZWVuVywgcm9vbVNjcmVlbkgpO1xyXG4gICAgfVxyXG4gICAgY3R4LnJlc3RvcmUoKTtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBkcmF3TGlmdERldGFpbHMsIGRyYXdSb29tRGVjb3JhdGlvbnMsIGRyYXdCb29rcyByZW1haW4gdW5jaGFuZ2VkIC0tLVxyXG4gIC8vIC4uLiAoa2VlcCB0aGUgZXhpc3RpbmcgY29kZSBmb3IgdGhlc2UgbWV0aG9kcykgLi4uXHJcbiAgLyoqIE5hcnlzdWogZGV0YWxlIHdpbmR5IChwcnp5Y2lzaywga29udHVyKSAqL1xyXG4gIGRyYXdMaWZ0RGV0YWlscyhjdHgsIGxpZnRQb3NpdGlvbiwgb2Zmc2V0WCwgb2Zmc2V0WSkge1xyXG4gICAgaWYgKCFsaWZ0UG9zaXRpb24pIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBzY3JlZW5YID0gTWF0aC5mbG9vcihsaWZ0UG9zaXRpb24udGlsZVggKiB0aGlzLnRpbGVTaXplICsgb2Zmc2V0WCk7XHJcbiAgICBjb25zdCBzY3JlZW5ZID0gTWF0aC5mbG9vcihsaWZ0UG9zaXRpb24udGlsZVkgKiB0aGlzLnRpbGVTaXplICsgb2Zmc2V0WSk7XHJcblxyXG4gICAgLy8gU3ByYXdkxbosIGN6eSB3aW5kYSBqZXN0IHdpZG9jem5hIHByemVkIHJ5c293YW5pZW0gZGV0YWxpXHJcbiAgICBpZiAoXHJcbiAgICAgIHNjcmVlblggKyB0aGlzLnRpbGVTaXplIDwgMCB8fFxyXG4gICAgICBzY3JlZW5YID4gY3R4LmNhbnZhcy53aWR0aCB8fFxyXG4gICAgICBzY3JlZW5ZICsgdGhpcy50aWxlU2l6ZSA8IDAgfHxcclxuICAgICAgc2NyZWVuWSA+IGN0eC5jYW52YXMuaGVpZ2h0XHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGN0eC5zYXZlKCk7XHJcbiAgICBjdHguc2hhZG93Q29sb3IgPSAndHJhbnNwYXJlbnQnOyAvLyBCcmFrIGNpZW5pYSBkbGEgZGV0YWxpIHdpbmR5XHJcblxyXG4gICAgLy8gV3lyYcW6bmllanN6YSByYW1rYSB3aW5keVxyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gJyNkMGQwZDAnOyAvLyBKYXNuYSByYW1rYVxyXG4gICAgY3R4LmxpbmVXaWR0aCA9IDE7XHJcbiAgICBjdHguc3Ryb2tlUmVjdChzY3JlZW5YICsgMC41LCBzY3JlZW5ZICsgMC41LCB0aGlzLnRpbGVTaXplIC0gMSwgdGhpcy50aWxlU2l6ZSAtIDEpO1xyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gJyM0MDQwNDAnOyAvLyBDaWVtbnkgd2V3bsSZdHJ6bnkgY2llxYRcclxuICAgIGN0eC5zdHJva2VSZWN0KHNjcmVlblggKyAxLjUsIHNjcmVlblkgKyAxLjUsIHRoaXMudGlsZVNpemUgLSAzLCB0aGlzLnRpbGVTaXplIC0gMyk7XHJcblxyXG4gICAgLy8gVWxlcHN6b255IHByenljaXNrXHJcbiAgICBjb25zdCBidXR0b25SYWRpdXMgPSB0aGlzLnRpbGVTaXplICogMC4xNTsgLy8gVHJvY2jEmSB3acSZa3N6eVxyXG4gICAgY29uc3QgYnV0dG9uWCA9IHNjcmVlblggKyB0aGlzLnRpbGVTaXplICogMC44O1xyXG4gICAgY29uc3QgYnV0dG9uWSA9IHNjcmVlblkgKyB0aGlzLnRpbGVTaXplICogMC41O1xyXG5cclxuICAgIC8vIFBvZHN0YXdhIHByenljaXNrdSAoY2llbW5pZWpzemEpXHJcbiAgICBjdHguZmlsbFN0eWxlID0gJyM0NDQnO1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4LmFyYyhidXR0b25YLCBidXR0b25ZLCBidXR0b25SYWRpdXMsIDAsIE1hdGguUEkgKiAyKTtcclxuICAgIGN0eC5maWxsKCk7XHJcblxyXG4gICAgLy8gU2FtIHByenljaXNrIChjemVyd29ueSlcclxuICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmNDQ0NCc7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHguYXJjKGJ1dHRvblgsIGJ1dHRvblksIGJ1dHRvblJhZGl1cyAqIDAuOCwgMCwgTWF0aC5QSSAqIDIpO1xyXG4gICAgY3R4LmZpbGwoKTtcclxuXHJcbiAgICAvLyBPZGJsYXNrIG5hIHByenljaXNrdVxyXG4gICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSknO1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4LmFyYyhcclxuICAgICAgYnV0dG9uWCAtIGJ1dHRvblJhZGl1cyAqIDAuMixcclxuICAgICAgYnV0dG9uWSAtIGJ1dHRvblJhZGl1cyAqIDAuMixcclxuICAgICAgYnV0dG9uUmFkaXVzICogMC4zLFxyXG4gICAgICAwLFxyXG4gICAgICBNYXRoLlBJICogMlxyXG4gICAgKTtcclxuICAgIGN0eC5maWxsKCk7XHJcblxyXG4gICAgY3R4LnJlc3RvcmUoKTtcclxuICB9XHJcblxyXG4gIC8qKiBOYXJ5c3VqIGRla29yYWNqZSBkbGEga29ua3JldG5lZ28gcG9rb2p1ICovXHJcbiAgZHJhd1Jvb21EZWNvcmF0aW9ucyhjdHgsIHJvb20sIHgsIHksIHcsIGgpIHtcclxuICAgIC8vIHgsIHkgdG8gbGV3eSBnw7NybnkgcsOzZyBwb2tvanUgbmEgZWtyYW5pZVxyXG4gICAgLy8gdywgaCB0byBzemVyb2tvxZvEhyBpIHd5c29rb8WbxIcgcG9rb2p1IG5hIGVrcmFuaWVcclxuICAgIGNvbnN0IHRzID0gdGhpcy50aWxlU2l6ZTtcclxuICAgIGNvbnN0IG1hcmdpbiA9IHRzICogMC4yOyAvLyBNbmllanN6eSBtYXJnaW5lc1xyXG4gICAgY29uc3Qgb2JqTWFyZ2luID0gdHMgKiAwLjE7IC8vIE9kc3TEmXAgbWnEmWR6eSBvYmlla3RhbWlcclxuICAgIGN0eC5saW5lV2lkdGggPSAxO1xyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gJyM0NDQnOyAvLyBDaWVtbmllanN6YSBkb215xZtsbmEgb2J3w7Nka2FcclxuXHJcbiAgICAvLyA9PT0gRlVOS0NKRSBQT01PQ05JQ1pFIERPIFJZU09XQU5JQSA9PT1cclxuICAgIGNvbnN0IGRyYXdSZWN0ID0gKHJ4LCByeSwgcncsIHJoLCBjb2xvciwgb3V0bGluZSA9IHRydWUpID0+IHtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xyXG4gICAgICBjb25zdCBzY3JlZW5YID0gTWF0aC5mbG9vcih4ICsgcngpO1xyXG4gICAgICBjb25zdCBzY3JlZW5ZID0gTWF0aC5mbG9vcih5ICsgcnkpO1xyXG4gICAgICBjb25zdCBzY3JlZW5XID0gTWF0aC5mbG9vcihydyk7XHJcbiAgICAgIGNvbnN0IHNjcmVlbkggPSBNYXRoLmZsb29yKHJoKTtcclxuICAgICAgY3R4LmZpbGxSZWN0KHNjcmVlblgsIHNjcmVlblksIHNjcmVlblcsIHNjcmVlbkgpO1xyXG4gICAgICBpZiAob3V0bGluZSkge1xyXG4gICAgICAgIGN0eC5zdHJva2VSZWN0KHNjcmVlblggKyAwLjUsIHNjcmVlblkgKyAwLjUsIHNjcmVlblcgLSAxLCBzY3JlZW5IIC0gMSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBkcmF3Q2lyY2xlID0gKGN4LCBjeSwgcmFkaXVzLCBjb2xvciwgb3V0bGluZSA9IHRydWUpID0+IHtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xyXG4gICAgICBjb25zdCBzY3JlZW5YID0gTWF0aC5mbG9vcih4ICsgY3gpO1xyXG4gICAgICBjb25zdCBzY3JlZW5ZID0gTWF0aC5mbG9vcih5ICsgY3kpO1xyXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgIGN0eC5hcmMoc2NyZWVuWCwgc2NyZWVuWSwgTWF0aC5mbG9vcihyYWRpdXMpLCAwLCBNYXRoLlBJICogMik7XHJcbiAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgIGlmIChvdXRsaW5lKSB7XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgc3dpdGNoIChyb29tLnR5cGUpIHtcclxuICAgICAgY2FzZSAnY2xhc3Nyb29tJzogLy8gU2FsYSBsZWtjeWpuYVxyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNWQ0MDM3JzsgLy8gQnLEhXpvd2Egb2J3w7Nka2EgZGxhIG1lYmxpXHJcbiAgICAgICAgY29uc3QgZGVza1cgPSB0cyAqIDAuNixcclxuICAgICAgICAgIGRlc2tIID0gdHMgKiAwLjQsXHJcbiAgICAgICAgICBjaGFpckggPSB0cyAqIDAuMjU7XHJcbiAgICAgICAgY29uc3Qgc3BhY2VYID0gdHMgKiAxLjAsXHJcbiAgICAgICAgICBzcGFjZVkgPSB0cyAqIDAuOTtcclxuICAgICAgICAvLyBUYWJsaWNhIG5hIGfDs3JuZWogxZtjaWFuaWVcclxuICAgICAgICBkcmF3UmVjdCh3ICogMC4yNSwgbWFyZ2luLCB3ICogMC41LCB0cyAqIDAuMiwgJyMzMzMnLCB0cnVlKTtcclxuICAgICAgICBkcmF3UmVjdCh3ICogMC4yNSArIDIsIG1hcmdpbiArIDIsIHcgKiAwLjUgLSA0LCB0cyAqIDAuMiAtIDQsICcjNENBRjUwJywgZmFsc2UpOyAvLyBaaWVsb25hIHBvd2llcnpjaG5pYVxyXG5cclxuICAgICAgICAvLyDFgWF3a2kgaSBrcnplc8WCYSB3IHJ6xJlkYWNoXHJcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IDsgcisrKSB7XHJcbiAgICAgICAgICBjb25zdCByb3dZID0gbWFyZ2luICsgdHMgKiAwLjUgKyByICogc3BhY2VZO1xyXG4gICAgICAgICAgaWYgKHJvd1kgKyBkZXNrSCArIGNoYWlySCA+IGggLSBtYXJnaW4pIGJyZWFrOyAvLyBTcHJhd2R6ZW5pZSBjenkgem1pZcWbY2kgc2nEmSByesSFZFxyXG4gICAgICAgICAgZm9yIChsZXQgYyA9IDA7IDsgYysrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbFggPSBtYXJnaW4gKyBjICogc3BhY2VYO1xyXG4gICAgICAgICAgICBpZiAoY29sWCArIGRlc2tXID4gdyAtIG1hcmdpbikgYnJlYWs7IC8vIFNwcmF3ZHplbmllIGN6eSB6bWllxZtjaSBzacSZIGtvbHVtbmFcclxuICAgICAgICAgICAgLy8gxYFhd2thXHJcbiAgICAgICAgICAgIGRyYXdSZWN0KGNvbFgsIHJvd1ksIGRlc2tXLCBkZXNrSCwgJyM4QjQ1MTMnKTtcclxuICAgICAgICAgICAgLy8gS3J6ZXPFgm8gcG9uacW8ZWpcclxuICAgICAgICAgICAgZHJhd1JlY3QoY29sWCArIGRlc2tXICogMC4xLCByb3dZICsgZGVza0ggKyBvYmpNYXJnaW4sIGRlc2tXICogMC44LCBjaGFpckgsICcjNmE0YTNhJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAnb2ZmaWNlJzogLy8gQml1cm9cclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzVkNDAzNyc7XHJcbiAgICAgICAgLy8gQml1cmtvXHJcbiAgICAgICAgY29uc3QgdGFibGVXID0gTWF0aC5taW4odyAqIDAuNiwgdHMgKiAyLjUpO1xyXG4gICAgICAgIGNvbnN0IHRhYmxlSCA9IE1hdGgubWluKGggKiAwLjQsIHRzICogMS4yKTtcclxuICAgICAgICBkcmF3UmVjdChtYXJnaW4sIG1hcmdpbiwgdGFibGVXLCB0YWJsZUgsICcjYTA1MjJkJyk7XHJcbiAgICAgICAgLy8gS3J6ZXPFgm8gYml1cm93ZVxyXG4gICAgICAgIGRyYXdSZWN0KG1hcmdpbiArIHRhYmxlVyArIG9iak1hcmdpbiwgbWFyZ2luICsgdGFibGVIICogMC4xLCB0cyAqIDAuNiwgdHMgKiAwLjYsICcjNDQ0Jyk7XHJcbiAgICAgICAgLy8gU3phZmEgbmEgYWt0YVxyXG4gICAgICAgIGNvbnN0IGNhYmluZXRXID0gdHMgKiAwLjg7XHJcbiAgICAgICAgZHJhd1JlY3QodyAtIG1hcmdpbiAtIGNhYmluZXRXLCBtYXJnaW4sIGNhYmluZXRXLCBoIC0gbWFyZ2luICogMiwgJyM2QjRGNDEnKTtcclxuICAgICAgICAvLyBLb21wdXRlciBuYSBiaXVya3UgKHN5bWJvbGljem5pZSlcclxuICAgICAgICBkcmF3UmVjdChtYXJnaW4gKyBvYmpNYXJnaW4sIG1hcmdpbiArIG9iak1hcmdpbiwgdHMgKiAwLjUsIHRzICogMC40LCAnIzMzMycpOyAvLyBNb25pdG9yXHJcbiAgICAgICAgZHJhd1JlY3QoXHJcbiAgICAgICAgICBtYXJnaW4gKyBvYmpNYXJnaW4gKyB0cyAqIDAuMSxcclxuICAgICAgICAgIG1hcmdpbiArIG9iak1hcmdpbiArIHRzICogMC40ICsgMixcclxuICAgICAgICAgIHRzICogMC4zLFxyXG4gICAgICAgICAgdHMgKiAwLjEsXHJcbiAgICAgICAgICAnIzU1NSdcclxuICAgICAgICApOyAvLyBLbGF3aWF0dXJhXHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdsaWJyYXJ5JzogLy8gQmlibGlvdGVrYVxyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNDAyYTEwJzsgLy8gQ2llbW5pZWpzemEgb2J3w7Nka2EgZGxhIHJlZ2HFgsOzd1xyXG4gICAgICAgIGNvbnN0IHNoZWxmVyA9IHRzICogMC42O1xyXG4gICAgICAgIGNvbnN0IHNoZWxmU3BhY2luZyA9IHRzICogMS41O1xyXG4gICAgICAgIC8vIFJlZ2HFgnkgdyBwaW9uaWVcclxuICAgICAgICBmb3IgKGxldCBzeCA9IG1hcmdpbjsgc3ggPCB3IC0gbWFyZ2luIC0gc2hlbGZXOyBzeCArPSBzaGVsZlNwYWNpbmcpIHtcclxuICAgICAgICAgIGRyYXdSZWN0KHN4LCBtYXJnaW4sIHNoZWxmVywgaCAtIG1hcmdpbiAqIDIsICcjNjU0MzIxJyk7XHJcbiAgICAgICAgICAvLyBMaW5pZSBww7PFgmVrXHJcbiAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgwLDAsMCwwLjMpJztcclxuICAgICAgICAgIGZvciAobGV0IHNoZWxmWSA9IG1hcmdpbiArIHRzICogMC41OyBzaGVsZlkgPCBoIC0gbWFyZ2luOyBzaGVsZlkgKz0gdHMgKiAwLjcpIHtcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjdHgubW92ZVRvKHggKyBzeCwgeSArIHNoZWxmWSk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8oeCArIHN4ICsgc2hlbGZXLCB5ICsgc2hlbGZZKTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM0MDJhMTAnOyAvLyBQcnp5d3LDs8SHIGfFgsOzd255IGtvbG9yIG9id8OzZGtpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFN0w7PFgiBkbyBjenl0YW5pYSAoamXFm2xpIGplc3QgbWllanNjZSlcclxuICAgICAgICBpZiAodyA+IHNoZWxmU3BhY2luZyAqIDEuNSkge1xyXG4gICAgICAgICAgY29uc3QgdGFibGVMaWJYID0gc2hlbGZXICsgbWFyZ2luICsgKHcgLSBzaGVsZlcgKiAyIC0gbWFyZ2luICogMiAtIHRzICogMS41KSAvIDI7IC8vIFd5xZtyb2RrdWogc3TDs8WCIG1pxJlkenkgcmVnYcWCYW1pXHJcbiAgICAgICAgICBpZiAodGFibGVMaWJYID4gc2hlbGZXICsgbWFyZ2luKSB7XHJcbiAgICAgICAgICAgIC8vIFVwZXduaWogc2nEmSwgxbxlIGplc3QgbWllanNjZVxyXG4gICAgICAgICAgICBkcmF3UmVjdCh0YWJsZUxpYlgsIGggKiAwLjMsIHRzICogMS41LCBoICogMC40LCAnIzk2NkYzMycpO1xyXG4gICAgICAgICAgICAvLyBLcnplc8WCYSBwcnp5IHN0b2xlXHJcbiAgICAgICAgICAgIGRyYXdSZWN0KHRhYmxlTGliWCArIHRzICogMC4yLCBoICogMC4zIC0gdHMgKiAwLjMsIHRzICogMC41LCB0cyAqIDAuMjUsICcjNmE0YTNhJyk7XHJcbiAgICAgICAgICAgIGRyYXdSZWN0KFxyXG4gICAgICAgICAgICAgIHRhYmxlTGliWCArIHRzICogMC4yLFxyXG4gICAgICAgICAgICAgIGggKiAwLjMgKyBoICogMC40ICsgb2JqTWFyZ2luLFxyXG4gICAgICAgICAgICAgIHRzICogMC41LFxyXG4gICAgICAgICAgICAgIHRzICogMC4yNSxcclxuICAgICAgICAgICAgICAnIzZhNGEzYSdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdneW0nOiAvLyBTacWCb3duaWFcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzU1NSc7XHJcbiAgICAgICAgLy8gTWF0eSBkbyDEh3dpY3plxYRcclxuICAgICAgICBkcmF3UmVjdChtYXJnaW4sIG1hcmdpbiwgdyAqIDAuNCwgaCAqIDAuMywgJyM3Nzg4OTknKTtcclxuICAgICAgICBkcmF3UmVjdCh3IC0gbWFyZ2luIC0gdyAqIDAuMywgaCAtIG1hcmdpbiAtIGggKiAwLjQsIHcgKiAwLjMsIGggKiAwLjQsICcjNzc4ODk5Jyk7XHJcbiAgICAgICAgLy8gQmllxbxuaWEgKHN5bWJvbGljem5pZSlcclxuICAgICAgICBkcmF3UmVjdCh3ICogMC42LCBtYXJnaW4sIHRzICogMC44LCB0cyAqIDEuOCwgJyMzMzMnKTtcclxuICAgICAgICBkcmF3UmVjdCh3ICogMC42ICsgdHMgKiAwLjEsIG1hcmdpbiArIHRzICogMC4xLCB0cyAqIDAuNiwgdHMgKiAxLjYsICcjNTU1JywgZmFsc2UpO1xyXG4gICAgICAgIC8vIMWBYXdlY3prYVxyXG4gICAgICAgIGRyYXdSZWN0KG1hcmdpbiwgaCAqIDAuNSwgdHMgKiAxLjUsIHRzICogMC40LCAnIzhCNDUxMycpO1xyXG4gICAgICAgIC8vIFN0b2phayB6IGNpxJnFvGFya2FtaVxyXG4gICAgICAgIGRyYXdSZWN0KHcgLSBtYXJnaW4gLSB0cyAqIDAuNSwgbWFyZ2luLCB0cyAqIDAuNSwgdHMgKiAxLjUsICcjNDQ0Jyk7XHJcbiAgICAgICAgZHJhd0NpcmNsZSh3IC0gbWFyZ2luIC0gdHMgKiAwLjI1LCBtYXJnaW4gKyB0cyAqIDAuMywgdHMgKiAwLjE1LCAnIzY2NicpO1xyXG4gICAgICAgIGRyYXdDaXJjbGUodyAtIG1hcmdpbiAtIHRzICogMC4yNSwgbWFyZ2luICsgdHMgKiAwLjcsIHRzICogMC4xNSwgJyM2NjYnKTtcclxuICAgICAgICBkcmF3Q2lyY2xlKHcgLSBtYXJnaW4gLSB0cyAqIDAuMjUsIG1hcmdpbiArIHRzICogMS4xLCB0cyAqIDAuMTUsICcjNjY2Jyk7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdsYWInOiAvLyBMYWJvcmF0b3JpdW1cclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzY2OCc7XHJcbiAgICAgICAgLy8gU3RvxYJ5IGxhYm9yYXRvcnlqbmUgKGTFgnVnaWUpXHJcbiAgICAgICAgY29uc3QgbGFiVGFibGVIID0gdHMgKiAwLjg7XHJcbiAgICAgICAgZHJhd1JlY3QobWFyZ2luLCBtYXJnaW4sIHcgLSBtYXJnaW4gKiAyLCBsYWJUYWJsZUgsICcjZDBkMGQ4Jyk7IC8vIEphc25vc3phcnkgc3TDs8WCXHJcbiAgICAgICAgZHJhd1JlY3QobWFyZ2luLCBoIC0gbWFyZ2luIC0gbGFiVGFibGVILCB3IC0gbWFyZ2luICogMiwgbGFiVGFibGVILCAnI2QwZDBkOCcpO1xyXG4gICAgICAgIC8vIFNwcnrEmXQgbmEgc3RvxYJhY2hcclxuICAgICAgICBkcmF3UmVjdChtYXJnaW4gKyB0cyAqIDAuMiwgbWFyZ2luICsgdHMgKiAwLjEsIHRzICogMC41LCB0cyAqIDAuNSwgJyM0YTkwZTInKTsgLy8gQ2/FmyBuaWViaWVza2llZ29cclxuICAgICAgICBkcmF3UmVjdChtYXJnaW4gKyB0cyAqIDEuMCwgbWFyZ2luICsgdHMgKiAwLjEsIHRzICogMC4zLCB0cyAqIDAuNiwgJyNmNWE2MjMnKTsgLy8gQ2/FmyBwb21hcmHFhGN6b3dlZ29cclxuICAgICAgICBkcmF3Q2lyY2xlKHcgLSBtYXJnaW4gKiAyIC0gdHMgKiAwLjQsIG1hcmdpbiArIGxhYlRhYmxlSCAqIDAuNSwgdHMgKiAwLjIsICcjZTA0MDQwJywgdHJ1ZSk7IC8vIENvxZsgY3plcndvbmVnbyBva3LEhWfFgmVnb1xyXG4gICAgICAgIC8vIFN6YWZrYSB6IG9kY3p5bm5pa2FtaVxyXG4gICAgICAgIGRyYXdSZWN0KFxyXG4gICAgICAgICAgdyAqIDAuNCxcclxuICAgICAgICAgIG1hcmdpbiArIGxhYlRhYmxlSCArIG9iak1hcmdpbixcclxuICAgICAgICAgIHRzLFxyXG4gICAgICAgICAgaCAtIG1hcmdpbiAqIDIgLSBsYWJUYWJsZUggKiAyIC0gb2JqTWFyZ2luICogMixcclxuICAgICAgICAgICcjYTBhMGIwJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdzdG9yYWdlJzogLy8gTWFnYXp5blxyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNGQ0MDMwJztcclxuICAgICAgICAvLyBQw7PFgmtpL3JlZ2HFgnkgbWV0YWxvd2VcclxuICAgICAgICBjb25zdCBtZXRhbFNoZWxmVyA9IHcgLSBtYXJnaW4gKiAyO1xyXG4gICAgICAgIGNvbnN0IG1ldGFsU2hlbGZIID0gdHMgKiAwLjU7XHJcbiAgICAgICAgZHJhd1JlY3QobWFyZ2luLCBtYXJnaW4sIG1ldGFsU2hlbGZXLCBtZXRhbFNoZWxmSCwgJyM5ZTllOWUnKTtcclxuICAgICAgICBkcmF3UmVjdChtYXJnaW4sIGggLSBtYXJnaW4gLSBtZXRhbFNoZWxmSCwgbWV0YWxTaGVsZlcsIG1ldGFsU2hlbGZILCAnIzllOWU5ZScpO1xyXG4gICAgICAgIC8vIFB1ZMWCYVxyXG4gICAgICAgIGNvbnN0IGJveFNpemUgPSB0cyAqIDAuNjtcclxuICAgICAgICBkcmF3UmVjdChtYXJnaW4gKyB0cyAqIDAuMiwgbWFyZ2luICsgbWV0YWxTaGVsZkggKyBvYmpNYXJnaW4sIGJveFNpemUsIGJveFNpemUsICcjYmY4ZjZmJyk7XHJcbiAgICAgICAgZHJhd1JlY3QobWFyZ2luICsgdHMgKiAxLjAsIG1hcmdpbiArIG1ldGFsU2hlbGZIICsgb2JqTWFyZ2luLCBib3hTaXplLCBib3hTaXplLCAnI2JmOGY2ZicpO1xyXG4gICAgICAgIGRyYXdSZWN0KFxyXG4gICAgICAgICAgdyAtIG1hcmdpbiAtIGJveFNpemUgKiAxLjUsXHJcbiAgICAgICAgICBtYXJnaW4gKyBtZXRhbFNoZWxmSCArIG9iak1hcmdpbiAqIDMsXHJcbiAgICAgICAgICBib3hTaXplICogMS4yLFxyXG4gICAgICAgICAgYm94U2l6ZSAqIDAuOCxcclxuICAgICAgICAgICcjYmY4ZjZmJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gU3RhcmUgYml1cmtvIHcgcm9ndVxyXG4gICAgICAgIGRyYXdSZWN0KHcgLSBtYXJnaW4gLSB0cywgaCAtIG1hcmdpbiAtIHRzLCB0cyAqIDAuOCwgdHMgKiAwLjgsICcjNmE0YTNhJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICd1dGlsaXR5JzogLy8gUG9taWVzemN6ZW5pZSBnb3Nwb2RhcmN6ZVxyXG4gICAgICBkZWZhdWx0OiAvLyBEb215xZtsbmUsIGplxZtsaSB0eXAgbmllem5hbnlcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzVkNDAzNyc7XHJcbiAgICAgICAgLy8gU2tyenlua2kvdXJ6xIVkemVuaWFcclxuICAgICAgICBkcmF3UmVjdCh3ICogMC4xLCBoICogMC4xNSwgdyAqIDAuMywgaCAqIDAuMjUsICcjQTA1MjJEJyk7XHJcbiAgICAgICAgZHJhd1JlY3QodyAqIDAuNiwgaCAqIDAuNSwgdyAqIDAuMywgaCAqIDAuNCwgJyNBMDUyMkQnKTtcclxuICAgICAgICAvLyBTemFmYSBtZXRhbG93YVxyXG4gICAgICAgIGRyYXdSZWN0KHcgLSBtYXJnaW4gLSB0cyAqIDAuNSwgbWFyZ2luLCB0cyAqIDAuNSwgaCAtIG1hcmdpbiAqIDIsICcjNzc3Jyk7XHJcbiAgICAgICAgLy8gUnVyeS9rYWJsZSAoc3ltYm9saWN6bmllKVxyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNTU1JztcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gMztcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4Lm1vdmVUbyh4ICsgbWFyZ2luLCB5ICsgaCAqIDAuOCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyh4ICsgdyAtIG1hcmdpbiwgeSArIGggKiAwLjgpO1xyXG4gICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4Lm1vdmVUbyh4ICsgdyAqIDAuNywgeSArIG1hcmdpbik7XHJcbiAgICAgICAgY3R4LmxpbmVUbyh4ICsgdyAqIDAuNywgeSArIGggLSBtYXJnaW4pO1xyXG4gICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gMTsgLy8gUHJ6eXdyw7PEhyBncnVib8WbxIcgbGluaWlcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBOYXJ5c3VqIGtzacSFxbxraSAqL1xyXG4gIGRyYXdCb29rcyhjdHgsIGJvb2tzLCBvZmZzZXRYLCBvZmZzZXRZLCBib29rSW1hZ2UpIHtcclxuICAgIGlmICghYm9va3MgfHwgYm9va3MubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICBjb25zdCBkZWZhdWx0Qm9va1NpemUgPSB0aGlzLnRpbGVTaXplICogMC42O1xyXG5cclxuICAgIGZvciAoY29uc3QgYm9vayBvZiBib29rcykge1xyXG4gICAgICBjb25zdCBpc0NvbGxlY3RlZCA9IGJvb2suaXNDb2xsZWN0ZWQgfHwgYm9vay5jb2xsZWN0ZWQ7IC8vIEhhbmRsZSBib3RoIHBvdGVudGlhbCBwcm9wZXJ0aWVzXHJcbiAgICAgIGlmICghaXNDb2xsZWN0ZWQpIHtcclxuICAgICAgICBjb25zdCBib29rU2l6ZSA9IGJvb2suc2l6ZSB8fCBkZWZhdWx0Qm9va1NpemU7XHJcbiAgICAgICAgLy8gUm91bmQgZHJhd2luZyBjb29yZGluYXRlc1xyXG4gICAgICAgIGNvbnN0IHNjcmVlblggPSBNYXRoLmZsb29yKGJvb2sueCArIG9mZnNldFggLSBib29rU2l6ZSAvIDIpO1xyXG4gICAgICAgIGNvbnN0IHNjcmVlblkgPSBNYXRoLmZsb29yKGJvb2sueSArIG9mZnNldFkgLSBib29rU2l6ZSAvIDIpO1xyXG5cclxuICAgICAgICAvLyBCYXNpYyB2aXNpYmlsaXR5IGNoZWNrXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgc2NyZWVuWCArIGJvb2tTaXplID4gMCAmJlxyXG4gICAgICAgICAgc2NyZWVuWCA8IGN0eC5jYW52YXMud2lkdGggJiZcclxuICAgICAgICAgIHNjcmVlblkgKyBib29rU2l6ZSA+IDAgJiZcclxuICAgICAgICAgIHNjcmVlblkgPCBjdHguY2FudmFzLmhlaWdodFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgLy8gUHJlZmVyIGJvb2sncyBvd24gZHJhdyBtZXRob2QgaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgICBpZiAodHlwZW9mIGJvb2suZHJhdyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAvLyBQYXNzIHJvdW5kZWQgY29vcmRpbmF0ZXMgYW5kIHNpemVcclxuICAgICAgICAgICAgYm9vay5kcmF3KGN0eCwgb2Zmc2V0WCwgb2Zmc2V0WSwgYm9va0ltYWdlKTsgLy8gYm9vay5kcmF3IHNob3VsZCBoYW5kbGUgaXRzIG93biByb3VuZGluZyBpZiBuZWVkZWQgaW50ZXJuYWxseVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRmFsbGJhY2sgZHJhd2luZ1xyXG4gICAgICAgICAgICBpZiAoYm9va0ltYWdlKSB7XHJcbiAgICAgICAgICAgICAgLy8gRHJhdyB3aXRoIHJvdW5kZWQgY29vcmRpbmF0ZXNcclxuICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGJvb2tJbWFnZSwgc2NyZWVuWCwgc2NyZWVuWSwgYm9va1NpemUsIGJvb2tTaXplKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM4ZDZlNjMnOyAvLyBCcm93biBib29rIGNvbG9yXHJcbiAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHNjcmVlblgsIHNjcmVlblksIGJvb2tTaXplLCBib29rU2l6ZSk7XHJcbiAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM1ZDQwMzcnOyAvLyBEYXJrZXIgb3V0bGluZVxyXG4gICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAxO1xyXG4gICAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KHNjcmVlblggKyAwLjUsIHNjcmVlblkgKyAwLjUsIGJvb2tTaXplIC0gMSwgYm9va1NpemUgLSAxKTsgLy8gRHJhdyBib3JkZXIgbW9yZSBjbGVhcmx5XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0gLy8gRW5kIGNsYXNzIE1hcFJlbmRlcmVyXHJcbiIsIi8vIHNyYy9tYXAvbWFwR2VuZXJhdG9yLmpzXHJcblxyXG5pbXBvcnQge1xyXG4gIFRJTEVfV0FMTCxcclxuICBUSUxFX0NPUlJJRE9SLFxyXG4gIFRJTEVfUk9PTV9GTE9PUixcclxuICBUSUxFX0xJRlQsXHJcbiAgR1lNX0NIQU5DRV9PTl9GSVJTVF9GTE9PUixcclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyByYW5kb21JbnQsIHBlcmZvcm1CRlMgfSBmcm9tICcuLi91dGlscy9tYXAuanMnOyAvLyBBc3N1bWluZyBwZXJmb3JtQkZTIGlzIGluIG1hcC5qc1xyXG5cclxuLy8gLS0tIE1vZHVsZS1sZXZlbCBzdGF0ZSBmb3IgbGlmdCBjb25zaXN0ZW5jeSAtLS1cclxubGV0IGNvbnNpc3RlbnRMaWZ0Q29vcmRzID0gbnVsbDtcclxuXHJcbi8vIC0tLSBHZW5lcmF0aW9uIFBhcmFtZXRlcnMgKERlZmF1bHRzKSAtLS1cclxuY29uc3QgREVGQVVMVF9HRU5fUEFSQU1TID0ge1xyXG4gIG1pblJvb21TaXplOiA1LFxyXG4gIG1heFJvb21TaXplOiAxMCxcclxuICBjb3JyaWRvclRoaWNrbmVzczogMSwgLy8gQ3VycmVudGx5IGhhcmRjb2RlZCB0byAxIGluIGNhcnZpbmcgZnVuY3NcclxuICBudW1Sb29tczogMTIsXHJcbiAgbWF4Um9vbUF0dGVtcHRzOiAyMDAsXHJcbiAgcm9vbVR5cGVXZWlnaHRzOiB7XHJcbiAgICBjbGFzc3Jvb206IDUwLFxyXG4gICAgb2ZmaWNlOiAyNSxcclxuICAgIGxpYnJhcnk6IDE1LFxyXG4gICAgZ3ltOiAwLCAvLyBCYXNlIHdlaWdodCwgYWRqdXN0ZWQgYmFzZWQgb24gZmxvb3JcclxuICAgIHV0aWxpdHk6IDEwLFxyXG4gIH0sXHJcbn07XHJcblxyXG4vLyAtLS0gQ29yZSBHZW5lcmF0aW9uIEZ1bmN0aW9uIC0tLVxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVMZXZlbERhdGEoY29uZmlnKSB7XHJcbiAgY29uc3QgeyBjb2xzLCByb3dzLCBmbG9vck51bWJlciwgbWluRmxvb3IsIHRpbGVTaXplLCBnZW5lcmF0aW9uUGFyYW1zOiB1c2VyUGFyYW1zIH0gPSBjb25maWc7IC8vIEFkZGVkIHRpbGVTaXplXHJcbiAgY29uc3QgZ2VuUGFyYW1zID0geyAuLi5ERUZBVUxUX0dFTl9QQVJBTVMsIC4uLnVzZXJQYXJhbXMgfTtcclxuXHJcbiAgLy8gQWRqdXN0IGd5bSBjaGFuY2UgZm9yIHRoZSBmaXJzdCBmbG9vclxyXG4gIGdlblBhcmFtcy5yb29tVHlwZVdlaWdodHMuZ3ltID0gZmxvb3JOdW1iZXIgPT09IG1pbkZsb29yID8gR1lNX0NIQU5DRV9PTl9GSVJTVF9GTE9PUiAqIDEwMCA6IDA7XHJcblxyXG4gIC8vIFJlc2V0IGNvbnNpc3RlbnQgbGlmdCBjb29yZHMgb24gdGhlIGZpcnN0IGZsb29yXHJcbiAgaWYgKGZsb29yTnVtYmVyID09PSBtaW5GbG9vcikge1xyXG4gICAgY29uc2lzdGVudExpZnRDb29yZHMgPSBudWxsO1xyXG4gICAgY29uc29sZS5sb2coYFtNYXBHZW4gRmxvb3IgJHtmbG9vck51bWJlcn1dIFJlc2V0IGNvbnNpc3RlbnQgbGlmdCBjb29yZHMgZm9yIHRoZSBmaXJzdCBmbG9vci5gKTtcclxuICB9XHJcblxyXG4gIGNvbnNvbGUubG9nKGBbTWFwR2VuIEZsb29yICR7Zmxvb3JOdW1iZXJ9XSBTdGFydGluZyBtYXAgZ2VuZXJhdGlvbiAoJHtjb2xzfXgke3Jvd3N9KS4uLmApO1xyXG4gIGNvbnN0IG1hcCA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHJvd3MgfSwgKCkgPT4gQXJyYXkoY29scykuZmlsbChUSUxFX1dBTEwpKTtcclxuICBjb25zdCByb29tcyA9IFtdO1xyXG4gIGxldCBsaWZ0UG9zaXRpb24gPSBudWxsO1xyXG5cclxuICAvLyAtLS0gR2VuZXJhdGlvbiBTdGVwcyAtLS1cclxuICBfcGxhY2VSb29tcyhtYXAsIHJvb21zLCBjb2xzLCByb3dzLCBnZW5QYXJhbXMpO1xyXG5cclxuICBpZiAocm9vbXMubGVuZ3RoIDwgMiAmJiBmbG9vck51bWJlciAhPT0gbWluRmxvb3IpIHtcclxuICAgIC8vIEFsbG93IHNpbmdsZSByb29tIG9uIGZpcnN0IGZsb29yIG1heWJlPyBPciBoYW5kbGUgZGlmZmVyZW50bHlcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgYFtNYXBHZW4gRmxvb3IgJHtmbG9vck51bWJlcn1dIFBsYWNlZCBvbmx5ICR7cm9vbXMubGVuZ3RofSByb29tcy4gRXhwZWN0IGxpbWl0ZWQgY29ubmVjdGl2aXR5LmBcclxuICAgICk7XHJcbiAgICAvLyBDb25zaWRlciBhZGRpbmcgYSBmYWxsYmFjazogbWF5YmUgY29ubmVjdCB0aGUgc2luZ2xlIHJvb20gdG8gdGhlIG1hcCBlZGdlIG9yIGEgcmFuZG9tIHBvaW50P1xyXG4gIH0gZWxzZSBpZiAocm9vbXMubGVuZ3RoID49IDIpIHtcclxuICAgIF9jb25uZWN0Um9vbXNCZXR0ZXIobWFwLCByb29tcywgY29scywgcm93cyk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gUGFzcyBjb25zaXN0ZW50TGlmdENvb3JkcyByZWZlcmVuY2UsIHBvdGVudGlhbGx5IHVwZGF0ZSBpdCBpbnNpZGVcclxuICAgIGNvbnN0IHBsYWNlZExpZnREYXRhID0gX3BsYWNlTGlmdChcclxuICAgICAgbWFwLFxyXG4gICAgICBjb2xzLFxyXG4gICAgICByb3dzLFxyXG4gICAgICBmbG9vck51bWJlcixcclxuICAgICAgbWluRmxvb3IsXHJcbiAgICAgIHRpbGVTaXplLFxyXG4gICAgICBjb25zaXN0ZW50TGlmdENvb3Jkc1xyXG4gICAgKTsgLy8gUGFzcyB0aWxlU2l6ZVxyXG4gICAgbGlmdFBvc2l0aW9uID0gcGxhY2VkTGlmdERhdGEucG9zaXRpb247XHJcbiAgICAvLyBVcGRhdGUgdGhlIG1vZHVsZS1sZXZlbCB2YXJpYWJsZSBpZiBpdCB3YXMgbmV3bHkgc2V0XHJcbiAgICBpZiAocGxhY2VkTGlmdERhdGEuY29vcmRzKSB7XHJcbiAgICAgIGNvbnNpc3RlbnRMaWZ0Q29vcmRzID0gcGxhY2VkTGlmdERhdGEuY29vcmRzO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBbTWFwR2VuIEZsb29yICR7Zmxvb3JOdW1iZXJ9XSBDUklUSUNBTDogTGlmdCBwbGFjZW1lbnQgZmFpbGVkOmAsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgTGlmdCBwbGFjZW1lbnQgZmFpbGVkIG9uIGZsb29yICR7Zmxvb3JOdW1iZXJ9OiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgfVxyXG5cclxuICAvLyBFbnN1cmUgYm9yZGVycyBhcmUgd2FsbHMgQUZURVIgcGxhY2luZyBsaWZ0IGFuZCBjb25uZWN0aW9uc1xyXG4gIF9lbnN1cmVNYXBCb3JkZXJzKG1hcCwgY29scywgcm93cyk7XHJcblxyXG4gIC8vIEZpbmFsIGxpZnQgcmVhY2hhYmlsaXR5IGNoZWNrICphZnRlciogcG90ZW50aWFsIGZvcmNlZCBjb25uZWN0aW9uc1xyXG4gIGlmIChsaWZ0UG9zaXRpb24gJiYgIV9pc0xpZnRSZWFjaGFibGUobWFwLCBsaWZ0UG9zaXRpb24sIGNvbHMsIHJvd3MpKSB7XHJcbiAgICAvLyBBdHRlbXB0IHRvIGZvcmNlIGNvbm5lY3Rpb24gb25lIGxhc3QgdGltZSBpZiB1bnJlYWNoYWJsZVxyXG4gICAgY29uc29sZS53YXJuKFxyXG4gICAgICBgW01hcFZhbGlkYXRpb24gRmxvb3IgJHtmbG9vck51bWJlcn1dIExpZnQgYXQgdGlsZSgke2xpZnRQb3NpdGlvbi50aWxlWH0sICR7bGlmdFBvc2l0aW9uLnRpbGVZfSkgaW5pdGlhbGx5IHVucmVhY2hhYmxlLiBBdHRlbXB0aW5nIGZpbmFsIGZvcmNlIGNvbm5lY3Rpb24uYFxyXG4gICAgKTtcclxuICAgIGNvbnN0IGNvbm5lY3RlZCA9IF9mb3JjZUNvbm5lY3Rpb25Ub1BvaW50KFxyXG4gICAgICBtYXAsXHJcbiAgICAgIGxpZnRQb3NpdGlvbi50aWxlWCxcclxuICAgICAgbGlmdFBvc2l0aW9uLnRpbGVZLFxyXG4gICAgICBjb2xzLFxyXG4gICAgICByb3dzXHJcbiAgICApO1xyXG4gICAgaWYgKCFjb25uZWN0ZWQgfHwgIV9pc0xpZnRSZWFjaGFibGUobWFwLCBsaWZ0UG9zaXRpb24sIGNvbHMsIHJvd3MpKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYENSSVRJQ0FMOiBQbGFjZWQgbGlmdCBhdCB0aWxlKCR7bGlmdFBvc2l0aW9uLnRpbGVYfSwgJHtsaWZ0UG9zaXRpb24udGlsZVl9KSBpcyBVTlJFQUNIQUJMRSBldmVuIGFmdGVyIGZvcmNlIGNvbm5lY3QhIEdlbmVyYXRpb24gZmFpbGVkLmA7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtNYXBHZW4gRmxvb3IgJHtmbG9vck51bWJlcn1dICR7ZXJyb3JNc2d9YCk7XHJcbiAgICAgIC8vIE9wdGlvbmFsOiBMb2cgbWFwIGdyaWQgaGVyZSBmb3IgZGVidWdnaW5nIHRoZSB1bnJlYWNoYWJsZSBzdGF0ZVxyXG4gICAgICAvLyBsb2dNYXBHcmlkRm9yRGVidWcobWFwLCBjb2xzLCByb3dzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBMaWZ0IGlzIHVucmVhY2hhYmxlIG9uIGZsb29yICR7Zmxvb3JOdW1iZXJ9LiBDYW5ub3QgcHJvY2VlZC5gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgIGBbTWFwVmFsaWRhdGlvbiBGbG9vciAke2Zsb29yTnVtYmVyfV0gTGlmdCBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwgYWZ0ZXIgc2Vjb25kIGF0dGVtcHQuYFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAobGlmdFBvc2l0aW9uKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcclxuICAgICAgYFtNYXBWYWxpZGF0aW9uIEZsb29yICR7Zmxvb3JOdW1iZXJ9XSBMaWZ0IGF0IHRpbGUoJHtsaWZ0UG9zaXRpb24udGlsZVh9LCAke2xpZnRQb3NpdGlvbi50aWxlWX0pIGlzIHJlYWNoYWJsZS5gXHJcbiAgICApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBUaGlzIGNhc2Ugc2hvdWxkIGhhdmUgYmVlbiBjYXVnaHQgZWFybGllciwgYnV0IGRvdWJsZS1jaGVja1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBNYXAgZ2VuZXJhdGVkIHdpdGhvdXQgYSB2YWxpZCBsaWZ0IHBvc2l0aW9uIG9uIGZsb29yICR7Zmxvb3JOdW1iZXJ9LmApO1xyXG4gIH1cclxuXHJcbiAgY29uc29sZS5sb2coYFtNYXBHZW4gRmxvb3IgJHtmbG9vck51bWJlcn1dIE1hcCBnZW5lcmF0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuYCk7XHJcbiAgcmV0dXJuIHsgbWFwLCByb29tcywgbGlmdFBvc2l0aW9uIH07IC8vIFJldHVybiB0aGUgZ2VuZXJhdGVkIGRhdGFcclxufVxyXG5cclxuLy8gLS0tIEhlbHBlcjogUGxhY2UgUm9vbXMgLS0tXHJcbmZ1bmN0aW9uIF9wbGFjZVJvb21zKG1hcCwgcm9vbXMsIGNvbHMsIHJvd3MsIGdlblBhcmFtcykge1xyXG4gIGNvbnN0IHsgbWluUm9vbVNpemUsIG1heFJvb21TaXplLCBudW1Sb29tcywgbWF4Um9vbUF0dGVtcHRzLCByb29tVHlwZVdlaWdodHMgfSA9IGdlblBhcmFtcztcclxuICBsZXQgcm9vbUF0dGVtcHRzID0gMDtcclxuXHJcbiAgY29uc3Qgd2VpZ2h0ZWRUeXBlcyA9IFtdO1xyXG4gIGxldCB0b3RhbFdlaWdodCA9IDA7XHJcbiAgZm9yIChjb25zdCB0eXBlIGluIHJvb21UeXBlV2VpZ2h0cykge1xyXG4gICAgY29uc3Qgd2VpZ2h0ID0gcm9vbVR5cGVXZWlnaHRzW3R5cGVdO1xyXG4gICAgaWYgKHdlaWdodCA+IDApIHtcclxuICAgICAgdG90YWxXZWlnaHQgKz0gd2VpZ2h0O1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlaWdodDsgaSsrKSB7XHJcbiAgICAgICAgd2VpZ2h0ZWRUeXBlcy5wdXNoKHR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIEVuc3VyZSB3ZWlnaHRlZFR5cGVzIGlzIG5vdCBlbXB0eSBpZiBhbGwgd2VpZ2h0cyBhcmUgMCAoZWRnZSBjYXNlKVxyXG4gIGlmICh3ZWlnaHRlZFR5cGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgd2VpZ2h0ZWRUeXBlcy5wdXNoKCd1dGlsaXR5Jyk7IC8vIERlZmF1bHQgZmFsbGJhY2tcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgXCJbTWFwR2VuIFJvb21zXSBObyByb29tIHR5cGUgd2VpZ2h0cyBwcm92aWRlZCBvciBhbGwgYXJlIHplcm8uIERlZmF1bHRpbmcgdG8gJ3V0aWxpdHknLlwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgd2hpbGUgKHJvb21zLmxlbmd0aCA8IG51bVJvb21zICYmIHJvb21BdHRlbXB0cyA8IG1heFJvb21BdHRlbXB0cykge1xyXG4gICAgcm9vbUF0dGVtcHRzKys7XHJcbiAgICBjb25zdCByb29tV2lkdGggPSByYW5kb21JbnQobWluUm9vbVNpemUsIG1heFJvb21TaXplKTtcclxuICAgIGNvbnN0IHJvb21IZWlnaHQgPSByYW5kb21JbnQobWluUm9vbVNpemUsIG1heFJvb21TaXplKTtcclxuICAgIC8vIEVuc3VyZSByb29tIGZpdHMgd2l0aGluIG1hcCBib3VuZGFyaWVzIChsZWF2aW5nIDEtdGlsZSBib3JkZXIpXHJcbiAgICBjb25zdCByb29tQ29sID0gcmFuZG9tSW50KDEsIGNvbHMgLSByb29tV2lkdGggLSAxKTtcclxuICAgIGNvbnN0IHJvb21Sb3cgPSByYW5kb21JbnQoMSwgcm93cyAtIHJvb21IZWlnaHQgLSAxKTtcclxuXHJcbiAgICBjb25zdCByb29tVHlwZSA9IHdlaWdodGVkVHlwZXNbcmFuZG9tSW50KDAsIHdlaWdodGVkVHlwZXMubGVuZ3RoIC0gMSldO1xyXG5cclxuICAgIGNvbnN0IG5ld1Jvb20gPSB7XHJcbiAgICAgIGNvbDogcm9vbUNvbCxcclxuICAgICAgcm93OiByb29tUm93LFxyXG4gICAgICB3aWR0aDogcm9vbVdpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHJvb21IZWlnaHQsXHJcbiAgICAgIHR5cGU6IHJvb21UeXBlLFxyXG4gICAgICBpZDogYHJvb21fJHtyb29tcy5sZW5ndGggKyAxfWAsXHJcbiAgICAgIGNlbnRlclRpbGVYOiBNYXRoLmZsb29yKHJvb21Db2wgKyByb29tV2lkdGggLyAyKSxcclxuICAgICAgY2VudGVyVGlsZVk6IE1hdGguZmxvb3Iocm9vbVJvdyArIHJvb21IZWlnaHQgLyAyKSxcclxuICAgICAgY29ubmVjdGVkOiBmYWxzZSxcclxuICAgIH07XHJcblxyXG4gICAgbGV0IG92ZXJsYXBzID0gZmFsc2U7XHJcbiAgICBjb25zdCBidWZmZXIgPSAyOyAvLyBLZWVwIGEgYnVmZmVyIGJldHdlZW4gcm9vbXNcclxuICAgIGZvciAoY29uc3QgZXhpc3RpbmdSb29tIG9mIHJvb21zKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBuZXdSb29tLmNvbCA8IGV4aXN0aW5nUm9vbS5jb2wgKyBleGlzdGluZ1Jvb20ud2lkdGggKyBidWZmZXIgJiZcclxuICAgICAgICBuZXdSb29tLmNvbCArIG5ld1Jvb20ud2lkdGggKyBidWZmZXIgPiBleGlzdGluZ1Jvb20uY29sICYmXHJcbiAgICAgICAgbmV3Um9vbS5yb3cgPCBleGlzdGluZ1Jvb20ucm93ICsgZXhpc3RpbmdSb29tLmhlaWdodCArIGJ1ZmZlciAmJlxyXG4gICAgICAgIG5ld1Jvb20ucm93ICsgbmV3Um9vbS5oZWlnaHQgKyBidWZmZXIgPiBleGlzdGluZ1Jvb20ucm93XHJcbiAgICAgICkge1xyXG4gICAgICAgIG92ZXJsYXBzID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghb3ZlcmxhcHMpIHtcclxuICAgICAgcm9vbXMucHVzaChuZXdSb29tKTtcclxuICAgICAgLy8gQ2FydmUgcm9vbSBmbG9vclxyXG4gICAgICBmb3IgKGxldCByID0gbmV3Um9vbS5yb3c7IHIgPCBuZXdSb29tLnJvdyArIG5ld1Jvb20uaGVpZ2h0OyByKyspIHtcclxuICAgICAgICBmb3IgKGxldCBjID0gbmV3Um9vbS5jb2w7IGMgPCBuZXdSb29tLmNvbCArIG5ld1Jvb20ud2lkdGg7IGMrKykge1xyXG4gICAgICAgICAgLy8gRG91YmxlIGNoZWNrIGJvdW5kcyBqdXN0IGluIGNhc2UgY2FsY3VsYXRpb24gd2FzIG9mZlxyXG4gICAgICAgICAgaWYgKHIgPj0gMCAmJiByIDwgcm93cyAmJiBjID49IDAgJiYgYyA8IGNvbHMpIHtcclxuICAgICAgICAgICAgbWFwW3JdW2NdID0gVElMRV9ST09NX0ZMT09SO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBpZiAocm9vbXMubGVuZ3RoIDwgbnVtUm9vbXMpIHtcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgYFtNYXBHZW4gUm9vbXNdIFBsYWNlZCBvbmx5ICR7cm9vbXMubGVuZ3RofS8ke251bVJvb21zfSByb29tcyBhZnRlciAke3Jvb21BdHRlbXB0c30gYXR0ZW1wdHMuYFxyXG4gICAgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coYFtNYXBHZW4gUm9vbXNdIFBsYWNlZCAke3Jvb21zLmxlbmd0aH0gcm9vbXMgYWZ0ZXIgJHtyb29tQXR0ZW1wdHN9IGF0dGVtcHRzLmApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gLS0tIEhlbHBlcjogQ29ubmVjdCBSb29tcyAtLS1cclxuZnVuY3Rpb24gX2Nvbm5lY3RSb29tc0JldHRlcihtYXAsIHJvb21zLCBjb2xzLCByb3dzKSB7XHJcbiAgaWYgKHJvb21zLmxlbmd0aCA8IDIpIHJldHVybjtcclxuICBjb25zb2xlLmxvZyhgW01hcEdlbiBDb25uZWN0XSBDb25uZWN0aW5nICR7cm9vbXMubGVuZ3RofSByb29tcyAoaW1wcm92ZWQpLi4uYCk7XHJcblxyXG4gIC8vIFVzZSBhIFNldCBmb3IgZmFzdGVyIGNoZWNraW5nIG9mIGNvbm5lY3RlZCBzdGF0dXNcclxuICBjb25zdCBjb25uZWN0ZWRTZXQgPSBuZXcgU2V0KFtyb29tc1swXS5pZF0pO1xyXG4gIGxldCB1bmNvbm5lY3RlZFJvb21zID0gcm9vbXMuc2xpY2UoMSk7IC8vIFN0YXJ0IHdpdGggYWxsIGJ1dCB0aGUgZmlyc3RcclxuXHJcbiAgd2hpbGUgKHVuY29ubmVjdGVkUm9vbXMubGVuZ3RoID4gMCkge1xyXG4gICAgbGV0IGJlc3REaXN0YW5jZVNxID0gSW5maW5pdHk7XHJcbiAgICBsZXQgYmVzdFVuY29ubmVjdGVkUm9vbSA9IG51bGw7XHJcbiAgICBsZXQgYmVzdENvbm5lY3RlZFJvb21JZCA9IG51bGw7IC8vIFN0b3JlIElEIG9mIHRoZSBjb25uZWN0ZWQgcm9vbVxyXG4gICAgbGV0IGJlc3RVbmNvbm5lY3RlZEluZGV4ID0gLTE7XHJcblxyXG4gICAgLy8gRmluZCB0aGUgdW5jb25uZWN0ZWQgcm9vbSBjbG9zZXN0IHRvIEFOWSBjb25uZWN0ZWQgcm9vbVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bmNvbm5lY3RlZFJvb21zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHJvb21VID0gdW5jb25uZWN0ZWRSb29tc1tpXTtcclxuICAgICAgZm9yIChjb25zdCByb29tQyBvZiByb29tcykge1xyXG4gICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBBTEwgcm9vbXNcclxuICAgICAgICBpZiAoY29ubmVjdGVkU2V0Lmhhcyhyb29tQy5pZCkpIHtcclxuICAgICAgICAgIC8vIENoZWNrIGlmIHJvb21DIGlzIGNvbm5lY3RlZFxyXG4gICAgICAgICAgY29uc3QgZHggPSByb29tVS5jZW50ZXJUaWxlWCAtIHJvb21DLmNlbnRlclRpbGVYO1xyXG4gICAgICAgICAgY29uc3QgZHkgPSByb29tVS5jZW50ZXJUaWxlWSAtIHJvb21DLmNlbnRlclRpbGVZO1xyXG4gICAgICAgICAgY29uc3QgZGlzdFNxID0gZHggKiBkeCArIGR5ICogZHk7XHJcbiAgICAgICAgICBpZiAoZGlzdFNxIDwgYmVzdERpc3RhbmNlU3EpIHtcclxuICAgICAgICAgICAgYmVzdERpc3RhbmNlU3EgPSBkaXN0U3E7XHJcbiAgICAgICAgICAgIGJlc3RVbmNvbm5lY3RlZFJvb20gPSByb29tVTtcclxuICAgICAgICAgICAgYmVzdENvbm5lY3RlZFJvb21JZCA9IHJvb21DLmlkO1xyXG4gICAgICAgICAgICBiZXN0VW5jb25uZWN0ZWRJbmRleCA9IGk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJlc3RVbmNvbm5lY3RlZFJvb20gJiYgYmVzdENvbm5lY3RlZFJvb21JZCAhPT0gbnVsbCkge1xyXG4gICAgICAvLyBGaW5kIHRoZSBhY3R1YWwgY29ubmVjdGVkIHJvb20gb2JqZWN0IHVzaW5nIHRoZSBJRFxyXG4gICAgICBjb25zdCBiZXN0Q29ubmVjdGVkUm9vbSA9IHJvb21zLmZpbmQoKHIpID0+IHIuaWQgPT09IGJlc3RDb25uZWN0ZWRSb29tSWQpO1xyXG4gICAgICBpZiAoIWJlc3RDb25uZWN0ZWRSb29tKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgIGBbTWFwR2VuIENvbm5lY3RdIEVycm9yOiBDb3VsZCBub3QgZmluZCBjb25uZWN0ZWQgcm9vbSB3aXRoIElEICR7YmVzdENvbm5lY3RlZFJvb21JZH0uIFNraXBwaW5nIGNvbm5lY3Rpb24uYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBwcm9ibGVtYXRpYyB1bmNvbm5lY3RlZCByb29tIHRvIGF2b2lkIGluZmluaXRlIGxvb3BcclxuICAgICAgICB1bmNvbm5lY3RlZFJvb21zLnNwbGljZShiZXN0VW5jb25uZWN0ZWRJbmRleCwgMSk7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIF9jYXJ2ZUNvcnJpZG9yQmV0d2VlbihtYXAsIGJlc3RDb25uZWN0ZWRSb29tLCBiZXN0VW5jb25uZWN0ZWRSb29tLCBjb2xzLCByb3dzKTtcclxuICAgICAgY29ubmVjdGVkU2V0LmFkZChiZXN0VW5jb25uZWN0ZWRSb29tLmlkKTsgLy8gQWRkIHRoZSBuZXdseSBjb25uZWN0ZWQgcm9vbSBJRCB0byB0aGUgc2V0XHJcbiAgICAgIHVuY29ubmVjdGVkUm9vbXMuc3BsaWNlKGJlc3RVbmNvbm5lY3RlZEluZGV4LCAxKTsgLy8gUmVtb3ZlIGZyb20gdW5jb25uZWN0ZWQgbGlzdFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAnW01hcEdlbiBDb25uZWN0XSBDb3VsZCBub3QgZmluZCBuZXh0IHBhaXIgb2Ygcm9vbXMgdG8gY29ubmVjdC4gQnJlYWtpbmcgbG9vcC4gUmVtYWluaW5nIHVuY29ubmVjdGVkOicsXHJcbiAgICAgICAgdW5jb25uZWN0ZWRSb29tcy5tYXAoKHIpID0+IHIuaWQpXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrOyAvLyBBdm9pZCBpbmZpbml0ZSBsb29wIGlmIHNvbWV0aGluZyB3ZW50IHdyb25nXHJcbiAgICB9XHJcbiAgfVxyXG4gIGNvbnNvbGUubG9nKGBbTWFwR2VuIENvbm5lY3RdIEZpbmlzaGVkIGNvbm5lY3Rpbmcgcm9vbXMuIENvbm5lY3RlZCBjb3VudDogJHtjb25uZWN0ZWRTZXQuc2l6ZX1gKTtcclxufVxyXG5cclxuLy8gLS0tIEhlbHBlcjogQ2FydmUgQ29ycmlkb3JzIC0tLVxyXG5mdW5jdGlvbiBfY2FydmVDb3JyaWRvckJldHdlZW4obWFwLCByb29tQSwgcm9vbUIsIGNvbHMsIHJvd3MpIHtcclxuICBjb25zdCB7IGNlbnRlclRpbGVYOiBheCwgY2VudGVyVGlsZVk6IGF5IH0gPSByb29tQTtcclxuICBjb25zdCB7IGNlbnRlclRpbGVYOiBieCwgY2VudGVyVGlsZVk6IGJ5IH0gPSByb29tQjtcclxuICAvLyBSYW5kb21seSBjaG9vc2UgTC1zaGFwZSBkaXJlY3Rpb24gKEhvcml6b250YWwgdGhlbiBWZXJ0aWNhbCwgb3IgVmVydGljYWwgdGhlbiBIb3Jpem9udGFsKVxyXG4gIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XHJcbiAgICAvLyBIIHRoZW4gVlxyXG4gICAgX2NhcnZlSG9yaXpvbnRhbENvcnJpZG9yKG1hcCwgYXksIGF4LCBieCwgY29scywgcm93cyk7XHJcbiAgICBfY2FydmVWZXJ0aWNhbENvcnJpZG9yKG1hcCwgYngsIGF5LCBieSwgY29scywgcm93cyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIFYgdGhlbiBIXHJcbiAgICBfY2FydmVWZXJ0aWNhbENvcnJpZG9yKG1hcCwgYXgsIGF5LCBieSwgY29scywgcm93cyk7XHJcbiAgICBfY2FydmVIb3Jpem9udGFsQ29ycmlkb3IobWFwLCBieSwgYXgsIGJ4LCBjb2xzLCByb3dzKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gX2NhcnZlSG9yaXpvbnRhbENvcnJpZG9yKG1hcCwgciwgYzEsIGMyLCBjb2xzLCByb3dzKSB7XHJcbiAgLy8gRW5zdXJlIHJvdyBpcyB2YWxpZFxyXG4gIGlmIChyIDwgMCB8fCByID49IHJvd3MpIHJldHVybjtcclxuICBjb25zdCBzdGFydENvbCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGMxLCBjMikpOyAvLyBDbGFtcCB0byBtYXAgYm91bmRzXHJcbiAgY29uc3QgZW5kQ29sID0gTWF0aC5taW4oY29scyAtIDEsIE1hdGgubWF4KGMxLCBjMikpOyAvLyBDbGFtcCB0byBtYXAgYm91bmRzXHJcbiAgZm9yIChsZXQgYyA9IHN0YXJ0Q29sOyBjIDw9IGVuZENvbDsgYysrKSB7XHJcbiAgICAvLyBPbmx5IGNhcnZlIGlmIGl0J3MgY3VycmVudGx5IGEgd2FsbFxyXG4gICAgaWYgKG1hcFtyXT8uW2NdID09PSBUSUxFX1dBTEwpIHtcclxuICAgICAgbWFwW3JdW2NdID0gVElMRV9DT1JSSURPUjtcclxuICAgIH1cclxuICAgIC8vIE9wdGlvbmFsOiBBbHNvIGNhcnZlIGFkamFjZW50IHZlcnRpY2FsIHRpbGVzIGZvciB0aGlja25lc3MgPiAxXHJcbiAgICAvLyBpZiAodGhpY2tuZXNzID4gMSAmJiByKzEgPCByb3dzICYmIG1hcFtyKzFdPy5bY10gPT09IFRJTEVfV0FMTCkgbWFwW3IrMV1bY10gPSBUSUxFX0NPUlJJRE9SO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBfY2FydmVWZXJ0aWNhbENvcnJpZG9yKG1hcCwgYywgcjEsIHIyLCBjb2xzLCByb3dzKSB7XHJcbiAgLy8gRW5zdXJlIGNvbCBpcyB2YWxpZFxyXG4gIGlmIChjIDwgMCB8fCBjID49IGNvbHMpIHJldHVybjtcclxuICBjb25zdCBzdGFydFJvdyA9IE1hdGgubWF4KDAsIE1hdGgubWluKHIxLCByMikpOyAvLyBDbGFtcCB0byBtYXAgYm91bmRzXHJcbiAgY29uc3QgZW5kUm93ID0gTWF0aC5taW4ocm93cyAtIDEsIE1hdGgubWF4KHIxLCByMikpOyAvLyBDbGFtcCB0byBtYXAgYm91bmRzXHJcbiAgZm9yIChsZXQgciA9IHN0YXJ0Um93OyByIDw9IGVuZFJvdzsgcisrKSB7XHJcbiAgICAvLyBPbmx5IGNhcnZlIGlmIGl0J3MgY3VycmVudGx5IGEgd2FsbFxyXG4gICAgaWYgKG1hcFtyXT8uW2NdID09PSBUSUxFX1dBTEwpIHtcclxuICAgICAgbWFwW3JdW2NdID0gVElMRV9DT1JSSURPUjtcclxuICAgIH1cclxuICAgIC8vIE9wdGlvbmFsOiBBbHNvIGNhcnZlIGFkamFjZW50IGhvcml6b250YWwgdGlsZXMgZm9yIHRoaWNrbmVzcyA+IDFcclxuICAgIC8vIGlmICh0aGlja25lc3MgPiAxICYmIGMrMSA8IGNvbHMgJiYgbWFwW3JdPy5bYysxXSA9PT0gVElMRV9XQUxMKSBtYXBbcl1bYysxXSA9IFRJTEVfQ09SUklET1I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyAtLS0gSGVscGVyOiBQbGFjZSBMaWZ0IC0tLVxyXG4vLyBUYWtlcyBjdXJyZW50IGBsaWZ0Q29vcmRzYCBhbmQgcmV0dXJucyB0aGUgdXNlZC9mb3VuZCBjb29yZHMgYW5kIHBvc2l0aW9uXHJcbmZ1bmN0aW9uIF9wbGFjZUxpZnQobWFwLCBjb2xzLCByb3dzLCBmbG9vck51bWJlciwgbWluRmxvb3IsIHRpbGVTaXplLCBjdXJyZW50Q29uc2lzdGVudENvb3Jkcykge1xyXG4gIGxldCBjb29yZHNUb1VzZSA9IGN1cnJlbnRDb25zaXN0ZW50Q29vcmRzO1xyXG4gIGxldCBuZXdseUZvdW5kQ29vcmRzID0gbnVsbDtcclxuXHJcbiAgLy8gRmluZCBjb29yZHMgb25seSBvbiB0aGUgZmlyc3QgZmxvb3IgaWYgbm90IGFscmVhZHkgc2V0XHJcbiAgaWYgKGZsb29yTnVtYmVyID09PSBtaW5GbG9vciAmJiAhY29vcmRzVG9Vc2UpIHtcclxuICAgIGNvbnNvbGUubG9nKGBbTWFwR2VuIEZsb29yICR7Zmxvb3JOdW1iZXJ9XSBGaW5kaW5nIGluaXRpYWwgbGlmdCBwbGFjZW1lbnQgbG9jYXRpb24uLi5gKTtcclxuICAgIGNvb3Jkc1RvVXNlID0gX2ZpbmRMaWZ0UGxhY2VtZW50TG9jYXRpb24obWFwLCBjb2xzLCByb3dzKTtcclxuICAgIGlmICghY29vcmRzVG9Vc2UpIHtcclxuICAgICAgLy8gQ1JJVElDQUwgRkFMTEJBQ0s6IElmIG5vIHN1aXRhYmxlIHNwb3QgZm91bmQsIHRyeSBwbGFjaW5nIG5lYXIgbWFwIGNlbnRlciAoZXZlbiB3YWxsKSBhbmQgZm9yY2UgY29ubmVjdFxyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgYFtNYXBHZW4gRmxvb3IgJHtmbG9vck51bWJlcn1dIE5vIGlkZWFsIGxpZnQgbG9jYXRpb24gZm91bmQuIEZvcmNpbmcgcGxhY2VtZW50IG5lYXIgY2VudGVyLmBcclxuICAgICAgKTtcclxuICAgICAgY29vcmRzVG9Vc2UgPSB7IHRpbGVYOiBNYXRoLmZsb29yKGNvbHMgLyAyKSwgdGlsZVk6IE1hdGguZmxvb3Iocm93cyAvIDIpIH07XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhcclxuICAgICAgYFtNYXBHZW4gRmxvb3IgJHtmbG9vck51bWJlcn1dIEVzdGFibGlzaGVkIGNvbnNpc3RlbnQgbGlmdCBjb29yZHMgYXQgdGlsZSgke2Nvb3Jkc1RvVXNlLnRpbGVYfSwgJHtjb29yZHNUb1VzZS50aWxlWX0pYFxyXG4gICAgKTtcclxuICAgIG5ld2x5Rm91bmRDb29yZHMgPSBjb29yZHNUb1VzZTsgLy8gTWFyayB0aGF0IHdlIGZvdW5kIG5ldyBjb29yZHNcclxuICB9IGVsc2UgaWYgKCFjb29yZHNUb1VzZSAmJiBmbG9vck51bWJlciA+IG1pbkZsb29yKSB7XHJcbiAgICAvLyBUaGlzIHNob3VsZCBpZGVhbGx5IG5vdCBoYXBwZW4gaWYgZ2VuZXJhdGlvbiBwcm9jZWVkcyBmbG9vciBieSBmbG9vclxyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBbTWFwR2VuIExpZnRdIE1pc3NpbmcgY29uc2lzdGVudCBjb29yZGluYXRlcyBmb3IgZmxvb3IgJHtmbG9vck51bWJlcn0uYCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7IHRpbGVYLCB0aWxlWSB9ID0gY29vcmRzVG9Vc2U7XHJcblxyXG4gIC8vIEJhc2ljIGJvdW5kcyBjaGVjayBmb3Igc2FmZXR5XHJcbiAgaWYgKHRpbGVZIDwgMCB8fCB0aWxlWSA+PSByb3dzIHx8IHRpbGVYIDwgMCB8fCB0aWxlWCA+PSBjb2xzKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgIGBbTWFwR2VuIExpZnRdIENvb3JkcyAoJHt0aWxlWH0sICR7dGlsZVl9KSBhcmUgb3V0c2lkZSBtYXAgYm91bmRzIG9uIGZsb29yICR7Zmxvb3JOdW1iZXJ9LmBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgY2hvc2VuIHNwb3QgaXMgYSB3YWxsOyBpZiBzbywgYXR0ZW1wdCBjb25uZWN0aW9uXHJcbiAgaWYgKG1hcFt0aWxlWV1bdGlsZVhdID09PSBUSUxFX1dBTEwpIHtcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgYFtNYXBHZW4gRmxvb3IgJHtmbG9vck51bWJlcn1dIExpZnQgbG9jYXRpb24gdGlsZSgke3RpbGVYfSwgJHt0aWxlWX0pIGlzIGEgd2FsbC4gRm9yY2luZyBjb25uZWN0aW9uLi4uYFxyXG4gICAgKTtcclxuICAgIGNvbnN0IGNvbm5lY3RlZCA9IF9mb3JjZUNvbm5lY3Rpb25Ub1BvaW50KG1hcCwgdGlsZVgsIHRpbGVZLCBjb2xzLCByb3dzKTtcclxuICAgIGlmICghY29ubmVjdGVkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgYFtNYXBHZW4gTGlmdCBDb25uZWN0XSBGQUlMRUQgdG8gY29ubmVjdCB3YWxsIGF0IGxpZnQgbG9jYXRpb24gdGlsZSgke3RpbGVYfSwgJHt0aWxlWX0pLiBMaWZ0IG1pZ2h0IGJlIGlzb2xhdGVkLmBcclxuICAgICAgKTtcclxuICAgICAgLy8gV2Ugc3RpbGwgcGxhY2UgdGhlIGxpZnQsIGJ1dCB0aGUgcmVhY2hhYmlsaXR5IGNoZWNrIGxhdGVyIHNob3VsZCBmYWlsLlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coYCAgW01hcEdlbiBMaWZ0IENvbm5lY3RdIENvbm5lY3Rpb24gYXR0ZW1wdCBmaW5pc2hlZCBmb3Igd2FsbCBhdCBsaWZ0IGxvY2F0aW9uLmApO1xyXG4gICAgICAvLyBFbnN1cmUgdGhlIHRpbGUgaXRzZWxmIGlzIG1hcmtlZCBhcyBjb3JyaWRvciAqYmVmb3JlKiBzZXR0aW5nIHRvIExJRlRcclxuICAgICAgaWYgKG1hcFt0aWxlWV1bdGlsZVhdID09PSBUSUxFX1dBTEwpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgICBgICBbTWFwR2VuIExpZnQgQ29ubmVjdF0gRm9yY2UgY29ubmVjdGlvbiBjb21wbGV0ZWQsIGJ1dCB0YXJnZXQgdGlsZSAoJHt0aWxlWH0sJHt0aWxlWX0pIHJlbWFpbmVkIFdBTEwuIFNldHRpbmcgdG8gQ09SUklET1IuYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbWFwW3RpbGVZXVt0aWxlWF0gPSBUSUxFX0NPUlJJRE9SOyAvLyBNYW51YWxseSBlbnN1cmUgaXQncyB3YWxrYWJsZSBiZWZvcmUgYmVjb21pbmcgbGlmdFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICBgICBbTWFwR2VuIExpZnRdIExpZnQgbG9jYXRpb24gdGlsZSgke3RpbGVYfSwgJHt0aWxlWX0pIGlzIGFscmVhZHkgd2Fsa2FibGUgKFR5cGU6ICR7bWFwW3RpbGVZXVt0aWxlWF19KS5gXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gUGxhY2UgdGhlIGxpZnQgdGlsZVxyXG4gIG1hcFt0aWxlWV1bdGlsZVhdID0gVElMRV9MSUZUO1xyXG5cclxuICAvLyBDYWxjdWxhdGUgd29ybGQgcG9zaXRpb24gdXNpbmcgdGhlIHByb3ZpZGVkIHRpbGVTaXplXHJcbiAgY29uc3QgbGlmdFdvcmxkUG9zID0ge1xyXG4gICAgeDogKHRpbGVYICsgMC41KSAqIHRpbGVTaXplLFxyXG4gICAgeTogKHRpbGVZICsgMC41KSAqIHRpbGVTaXplLFxyXG4gICAgdGlsZVg6IHRpbGVYLFxyXG4gICAgdGlsZVk6IHRpbGVZLFxyXG4gIH07XHJcblxyXG4gIGNvbnNvbGUubG9nKFxyXG4gICAgYFtNYXBHZW4gRmxvb3IgJHtmbG9vck51bWJlcn1dIFBsYWNlZC9Db25maXJtZWQgbGlmdCBhdCB0aWxlKCR7dGlsZVh9LCAke3RpbGVZfSkuIFdvcmxkOiAoJHtsaWZ0V29ybGRQb3MueC50b0ZpeGVkKFxyXG4gICAgICAxXHJcbiAgICApfSwgJHtsaWZ0V29ybGRQb3MueS50b0ZpeGVkKDEpfSlgXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHsgcG9zaXRpb246IGxpZnRXb3JsZFBvcywgY29vcmRzOiBuZXdseUZvdW5kQ29vcmRzIHx8IGNvb3Jkc1RvVXNlIH07IC8vIFJldHVybiBwb3NpdGlvbiBhbmQgdGhlIGRlZmluaXRpdmUgY29vcmRzIHVzZWQvZm91bmRcclxufVxyXG5cclxuLy8gLS0tIEhlbHBlcjogRmluZCBMaWZ0IExvY2F0aW9uIChGb3IgRmlyc3QgRmxvb3IpIC0tLVxyXG5mdW5jdGlvbiBfZmluZExpZnRQbGFjZW1lbnRMb2NhdGlvbihtYXAsIGNvbHMsIHJvd3MpIHtcclxuICBjb25zdCBjZW50ZXJYID0gTWF0aC5mbG9vcihjb2xzIC8gMiksXHJcbiAgICBjZW50ZXJZID0gTWF0aC5mbG9vcihyb3dzIC8gMik7XHJcbiAgbGV0IGJlc3RTcG90ID0gbnVsbDtcclxuICBsZXQgbWluRGlzdGFuY2VTcSA9IEluZmluaXR5O1xyXG4gIGNvbnN0IG1heFNlYXJjaFJhZGl1cyA9IE1hdGgubWF4KGNlbnRlclgsIGNlbnRlclkpOyAvLyBTZWFyY2ggb3V0d2FyZHMgZnJvbSBjZW50ZXJcclxuXHJcbiAgY29uc29sZS5sb2coYCAgW01hcEdlbiBGaW5kTGlmdF0gU2VhcmNoaW5nIGZvciBsaWZ0IHNwb3QsIG1heCByYWRpdXMgJHttYXhTZWFyY2hSYWRpdXN9Li4uYCk7XHJcblxyXG4gIGZvciAobGV0IHJhZGl1cyA9IDA7IHJhZGl1cyA8PSBtYXhTZWFyY2hSYWRpdXM7IHJhZGl1cysrKSB7XHJcbiAgICBmb3IgKGxldCBkeSA9IC1yYWRpdXM7IGR5IDw9IHJhZGl1czsgZHkrKykge1xyXG4gICAgICBmb3IgKGxldCBkeCA9IC1yYWRpdXM7IGR4IDw9IHJhZGl1czsgZHgrKykge1xyXG4gICAgICAgIC8vIE9ubHkgY2hlY2sgdGhlIGJvdW5kYXJ5IG9mIHRoZSBjdXJyZW50IHJhZGl1cyByaW5nXHJcbiAgICAgICAgaWYgKHJhZGl1cyA+IDAgJiYgTWF0aC5hYnMoZHgpIDwgcmFkaXVzICYmIE1hdGguYWJzKGR5KSA8IHJhZGl1cykgY29udGludWU7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoZWNrWCA9IGNlbnRlclggKyBkeDtcclxuICAgICAgICBjb25zdCBjaGVja1kgPSBjZW50ZXJZICsgZHk7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIGluc2lkZSBtYXAgYm91bmRzIChleGNsdWRpbmcgb3V0ZXIgYm9yZGVyKVxyXG4gICAgICAgIGlmIChjaGVja1kgPj0gMSAmJiBjaGVja1kgPCByb3dzIC0gMSAmJiBjaGVja1ggPj0gMSAmJiBjaGVja1ggPCBjb2xzIC0gMSkge1xyXG4gICAgICAgICAgY29uc3QgdGlsZSA9IG1hcFtjaGVja1ldW2NoZWNrWF07XHJcblxyXG4gICAgICAgICAgLy8gUHJlZmVyIHBsYWNpbmcgb24gZXhpc3RpbmcgQ29ycmlkb3Igb3IgUm9vbSBGbG9vciB0aWxlc1xyXG4gICAgICAgICAgaWYgKHRpbGUgPT09IFRJTEVfQ09SUklET1IgfHwgdGlsZSA9PT0gVElMRV9ST09NX0ZMT09SKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBhdCBsZWFzdCBvbmUgd2Fsa2FibGUgKG5vbi13YWxsKSBuZWlnaGJvciB0byBlbnN1cmUgaXQncyBub3QgaXNvbGF0ZWRcclxuICAgICAgICAgICAgbGV0IGlzQ29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXHJcbiAgICAgICAgICAgICAgWzAsIC0xXSxcclxuICAgICAgICAgICAgICBbMCwgMV0sXHJcbiAgICAgICAgICAgICAgWy0xLCAwXSxcclxuICAgICAgICAgICAgICBbMSwgMF0sXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2RkeCwgZGR5XSBvZiBkaXJlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgbnggPSBjaGVja1ggKyBkZHg7XHJcbiAgICAgICAgICAgICAgY29uc3QgbnkgPSBjaGVja1kgKyBkZHk7XHJcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgbmVpZ2hib3IgYm91bmRzIGFuZCB0eXBlIChDb3JyaWRvciwgRmxvb3IsIG9yICpleGlzdGluZyogTGlmdCBpZiBzb21laG93IHByZXNlbnQpXHJcbiAgICAgICAgICAgICAgY29uc3QgbmVpZ2hib3JUaWxlID0gbWFwW255XT8uW254XTtcclxuICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBuZWlnaGJvclRpbGUgPT09IFRJTEVfQ09SUklET1IgfHxcclxuICAgICAgICAgICAgICAgIG5laWdoYm9yVGlsZSA9PT0gVElMRV9ST09NX0ZMT09SIHx8XHJcbiAgICAgICAgICAgICAgICBuZWlnaGJvclRpbGUgPT09IFRJTEVfTElGVFxyXG4gICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgaXNDb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNDb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICBjb25zdCBkaXN0U3EgPSBkeCAqIGR4ICsgZHkgKiBkeTsgLy8gRGlzdGFuY2UgZnJvbSBjZW50ZXJcclxuICAgICAgICAgICAgICAvLyBGb3VuZCBhIHN1aXRhYmxlIHNwb3QsIGNoZWNrIGlmIGl0J3MgY2xvc2VyIHRoYW4gcHJldmlvdXMgYmVzdFxyXG4gICAgICAgICAgICAgIGlmIChkaXN0U3EgPCBtaW5EaXN0YW5jZVNxKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5EaXN0YW5jZVNxID0gZGlzdFNxO1xyXG4gICAgICAgICAgICAgICAgYmVzdFNwb3QgPSB7IHRpbGVYOiBjaGVja1gsIHRpbGVZOiBjaGVja1kgfTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gLy8gZW5kIGR4IGxvb3BcclxuICAgIH0gLy8gZW5kIGR5IGxvb3BcclxuXHJcbiAgICAvLyBJZiB3ZSBmb3VuZCBhIGJlc3Qgc3BvdCBpbiB0aGlzIHJhZGl1cyByaW5nLCB1c2UgaXQgYW5kIHN0b3Agc2VhcmNoaW5nXHJcbiAgICBpZiAoYmVzdFNwb3QpIHtcclxuICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgYCAgW01hcEdlbiBGaW5kTGlmdF0gU2VsZWN0ZWQgYmVzdCBzcG90IGF0IHRpbGUoJHtiZXN0U3BvdC50aWxlWH0sICR7YmVzdFNwb3QudGlsZVl9KSByYWRpdXMgJHtyYWRpdXN9LmBcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIGJlc3RTcG90O1xyXG4gICAgfVxyXG4gIH0gLy8gZW5kIHJhZGl1cyBsb29wXHJcblxyXG4gIGNvbnNvbGUud2FybignW01hcEdlbiBGaW5kTGlmdF0gTm8gc3VpdGFibGUgQ09SUklET1Igb3IgUk9PTV9GTE9PUiBsb2NhdGlvbiBmb3VuZCBuZWFyIGNlbnRlci4nKTtcclxuICAvLyBJZiBubyBpZGVhbCBzcG90LCByZXR1cm4gbnVsbCAodGhlIGNhbGxlciBtaWdodCBmb3JjZSBwbGFjZW1lbnQpXHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8vIC0tLSBIZWxwZXI6IEZvcmNlIENvbm5lY3Rpb24gLS0tXHJcbmZ1bmN0aW9uIF9mb3JjZUNvbm5lY3Rpb25Ub1BvaW50KG1hcCwgdGFyZ2V0WCwgdGFyZ2V0WSwgY29scywgcm93cykge1xyXG4gIGNvbnNvbGUubG9nKFxyXG4gICAgYCAgW01hcEdlbiBDb25uZWN0XSBUcnlpbmcgdG8gY29ubmVjdCB3YWxsIGF0IHRpbGUoJHt0YXJnZXRYfSwgJHt0YXJnZXRZfSkgdG8gd2Fsa2FibGUgYXJlYS4uLmBcclxuICApO1xyXG4gIGNvbnN0IGRpcmVjdGlvbnMgPSBbXHJcbiAgICBbMCwgLTFdLFxyXG4gICAgWzAsIDFdLFxyXG4gICAgWy0xLCAwXSxcclxuICAgIFsxLCAwXSxcclxuICBdO1xyXG4gIGxldCBpc0FkamFjZW50VG9XYWxrYWJsZSA9IGZhbHNlO1xyXG4gIGxldCBhZGphY2VudFdhbGthYmxlQ29vcmQgPSBudWxsO1xyXG5cclxuICAvLyAxLiBDaGVjayBpZiBhbHJlYWR5IGFkamFjZW50IHRvIGEgd2Fsa2FibGUgdGlsZVxyXG4gIGZvciAoY29uc3QgW2R4LCBkeV0gb2YgZGlyZWN0aW9ucykge1xyXG4gICAgY29uc3QgbnggPSB0YXJnZXRYICsgZHg7XHJcbiAgICBjb25zdCBueSA9IHRhcmdldFkgKyBkeTtcclxuICAgIGNvbnN0IG5laWdoYm9yVGlsZSA9IG1hcFtueV0/LltueF07XHJcbiAgICBpZiAoXHJcbiAgICAgIG5laWdoYm9yVGlsZSA9PT0gVElMRV9DT1JSSURPUiB8fFxyXG4gICAgICBuZWlnaGJvclRpbGUgPT09IFRJTEVfUk9PTV9GTE9PUiB8fFxyXG4gICAgICBuZWlnaGJvclRpbGUgPT09IFRJTEVfTElGVFxyXG4gICAgKSB7XHJcbiAgICAgIGlzQWRqYWNlbnRUb1dhbGthYmxlID0gdHJ1ZTtcclxuICAgICAgYWRqYWNlbnRXYWxrYWJsZUNvb3JkID0geyB4OiBueCwgeTogbnkgfTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoaXNBZGphY2VudFRvV2Fsa2FibGUpIHtcclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICBgICBbTWFwR2VuIENvbm5lY3RdIFRhcmdldCgke3RhcmdldFh9LCAke3RhcmdldFl9KSBpcyBhZGphY2VudCB0byB3YWxrYWJsZSBhdCAoJHthZGphY2VudFdhbGthYmxlQ29vcmQueH0sICR7YWRqYWNlbnRXYWxrYWJsZUNvb3JkLnl9KS4gU2V0dGluZyB0YXJnZXQgdG8gQ29ycmlkb3IuYFxyXG4gICAgKTtcclxuICAgIC8vIE1ha2UgdGhlIHRhcmdldCB0aWxlIGl0c2VsZiB3YWxrYWJsZSAoQ29ycmlkb3IgaXMgYSBzYWZlIGJldClcclxuICAgIG1hcFt0YXJnZXRZXVt0YXJnZXRYXSA9IFRJTEVfQ09SUklET1I7XHJcbiAgICByZXR1cm4gdHJ1ZTsgLy8gQ29ubmVjdGlvbiBpcyB0cml2aWFsXHJcbiAgfVxyXG5cclxuICAvLyAyLiBJZiBub3QgYWRqYWNlbnQsIGZpbmQgdGhlIG5lYXJlc3Qgd2Fsa2FibGUgdGlsZSAoQ29ycmlkb3Igb3IgRmxvb3IpIHVzaW5nIEJGU1xyXG4gIGNvbnNvbGUubG9nKFxyXG4gICAgYCAgW01hcEdlbiBDb25uZWN0XSBUYXJnZXQgbm90IGFkamFjZW50LiBTZWFyY2hpbmcgbmVhcmVzdCB3YWxrYWJsZSAoQ29ycmlkb3IvRmxvb3IpIHZpYSBCRlMuLi5gXHJcbiAgKTtcclxuICBjb25zdCBxdWV1ZSA9IFtbdGFyZ2V0WCwgdGFyZ2V0WSwgMF1dOyAvLyB4LCB5LCBkaXN0YW5jZVxyXG4gIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0KFtgJHt0YXJnZXRYfSwke3RhcmdldFl9YF0pO1xyXG4gIGNvbnN0IGJmc1BhdGhhYmxlID0gW1RJTEVfV0FMTCwgVElMRV9DT1JSSURPUiwgVElMRV9ST09NX0ZMT09SLCBUSUxFX0xJRlRdOyAvLyBDYW4gcGF0aCB0aHJvdWdoIGFueXRoaW5nXHJcbiAgY29uc3QgdGFyZ2V0V2Fsa2FibGUgPSBbVElMRV9DT1JSSURPUiwgVElMRV9ST09NX0ZMT09SXTtcclxuICBsZXQgY2xvc2VzdFdhbGthYmxlID0gbnVsbDtcclxuICBsZXQgbWluRm91bmREaXN0ID0gSW5maW5pdHk7XHJcblxyXG4gIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCBbY3VyclgsIGN1cnJZLCBkaXN0XSA9IHF1ZXVlLnNoaWZ0KCk7XHJcblxyXG4gICAgLy8gSWYgd2UgYWxyZWFkeSBmb3VuZCAqYSogd2Fsa2FibGUgdGlsZSwgZG9uJ3QgZXhwbG9yZSBwYXRocyBsb25nZXIgdGhhbiB0aGF0XHJcbiAgICBpZiAoZGlzdCA+PSBtaW5Gb3VuZERpc3QpIGNvbnRpbnVlO1xyXG5cclxuICAgIGZvciAoY29uc3QgW2R4LCBkeV0gb2YgZGlyZWN0aW9ucykge1xyXG4gICAgICBjb25zdCBuZXh0WCA9IGN1cnJYICsgZHg7XHJcbiAgICAgIGNvbnN0IG5leHRZID0gY3VyclkgKyBkeTtcclxuICAgICAgY29uc3Qga2V5ID0gYCR7bmV4dFh9LCR7bmV4dFl9YDtcclxuXHJcbiAgICAgIGlmIChuZXh0WCA+PSAwICYmIG5leHRYIDwgY29scyAmJiBuZXh0WSA+PSAwICYmIG5leHRZIDwgcm93cyAmJiAhdmlzaXRlZC5oYXMoa2V5KSkge1xyXG4gICAgICAgIGNvbnN0IHRpbGVWYWx1ZSA9IG1hcFtuZXh0WV0/LltuZXh0WF07XHJcbiAgICAgICAgdmlzaXRlZC5hZGQoa2V5KTtcclxuXHJcbiAgICAgICAgLy8gRm91bmQgYSB0YXJnZXQgd2Fsa2FibGUgdGlsZT9cclxuICAgICAgICBpZiAodGFyZ2V0V2Fsa2FibGUuaW5jbHVkZXModGlsZVZhbHVlKSkge1xyXG4gICAgICAgICAgaWYgKGRpc3QgKyAxIDwgbWluRm91bmREaXN0KSB7XHJcbiAgICAgICAgICAgIC8vIEZvdW5kIGEgY2xvc2VyIG9uZVxyXG4gICAgICAgICAgICBtaW5Gb3VuZERpc3QgPSBkaXN0ICsgMTtcclxuICAgICAgICAgICAgY2xvc2VzdFdhbGthYmxlID0geyB4OiBuZXh0WCwgeTogbmV4dFksIGRpc3Q6IG1pbkZvdW5kRGlzdCB9O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICBgICAgIFtCRlNdIEZvdW5kIHBvdGVudGlhbCB0YXJnZXQgYXQgKCR7bmV4dFh9LCAke25leHRZfSksIGRpc3QgJHttaW5Gb3VuZERpc3R9YFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gRG9uJ3QgcHVzaCB0aGlzIHRhcmdldCBvbnRvIHF1ZXVlLCB3ZSBzdG9wIHNlYXJjaGluZyBmcm9tIGhlcmVcclxuICAgICAgICB9IGVsc2UgaWYgKGJmc1BhdGhhYmxlLmluY2x1ZGVzKHRpbGVWYWx1ZSkpIHtcclxuICAgICAgICAgIC8vIENhbiBjb250aW51ZSBzZWFyY2hpbmcgZnJvbSB0aGlzIG5laWdoYm9yIGlmIGl0J3MgcGF0aGFibGUgYW5kIGNsb3NlciB0aGFuIGN1cnJlbnQgYmVzdFxyXG4gICAgICAgICAgaWYgKGRpc3QgKyAxIDwgbWluRm91bmREaXN0KSB7XHJcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goW25leHRYLCBuZXh0WSwgZGlzdCArIDFdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIDMuIENhcnZlIHBhdGggaWYgYSB3YWxrYWJsZSB0aWxlIHdhcyBmb3VuZFxyXG4gIGlmIChjbG9zZXN0V2Fsa2FibGUpIHtcclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICBgICBbTWFwR2VuIENvbm5lY3RdIEZvdW5kIGNsb3Nlc3Qgd2Fsa2FibGUgYXQgdGlsZSgke2Nsb3Nlc3RXYWxrYWJsZS54fSwgJHtjbG9zZXN0V2Fsa2FibGUueX0pIGRpc3RhbmNlICR7Y2xvc2VzdFdhbGthYmxlLmRpc3R9LiBDYXJ2aW5nIHBhdGguLi5gXHJcbiAgICApO1xyXG4gICAgLy8gU2ltcGxlIEwtc2hhcGVkIGNhcnZpbmcgZnJvbSB0YXJnZXQgdG8gY2xvc2VzdCB3YWxrYWJsZVxyXG4gICAgX2NhcnZlSG9yaXpvbnRhbENvcnJpZG9yKG1hcCwgdGFyZ2V0WSwgdGFyZ2V0WCwgY2xvc2VzdFdhbGthYmxlLngsIGNvbHMsIHJvd3MpO1xyXG4gICAgX2NhcnZlVmVydGljYWxDb3JyaWRvcihtYXAsIGNsb3Nlc3RXYWxrYWJsZS54LCB0YXJnZXRZLCBjbG9zZXN0V2Fsa2FibGUueSwgY29scywgcm93cyk7XHJcbiAgICBjb25zb2xlLmxvZyhgICBbTWFwR2VuIENvbm5lY3RdIENhcnZlZCBwYXRoIGF0dGVtcHQgZmluaXNoZWQuYCk7XHJcblxyXG4gICAgLy8gVmVyaWZ5IHRoZSB0YXJnZXQgdGlsZSBpdHNlbGYgYmVjYW1lIHdhbGthYmxlIChzaG91bGQgYmUgY29ycmlkb3Igbm93KVxyXG4gICAgaWYgKG1hcFt0YXJnZXRZXVt0YXJnZXRYXSA9PT0gVElMRV9DT1JSSURPUiB8fCBtYXBbdGFyZ2V0WV1bdGFyZ2V0WF0gPT09IFRJTEVfUk9PTV9GTE9PUikge1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICBgICAgIFtWZXJpZnldIFRhcmdldCB0aWxlICgke3RhcmdldFh9LCR7dGFyZ2V0WX0pIGlzIG5vdyB3YWxrYWJsZSAoVHlwZTogJHttYXBbdGFyZ2V0WV1bdGFyZ2V0WF19KWBcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgYCAgW01hcEdlbiBDb25uZWN0XSBDYXJ2aW5nIGRvbmUsIGJ1dCB0YXJnZXQgdGlsZSgke3RhcmdldFh9LCAke3RhcmdldFl9KSBpcyBzdGlsbCBXQUxMIChWYWx1ZTogJHttYXBbdGFyZ2V0WV1bdGFyZ2V0WF19KS4gU2V0dGluZyBtYW51YWxseS5gXHJcbiAgICAgICk7XHJcbiAgICAgIC8vIEZvcmNlIGl0IGp1c3QgaW4gY2FzZSBjYXJ2aW5nIGxvZ2ljIGhhZCBhbiBlZGdlIGNhc2VcclxuICAgICAgbWFwW3RhcmdldFldW3RhcmdldFhdID0gVElMRV9DT1JSSURPUjtcclxuICAgICAgcmV0dXJuIHRydWU7IC8vIEFzc3VtZSBzdWNjZXNzIGlmIHdlIGZvdW5kIGEgcGF0aCBhbmQgZm9yY2VkIHRoZSB0aWxlXHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgIGAgIFtNYXBHZW4gQ29ubmVjdF0gRkFJTEVEIHRvIGZpbmQgQU5ZIG5lYXJieSB3YWxrYWJsZSAoQ29ycmlkb3IvRmxvb3IpIHZpYSBCRlMgZnJvbSB3YWxsIGF0IHRpbGUoJHt0YXJnZXRYfSwgJHt0YXJnZXRZfSkuIENhbm5vdCBjb25uZWN0LmBcclxuICAgICk7XHJcbiAgICByZXR1cm4gZmFsc2U7IC8vIENvbm5lY3Rpb24gZmFpbGVkXHJcbiAgfVxyXG59XHJcblxyXG4vLyAtLS0gSGVscGVyOiBDaGVjayBMaWZ0IFJlYWNoYWJpbGl0eSAtLS1cclxuZnVuY3Rpb24gX2lzTGlmdFJlYWNoYWJsZShtYXAsIGxpZnRQb3NpdGlvbiwgY29scywgcm93cykge1xyXG4gIGlmICghbGlmdFBvc2l0aW9uKSByZXR1cm4gZmFsc2U7XHJcbiAgY29uc3QgeyB0aWxlWCwgdGlsZVkgfSA9IGxpZnRQb3NpdGlvbjtcclxuICBpZiAoXHJcbiAgICB0aWxlWSA8IDAgfHxcclxuICAgIHRpbGVZID49IHJvd3MgfHxcclxuICAgIHRpbGVYIDwgMCB8fFxyXG4gICAgdGlsZVggPj0gY29scyB8fFxyXG4gICAgbWFwW3RpbGVZXT8uW3RpbGVYXSAhPT0gVElMRV9MSUZUXHJcbiAgKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICBgW01hcFZhbGlkYXRpb24gUmVhY2hhYmlsaXR5XSBJbnZhbGlkIGxpZnQgcG9zaXRpb24gcHJvdmlkZWQ6ICgke3RpbGVYfSwgJHt0aWxlWX0pYFxyXG4gICAgKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIFVzZSBCRlMgdXRpbGl0eSBmdW5jdGlvbiB0byBjaGVjayByZWFjaGFiaWxpdHkgZnJvbSB0aGUgbGlmdCB0aWxlXHJcbiAgLy8gV2UgbmVlZCB0byBrbm93IGlmIHRoZSBsaWZ0IGNhbiByZWFjaCAqYW55KiBUSUxFX0NPUlJJRE9SIG9yIFRJTEVfUk9PTV9GTE9PUlxyXG4gIGNvbnN0IHdhbGthYmxlRm9yTGlmdFNlYXJjaCA9IFtUSUxFX0NPUlJJRE9SLCBUSUxFX1JPT01fRkxPT1IsIFRJTEVfTElGVF07IC8vIEJGUyBjYW4gdHJhdmVyc2UgdGhlc2VcclxuICBjb25zdCB0YXJnZXRUaWxlcyA9IFtUSUxFX0NPUlJJRE9SLCBUSUxFX1JPT01fRkxPT1JdOyAvLyBTdWNjZXNzIGlmIEJGUyBmaW5kcyBvbmUgb2YgdGhlc2VcclxuXHJcbiAgY29uc3QgeyByZWFjaGFibGUgfSA9IHBlcmZvcm1CRlMoXHJcbiAgICBtYXAsXHJcbiAgICB0aWxlWCxcclxuICAgIHRpbGVZLFxyXG4gICAgY29scyxcclxuICAgIHJvd3MsXHJcbiAgICB3YWxrYWJsZUZvckxpZnRTZWFyY2gsXHJcbiAgICB0YXJnZXRUaWxlc1xyXG4gICk7XHJcblxyXG4gIGlmICghcmVhY2hhYmxlKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICBgW01hcFZhbGlkYXRpb24gUmVhY2hhYmlsaXR5XSBGQUlMRUQuIExpZnQgYXQgdGlsZSgke3RpbGVYfSwgJHt0aWxlWX0pIGlzIGlzb2xhdGVkIGZyb20gY29ycmlkb3JzL3Jvb21zLmBcclxuICAgICk7XHJcbiAgfVxyXG4gIHJldHVybiByZWFjaGFibGU7XHJcbn1cclxuXHJcbi8vIC0tLSBIZWxwZXI6IEVuc3VyZSBCb3JkZXJzIC0tLVxyXG5mdW5jdGlvbiBfZW5zdXJlTWFwQm9yZGVycyhtYXAsIGNvbHMsIHJvd3MpIHtcclxuICBjb25zb2xlLmxvZygnICBbTWFwR2VuXSBFbnN1cmluZyBtYXAgYm9yZGVycyBhcmUgd2FsbHMuJyk7XHJcbiAgLy8gVG9wIGFuZCBCb3R0b20gYm9yZGVyc1xyXG4gIGZvciAobGV0IGMgPSAwOyBjIDwgY29sczsgYysrKSB7XHJcbiAgICBpZiAobWFwWzBdPy5bY10gIT09IHVuZGVmaW5lZCkgbWFwWzBdW2NdID0gVElMRV9XQUxMO1xyXG4gICAgaWYgKG1hcFtyb3dzIC0gMV0/LltjXSAhPT0gdW5kZWZpbmVkKSBtYXBbcm93cyAtIDFdW2NdID0gVElMRV9XQUxMO1xyXG4gIH1cclxuICAvLyBMZWZ0IGFuZCBSaWdodCBib3JkZXJzXHJcbiAgZm9yIChsZXQgciA9IDA7IHIgPCByb3dzOyByKyspIHtcclxuICAgIGlmIChtYXBbcl0/LlswXSAhPT0gdW5kZWZpbmVkKSBtYXBbcl1bMF0gPSBUSUxFX1dBTEw7XHJcbiAgICBpZiAobWFwW3JdPy5bY29scyAtIDFdICE9PSB1bmRlZmluZWQpIG1hcFtyXVtjb2xzIC0gMV0gPSBUSUxFX1dBTEw7XHJcbiAgfVxyXG59XHJcblxyXG4vLyAtLS0gRGVidWcgSGVscGVyIC0tLVxyXG4vLyAoT3B0aW9uYWwsIHVuY29tbWVudCB0aGUgY2FsbCBpbiBnZW5lcmF0ZUxldmVsRGF0YSB0byB1c2Ugd2hlbiBkZWJ1Z2dpbmcgcmVhY2hhYmlsaXR5KVxyXG5mdW5jdGlvbiBsb2dNYXBHcmlkRm9yRGVidWcobWFwLCBjb2xzLCByb3dzKSB7XHJcbiAgY29uc29sZS5sb2coJy0tLSBERUJVRyBNQVAgR1JJRCAtLS0nKTtcclxuICBmb3IgKGxldCB5ID0gMDsgeSA8IHJvd3M7IHkrKykge1xyXG4gICAgY29uc3Qgcm93U3RyaW5nID0gbWFwW3ldXHJcbiAgICAgIC5tYXAoKHRpbGUpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKHRpbGUpIHtcclxuICAgICAgICAgIGNhc2UgVElMRV9XQUxMOlxyXG4gICAgICAgICAgICByZXR1cm4gJyMnO1xyXG4gICAgICAgICAgY2FzZSBUSUxFX0NPUlJJRE9SOlxyXG4gICAgICAgICAgICByZXR1cm4gJy4nO1xyXG4gICAgICAgICAgY2FzZSBUSUxFX1JPT01fRkxPT1I6XHJcbiAgICAgICAgICAgIHJldHVybiAnICc7XHJcbiAgICAgICAgICBjYXNlIFRJTEVfTElGVDpcclxuICAgICAgICAgICAgcmV0dXJuICdMJztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiAnPyc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuam9pbignJyk7XHJcbiAgICBjb25zb2xlLmxvZyhyb3dTdHJpbmcpO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZygnLS0tIEVORCBERUJVRyBNQVAgR1JJRCAtLS0nKTtcclxufVxyXG4iLCIvLyBzcmMvbWFwL1Byb2NlZHVyYWxNYXAuanNcclxuXHJcbmltcG9ydCB7IEJvb2sgfSBmcm9tICcuL0Jvb2suanMnO1xyXG5pbXBvcnQgeyBNYXBSZW5kZXJlciB9IGZyb20gJy4vTWFwUmVuZGVyZXIuanMnO1xyXG5pbXBvcnQgeyByYW5kb21JbnQgfSBmcm9tICcuLi91dGlscy9tYXAuanMnOyAvLyBVcGV3bmlqIHNpxJksIMW8ZSBtYXAuanMgZWtzcG9ydHVqZSByYW5kb21JbnRcclxuaW1wb3J0IHsgZ2VuZXJhdGVMZXZlbERhdGEgfSBmcm9tICcuL01hcEdlbi5qcyc7XHJcbmltcG9ydCB7XHJcbiAgVElMRV9XQUxMLFxyXG4gIFRJTEVfQ09SUklET1IsXHJcbiAgVElMRV9ST09NX0ZMT09SLFxyXG4gIFRJTEVfTElGVCxcclxuICBMSUZUX0lOVEVSQUNUSU9OX1JBRElVU19NVUxUSVBMSUVSLFxyXG4gIEdZTV9DSEFOQ0VfT05fRklSU1RfRkxPT1IsIC8vIFphY2hvd2FqIGRsYSBkb215xZtsbnljaCBwYXJhbWV0csOzdyBnZW5lcm93YW5pYSwgamXFm2xpIHBvdHJ6ZWJuZVxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcblxyXG4vLyBVd2FnYTogY29uc2lzdGVudExpZnRDb29yZHMgamVzdCB0ZXJheiB6YXJ6xIVkemFuZSB3ZXduxJl0cnpuaWUgcHJ6ZXogbWFwR2VuZXJhdG9yLmpzXHJcblxyXG5leHBvcnQgY2xhc3MgUHJvY2VkdXJhbE1hcCB7XHJcbiAgY29uc3RydWN0b3IoY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgZmxvb3JOdW1iZXIsIG1pbkZsb29yLCBtYXhGbG9vcikge1xyXG4gICAgdGhpcy50aWxlU2l6ZSA9IDMyO1xyXG4gICAgdGhpcy5jb2xzID0gNDA7XHJcbiAgICB0aGlzLnJvd3MgPSAzMDtcclxuICAgIHRoaXMud2lkdGggPSB0aGlzLmNvbHMgKiB0aGlzLnRpbGVTaXplO1xyXG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLnJvd3MgKiB0aGlzLnRpbGVTaXplO1xyXG4gICAgdGhpcy5vZmZzZXRYID0gMDtcclxuICAgIHRoaXMub2Zmc2V0WSA9IDA7XHJcblxyXG4gICAgdGhpcy5mbG9vck51bWJlciA9IGZsb29yTnVtYmVyO1xyXG4gICAgdGhpcy5taW5GbG9vciA9IG1pbkZsb29yO1xyXG4gICAgdGhpcy5tYXhGbG9vciA9IG1heEZsb29yO1xyXG5cclxuICAgIC8vIFN0YW4gbWFweSAtIGluaWNqYWxpem93YW55IHBvIHd5Z2VuZXJvd2FuaXVcclxuICAgIHRoaXMubWFwID0gbnVsbDtcclxuICAgIHRoaXMucm9vbXMgPSBbXTtcclxuICAgIHRoaXMuYm9va3MgPSBbXTtcclxuICAgIHRoaXMubGlmdFBvc2l0aW9uID0gbnVsbDsgLy8gUG96eWNqYSB3aW5keSB7eCwgeSwgdGlsZVgsIHRpbGVZfVxyXG5cclxuICAgIC8vIE1vZHXFgnlcclxuICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgTWFwUmVuZGVyZXIodGhpcy50aWxlU2l6ZSk7XHJcblxyXG4gICAgLy8gLS0tIEdlbmVyb3dhbmllIC0tLVxyXG4gICAgLy8gWmRlZmluaXVqIHBhcmFtZXRyeSBnZW5lcm93YW5pYSB0dXRhaiBsdWIgcHJ6ZWthxbwgamVcclxuICAgIGNvbnN0IGdlbmVyYXRpb25QYXJhbXMgPSB7XHJcbiAgICAgIG1pblJvb21TaXplOiA1LFxyXG4gICAgICBtYXhSb29tU2l6ZTogMTAsXHJcbiAgICAgIGNvcnJpZG9yVGhpY2tuZXNzOiAxLFxyXG4gICAgICBudW1Sb29tczogMTIsXHJcbiAgICAgIG1heFJvb21BdHRlbXB0czogMjAwLFxyXG4gICAgICBib29rc1Blck1hcDogNSwgLy8gS3NpxIXFvGtpIHVtaWVzemN6YW5lICpwbyogd3lnZW5lcm93YW5pdVxyXG4gICAgICByb29tVHlwZVdlaWdodHM6IHtcclxuICAgICAgICAvLyBXYWdpIHR5cMOzdyBwb21pZXN6Y3plxYRcclxuICAgICAgICBjbGFzc3Jvb206IDUwLFxyXG4gICAgICAgIG9mZmljZTogMjUsXHJcbiAgICAgICAgbGlicmFyeTogMTUsXHJcbiAgICAgICAgbGFiOiAxMCwgLy8gISBOT1dZIFRZUDogTGFib3JhdG9yaXVtXHJcbiAgICAgICAgc3RvcmFnZTogNSwgLy8gISBOT1dZIFRZUDogTWFnYXp5blxyXG4gICAgICAgIC8vIHN6YW5zYSBuYSBzacWCb3duacSZIChneW0pIGplc3Qgb2JzxYJ1Z2l3YW5hIHByemV6IGdlbmVyYXRvciBuYSBwb2RzdGF3aWUgZmxvb3JOdW1iZXJcclxuICAgICAgICB1dGlsaXR5OiAxMCwgLy8gUG9taWVzemN6ZW5pZSBnb3Nwb2RhcmN6ZVxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBLb25maWd1cmFjamEgZGxhIGdlbmVyYXRvcmFcclxuICAgICAgY29uc3QgZ2VuZXJhdGlvbkNvbmZpZyA9IHtcclxuICAgICAgICBjb2xzOiB0aGlzLmNvbHMsXHJcbiAgICAgICAgcm93czogdGhpcy5yb3dzLFxyXG4gICAgICAgIGZsb29yTnVtYmVyOiB0aGlzLmZsb29yTnVtYmVyLFxyXG4gICAgICAgIG1pbkZsb29yOiB0aGlzLm1pbkZsb29yLFxyXG4gICAgICAgIG1heEZsb29yOiB0aGlzLm1heEZsb29yLCAvLyBQcnpla2HFvCB0ZcW8IG1heEZsb29yLCBtb8W8ZSBiecSHIHByenlkYXRuZSBww7PFum5pZWpcclxuICAgICAgICB0aWxlU2l6ZTogdGhpcy50aWxlU2l6ZSwgLy8gUHJ6ZWthxbwgdGlsZVNpemUsIGplxZtsaSBnZW5lcmF0b3IgZ28gcG90cnplYnVqZSAobnAuIGRvIHBvenljamkgd2luZHkgdyDFm3dpZWNpZSlcclxuICAgICAgICBnZW5lcmF0aW9uUGFyYW1zOiBnZW5lcmF0aW9uUGFyYW1zLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gR2VuZXJ1aiBkYW5lIHVrxYJhZHUgbWFweVxyXG4gICAgICBjb25zdCB7IG1hcCwgcm9vbXMsIGxpZnRQb3NpdGlvbiB9ID0gZ2VuZXJhdGVMZXZlbERhdGEoZ2VuZXJhdGlvbkNvbmZpZyk7XHJcblxyXG4gICAgICAvLyBaYXBpc3ogd3lnZW5lcm93YW5lIGRhbmVcclxuICAgICAgdGhpcy5tYXAgPSBtYXA7XHJcbiAgICAgIHRoaXMucm9vbXMgPSByb29tcztcclxuICAgICAgdGhpcy5saWZ0UG9zaXRpb24gPSBsaWZ0UG9zaXRpb247IC8vIFphd2llcmEganXFvCB3c3DDs8WCcnrEmWRuZSDFm3dpYXRhLCBqZcWbbGkgb2JsaWN6b25lIHByemV6IGdlbmVyYXRvclxyXG5cclxuICAgICAgLy8gLS0tIEtyb2tpIHBvIGdlbmVyYWNqaSAtLS1cclxuICAgICAgdGhpcy5yZW5kZXJlci5yZXNldENvbG9yQ2FjaGUoKTsgLy8gWnJlc2V0dWogY2FjaGUgcmVuZGVyZXJhIGRsYSBub3dlaiBtYXB5XHJcbiAgICAgIHRoaXMucGxhY2VCb29rc1JlbGlhYmx5KGdlbmVyYXRpb25QYXJhbXMuYm9va3NQZXJNYXApOyAvLyBVbWllxZvEhyBrc2nEhcW8a2kgbmEgd3lnZW5lcm93YW5laiBtYXBpZVxyXG5cclxuICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgYFtQcm9jTWFwIFBpxJl0cm8gJHt0aGlzLmZsb29yTnVtYmVyfV0gSW5pY2phbGl6YWNqYSB6YWtvxYRjem9uYS4gJHtcclxuICAgICAgICAgIHRoaXMucm9vbXMubGVuZ3RoXHJcbiAgICAgICAgfSBwb2tvaSwgV2luZGE6ICR7XHJcbiAgICAgICAgICB0aGlzLmxpZnRQb3NpdGlvblxyXG4gICAgICAgICAgICA/IGBPSyB3ICgke3RoaXMubGlmdFBvc2l0aW9uLnRpbGVYfSwgJHt0aGlzLmxpZnRQb3NpdGlvbi50aWxlWX0pYFxyXG4gICAgICAgICAgICA6ICdCxYHEhEQnXHJcbiAgICAgICAgfSwgJHt0aGlzLmJvb2tzLmxlbmd0aH0ga3NpxIXFvGVrLmBcclxuICAgICAgKTtcclxuICAgICAgLy8gdGhpcy5sb2dNYXBHcmlkKCk7IC8vIE9wY2pvbmFsbmllOiBaYWxvZ3VqIHNpYXRrxJkgcG8gd3N6eXN0a2ltXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgIGBbUHJvY01hcCBQacSZdHJvICR7dGhpcy5mbG9vck51bWJlcn1dIELFgcSERCBLUllUWUNaTlkgcG9kY3phcyBnZW5lcm93YW5pYSBtYXB5IGx1YiBrb25maWd1cmFjamk6YCxcclxuICAgICAgICBlcnJvclxyXG4gICAgICApO1xyXG4gICAgICAvLyBPYnPFgnXFvCBixYLEhWQgb2Rwb3dpZWRuaW8gLSBtb8W8ZSByenXEhyBnbyBkYWxlaiBsdWIgdXN0YXcgc3RhbiAnZmFpbGVkJ1xyXG4gICAgICB0aHJvdyBlcnJvcjsgLy8gUnp1xIcgcG9ub3duaWUsIGFieSB6YXN5Z25hbGl6b3dhxIcgYsWCxIVkIHd5d2/FgnVqxIVjZW11IChucC4gR2FtZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIC0tLSBVbWllc3pjemFuaWUga3NpxIXFvGVrIChQcnplbmllc2lvbmUgdHV0YWosIGR6aWHFgmEgbmEgd3lnZW5lcm93YW5laiBtYXBpZSkgLS0tXHJcbiAgcGxhY2VCb29rc1JlbGlhYmx5KGJvb2tzUGVyTWFwKSB7XHJcbiAgICB0aGlzLmJvb2tzID0gW107IC8vIFd5Y3p5xZvEhyBwb3ByemVkbmllIGtzacSFxbxraVxyXG4gICAgY29uc3QgcG90ZW50aWFsTG9jYXRpb25zID0gW107XHJcbiAgICBjb25zdCBwbGFjZWRDb29yZHMgPSBuZXcgU2V0KCk7XHJcbiAgICBjb25zb2xlLmxvZyhgW1Byb2NNYXAgUGnEmXRybyAke3RoaXMuZmxvb3JOdW1iZXJ9XSBVbWllc3pjemFuaWUgZG8gJHtib29rc1Blck1hcH0ga3NpxIXFvGVrLi4uYCk7XHJcblxyXG4gICAgLy8gWm5hamTFuiBwcmF3aWTFgm93ZSBtaWVqc2NhIChrb3J5dGFyeiBsdWIgcG9kxYJvZ2EgcG9rb2p1LCBuaWUgd2luZGEpXHJcbiAgICBmb3IgKGxldCByID0gMDsgciA8IHRoaXMucm93czsgcisrKSB7XHJcbiAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5jb2xzOyBjKyspIHtcclxuICAgICAgICBjb25zdCB0aWxlVmFsdWUgPSB0aGlzLm1hcFtyXT8uW2NdO1xyXG4gICAgICAgIGNvbnN0IGlzTGlmdFRpbGUgPVxyXG4gICAgICAgICAgdGhpcy5saWZ0UG9zaXRpb24gJiYgciA9PT0gdGhpcy5saWZ0UG9zaXRpb24udGlsZVkgJiYgYyA9PT0gdGhpcy5saWZ0UG9zaXRpb24udGlsZVg7XHJcbiAgICAgICAgLy8gU3ByYXdkemFteSBDWlkgSkVTVCB0byBrb3J5dGFyeiBMVUIgcG9kxYJvZ2EgcG9rb2p1IE9SQVogQ1pZIE5JRSBKRVNUIHRvIHdpbmRhXHJcbiAgICAgICAgaWYgKCh0aWxlVmFsdWUgPT09IFRJTEVfQ09SUklET1IgfHwgdGlsZVZhbHVlID09PSBUSUxFX1JPT01fRkxPT1IpICYmICFpc0xpZnRUaWxlKSB7XHJcbiAgICAgICAgICBwb3RlbnRpYWxMb2NhdGlvbnMucHVzaCh7IHIsIGMgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVW1pZcWbxIcga3NpxIXFvGtpIGxvc293byB6IHBvdGVuY2phbG55Y2ggbG9rYWxpemFjamlcclxuICAgIGxldCBib29rc1BsYWNlZCA9IDA7XHJcbiAgICB3aGlsZSAoYm9va3NQbGFjZWQgPCBib29rc1Blck1hcCAmJiBwb3RlbnRpYWxMb2NhdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvdGVudGlhbExvY2F0aW9ucy5sZW5ndGgpO1xyXG4gICAgICBjb25zdCB7IHIsIGMgfSA9IHBvdGVudGlhbExvY2F0aW9ucy5zcGxpY2UocmFuZG9tSW5kZXgsIDEpWzBdOyAvLyBVc3XFhCB3eWJyYW7EhSBsb2thbGl6YWNqxJlcclxuICAgICAgY29uc3QgY29vcmRLZXkgPSBgJHtjfSwke3J9YDtcclxuXHJcbiAgICAgIC8vIFBvZHfDs2puaWUgc3ByYXdkxboga2FmZWxlayBuYSB3c3plbGtpIHd5cGFkZWsgaSB1cGV3bmlqIHNpxJksIMW8ZSBuaWUgem9zdGHFgiBqdcW8IHVtaWVzemN6b255IChjaG/EhyBzcGxpY2UgcG93aW5pZW4gdGVtdSB6YXBvYmllYylcclxuICAgICAgaWYgKFxyXG4gICAgICAgICh0aGlzLm1hcFtyXT8uW2NdID09PSBUSUxFX0NPUlJJRE9SIHx8IHRoaXMubWFwW3JdPy5bY10gPT09IFRJTEVfUk9PTV9GTE9PUikgJiZcclxuICAgICAgICAhcGxhY2VkQ29vcmRzLmhhcyhjb29yZEtleSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgY29uc3QgYm9va1dvcmxkWCA9IChjICsgMC41KSAqIHRoaXMudGlsZVNpemU7XHJcbiAgICAgICAgY29uc3QgYm9va1dvcmxkWSA9IChyICsgMC41KSAqIHRoaXMudGlsZVNpemU7XHJcbiAgICAgICAgY29uc3QgYm9va0lkID0gYGJvb2tfJHt0aGlzLmZsb29yTnVtYmVyfV8ke2Jvb2tzUGxhY2VkICsgMX1gOyAvLyBVbmlrYWxuZSBJRCBuYSBwacSZdHJvL2tzacSFxbxrxJlcclxuICAgICAgICB0aGlzLmJvb2tzLnB1c2gobmV3IEJvb2soYm9va1dvcmxkWCwgYm9va1dvcmxkWSwgYm9va0lkLCB0aGlzLnRpbGVTaXplKSk7XHJcbiAgICAgICAgcGxhY2VkQ29vcmRzLmFkZChjb29yZEtleSk7XHJcbiAgICAgICAgYm9va3NQbGFjZWQrKztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChib29rc1BsYWNlZCA8IGJvb2tzUGVyTWFwKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgW1Byb2NNYXAgS3NpxIXFvGtpXSBVbWllc3pjem9ubyB0eWxrbyAke2Jvb2tzUGxhY2VkfS8ke2Jvb2tzUGVyTWFwfSBrc2nEhcW8ZWsuYCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhgW1Byb2NNYXAgS3NpxIXFvGtpXSBVbWllc3pjem9ubyAke2Jvb2tzUGxhY2VkfSBrc2nEhcW8ZWsuYCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gTWV0b2R5IGludGVyYWtjamkgLS0tXHJcblxyXG4gIGlzV2Fsa2FibGUod29ybGRYLCB3b3JsZFkpIHtcclxuICAgIGlmICghdGhpcy5tYXApIHJldHVybiBmYWxzZTsgLy8gTWFwYSBuaWUgd3lnZW5lcm93YW5hXHJcbiAgICBjb25zdCB0aWxlWCA9IE1hdGguZmxvb3Iod29ybGRYIC8gdGhpcy50aWxlU2l6ZSk7XHJcbiAgICBjb25zdCB0aWxlWSA9IE1hdGguZmxvb3Iod29ybGRZIC8gdGhpcy50aWxlU2l6ZSk7XHJcblxyXG4gICAgaWYgKHRpbGVYIDwgMCB8fCB0aWxlWCA+PSB0aGlzLmNvbHMgfHwgdGlsZVkgPCAwIHx8IHRpbGVZID49IHRoaXMucm93cykge1xyXG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFBvemEgZ3JhbmljYW1pIG1hcHlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0aWxlVmFsdWUgPSB0aGlzLm1hcFt0aWxlWV0/Llt0aWxlWF07XHJcbiAgICAvLyBTcHJhd2TFuiB0eXB5IHByemVjaG9kbmljaCBrYWZlbGvDs3cgLSBXSU5EQSBKRVNUIFBSWkVDSE9ETklBIChkbGEga29saXpqaSwgbmlla29uaWVjem5pZSBkbyBzdGFuaWEpXHJcbiAgICByZXR1cm4gdGlsZVZhbHVlID09PSBUSUxFX0NPUlJJRE9SIHx8IHRpbGVWYWx1ZSA9PT0gVElMRV9ST09NX0ZMT09SIHx8IHRpbGVWYWx1ZSA9PT0gVElMRV9MSUZUO1xyXG4gIH1cclxuXHJcbiAgZmluZFJhbmRvbUluaXRpYWxTcGF3blBvc2l0aW9uKCkge1xyXG4gICAgaWYgKCF0aGlzLm1hcCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IHN1aXRhYmxlVGlsZXMgPSBbXTtcclxuICAgIC8vIFByZWZlcnVqIGthZmVsa2kgbmllIHPEhXNpYWR1asSFY2UgYmV6cG/Fm3JlZG5pbyB6ZSDFm2NpYW5hbWkgZGxhIG1uaWVqIGNpYXNuZWdvIHN0YXJ0dVxyXG4gICAgZm9yIChsZXQgciA9IDE7IHIgPCB0aGlzLnJvd3MgLSAxOyByKyspIHtcclxuICAgICAgZm9yIChsZXQgYyA9IDE7IGMgPCB0aGlzLmNvbHMgLSAxOyBjKyspIHtcclxuICAgICAgICBjb25zdCB0aWxlVmFsdWUgPSB0aGlzLm1hcFtyXT8uW2NdO1xyXG4gICAgICAgIGNvbnN0IGlzTGlmdCA9XHJcbiAgICAgICAgICB0aGlzLmxpZnRQb3NpdGlvbiAmJiByID09PSB0aGlzLmxpZnRQb3NpdGlvbi50aWxlWSAmJiBjID09PSB0aGlzLmxpZnRQb3NpdGlvbi50aWxlWDtcclxuICAgICAgICAvLyBTenVrYW15IGtvcnl0YXJ6YSBsdWIgcG9kxYJvZ2kgcG9rb2p1LCBBTEUgTklFIFdJTkRZXHJcbiAgICAgICAgaWYgKCh0aWxlVmFsdWUgPT09IFRJTEVfQ09SUklET1IgfHwgdGlsZVZhbHVlID09PSBUSUxFX1JPT01fRkxPT1IpICYmICFpc0xpZnQpIHtcclxuICAgICAgICAgIC8vIFNwcmF3ZMW6LCBjenkgamVzdCBvdG9jem9ueSBwcnpleiBuaWUtxZtjaWFueSAod2nEmWNlaiBvdHdhcnRlaiBwcnplc3RyemVuaSlcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5tYXBbciAtIDFdPy5bY10gIT09IFRJTEVfV0FMTCAmJlxyXG4gICAgICAgICAgICB0aGlzLm1hcFtyICsgMV0/LltjXSAhPT0gVElMRV9XQUxMICYmXHJcbiAgICAgICAgICAgIHRoaXMubWFwW3JdPy5bYyAtIDFdICE9PSBUSUxFX1dBTEwgJiZcclxuICAgICAgICAgICAgdGhpcy5tYXBbcl0/LltjICsgMV0gIT09IFRJTEVfV0FMTFxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHN1aXRhYmxlVGlsZXMucHVzaCh7IHIsIGMgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV3ljb2ZhbmllOiBKZcWbbGkgbmllIHpuYWxlemlvbm8gb3R3YXJ0eWNoIHByemVzdHJ6ZW5pLCB1xbx5aiBkb3dvbG5lZ28gcHJhd2lkxYJvd2VnbyBrYWZlbGthIHBvZMWCb2dpL2tvcnl0YXJ6YSAobmFkYWwgbmllIHdpbmR5KVxyXG4gICAgaWYgKHN1aXRhYmxlVGlsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICBcIltNYXBHZW4gU3Bhd25dIE5pZSB6bmFsZXppb25vICdvdHdhcnR5Y2gnIHB1bmt0w7N3IHN0YXJ0b3d5Y2gsIHXFvHl3YW0gZG93b2xuZWdvIHByemVjaG9kbmllZ28ga2FmZWxrYSBuaWUgYsSZZMSFY2VnbyB3aW5kxIUuXCJcclxuICAgICAgKTtcclxuICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCB0aGlzLnJvd3M7IHIrKykge1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5jb2xzOyBjKyspIHtcclxuICAgICAgICAgIGNvbnN0IHRpbGVWYWx1ZSA9IHRoaXMubWFwW3JdPy5bY107XHJcbiAgICAgICAgICBjb25zdCBpc0xpZnQgPVxyXG4gICAgICAgICAgICB0aGlzLmxpZnRQb3NpdGlvbiAmJiByID09PSB0aGlzLmxpZnRQb3NpdGlvbi50aWxlWSAmJiBjID09PSB0aGlzLmxpZnRQb3NpdGlvbi50aWxlWDtcclxuICAgICAgICAgIGlmICgodGlsZVZhbHVlID09PSBUSUxFX0NPUlJJRE9SIHx8IHRpbGVWYWx1ZSA9PT0gVElMRV9ST09NX0ZMT09SKSAmJiAhaXNMaWZ0KSB7XHJcbiAgICAgICAgICAgIHN1aXRhYmxlVGlsZXMucHVzaCh7IHIsIGMgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHN1aXRhYmxlVGlsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgYFtNYXBHZW4gU3Bhd25dIEtSWVRZQ1pOWTogTmllIHpuYWxlemlvbm8gb2Rwb3dpZWRuaWNoIGthZmVsa8OzdyBzdGFydG93eWNoIChwb2TFgm9nYS9rb3J5dGFyeiBuaWVixJlkxIVjeSB3aW5kxIUpIWBcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgLy8gWmFzeWduYWxpenVqIGLFgsSFZFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgciwgYyB9ID0gc3VpdGFibGVUaWxlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzdWl0YWJsZVRpbGVzLmxlbmd0aCldO1xyXG4gICAgY29uc3Qgd29ybGRYID0gKGMgKyAwLjUpICogdGhpcy50aWxlU2l6ZTtcclxuICAgIGNvbnN0IHdvcmxkWSA9IChyICsgMC41KSAqIHRoaXMudGlsZVNpemU7XHJcbiAgICBjb25zb2xlLmxvZyhgW01hcEdlbiBTcGF3bl0gWm5hbGV6aW9ubyBwb2N6xIV0a293eSBzcGF3biBuYSBrcmF0Y2UoJHtjfSwgJHtyfSlgKTtcclxuICAgIHJldHVybiB7IHg6IHdvcmxkWCwgeTogd29ybGRZIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBabmFqZHVqZSBuYWpibGnFvHN6xIUgQkVaUElFQ1pOxIQgcHJ6ZWNob2RuacSFIGtyYXRrxJkgKEtPUllUQVJaIGx1YiBQT0TFgU9HQV9QT0tPSlUpXHJcbiAgICogZG8gZG9jZWxvd2VqIHBvenljamkgdyDFm3dpZWNpZS5cclxuICAgKiBVxbx5d2Egd3lzenVraXdhbmlhIHcgcm96c3plcnphasSFY3ltIHNpxJkgcHJvbWllbml1LCBhIGpha28gZmFsbGJhY2sgQkZTLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRXb3JsZFggRG9jZWxvd2Egd3Nww7PFgnJ6xJlkbmEgWCB3IMWbd2llY2llLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRXb3JsZFkgRG9jZWxvd2Egd3Nww7PFgnJ6xJlkbmEgWSB3IMWbd2llY2llLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4UmFkaXVzPThdIE1ha3N5bWFsbnkgcHJvbWllxYQgcG9jesSFdGtvd2VnbyB3eXN6dWtpd2FuaWEuXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbZXhjbHVkZUxpZnQ9ZmFsc2VdIEplxZtsaSB0cnVlLCBXWU5JSyBuaWUgbW/FvGUgYnnEhyBrcmF0a8SFIHdpbmR5LlxyXG4gICAqIEByZXR1cm5zIHt7eDogbnVtYmVyLCB5OiBudW1iZXJ9IHwgbnVsbH0gV3Nww7PFgnJ6xJlkbmUgxZtyb2RrYSB6bmFsZXppb25laiBrcmF0a2kgdyDFm3dpZWNpZSBsdWIgbnVsbC5cclxuICAgKi9cclxuICBmaW5kTmVhcmVzdFdhbGthYmxlVGlsZSh0YXJnZXRXb3JsZFgsIHRhcmdldFdvcmxkWSwgbWF4UmFkaXVzID0gOCwgZXhjbHVkZUxpZnQgPSBmYWxzZSkge1xyXG4gICAgaWYgKCF0aGlzLm1hcCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgY29uc3QgdGFyZ2V0VGlsZVggPSBNYXRoLmZsb29yKHRhcmdldFdvcmxkWCAvIHRoaXMudGlsZVNpemUpO1xyXG4gICAgY29uc3QgdGFyZ2V0VGlsZVkgPSBNYXRoLmZsb29yKHRhcmdldFdvcmxkWSAvIHRoaXMudGlsZVNpemUpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICBgW01hcFV0aWxdIFN6dWthbmllIG5hamJsacW8c3plaiBCRVpQSUVDWk5FSiBrcmF0a2kgKGV4Y2x1ZGVMaWZ0PSR7ZXhjbHVkZUxpZnR9KSBibGlza28gxZt3aWF0YSgke3RhcmdldFdvcmxkWC50b0ZpeGVkKFxyXG4gICAgICAgIDFcclxuICAgICAgKX0sICR7dGFyZ2V0V29ybGRZLnRvRml4ZWQoMSl9KSAtPiBrcmF0a2EoJHt0YXJnZXRUaWxlWH0sICR7dGFyZ2V0VGlsZVl9KWBcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgdGFyZ2V0U2FmZVRpbGVzID0gW1RJTEVfQ09SUklET1IsIFRJTEVfUk9PTV9GTE9PUl07IC8vIENlbDogS29yeXRhcnogbHViIHBvZMWCb2dhIHBva29qdVxyXG4gICAgaWYgKCFleGNsdWRlTGlmdCkge1xyXG4gICAgICAvLyBKZcWbbGkgbmllIHd5a2x1Y3phbXkgd2luZHksIHRvIG9uYSB0ZcW8IGplc3QgcG90ZW5jamFsbnltIGNlbGVtXHJcbiAgICAgIC8vIHRhcmdldFNhZmVUaWxlcy5wdXNoKFRJTEVfTElGVCk7IC8vIC0tPiBaZGVjeWRvd2FsacWbbXksIMW8ZSBaQVdTWkUgc3p1a2FteSBrb3J5dGFyemEvcG9rb2p1XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMS4gU3ByYXdkemVuaWUgU0FNRUoga3JhdGtpIGRvY2Vsb3dlaiAoamXFm2xpIGplc3QgYmV6cGllY3puYSlcclxuICAgIGNvbnN0IHN0YXJ0VGlsZVZhbHVlID0gdGhpcy5tYXBbdGFyZ2V0VGlsZVldPy5bdGFyZ2V0VGlsZVhdO1xyXG4gICAgaWYgKHRhcmdldFNhZmVUaWxlcy5pbmNsdWRlcyhzdGFydFRpbGVWYWx1ZSkpIHtcclxuICAgICAgLy8gU3ByYXdkxbogdHlsa28sIGN6eSB0byBuaWUgamVzdCB3aW5kYSwgamXFm2xpIGV4Y2x1ZGVMaWZ0PXRydWVcclxuICAgICAgaWYgKCFleGNsdWRlTGlmdCB8fCBzdGFydFRpbGVWYWx1ZSAhPT0gVElMRV9MSUZUKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICBgICBbTWFwVXRpbF0gS3JhdGthIGRvY2Vsb3dhICgke3RhcmdldFRpbGVYfSwgJHt0YXJnZXRUaWxlWX0pIGplc3QganXFvCBiZXpwaWVjem5hLmBcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB7IHg6ICh0YXJnZXRUaWxlWCArIDAuNSkgKiB0aGlzLnRpbGVTaXplLCB5OiAodGFyZ2V0VGlsZVkgKyAwLjUpICogdGhpcy50aWxlU2l6ZSB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMi4gV3lzenVraXdhbmllIFByb21pZW5pb3dlIChzenVrYW15IEtPUllUQVJaQSBsdWIgUE9ExYFPR0kgUE9LT0pVKVxyXG4gICAgZm9yIChsZXQgcmFkaXVzID0gMTsgcmFkaXVzIDw9IG1heFJhZGl1czsgcmFkaXVzKyspIHtcclxuICAgICAgZm9yIChsZXQgZHkgPSAtcmFkaXVzOyBkeSA8PSByYWRpdXM7IGR5KyspIHtcclxuICAgICAgICBmb3IgKGxldCBkeCA9IC1yYWRpdXM7IGR4IDw9IHJhZGl1czsgZHgrKykge1xyXG4gICAgICAgICAgLy8gU3ByYXdkemFteSB0eWxrbyBncmFuaWPEmSBvYmVjbmVnbyBwcm9taWVuaWFcclxuICAgICAgICAgIGlmIChNYXRoLmFicyhkeCkgPCByYWRpdXMgJiYgTWF0aC5hYnMoZHkpIDwgcmFkaXVzKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICBjb25zdCBjaGVja1ggPSB0YXJnZXRUaWxlWCArIGR4O1xyXG4gICAgICAgICAgY29uc3QgY2hlY2tZID0gdGFyZ2V0VGlsZVkgKyBkeTtcclxuXHJcbiAgICAgICAgICAvLyBVcGV3bmlqIHNpxJksIMW8ZSB3IGdyYW5pY2FjaFxyXG4gICAgICAgICAgaWYgKGNoZWNrWCA8IDAgfHwgY2hlY2tYID49IHRoaXMuY29scyB8fCBjaGVja1kgPCAwIHx8IGNoZWNrWSA+PSB0aGlzLnJvd3MpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHRpbGVWYWx1ZSA9IHRoaXMubWFwW2NoZWNrWV0/LltjaGVja1hdO1xyXG4gICAgICAgICAgLy8gWm5hbGV6aW9ubyBiZXpwaWVjem5lIG1pZWpzY2UgKGtvcnl0YXJ6IGx1YiBwb2TFgm9nYSBwb2tvanUpP1xyXG4gICAgICAgICAgaWYgKHRpbGVWYWx1ZSA9PT0gVElMRV9DT1JSSURPUiB8fCB0aWxlVmFsdWUgPT09IFRJTEVfUk9PTV9GTE9PUikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICBgICBbTWFwVXRpbF0gWm5hbGV6aW9ubyBiZXpwaWVjem7EhSBrcmF0a8SZIHByemV6IHd5c3p1a2l3YW5pZSBwcm9taWVuaW93ZSBuYSBrcmF0Y2UoJHtjaGVja1h9LCAke2NoZWNrWX0pYFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4geyB4OiAoY2hlY2tYICsgMC41KSAqIHRoaXMudGlsZVNpemUsIHk6IChjaGVja1kgKyAwLjUpICogdGhpcy50aWxlU2l6ZSB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIDMuIFd5c3p1a2l3YW5pZSBCRlMgKEZhbGxiYWNrKSAtIFN6dWthaiBvZCBjZWx1IG5hIHpld27EhXRyelxyXG4gICAgY29uc29sZS53YXJuKFxyXG4gICAgICBgW01hcFV0aWxdIFd5c3p1a2l3YW5pZSBwcm9taWVuaW93ZSBuaWUgcG93aW9kxYJvIHNpxJkgKG1heFByb21pZcWEICR7bWF4UmFkaXVzfSkuIFJvenBvY3p5bmFtIEJGUyBvZCBrcmF0a2koJHt0YXJnZXRUaWxlWH0sICR7dGFyZ2V0VGlsZVl9KS4uLmBcclxuICAgICk7XHJcbiAgICBjb25zdCBxdWV1ZSA9IFtbdGFyZ2V0VGlsZVgsIHRhcmdldFRpbGVZXV07XHJcbiAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldChbYCR7dGFyZ2V0VGlsZVh9LCR7dGFyZ2V0VGlsZVl9YF0pO1xyXG4gICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcclxuICAgICAgWzAsIC0xXSxcclxuICAgICAgWzAsIDFdLFxyXG4gICAgICBbLTEsIDBdLFxyXG4gICAgICBbMSwgMF0sXHJcbiAgICBdO1xyXG4gICAgLy8gUHJ6ZWNob2RuaWUga3JhdGtpICpkbGEgxZtjaWXFvGtpIHd5c3p1a2l3YW5pYSBCRlMqIChtb8W8bmEgcHJ6ZWrFm8SHIFBSWkVaIHdpbmTEmSwgYWxlIFdJTkRBIG5pZSBqZXN0IENFTEVNLCBqZcWbbGkgZXhjbHVkZUxpZnQ9dHJ1ZSlcclxuICAgIGNvbnN0IGJmc1dhbGthYmxlUGF0aCA9IFtUSUxFX0NPUlJJRE9SLCBUSUxFX1JPT01fRkxPT1IsIFRJTEVfTElGVF07XHJcblxyXG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgW2N1cnJYLCBjdXJyWV0gPSBxdWV1ZS5zaGlmdCgpO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBbZHgsIGR5XSBvZiBkaXJlY3Rpb25zKSB7XHJcbiAgICAgICAgY29uc3QgbmV4dFggPSBjdXJyWCArIGR4O1xyXG4gICAgICAgIGNvbnN0IG5leHRZID0gY3VyclkgKyBkeTtcclxuICAgICAgICBjb25zdCBrZXkgPSBgJHtuZXh0WH0sJHtuZXh0WX1gO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBuZXh0WCA+PSAwICYmXHJcbiAgICAgICAgICBuZXh0WCA8IHRoaXMuY29scyAmJlxyXG4gICAgICAgICAgbmV4dFkgPj0gMCAmJlxyXG4gICAgICAgICAgbmV4dFkgPCB0aGlzLnJvd3MgJiZcclxuICAgICAgICAgICF2aXNpdGVkLmhhcyhrZXkpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCB0aWxlVmFsdWUgPSB0aGlzLm1hcFtuZXh0WV0/LltuZXh0WF07XHJcbiAgICAgICAgICB2aXNpdGVkLmFkZChrZXkpOyAvLyBPem5hY3ogamFrbyBvZHdpZWR6b25lIG5pZXphbGXFvG5pZSBvZCB0eXB1IGRsYSBlZmVrdHl3bm/Fm2NpIEJGU1xyXG5cclxuICAgICAgICAgIC8vIFpuYWxlemlvbm8gZG9jZWxvd8SFIGJlenBpZWN6bsSFIGtyYXRrxJk/IChLb3J5dGFyeiBsdWIgUG9kxYJvZ2EgUG9rb2p1KVxyXG4gICAgICAgICAgaWYgKHRhcmdldFNhZmVUaWxlcy5pbmNsdWRlcyh0aWxlVmFsdWUpKSB7XHJcbiAgICAgICAgICAgIC8vIERvZGF0a293ZSBzcHJhd2R6ZW5pZSwgamXFm2xpIHd5a2x1Y3phbXkgd2luZMSZXHJcbiAgICAgICAgICAgIGlmICghZXhjbHVkZUxpZnQgfHwgdGlsZVZhbHVlICE9PSBUSUxFX0xJRlQpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgIGAgIFtNYXBVdGlsXSBabmFsZXppb25vIGJlenBpZWN6bsSFIGtyYXRrxJkgcHJ6ZXogQkZTIG5hICgke25leHRYfSwgJHtuZXh0WX0pYFxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHsgeDogKG5leHRYICsgMC41KSAqIHRoaXMudGlsZVNpemUsIHk6IChuZXh0WSArIDAuNSkgKiB0aGlzLnRpbGVTaXplIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBDenkgbW/FvGVteSBrb250eW51b3dhxIcgd3lzenVraXdhbmllIFogdGVnbyBzxIVzaWFkYT8gKEtvcnl0YXJ6LCBQb2TFgm9nYSBQb2tvanUgTFVCIFdpbmRhKVxyXG4gICAgICAgICAgaWYgKGJmc1dhbGthYmxlUGF0aC5pbmNsdWRlcyh0aWxlVmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goW25leHRYLCBuZXh0WV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgIGBbTWFwVXRpbF0gS1JZVFlDWk5BIFBPUkHFu0tBOiBCRlMgbmllIG3Ds2fFgiB6bmFsZcW6xIcgxbtBRE5FSiBiZXpwaWVjem5laiBwcnplY2hvZG5pZWoga3JhdGtpIChLb3J5dGFyei9Qb2TFgm9nYSBQb2tvanUsIGV4Y2x1ZGVMaWZ0PSR7ZXhjbHVkZUxpZnR9KSB6YWN6eW5hasSFYyBvZCBrcmF0a2koJHt0YXJnZXRUaWxlWH0sICR7dGFyZ2V0VGlsZVl9KSFgXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG51bGw7IC8vIFphc3lnbmFsaXp1aiBjYcWCa293aXTEhSBwb3JhxbxrxJlcclxuICB9XHJcblxyXG4gIGZpbmROZWFyYnlVbmFuc3dlcmVkQm9vayh3b3JsZFgsIHdvcmxkWSwgcmFkaXVzID0gdGhpcy50aWxlU2l6ZSAqIDAuOCkge1xyXG4gICAgaWYgKCF0aGlzLmJvb2tzKSByZXR1cm4gbnVsbDtcclxuICAgIGxldCBjbG9zZXN0Qm9vayA9IG51bGw7XHJcbiAgICBsZXQgbWluRGlzdGFuY2VTcSA9IHJhZGl1cyAqIHJhZGl1cztcclxuXHJcbiAgICBmb3IgKGNvbnN0IGJvb2sgb2YgdGhpcy5ib29rcykge1xyXG4gICAgICBjb25zdCBpc0NvbGxlY3RlZCA9IGJvb2suaXNDb2xsZWN0ZWQgfHwgYm9vay5jb2xsZWN0ZWQ7IC8vIFNwcmF3ZMW6IG9iaWUgZmxhZ2lcclxuICAgICAgaWYgKCFpc0NvbGxlY3RlZCkge1xyXG4gICAgICAgIGNvbnN0IGR4ID0gYm9vay54IC0gd29ybGRYO1xyXG4gICAgICAgIGNvbnN0IGR5ID0gYm9vay55IC0gd29ybGRZO1xyXG4gICAgICAgIGNvbnN0IGRpc3RhbmNlU3EgPSBkeCAqIGR4ICsgZHkgKiBkeTtcclxuICAgICAgICBpZiAoZGlzdGFuY2VTcSA8IG1pbkRpc3RhbmNlU3EpIHtcclxuICAgICAgICAgIG1pbkRpc3RhbmNlU3EgPSBkaXN0YW5jZVNxO1xyXG4gICAgICAgICAgY2xvc2VzdEJvb2sgPSBib29rO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNsb3Nlc3RCb29rO1xyXG4gIH1cclxuXHJcbiAgbWFya0Jvb2tBc0NvbGxlY3RlZChib29rVG9Db2xsZWN0KSB7XHJcbiAgICBpZiAoIWJvb2tUb0NvbGxlY3QgfHwgIXRoaXMuYm9va3MpIHJldHVybiBmYWxzZTtcclxuICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmZpbmQoKGIpID0+IGIgPT09IGJvb2tUb0NvbGxlY3QgfHwgYi5pZCA9PT0gYm9va1RvQ29sbGVjdC5pZCk7XHJcbiAgICBpZiAoYm9vayAmJiAhKGJvb2suaXNDb2xsZWN0ZWQgfHwgYm9vay5jb2xsZWN0ZWQpKSB7XHJcbiAgICAgIGJvb2suaXNDb2xsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICBib29rLmNvbGxlY3RlZCA9IHRydWU7IC8vIFVzdGF3IG9iaWUgZGxhIGJlenBpZWN6ZcWEc3R3YVxyXG4gICAgICBjb25zb2xlLmxvZyhgW01hcF0gT3puYWN6b25vIGtzacSFxbxrxJkgJHtib29rLmlkfSBqYWtvIHplYnJhbsSFLmApO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGZpbmROZWFyYnlMaWZ0KHdvcmxkWCwgd29ybGRZLCByYWRpdXMgPSB0aGlzLnRpbGVTaXplICogTElGVF9JTlRFUkFDVElPTl9SQURJVVNfTVVMVElQTElFUikge1xyXG4gICAgaWYgKCF0aGlzLmxpZnRQb3NpdGlvbikgcmV0dXJuIG51bGw7XHJcbiAgICAvLyBTcHJhd2TFuiBvZGxlZ8WCb8WbxIcgb2QgxZtyb2RrYSBwb3N0YWNpIGRvIMWbcm9ka2Ega2FmZWxrYSB3aW5keVxyXG4gICAgY29uc3QgZHggPSB3b3JsZFggLSB0aGlzLmxpZnRQb3NpdGlvbi54O1xyXG4gICAgY29uc3QgZHkgPSB3b3JsZFkgLSB0aGlzLmxpZnRQb3NpdGlvbi55O1xyXG4gICAgY29uc3QgZGlzdGFuY2VTcSA9IGR4ICogZHggKyBkeSAqIGR5O1xyXG4gICAgcmV0dXJuIGRpc3RhbmNlU3EgPCByYWRpdXMgKiByYWRpdXMgPyB0aGlzLmxpZnRQb3NpdGlvbiA6IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRMaWZ0UG9zaXRpb24oKSB7XHJcbiAgICAvLyBVcGV3bmlqIHNpxJksIMW8ZSB6d3JhY2FzeiBrb3BpxJksIGplxZtsaSBsaWZ0UG9zaXRpb24gamVzdCBtb2R5Zmlrb3dhbG5lLCBjaG9jaWHFvCB0dXRhaiB3eWRhamUgc2nEmSBva1xyXG4gICAgcmV0dXJuIHRoaXMubGlmdFBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgLy8gLS0tIFJ5c293YW5pZSAtLS1cclxuICBkcmF3KGN0eCwgYm9va0ltYWdlID0gbnVsbCkge1xyXG4gICAgaWYgKCF0aGlzLm1hcCB8fCAhdGhpcy5yZW5kZXJlcikgcmV0dXJuOyAvLyBOaWUgcnlzdWosIGplxZtsaSBtYXBhIG5pZSB6b3N0YcWCYSB3eWdlbmVyb3dhbmFcclxuXHJcbiAgICAvLyBQcnp5Z290dWogcGF5bG9hZCBkYW55Y2ggZGxhIHJlbmRlcmVyYVxyXG4gICAgY29uc3QgbWFwRGF0YSA9IHtcclxuICAgICAgbWFwOiB0aGlzLm1hcCxcclxuICAgICAgcm9vbXM6IHRoaXMucm9vbXMsXHJcbiAgICAgIGJvb2tzOiB0aGlzLmJvb2tzLFxyXG4gICAgICBsaWZ0UG9zaXRpb246IHRoaXMubGlmdFBvc2l0aW9uLFxyXG4gICAgICBvZmZzZXRYOiB0aGlzLm9mZnNldFgsIC8vIFByemVrYcW8IHBvdGVuY2phbG5pZSBuaWVjYcWCa293aXR5IG9mZnNldFxyXG4gICAgICBvZmZzZXRZOiB0aGlzLm9mZnNldFksXHJcbiAgICAgIGNvbHM6IHRoaXMuY29scyxcclxuICAgICAgcm93czogdGhpcy5yb3dzLFxyXG4gICAgICB0aWxlU2l6ZTogdGhpcy50aWxlU2l6ZSxcclxuICAgIH07XHJcblxyXG4gICAgLy8gRGVsZWd1aiByeXNvd2FuaWUgZG8gcmVuZGVyZXJhXHJcbiAgICB0aGlzLnJlbmRlcmVyLmRyYXcoY3R4LCBtYXBEYXRhLCBib29rSW1hZ2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gLS0tIERlYnVnb3dhbmllIC0tLVxyXG4gIGxvZ01hcEdyaWQoKSB7XHJcbiAgICBpZiAoIXRoaXMubWFwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTaWF0a2EgbWFweSBuaWVkb3N0xJlwbmEuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKGAtLS0gU2lhdGthIE1hcHkgUGnEmXRybyAke3RoaXMuZmxvb3JOdW1iZXJ9ICgke3RoaXMuY29sc314JHt0aGlzLnJvd3N9KSAtLS1gKTtcclxuICAgIGxldCBoZWFkZXIgPSAnICAgJztcclxuICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5jb2xzOyBjKyspIGhlYWRlciArPSBjICUgMTAgPT09IDAgPyBNYXRoLmZsb29yKGMgLyAxMCkgOiAnICc7XHJcbiAgICBjb25zb2xlLmxvZyhoZWFkZXIpO1xyXG4gICAgaGVhZGVyID0gJyAgICc7XHJcbiAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuY29sczsgYysrKSBoZWFkZXIgKz0gYyAlIDEwO1xyXG4gICAgY29uc29sZS5sb2coaGVhZGVyKTtcclxuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5yb3dzOyB5KyspIHtcclxuICAgICAgY29uc3Qgcm93TnVtID0geS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcgJyk7XHJcbiAgICAgIGNvbnN0IHJvd1N0cmluZyA9IHRoaXMubWFwW3ldXHJcbiAgICAgICAgLm1hcCgodGlsZSkgPT4ge1xyXG4gICAgICAgICAgc3dpdGNoICh0aWxlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVElMRV9XQUxMOlxyXG4gICAgICAgICAgICAgIHJldHVybiAnIyc7IC8vIMWaY2lhbmFcclxuICAgICAgICAgICAgY2FzZSBUSUxFX0NPUlJJRE9SOlxyXG4gICAgICAgICAgICAgIHJldHVybiAnLic7IC8vIEtvcnl0YXJ6XHJcbiAgICAgICAgICAgIGNhc2UgVElMRV9ST09NX0ZMT09SOlxyXG4gICAgICAgICAgICAgIHJldHVybiAnICc7IC8vIFBvZMWCb2dhIHBva29qdVxyXG4gICAgICAgICAgICBjYXNlIFRJTEVfTElGVDpcclxuICAgICAgICAgICAgICByZXR1cm4gJ0wnOyAvLyBXaW5kYVxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgIHJldHVybiAnPyc7IC8vIE5pZXpuYW55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuam9pbignJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGAke3Jvd051bX0gJHtyb3dTdHJpbmd9YCk7XHJcbiAgICB9XHJcbiAgICAvLyBaYWxvZ3VqIHBvenljasSZIHdpbmR5IGRsYSB3ZXJ5ZmlrYWNqaVxyXG4gICAgaWYgKHRoaXMubGlmdFBvc2l0aW9uKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBXaW5kYSBuYSBrcmF0Y2U6ICgke3RoaXMubGlmdFBvc2l0aW9uLnRpbGVYfSwgJHt0aGlzLmxpZnRQb3NpdGlvbi50aWxlWX0pYCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnUG96eWNqYSB3aW5keSBuaWUgdXN0YXdpb25hLicpO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coYC0tLSBLb25pZWMgU2lhdGtpIE1hcHkgUGnEmXRybyAke3RoaXMuZmxvb3JOdW1iZXJ9IC0tLWApO1xyXG4gIH1cclxufSAvLyBLb25pZWMga2xhc3kgUHJvY2VkdXJhbE1hcFxyXG4iLCIvLyBzcmMvY29yZS9MZXZlbC5qc1xyXG5pbXBvcnQgeyBQcm9jZWR1cmFsTWFwIH0gZnJvbSAnLi4vbWFwL1Byb2NlZHVyYWxNYXAuanMnO1xyXG4vLyBSZW1vdmVkIFRSQU5TSVRJT05fWk9ORV9SQURJVVNfTVVMVElQTElFUiBpbXBvcnRcclxuXHJcbi8qKlxyXG4gKiDQmtC70LDRgdGBIExldmVsINGD0L/RgNCw0LLQu9GP0LXRgiDRgtC10LrRg9GJ0LjQvCDRjdGC0LDQttC+0Lwg0Lgg0LfQsNCz0YDRg9C30LrQvtC5INC60LDRgNGCLlxyXG4gKiDQm9C+0LPQuNC60LAg0LfQvtC9INC/0LXRgNC10YXQvtC00LAgKHRyYW5zaXRpb24gem9uZXMpINGD0LTQsNC70LXQvdCwLCDRgi7Qui4g0LvQuNGE0YIg0YDQsNCx0L7RgtCw0LXRgiDQuNC90LDRh9C1LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIExldmVsIHtcclxuICAvKipcclxuICAgKiDQodC+0LfQtNCw0LXRgiDRjdC60LfQtdC80L/Qu9GP0YAgTGV2ZWwuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaW5GbG9vcj0xXSAtINCd0L7QvNC10YAg0YHQsNC80L7Qs9C+INC90LjQttC90LXQs9C+INGN0YLQsNC20LAuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttYXhGbG9vcj0zXSAtINCd0L7QvNC10YAg0YHQsNC80L7Qs9C+INCy0LXRgNGF0L3QtdCz0L4g0Y3RgtCw0LbQsC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihtaW5GbG9vciA9IDEsIG1heEZsb29yID0gMykge1xyXG4gICAgaWYgKG1pbkZsb29yID49IG1heEZsb29yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICBgTGV2ZWwgY29uc3RydWN0b3I6IG1pbkZsb29yICgke21pbkZsb29yfSkgbXVzdCBiZSBsZXNzIHRoYW4gbWF4Rmxvb3IgKCR7bWF4Rmxvb3J9KS4gVXNpbmcgZGVmYXVsdHMgMSBhbmQgMy5gXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMubWluRmxvb3IgPSAxO1xyXG4gICAgICB0aGlzLm1heEZsb29yID0gMztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubWluRmxvb3IgPSBtaW5GbG9vcjtcclxuICAgICAgdGhpcy5tYXhGbG9vciA9IG1heEZsb29yO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY3VycmVudEZsb29yID0gdGhpcy5taW5GbG9vcjtcclxuICAgIHRoaXMuY3VycmVudE1hcCA9IG51bGw7IC8vIEluc3RhbmNlIG9mIFByb2NlZHVyYWxNYXBcclxuICAgIC8vIHRoaXMudHJhbnNpdGlvblpvbmVzID0gW107IC8vIFJFTU9WRUQgLSBObyBsb25nZXIgbmVlZGVkIGZvciBsaWZ0c1xyXG4gICAgdGhpcy50aWxlU2l6ZSA9IDMyOyAvLyBEZWZhdWx0LCB3aWxsIGJlIHVwZGF0ZWQgZnJvbSBtYXBcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINCQ0YHQuNC90YXRgNC+0L3QvdC+INC30LDQs9GA0YPQttCw0LXRgiAo0LPQtdC90LXRgNC40YDRg9C10YIpINC60LDRgNGC0YMg0LTQu9GPINGD0LrQsNC30LDQvdC90L7Qs9C+INGN0YLQsNC20LAuXHJcbiAgICogQXNzdW1lcyBQcm9jZWR1cmFsTWFwIGNvbnN0cnVjdG9yIGhhbmRsZXMgZ2VuZXJhdGlvbiwgbGlmdCBwbGFjZW1lbnQsXHJcbiAgICogYW5kIHRocm93cyBvbiBjcml0aWNhbCBmYWlsdXJlIChlLmcuLCB1bnJlYWNoYWJsZSBsaWZ0KS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gZmxvb3JOdW1iZXIgLSDQndC+0LzQtdGAINGN0YLQsNC20LAg0LTQu9GPINC30LDQs9GA0YPQt9C60LguXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNhbnZhc1dpZHRoIC0g0KjQuNGA0LjQvdCwINC60LDQvdCy0LDRgdCwLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjYW52YXNIZWlnaHQgLSDQktGL0YHQvtGC0LAg0LrQsNC90LLQsNGB0LAuXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59INCf0YDQvtC80LjRgSwg0LrQvtGC0L7RgNGL0Lkg0YDQsNC30YDQtdGI0LDQtdGC0YHRjyDQv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0Y3RgtCw0LbQsC5cclxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgUHJvY2VkdXJhbE1hcCBnZW5lcmF0aW9uIG9yIHZhbGlkYXRpb24gZmFpbHMuXHJcbiAgICovXHJcbiAgYXN5bmMgbG9hZEZsb29yKGZsb29yTnVtYmVyLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KSB7XHJcbiAgICBpZiAoZmxvb3JOdW1iZXIgPCB0aGlzLm1pbkZsb29yIHx8IGZsb29yTnVtYmVyID4gdGhpcy5tYXhGbG9vcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBBdHRlbXB0ZWQgdG8gbG9hZCBpbnZhbGlkIGZsb29yOiAke2Zsb29yTnVtYmVyfS4gQWxsb3dlZCByYW5nZTogWyR7dGhpcy5taW5GbG9vcn0tJHt0aGlzLm1heEZsb29yfV1gO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbTGV2ZWxdICR7ZXJyb3JNc2d9YCk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coYFtMZXZlbF0gTG9hZGluZyBmbG9vciAke2Zsb29yTnVtYmVyfS4uLmApO1xyXG4gICAgdGhpcy5jdXJyZW50Rmxvb3IgPSBmbG9vck51bWJlcjtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBQcm9jZWR1cmFsTWFwIGNvbnN0cnVjdG9yIG5vdyBoYW5kbGVzIGdlbmVyYXRpb24gQU5EIHZhbGlkYXRpb24gKGxpa2UgbGlmdCByZWFjaGFiaWxpdHkpLlxyXG4gICAgICAvLyBJdCB3aWxsIHRocm93IGFuIGVycm9yIGlmIGdlbmVyYXRpb24gZmFpbHMgY3JpdGljYWxseS5cclxuICAgICAgdGhpcy5jdXJyZW50TWFwID0gbmV3IFByb2NlZHVyYWxNYXAoXHJcbiAgICAgICAgY2FudmFzV2lkdGgsXHJcbiAgICAgICAgY2FudmFzSGVpZ2h0LFxyXG4gICAgICAgIHRoaXMuY3VycmVudEZsb29yLFxyXG4gICAgICAgIHRoaXMubWluRmxvb3IsXHJcbiAgICAgICAgdGhpcy5tYXhGbG9vclxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbiBhZnRlciBjcmVhdGlvbiAoZW5zdXJlIG1hcCBvYmplY3QgbG9va3MgcmVhc29uYWJsZSlcclxuICAgICAgaWYgKFxyXG4gICAgICAgICF0aGlzLmN1cnJlbnRNYXAudGlsZVNpemUgfHxcclxuICAgICAgICAhdGhpcy5jdXJyZW50TWFwLm1hcCB8fFxyXG4gICAgICAgICF0aGlzLmN1cnJlbnRNYXAuYm9va3MgfHwgLy8gYm9va3Mgc2hvdWxkIGV4aXN0IChldmVuIGlmIGVtcHR5KVxyXG4gICAgICAgICF0aGlzLmN1cnJlbnRNYXAuZ2V0TGlmdFBvc2l0aW9uKCkgLy8gTGlmdCBwb3NpdGlvbiBNVVNUIGV4aXN0IGFmdGVyIHN1Y2Nlc3NmdWwgZ2VuZXJhdGlvblxyXG4gICAgICApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAnW0xldmVsXSBQcm9jZWR1cmFsTWFwIGluc3RhbmNlIGlzIG1pc3NpbmcgZXNzZW50aWFsIHByb3BlcnRpZXMgYWZ0ZXIgY3JlYXRpb24gKHRpbGVTaXplLCBtYXAsIGJvb2tzLCBvciBsaWZ0UG9zaXRpb24pLidcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnRpbGVTaXplID0gdGhpcy5jdXJyZW50TWFwLnRpbGVTaXplO1xyXG4gICAgICBjb25zdCBsaWZ0UG9zID0gdGhpcy5jdXJyZW50TWFwLmdldExpZnRQb3NpdGlvbigpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICBgICBbTGV2ZWxdIE1hcCBnZW5lcmF0ZWQgZm9yIGZsb29yICR7dGhpcy5jdXJyZW50Rmxvb3J9LiBUaWxlU2l6ZTogJHt0aGlzLnRpbGVTaXplfS4gTGlmdCBhdCB0aWxlKCR7bGlmdFBvcy50aWxlWH0sICR7bGlmdFBvcy50aWxlWX0pLmBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIFJFTU9WRUQ6IGNyZWF0ZVRyYW5zaXRpb25ab25lcygpIGNhbGwgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgIGBbTGV2ZWxdIEZsb29yICR7Zmxvb3JOdW1iZXJ9IGxvYWRlZCBzdWNjZXNzZnVsbHkuIE1hcCBzaXplOiAke3RoaXMuY3VycmVudE1hcC5jb2xzfXgke3RoaXMuY3VycmVudE1hcC5yb3dzfS4gJHt0aGlzLmN1cnJlbnRNYXAuYm9va3MubGVuZ3RofSBib29rcyBwbGFjZWQuYFxyXG4gICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICBgW0xldmVsXSBDUklUSUNBTCBGQUlMVVJFIGxvYWRpbmcgZmxvb3IgJHtmbG9vck51bWJlcn06IEZhaWxlZCB0byBjcmVhdGUgb3IgdmFsaWRhdGUgUHJvY2VkdXJhbE1hcDpgLFxyXG4gICAgICAgIGVycm9yXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuY3VycmVudE1hcCA9IG51bGw7IC8vIEVuc3VyZSBzdGF0ZSBpcyBjbGVhbiBvbiBmYWlsdXJlXHJcbiAgICAgIC8vIFJldGhyb3cgdGhlIGVycm9yIGZvciBHYW1lLmpzIHRvIGhhbmRsZSAobGlrZWx5IHNob3cgZXJyb3IgbWVzc2FnZSBhbmQgc3RvcClcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgIGBNYXAgZ2VuZXJhdGlvbi92YWxpZGF0aW9uIGZhaWxlZCBmb3IgZmxvb3IgJHtmbG9vck51bWJlcn0uICR7ZXJyb3IubWVzc2FnZSB8fCBlcnJvcn1gXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIGEgcmVzb2x2ZWQgcHJvbWlzZSAoZ2VuZXJhdGlvbiBpdHNlbGYgaXMgc3luY2hyb25vdXMgd2l0aGluIHRoZSBjb25zdHJ1Y3RvcilcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICB9XHJcblxyXG4gIC8vIFJFTU9WRUQ6IGNyZWF0ZVRyYW5zaXRpb25ab25lcygpIG1ldGhvZCBpcyBvYnNvbGV0ZS5cclxuXHJcbiAgLy8gUkVNT1ZFRDogZ2V0Q3VycmVudFRyYW5zaXRpb25ab25lKCkgbWV0aG9kIGlzIG9ic29sZXRlLiBMaWZ0IGludGVyYWN0aW9uIGNoZWNrZWQgZGlmZmVyZW50bHkuXHJcblxyXG4gIC8qKlxyXG4gICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINC80LDRgdGB0LjQsiDQvtCx0YrQtdC60YLQvtCyINC60L3QuNCzINC90LAg0YLQtdC60YPRidC10Lkg0LrQsNGA0YLQtS5cclxuICAgKiBAcmV0dXJucyB7QXJyYXk8b2JqZWN0Pn0g0JzQsNGB0YHQuNCyINC+0LHRitC10LrRgtC+0LIg0LrQvdC40LMuXHJcbiAgICovXHJcbiAgZ2V0Q3VycmVudEJvb2tzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1hcCA/IHRoaXMuY3VycmVudE1hcC5ib29rcyA6IFtdO1xyXG4gIH1cclxufVxyXG4iLCIvLyBzcmMvY29yZS9HYW1lUmVuZGVyZXIuanNcclxuLy8gKE5vIGNoYW5nZXMgbmVlZGVkIGZyb20gcHJldmlvdXMgcHJvdmlkZWQgdmVyc2lvbiwgYXNzdW1pbmcgaXQgd2FzIGNvcnJlY3QpXHJcbmltcG9ydCB7IENoYXJhY3RlciB9IGZyb20gJy4vQ2hhcmFjdGVyLmpzJzsgLy8gT3B0aW9uYWwgZm9yIHR5cGUgY2hlY2tzXHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZVJlbmRlcmVyIHtcclxuICBjb25zdHJ1Y3RvcihnYW1lKSB7XHJcbiAgICB0aGlzLmdhbWUgPSBnYW1lO1xyXG4gICAgdGhpcy5jYW52YXMgPSBudWxsO1xyXG4gICAgdGhpcy5jdHggPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZUNhbnZhcygpIHtcclxuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzJyk7XHJcbiAgICBpZiAoIXRoaXMuY2FudmFzKSB0aHJvdyBuZXcgRXJyb3IoXCJbUmVuZGVyZXJdIENhbnZhcyAnZ2FtZS1jYW52YXMnIG5vdCBmb3VuZCFcIik7XHJcbiAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBpZiAoIXRoaXMuY3R4KSB0aHJvdyBuZXcgRXJyb3IoJ1tSZW5kZXJlcl0gRmFpbGVkIHRvIGdldCAyRCBjb250ZXh0LicpO1xyXG4gICAgdGhpcy5jdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLnJlc2l6ZUNhbnZhcygpO1xyXG4gICAgY29uc29sZS5sb2coJ1tSZW5kZXJlcl0gQ2FudmFzIGluaXRpYWxpemVkLicpO1xyXG4gICAgcmV0dXJuIHsgY2FudmFzOiB0aGlzLmNhbnZhcywgY3R4OiB0aGlzLmN0eCB9O1xyXG4gIH1cclxuXHJcbiAgcmVzaXplQ2FudmFzKCkge1xyXG4gICAgaWYgKCF0aGlzLmNhbnZhcykgcmV0dXJuO1xyXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIGlmICh0aGlzLmdhbWUuY2hhcmFjdGVyICYmIHRoaXMuZ2FtZS5sZXZlbD8uY3VycmVudE1hcCkge1xyXG4gICAgICB0aGlzLmNlbnRlckNhbWVyYU9uQ2hhcmFjdGVyKCk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhgW1JlbmRlcmVyXSBDYW52YXMgcmVzaXplZCB0byAke3RoaXMuY2FudmFzLndpZHRofXgke3RoaXMuY2FudmFzLmhlaWdodH1gKTtcclxuICB9XHJcblxyXG4gIGNlbnRlckNhbWVyYU9uQ2hhcmFjdGVyKCkge1xyXG4gICAgY29uc3QgeyBjaGFyYWN0ZXIsIGxldmVsLCBjYW52YXMgfSA9IHRoaXMuZ2FtZTtcclxuICAgIGlmIChjaGFyYWN0ZXIgJiYgbGV2ZWw/LmN1cnJlbnRNYXAgJiYgY2FudmFzKSB7XHJcbiAgICAgIGxldmVsLmN1cnJlbnRNYXAub2Zmc2V0WCA9IE1hdGguZmxvb3IoY2FudmFzLndpZHRoIC8gMiAtIGNoYXJhY3Rlci54KTtcclxuICAgICAgbGV2ZWwuY3VycmVudE1hcC5vZmZzZXRZID0gTWF0aC5mbG9vcihjYW52YXMuaGVpZ2h0IC8gMiAtIGNoYXJhY3Rlci55KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRyYXdGcmFtZSgpIHtcclxuICAgIGlmICghdGhpcy5jdHggfHwgIXRoaXMuY2FudmFzKSByZXR1cm47XHJcbiAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcbiAgICBjb25zdCBtYXAgPSB0aGlzLmdhbWUubGV2ZWw/LmN1cnJlbnRNYXA7XHJcbiAgICBjb25zdCBjaGFyID0gdGhpcy5nYW1lLmNoYXJhY3RlcjtcclxuICAgIGlmIChtYXApIHtcclxuICAgICAgbWFwLmRyYXcodGhpcy5jdHgsIHRoaXMuZ2FtZS5ib29rSW1hZ2UpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNoYXIgJiYgbWFwKSB7XHJcbiAgICAgIGNoYXIuZHJhdyhtYXAub2Zmc2V0WCwgbWFwLm9mZnNldFkpO1xyXG4gICAgfVxyXG4gICAgLy8gdGhpcy5kcmF3RGVidWdJbmZvKCk7IC8vIE9wdGlvbmFsXHJcbiAgfVxyXG5cclxuICBkcmF3V2luU2NyZWVuKCkge1xyXG4gICAgaWYgKCF0aGlzLmN0eCB8fCAhdGhpcy5jYW52YXMpIHJldHVybjtcclxuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIDAuOCknO1xyXG4gICAgdGhpcy5jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcbiAgICB0aGlzLmN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgIHRoaXMuY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xyXG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ2xpbWUnO1xyXG4gICAgLy8gQ29uc2lkZXIgdXNpbmcgYSBmb250IGF2YWlsYWJsZSBvbiBtb3N0IHN5c3RlbXMgb3IgaW5jbHVkZSBvbmUgdmlhIENTUyBAZm9udC1mYWNlXHJcbiAgICB0aGlzLmN0eC5mb250ID0gJ2NsYW1wKDMycHgsIDh2dywgNDhweCkgXCJQcmVzcyBTdGFydCAyUFwiLCBjdXJzaXZlLCBBcmlhbCwgc2Fucy1zZXJpZic7XHJcbiAgICB0aGlzLmN0eC5maWxsVGV4dCgnWldZQ0nEmFNUV08hJywgdGhpcy5jYW52YXMud2lkdGggLyAyLCB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyIC0gODApOyAvLyBUcmFuc2xhdGVkXHJcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAnd2hpdGUnO1xyXG4gICAgdGhpcy5jdHguZm9udCA9ICdjbGFtcCgyNHB4LCA1dncsIDMycHgpIEFyaWFsLCBzYW5zLXNlcmlmJztcclxuICAgIHRoaXMuY3R4LmZpbGxUZXh0KFxyXG4gICAgICBgWmVicmFubyB3c3p5c3RraWUgJHt0aGlzLmdhbWUudGFyZ2V0Qm9va3NUb1dpbn0ga3NpxIXFvGtpIWAsIC8vIFRyYW5zbGF0ZWRcclxuICAgICAgdGhpcy5jYW52YXMud2lkdGggLyAyLFxyXG4gICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyXHJcbiAgICApO1xyXG4gICAgdGhpcy5jdHguZm9udCA9ICdjbGFtcCgxOHB4LCA0dncsIDI0cHgpIEFyaWFsLCBzYW5zLXNlcmlmJztcclxuICAgIHRoaXMuY3R4LmZpbGxUZXh0KCdVbml3ZXJzeXRldCB1cmF0b3dhbnkhJywgdGhpcy5jYW52YXMud2lkdGggLyAyLCB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyICsgNjApOyAvLyBUcmFuc2xhdGVkXHJcbiAgICB0aGlzLmN0eC5mb250ID0gJ2NsYW1wKDE0cHgsIDN2dywgMThweCkgQXJpYWwsIHNhbnMtc2VyaWYnO1xyXG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJyNjY2MnO1xyXG4gICAgdGhpcy5jdHguZmlsbFRleHQoXHJcbiAgICAgICcoT2TFm3dpZcW8IHN0cm9uxJksIGFieSB6YWdyYcSHIHBvbm93bmllKScsIC8vIFRyYW5zbGF0ZWRcclxuICAgICAgdGhpcy5jYW52YXMud2lkdGggLyAyLFxyXG4gICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgLSA1MFxyXG4gICAgKTtcclxuICB9XHJcbiAgLy8gZHJhd0RlYnVnSW5mbygpIHsgLi4uIH0gLy8gT3B0aW9uYWwgZGVidWcgZHJhd2luZ1xyXG59XHJcbiIsIi8vIHNyYy9jb3JlL0dhbWVwbGF5TWFuYWdlci5qc1xyXG5pbXBvcnQge1xyXG4gIEdhbWVTdGF0ZSxcclxuICBMSUZUX0NPT0xET1dOX01TLFxyXG4gIHF1ZXN0aW9ucyxcclxuICBUSUxFX0xJRlQsXHJcbiAgVElMRV9XQUxMLFxyXG4gIFRJTEVfQ09SUklET1IsXHJcbiAgVElMRV9ST09NX0ZMT09SLFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbi8vIFXFvHl3YW15IHBvcHJhd25laiB3aWVsa2/Fm2NpIGxpdGVyIHcgbmF6d2llIGZvbGRlcnUvcGxpa3U6IFVJL1VJTWFuYWdlci5qc1xyXG5pbXBvcnQgeyBVSU1hbmFnZXIgfSBmcm9tICcuLi9VSS9VSU1hbmFnZXIuanMnO1xyXG5pbXBvcnQgeyBDaGFyYWN0ZXIgfSBmcm9tICcuL0NoYXJhY3Rlci5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZXBsYXlNYW5hZ2VyIHtcclxuICBjb25zdHJ1Y3RvcihnYW1lKSB7XHJcbiAgICB0aGlzLmdhbWUgPSBnYW1lO1xyXG4gICAgLy8gUG93acSFxbwgbWV0b2R5LCBrdMOzcmUgYsSZZMSFIHXFvHl3YW5lIGpha28gY2FsbGJhY2tpXHJcbiAgICB0aGlzLmhhbmRsZUFuc3dlciA9IHRoaXMuaGFuZGxlQW5zd2VyLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmhhbmRsZUZsb29yU2VsZWN0aW9uID0gdGhpcy5oYW5kbGVGbG9vclNlbGVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLy8gV3l3b8WCeXdhbmUgcHJ6ZXogcMSZdGzEmSBncnkgKEdhbWUncyBnYW1lTG9vcClcclxuICB1cGRhdGUodGltZXN0YW1wKSB7XHJcbiAgICAvLyBBa3R1YWxpenVqIHR5bGtvLCBqZcWbbGkgZ3JhIGplc3QgdyBzdGFuaWUgUExBWUlOR1xyXG4gICAgaWYgKHRoaXMuZ2FtZS5nYW1lU3RhdGUgPT09IEdhbWVTdGF0ZS5QTEFZSU5HKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlUGxheWluZ1N0YXRlKHRpbWVzdGFtcCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQbGF5aW5nU3RhdGUodGltZXN0YW1wKSB7XHJcbiAgICBjb25zdCBjaGFyID0gdGhpcy5nYW1lLmNoYXJhY3RlcjtcclxuICAgIC8vIFNwcmF3ZHplbmllIG9iZWNub8WbY2kgd3ltYWdhbnljaCBrb21wb25lbnTDs3dcclxuICAgIGlmICghdGhpcy5nYW1lLmxldmVsPy5jdXJyZW50TWFwIHx8ICFjaGFyIHx8ICF0aGlzLmdhbWUuaW5wdXRNYW5hZ2VyKSByZXR1cm47XHJcblxyXG4gICAgLy8gT2JzxYJ1Z2EgcnVjaHVcclxuICAgIGNvbnN0IHsgbW92ZWQgfSA9IHRoaXMuaGFuZGxlTW92ZW1lbnQoKTtcclxuXHJcbiAgICAvLyBBa3R1YWxpemFjamEgYW5pbWFjamkgcG9zdGFjaVxyXG4gICAgaWYgKGNoYXIgJiYgdHlwZW9mIGNoYXIudXBkYXRlQW5pbWF0aW9uID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGNoYXIudXBkYXRlQW5pbWF0aW9uKHRpbWVzdGFtcCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT2JzxYJ1Z2EgaW50ZXJha2NqaSwgdHlsa28gamXFm2xpIHBvc3RhxIcgbmllIHBvcnVzennFgmEgc2nEmSB3IHRlaiBrbGF0Y2VcclxuICAgIC8vIGkgZ3JhIGplc3QgdyBzdGFuaWUgUExBWUlOR1xyXG4gICAgaWYgKCFtb3ZlZCAmJiB0aGlzLmdhbWUuZ2FtZVN0YXRlID09PSBHYW1lU3RhdGUuUExBWUlORykge1xyXG4gICAgICB0aGlzLmhhbmRsZUludGVyYWN0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICEgV0HFu05FOiBTcHJhd2R6ZW5pZSB1dGtuacSZY2lhIHBvIEtBxbtERUoga2xhdGNlLCBqZcWbbGkgc2nEmSBuaWUgcnVzemHFglxyXG4gICAgLy8gTW/FvGUgdG8gYnnEhyBuYWRtaWVybmUsIGFsZSBtb8W8ZSBwb23Ds2MsIGplxZtsaSBwb3N0YcSHIHBvd29saSBcIndjaXNrYSBzacSZXCIgdyDFm2NpYW7EmVxyXG4gICAgLy8gSmVkbmFrIGfFgsOzd25lIHNwcmF3ZHplbmllIG9kYnl3YSBzacSZIHBvIHRlbGVwb3J0YWNqaSB3IGhhbmRsZUxpZnRUcmFuc2l0aW9uXHJcbiAgICAvLyBpZiAoIW1vdmVkICYmIHRoaXMuZ2FtZS5nYW1lU3RhdGUgPT09IEdhbWVTdGF0ZS5QTEFZSU5HKSB7XHJcbiAgICAvLyAgICB0aGlzLmVuc3VyZUNoYXJhY3RlcklzT25XYWxrYWJsZVRpbGUoZmFsc2UpOyAvLyBTcHJhd2R6YW15LCBjenkgbmllIHV0a27EhcWCXHJcbiAgICAvLyB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVNb3ZlbWVudCgpIHtcclxuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdhbWUuY2hhcmFjdGVyO1xyXG4gICAgY29uc3QgbWFwID0gdGhpcy5nYW1lLmxldmVsLmN1cnJlbnRNYXA7XHJcbiAgICBjb25zdCBpbnB1dCA9IHRoaXMuZ2FtZS5pbnB1dE1hbmFnZXI7XHJcbiAgICBpZiAoIWNoYXIgfHwgIW1hcCB8fCAhaW5wdXQpIHJldHVybiB7IG1vdmVkOiBmYWxzZSB9O1xyXG5cclxuICAgIGNvbnN0IGRpcmVjdGlvbiA9IGlucHV0LmdldElucHV0RGlyZWN0aW9uKCk7XHJcbiAgICBsZXQgZHggPSBkaXJlY3Rpb24ueCAqIGNoYXIuc3BlZWQ7XHJcbiAgICBsZXQgZHkgPSBkaXJlY3Rpb24ueSAqIGNoYXIuc3BlZWQ7XHJcblxyXG4gICAgY29uc3QgaW50ZW5kZWRNb3ZlID0gZHggIT09IDAgfHwgZHkgIT09IDA7XHJcbiAgICBsZXQgYWN0dWFsTW92ZVggPSAwO1xyXG4gICAgbGV0IGFjdHVhbE1vdmVZID0gMDtcclxuICAgIGxldCBtb3ZlZCA9IGZhbHNlO1xyXG5cclxuICAgIGlmIChpbnRlbmRlZE1vdmUpIHtcclxuICAgICAgLy8gU3ByYXdkemFteSBtb8W8bGl3b8WbxIcgcnVjaHUgb3NvYm5vIGRsYSBYIGkgWVxyXG4gICAgICBjb25zdCBjYW5Nb3ZlWCA9IGR4ICE9PSAwICYmICF0aGlzLmNoZWNrQ29sbGlzaW9uKGNoYXIueCArIGR4LCBjaGFyLnkpO1xyXG4gICAgICBjb25zdCBjYW5Nb3ZlWSA9IGR5ICE9PSAwICYmICF0aGlzLmNoZWNrQ29sbGlzaW9uKGNoYXIueCwgY2hhci55ICsgZHkpO1xyXG5cclxuICAgICAgLy8gVXN0YXdpYW15IGZha3R5Y3puZSBwcnplc3VuacSZY2llXHJcbiAgICAgIGlmIChjYW5Nb3ZlWCkgYWN0dWFsTW92ZVggPSBkeDtcclxuICAgICAgaWYgKGNhbk1vdmVZKSBhY3R1YWxNb3ZlWSA9IGR5O1xyXG5cclxuICAgICAgLy8gT2JzxYJ1Z2Ega29saXpqaSBkaWFnb25hbG5lajogamXFm2xpIG5pZSBtb8W8ZW15IHJ1c3p5xIcgc2nEmSBwbyBwcnpla8SFdG5laixcclxuICAgICAgLy8gYWxlIG1vxbxlbXkgb3NvYm5vIHBvIFggaSBZLCBwcmlvcnl0ZXQgbWEgcnVjaCBwb3ppb215LlxyXG4gICAgICAvLyBVbGVwc3pvbmEgbG9naWthOiBwcsOzYnVqZW15IMWbbGl6Z2HEhyBzacSZIHd6ZMWCdcW8IMWbY2lhbnlcclxuICAgICAgaWYgKGR4ICE9PSAwICYmIGR5ICE9PSAwKSB7XHJcbiAgICAgICAgLy8gVHlsa28gamXFm2xpIHByw7Nib3dhbGnFm215IHJ1c3p5xIcgc2nEmSBwbyBwcnpla8SFdG5lalxyXG4gICAgICAgIGlmICh0aGlzLmNoZWNrQ29sbGlzaW9uKGNoYXIueCArIGR4LCBjaGFyLnkgKyBkeSkpIHtcclxuICAgICAgICAgIC8vIEplxZtsaSBwcnpla8SFdG5hIGplc3QgemFibG9rb3dhbmFcclxuICAgICAgICAgIGlmIChjYW5Nb3ZlWCkge1xyXG4gICAgICAgICAgICAvLyBKZcWbbGkgbW/FvGVteSBwbyBYLCBhbGUgbmllIHBvIHByemVrxIV0bmVqXHJcbiAgICAgICAgICAgIGFjdHVhbE1vdmVZID0gMDsgLy8gUnVzemFteSBzacSZIHR5bGtvIHBvIFhcclxuICAgICAgICAgIH0gZWxzZSBpZiAoY2FuTW92ZVkpIHtcclxuICAgICAgICAgICAgLy8gSmXFm2xpIG1vxbxlbXkgcG8gWSwgYWxlIG5pZSBwbyBwcnpla8SFdG5lalxyXG4gICAgICAgICAgICBhY3R1YWxNb3ZlWCA9IDA7IC8vIFJ1c3phbXkgc2nEmSB0eWxrbyBwbyBZXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBKZcWbbGkgbmllIG1vxbxlbXkgYW5pIHBvIFgsIGFuaSBwbyBZIHogcG96eWNqaSBkaWFnb25hbG5lalxyXG4gICAgICAgICAgICBhY3R1YWxNb3ZlWCA9IDA7XHJcbiAgICAgICAgICAgIGFjdHVhbE1vdmVZID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFN0b3N1amVteSBmYWt0eWN6bmUgcHJ6ZXN1bmnEmWNpZSBpIGFrdHVhbGl6dWplbXkgc3RhblxyXG4gICAgICBpZiAoYWN0dWFsTW92ZVggIT09IDAgfHwgYWN0dWFsTW92ZVkgIT09IDApIHtcclxuICAgICAgICBjaGFyLnggKz0gYWN0dWFsTW92ZVg7XHJcbiAgICAgICAgY2hhci55ICs9IGFjdHVhbE1vdmVZO1xyXG4gICAgICAgIG1vdmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gQWt0dWFsaXp1amVteSBraWVydW5layBzcHJpdGUnYSBwb3N0YWNpXHJcbiAgICAgICAgaWYgKE1hdGguYWJzKGFjdHVhbE1vdmVYKSA+PSBNYXRoLmFicyhhY3R1YWxNb3ZlWSkpIHtcclxuICAgICAgICAgIGlmIChhY3R1YWxNb3ZlWCAhPT0gMClcclxuICAgICAgICAgICAgY2hhci5jdXJyZW50RGlyZWN0aW9uID1cclxuICAgICAgICAgICAgICBhY3R1YWxNb3ZlWCA+IDAgPyBDaGFyYWN0ZXIuRGlyZWN0aW9uLlJJR0hUIDogQ2hhcmFjdGVyLkRpcmVjdGlvbi5MRUZUO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoYWN0dWFsTW92ZVkgIT09IDApXHJcbiAgICAgICAgICAgIGNoYXIuY3VycmVudERpcmVjdGlvbiA9XHJcbiAgICAgICAgICAgICAgYWN0dWFsTW92ZVkgPiAwID8gQ2hhcmFjdGVyLkRpcmVjdGlvbi5ET1dOIDogQ2hhcmFjdGVyLkRpcmVjdGlvbi5VUDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICEgRG9kYXRrb3dlIHNwcmF3ZHplbmllIFBPIHJ1Y2h1LCBhYnkgd3lwY2huxIXEhywgamXFm2xpIGxla2tvIHdlc3psacWbbXkgdyDFm2NpYW7EmVxyXG4gICAgICAgIC8vIHRoaXMuZW5zdXJlQ2hhcmFjdGVySXNPbldhbGthYmxlVGlsZShmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBVc3Rhd2lhbXkgZmxhZ8SZIHJ1Y2h1IGRsYSBhbmltYWNqaVxyXG4gICAgY2hhci5pc01vdmluZyA9IG1vdmVkO1xyXG4gICAgcmV0dXJuIHsgbW92ZWQgfTtcclxuICB9XHJcblxyXG4gIGNoZWNrQ29sbGlzaW9uKHRhcmdldFgsIHRhcmdldFkpIHtcclxuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2FtZS5sZXZlbD8uY3VycmVudE1hcDtcclxuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdhbWUuY2hhcmFjdGVyO1xyXG4gICAgaWYgKCFtYXAgfHwgIWNoYXIpIHJldHVybiB0cnVlOyAvLyBVem5hamVteSB6YSBrb2xpemrEmSwgamXFm2xpIGJyYWt1amUgbWFweSBsdWIgcG9zdGFjaVxyXG5cclxuICAgIGNvbnN0IGNvbGxpc2lvbkJveCA9IGNoYXIuZ2V0Q29sbGlzaW9uQm94KHRhcmdldFgsIHRhcmdldFkpO1xyXG5cclxuICAgIC8vIEtsdWN6b3dlIHB1bmt0eSBrb2xpZGVyYSBkbyBzcHJhd2R6ZW5pYVxyXG4gICAgY29uc3QgcG9pbnRzVG9DaGVjayA9IFtcclxuICAgICAgeyB4OiBjb2xsaXNpb25Cb3gubGVmdCwgeTogY29sbGlzaW9uQm94LnRvcCB9LCAvLyBMZXd5IGfDs3JueVxyXG4gICAgICB7IHg6IGNvbGxpc2lvbkJveC5yaWdodCwgeTogY29sbGlzaW9uQm94LnRvcCB9LCAvLyBQcmF3eSBnw7NybnlcclxuICAgICAgeyB4OiBjb2xsaXNpb25Cb3gubGVmdCwgeTogY29sbGlzaW9uQm94LmJvdHRvbSB9LCAvLyBMZXd5IGRvbG55XHJcbiAgICAgIHsgeDogY29sbGlzaW9uQm94LnJpZ2h0LCB5OiBjb2xsaXNpb25Cb3guYm90dG9tIH0sIC8vIFByYXd5IGRvbG55XHJcbiAgICAgIHsgeDogdGFyZ2V0WCwgeTogY29sbGlzaW9uQm94LmJvdHRvbSB9LCAvLyDFmnJvZGVrIGRvbG55ICh3YcW8bmUgZGxhIHfEhXNraWNoIHByemVqxZvEhylcclxuICAgICAgeyB4OiB0YXJnZXRYLCB5OiBjb2xsaXNpb25Cb3gudG9wIH0sIC8vIMWacm9kZWsgZ8Ozcm55XHJcbiAgICAgIHsgeDogY29sbGlzaW9uQm94LmxlZnQsIHk6IHRhcmdldFkgKyBjaGFyLnJlbmRlclNpemUgKiBjaGFyLmNvbGxpc2lvbkJveEZlZXRPZmZzZXRSYXRpbyB9LCAvLyDFmnJvZGVrIGxld3kgKG5hIHBvemlvbWllIHN0w7NwKVxyXG4gICAgICB7IHg6IGNvbGxpc2lvbkJveC5yaWdodCwgeTogdGFyZ2V0WSArIGNoYXIucmVuZGVyU2l6ZSAqIGNoYXIuY29sbGlzaW9uQm94RmVldE9mZnNldFJhdGlvIH0sIC8vIMWacm9kZWsgcHJhd3kgKG5hIHBvemlvbWllIHN0w7NwKVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyBTcHJhd2R6YW15IGthxbxkeSBwdW5rdFxyXG4gICAgZm9yIChjb25zdCBwb2ludCBvZiBwb2ludHNUb0NoZWNrKSB7XHJcbiAgICAgIC8vIFXFvHl3YW15IG1ldG9keSBtYXB5IGlzV2Fsa2FibGUgZG8gc3ByYXdkemVuaWEgcHJ6ZWNob2Rub8WbY2kgcHVua3R1XHJcbiAgICAgIGlmICghbWFwLmlzV2Fsa2FibGUocG9pbnQueCwgcG9pbnQueSkpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgV3lrcnl0byBrb2xpemrEmSB3IMWbd2llY2llICgke3BvaW50LngudG9GaXhlZCgxKX0sICR7cG9pbnQueS50b0ZpeGVkKDEpfSlgKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gWm5hbGV6aW9ubyBrb2xpemrEmVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBLb2xpemppIG5pZSB6bmFsZXppb25vXHJcbiAgfVxyXG5cclxuICBoYW5kbGVJbnRlcmFjdGlvbnMoKSB7XHJcbiAgICBjb25zdCBtYXAgPSB0aGlzLmdhbWUubGV2ZWw/LmN1cnJlbnRNYXA7XHJcbiAgICBjb25zdCBjaGFyID0gdGhpcy5nYW1lLmNoYXJhY3RlcjtcclxuICAgIGlmICghbWFwIHx8ICFjaGFyIHx8IHRoaXMuZ2FtZS5nYW1lU3RhdGUgIT09IEdhbWVTdGF0ZS5QTEFZSU5HKSByZXR1cm47XHJcblxyXG4gICAgLy8gMS4gU3ByYXdkemVuaWUga3NpxIXFvGVrXHJcbiAgICBjb25zdCBuZWFyYnlCb29rID0gbWFwLmZpbmROZWFyYnlVbmFuc3dlcmVkQm9vayhjaGFyLngsIGNoYXIueSk7XHJcbiAgICBpZiAobmVhcmJ5Qm9vaykge1xyXG4gICAgICB0aGlzLmluaXRpYXRlUXVlc3Rpb24obmVhcmJ5Qm9vayk7XHJcbiAgICAgIHJldHVybjsgLy8gV3ljaG9kemlteSwgcG9uaWV3YcW8IGludGVyYWtjamEgeiBrc2nEhcW8a8SFIHNpxJkgcm96cG9jesSZxYJhXHJcbiAgICB9XHJcblxyXG4gICAgLy8gMi4gU3ByYXdkemVuaWUgd2luZHkgKHR5bGtvIGplxZtsaSBjb29sZG93biBuaWUgamVzdCBha3R5d255KVxyXG4gICAgaWYgKCF0aGlzLmdhbWUubGlmdENvb2xkb3duQWN0aXZlKSB7XHJcbiAgICAgIGNvbnN0IG5lYXJieUxpZnQgPSBtYXAuZmluZE5lYXJieUxpZnQoY2hhci54LCBjaGFyLnkpO1xyXG4gICAgICBpZiAobmVhcmJ5TGlmdCkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhdGVGbG9vclNlbGVjdGlvbigpO1xyXG4gICAgICAgIC8vIE5pZSBwb3RyemViYSByZXR1cm4sIHBvbmlld2HFvCBpbml0aWF0ZUZsb29yU2VsZWN0aW9uIHR5bGtvIHBva2F6dWplIFVJXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGluaXRpYXRlUXVlc3Rpb24oYm9vaykge1xyXG4gICAgaWYgKHRoaXMuZ2FtZS5nYW1lU3RhdGUgIT09IEdhbWVTdGF0ZS5QTEFZSU5HKSByZXR1cm47XHJcblxyXG4gICAgdGhpcy5nYW1lLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuQVNLSU5HX1FVRVNUSU9OKTtcclxuICAgIGlmICh0aGlzLmdhbWUuY2hhcmFjdGVyKSB0aGlzLmdhbWUuY2hhcmFjdGVyLmlzTW92aW5nID0gZmFsc2U7IC8vIFphdHJ6eW11amVteSBwb3N0YcSHXHJcbiAgICB0aGlzLmdhbWUuY3VycmVudEJvb2tUYXJnZXQgPSBib29rOyAvLyBaYXBhbWnEmXR1amVteSBrc2nEhcW8a8SZXHJcblxyXG4gICAgLy8gQWt0dWFsaXp1amVteSBsaXN0xJkgZG9zdMSZcG55Y2ggcHl0YcWELCBqZcWbbGkgamVzdCBwdXN0YVxyXG4gICAgaWYgKHRoaXMuZ2FtZS5hdmFpbGFibGVRdWVzdGlvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMuZ2FtZS5hdmFpbGFibGVRdWVzdGlvbnMgPSBbLi4ucXVlc3Rpb25zXTsgLy8gS29waXVqZW15IHBpZXJ3b3RueSBhcnJheVxyXG4gICAgICBpZiAodGhpcy5nYW1lLmF2YWlsYWJsZVF1ZXN0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAvLyBTa3Jham55IHByenlwYWRlazogcHl0YW5pYSBzacSZIHNrb8WEY3p5xYJ5IHLDs3duaWXFvCB3IHBpZXJ3b3RueW0gYXJyYXl1XHJcbiAgICAgICAgVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZSgnQsWCxIVkOiBCcmFrIGRvc3TEmXBueWNoIHB5dGHFhCEnLCAnZXJyb3InKTtcclxuICAgICAgICB0aGlzLmdhbWUuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5QTEFZSU5HKTtcclxuICAgICAgICB0aGlzLmdhbWUuY3VycmVudEJvb2tUYXJnZXQgPSBudWxsO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFd5YmllcmFteSBsb3Nvd2UgcHl0YW5pZSBzcG/Fm3LDs2QgZG9zdMSZcG55Y2hcclxuICAgIGNvbnN0IHFJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuZ2FtZS5hdmFpbGFibGVRdWVzdGlvbnMubGVuZ3RoKTtcclxuICAgIHRoaXMuZ2FtZS5jdXJyZW50UXVlc3Rpb25EYXRhID0gdGhpcy5nYW1lLmF2YWlsYWJsZVF1ZXN0aW9ucy5zcGxpY2UocUluZGV4LCAxKVswXTsgLy8gV3ljacSFZ2FteSBweXRhbmllXHJcblxyXG4gICAgLy8gUG9rYXp1amVteSBVSSBweXRhbmlhIChVSU1hbmFnZXIgd3l3b8WCYSBoYW5kbGVBbnN3ZXIgdGVnbyBtYW5hZ2VyYSlcclxuICAgIFVJTWFuYWdlci5zaG93UXVlc3Rpb24odGhpcy5nYW1lLmN1cnJlbnRRdWVzdGlvbkRhdGEpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQW5zd2VyKHNlbGVjdGVkT3B0aW9uSW5kZXgpIHtcclxuICAgIGNvbnN0IHsgZ2FtZVN0YXRlLCBjdXJyZW50UXVlc3Rpb25EYXRhLCBjdXJyZW50Qm9va1RhcmdldCwgbGV2ZWwgfSA9IHRoaXMuZ2FtZTtcclxuXHJcbiAgICAvLyBTcHJhd2R6ZW5pZSwgY3p5IGplc3RlxZtteSB3IG9kcG93aWVkbmltIHN0YW5pZSBpIGN6eSBzxIUgZGFuZSBweXRhbmlhL2tzacSFxbxraVxyXG4gICAgaWYgKGdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLkFTS0lOR19RVUVTVElPTiB8fCAhY3VycmVudFF1ZXN0aW9uRGF0YSB8fCAhY3VycmVudEJvb2tUYXJnZXQpIHtcclxuICAgICAgVUlNYW5hZ2VyLmhpZGVRdWVzdGlvbigpOyAvLyBOYSB3c3plbGtpIHd5cGFkZWsgdWtyeXdhbXkgVUlcclxuICAgICAgdGhpcy5nYW1lLmN1cnJlbnRCb29rVGFyZ2V0ID0gbnVsbDtcclxuICAgICAgdGhpcy5nYW1lLmN1cnJlbnRRdWVzdGlvbkRhdGEgPSBudWxsO1xyXG4gICAgICAvLyBXcmFjYW15IGRvIGdyeSwgdHlsa28gamXFm2xpIGdyYSBuaWUgamVzdCB6YWtvxYRjem9uYVxyXG4gICAgICBpZiAodGhpcy5nYW1lLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLkdBTUVfT1ZFUikgdGhpcy5nYW1lLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuUExBWUlORyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc0NvcnJlY3QgPSBzZWxlY3RlZE9wdGlvbkluZGV4ID09PSBjdXJyZW50UXVlc3Rpb25EYXRhLmNvcnJlY3RBbnN3ZXI7XHJcblxyXG4gICAgaWYgKGlzQ29ycmVjdCkge1xyXG4gICAgICBVSU1hbmFnZXIuZmxhc2hNZXNzYWdlKCdQcmF3aWTFgm93byEnLCAnc3VjY2VzcycsIDE1MDApO1xyXG4gICAgICAvLyBPem5hY3phbXkga3NpxIXFvGvEmSBqYWtvIHplYnJhbsSFIG5hIG1hcGllXHJcbiAgICAgIGNvbnN0IGNvbGxlY3RlZCA9IGxldmVsPy5jdXJyZW50TWFwPy5tYXJrQm9va0FzQ29sbGVjdGVkKGN1cnJlbnRCb29rVGFyZ2V0KTtcclxuICAgICAgaWYgKGNvbGxlY3RlZCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZS50b3RhbEJvb2tzQ29sbGVjdGVkR2xvYmFsbHkrKztcclxuICAgICAgICBVSU1hbmFnZXIudXBkYXRlU2NvcmUodGhpcy5nYW1lLnRvdGFsQm9va3NDb2xsZWN0ZWRHbG9iYWxseSwgdGhpcy5nYW1lLnRhcmdldEJvb2tzVG9XaW4pO1xyXG4gICAgICAgIC8vIFNwcmF3ZHplbmllIHdhcnVua3Ugend5Y2nEmXN0d2FcclxuICAgICAgICBpZiAodGhpcy5nYW1lLnRvdGFsQm9va3NDb2xsZWN0ZWRHbG9iYWxseSA+PSB0aGlzLmdhbWUudGFyZ2V0Qm9va3NUb1dpbikge1xyXG4gICAgICAgICAgVUlNYW5hZ2VyLmhpZGVRdWVzdGlvbigpOyAvLyBVa3J5aiBVSSBwcnplZCBla3JhbmVtIHp3eWNpxJlzdHdhXHJcbiAgICAgICAgICB0aGlzLmdhbWUuX3NldEdhbWVPdmVyKHRydWUpOyAvLyBXeXdvxYJ1amVteSB6YWtvxYRjemVuaWUgZ3J5IHp3eWNpxJlzdHdlbVxyXG4gICAgICAgICAgcmV0dXJuOyAvLyBXeWrFm2NpZSwgcG9uaWV3YcW8IGdyYSB6YWtvxYRjem9uYVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBVSU1hbmFnZXIuZmxhc2hNZXNzYWdlKCdCxYLEhWQgemJpZXJhbmlhIGtzacSFxbxraSEnLCAnZXJyb3InKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZSgnTmllcHJhd2lkxYJvd2Egb2Rwb3dpZWTFuiEnLCAnZXJyb3InKTtcclxuICAgICAgLy8gWndyYWNhbXkgcHl0YW5pZSwgbmEga3TDs3JlIG9kcG93aWVkemlhbm8gbmllcHJhd2lkxYJvd28sIHogcG93cm90ZW0gZG8gcHVsaVxyXG4gICAgICB0aGlzLmdhbWUuYXZhaWxhYmxlUXVlc3Rpb25zLnB1c2goY3VycmVudFF1ZXN0aW9uRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVWtyeXdhbXkgVUkgcHl0YW5pYSBpIHJlc2V0dWplbXkgc3RhblxyXG4gICAgVUlNYW5hZ2VyLmhpZGVRdWVzdGlvbigpO1xyXG4gICAgdGhpcy5nYW1lLmN1cnJlbnRCb29rVGFyZ2V0ID0gbnVsbDtcclxuICAgIHRoaXMuZ2FtZS5jdXJyZW50UXVlc3Rpb25EYXRhID0gbnVsbDtcclxuICAgIC8vIFdyYWNhbXkgZG8gZ3J5LCB0eWxrbyBqZcWbbGkgZ3JhIG5pZSBqZXN0IHpha2/FhGN6b25hXHJcbiAgICBpZiAodGhpcy5nYW1lLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLkdBTUVfT1ZFUikge1xyXG4gICAgICB0aGlzLmdhbWUuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5QTEFZSU5HKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGluaXRpYXRlRmxvb3JTZWxlY3Rpb24oKSB7XHJcbiAgICAvLyBOaWUgbW/FvG5hIHd5d2/FgmHEhyB3aW5keSBwb2RjemFzIHB5dGFuaWEsIHByemVqxZtjaWEgbHViIGplxZtsaSBjb29sZG93biBqZXN0IGFrdHl3bnlcclxuICAgIGlmICh0aGlzLmdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuUExBWUlORyB8fCB0aGlzLmdhbWUubGlmdENvb2xkb3duQWN0aXZlKSByZXR1cm47XHJcblxyXG4gICAgdGhpcy5nYW1lLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuU0VMRUNUSU5HX0ZMT09SKTtcclxuICAgIGlmICh0aGlzLmdhbWUuY2hhcmFjdGVyKSB0aGlzLmdhbWUuY2hhcmFjdGVyLmlzTW92aW5nID0gZmFsc2U7IC8vIFphdHJ6eW11amVteSBwb3N0YcSHXHJcblxyXG4gICAgLy8gUG9rYXp1amVteSBVSSB3eWJvcnUgcGnEmXRyYSAoVUlNYW5hZ2VyIHd5d2/FgmEgaGFuZGxlRmxvb3JTZWxlY3Rpb24pXHJcbiAgICBVSU1hbmFnZXIuc2hvd0Zsb29yU2VsZWN0aW9uVUkoXHJcbiAgICAgIHRoaXMuZ2FtZS5sZXZlbC5taW5GbG9vcixcclxuICAgICAgdGhpcy5nYW1lLmxldmVsLm1heEZsb29yLFxyXG4gICAgICB0aGlzLmdhbWUubGV2ZWwuY3VycmVudEZsb29yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlRmxvb3JTZWxlY3Rpb24oc2VsZWN0ZWRGbG9vcikge1xyXG4gICAgLy8gU3ByYXdkemVuaWUsIGN6eSBqZXN0ZcWbbXkgdyBzdGFuaWUgd3lib3J1IHBpxJl0cmFcclxuICAgIGlmICh0aGlzLmdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuU0VMRUNUSU5HX0ZMT09SKSB7XHJcbiAgICAgIFVJTWFuYWdlci5oaWRlRmxvb3JTZWxlY3Rpb25VSSgpOyAvLyBVa3J5d2FteSBVSSBuYSB3c3plbGtpIHd5cGFkZWtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIFVJTWFuYWdlci5oaWRlRmxvb3JTZWxlY3Rpb25VSSgpOyAvLyBVa3J5d2FteSBVSSB3eWJvcnVcclxuXHJcbiAgICAvLyBTcHJhd2R6ZW5pZSwgY3p5IHd5YnJhbm8gaW5uZSwgcHJhd2lkxYJvd2UgcGnEmXRyb1xyXG4gICAgaWYgKFxyXG4gICAgICBzZWxlY3RlZEZsb29yID09PSB0aGlzLmdhbWUubGV2ZWwuY3VycmVudEZsb29yIHx8XHJcbiAgICAgIHNlbGVjdGVkRmxvb3IgPCB0aGlzLmdhbWUubGV2ZWwubWluRmxvb3IgfHxcclxuICAgICAgc2VsZWN0ZWRGbG9vciA+IHRoaXMuZ2FtZS5sZXZlbC5tYXhGbG9vclxyXG4gICAgKSB7XHJcbiAgICAgIC8vIEplxZtsaSB3eWJyYW5vIGJpZcW8xIVjZSBsdWIgbmllcHJhd2lkxYJvd2UgcGnEmXRybywgcG8gcHJvc3R1IHdyYWNhbXkgZG8gZ3J5XHJcbiAgICAgIHRoaXMuZ2FtZS5zZXRHYW1lU3RhdGUoR2FtZVN0YXRlLlBMQVlJTkcpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXJ1Y2hhbWlhbXkgYXN5bmNocm9uaWN6bnkgcHJvY2VzIHByemVqxZtjaWEgbmEgaW5uZSBwacSZdHJvXHJcbiAgICB0aGlzLmhhbmRsZUxpZnRUcmFuc2l0aW9uKHNlbGVjdGVkRmxvb3IpLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgLy8gxYFhcGllbXkgYsWCxJlkeSBwcnplasWbY2lhIGkgdHJha3R1amVteSBqYWtvIGtyeXR5Y3puZVxyXG4gICAgICB0aGlzLmdhbWUuX2hhbmRsZUZhdGFsRXJyb3IoYELFgsSFZCBwcnplasWbY2lhIG5hIHBpxJl0cm86ICR7ZXJyLm1lc3NhZ2V9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGhhbmRsZUxpZnRUcmFuc2l0aW9uKHRhcmdldEZsb29yKSB7XHJcbiAgICBjb25zdCBnYW1lID0gdGhpcy5nYW1lOyAvLyBTa3LDs3QgZGxhIHd5Z29keVxyXG5cclxuICAgIC8vIERvZGF0a293ZSBzcHJhd2R6ZW5pZSBzdGFudSBpIGNvb2xkb3dudVxyXG4gICAgaWYgKGdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuU0VMRUNUSU5HX0ZMT09SIHx8IGdhbWUubGlmdENvb2xkb3duQWN0aXZlKSB7XHJcbiAgICAgIC8vIEplxZtsaSBzdGFuIGp1xbwgbmllIGplc3QgU0VMRUNUSU5HX0ZMT09SIChucC4ganXFvCBUUkFOU0lUSU9OSU5HIGx1YiBQTEFZSU5HKSwgd3ljaG9kemlteVxyXG4gICAgICAvLyBXcmFjYW15IGRvIFBMQVlJTkcgdHlsa28gamXFm2xpIGdyYSBuaWUgamVzdCB6YWtvxYRjem9uYSBpIG5pZSBqZXN0IHcgdHJha2NpZSBwcnplasWbY2lhXHJcbiAgICAgIGlmIChcclxuICAgICAgICBnYW1lLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLkdBTUVfT1ZFUiAmJlxyXG4gICAgICAgIGdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuUExBWUlORyAmJlxyXG4gICAgICAgIGdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuVFJBTlNJVElPTklOR1xyXG4gICAgICApIHtcclxuICAgICAgICBnYW1lLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuUExBWUlORyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLSBQb2N6xIV0ZWsgcHJ6ZWrFm2NpYSAtLS1cclxuICAgIGdhbWUuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5UUkFOU0lUSU9OSU5HKTtcclxuICAgIGlmIChnYW1lLmNoYXJhY3RlcikgZ2FtZS5jaGFyYWN0ZXIuaXNNb3ZpbmcgPSBmYWxzZTsgLy8gWmF0cnp5bXVqZW15IHBvc3RhxIdcclxuICAgIFVJTWFuYWdlci5oaWRlUXVlc3Rpb24oKTsgLy8gVWtyeXdhbXkgVUkgcHl0YW5pYSwgamXFm2xpIGJ5xYJvIG90d2FydGVcclxuICAgIFVJTWFuYWdlci5oaWRlRmxvb3JTZWxlY3Rpb25VSSgpOyAvLyBVcGV3bmlhbXkgc2nEmSBqZXN6Y3plIHJheiwgxbxlIFVJIHd5Ym9ydSBwacSZdHJhIGplc3QgdWtyeXR5XHJcbiAgICBnYW1lLmxpZnRDb29sZG93bkFjdGl2ZSA9IHRydWU7IC8vIEFrdHl3dWplbXkgY29vbGRvd25cclxuICAgIFVJTWFuYWdlci5mbGFzaE1lc3NhZ2UoYFByemVqxZtjaWUgbmEgcGnEmXRybyAke3RhcmdldEZsb29yfS4uLmAsICdpbmZvJywgTElGVF9DT09MRE9XTl9NUyAtIDIwMCk7IC8vIEtvbXVuaWthdCBvIHByemVqxZtjaXVcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBBc3luY2hyb25pY3puaWUgxYJhZHVqZW15IG1hcMSZIG5vd2VnbyBwacSZdHJhXHJcbiAgICAgIGF3YWl0IGdhbWUubGV2ZWwubG9hZEZsb29yKHRhcmdldEZsb29yLCBnYW1lLmNhbnZhcy53aWR0aCwgZ2FtZS5jYW52YXMuaGVpZ2h0KTtcclxuICAgICAgY29uc3QgbmV3TWFwID0gZ2FtZS5sZXZlbC5jdXJyZW50TWFwO1xyXG4gICAgICBpZiAoIW5ld01hcCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgIGBOaWUgdWRhxYJvIHNpxJkgemHFgmFkb3dhxIcgbWFweSBkbGEgcGnEmXRyYSAke3RhcmdldEZsb29yfS4gT2JpZWt0IG1hcHkgamVzdCBudWxsLmBcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAyLiBQb2JpZXJhbXkgcG96eWNqxJkgd2luZHkgbmEgbm93ZWogbWFwaWVcclxuICAgICAgY29uc3QgbGlmdFBvcyA9IG5ld01hcC5nZXRMaWZ0UG9zaXRpb24oKTtcclxuICAgICAgaWYgKCFsaWZ0UG9zKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCcmFrIHBvenljamkgd2luZHkgbmEgemHFgmFkb3dhbnltIHBpxJl0cnplICR7dGFyZ2V0Rmxvb3J9IWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAzLiAtLS0gWk1JQU5BOiBabmFqZMW6IGJlenBpZWN6bmUgbWllanNjZSBvYm9rIHdpbmR5IC0tLVxyXG4gICAgICAvLyBTenVrYW15IG5hamJsacW8c3plaiBiZXpwaWVjem5laiAoa29yeXRhcnovcG9rw7NqKSBrcmF0a2kgd29rw7PFgiB3aW5keVxyXG4gICAgICBjb25zdCBzYWZlU3Bhd25UaWxlID0gbmV3TWFwLmZpbmROZWFyZXN0V2Fsa2FibGVUaWxlKFxyXG4gICAgICAgIGxpZnRQb3MueCxcclxuICAgICAgICBsaWZ0UG9zLnksXHJcbiAgICAgICAgMywgLy8gTWHFgnkgcHJvbWllxYQgcG9jesSFdGtvd3lcclxuICAgICAgICB0cnVlIC8vIEVYQ0xVREVfTElGVCAtIE5pZSBjaGNlbXkgbMSFZG93YcSHIG5hIHNhbWVqIHdpbmR6aWVcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmICghc2FmZVNwYXduVGlsZSkge1xyXG4gICAgICAgIC8vIEplxZtsaSBuaWUgem5hbGV6aW9ubyBibGlza28sIHN6dWthbXkgZ2R6aWVrb2x3aWVrIChhbGUgbmllIHdpbmR5KVxyXG4gICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgIGBbTGlmdFRyYW5zaXRpb25dIE5pZSB6bmFsZXppb25vIGJlenBpZWN6bmVnbyBtaWVqc2NhIG9ib2sgd2luZHkgbmEgKCR7bGlmdFBvcy50aWxlWH0sICR7bGlmdFBvcy50aWxlWX0pLiBTenVrYW0gbG9zb3dlZ28uLi5gXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBlbWVyZ2VuY3lTcGF3biA9IG5ld01hcC5maW5kUmFuZG9tSW5pdGlhbFNwYXduUG9zaXRpb24oKTsgLy8gVGEgZnVua2NqYSBqdcW8IHd5a2x1Y3phIHdpbmTEmVxyXG4gICAgICAgIGlmICghZW1lcmdlbmN5U3Bhd24pIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgYE5pZSBtb8W8bmEgem5hbGXFusSHIMW7QURORUdPIGJlenBpZWN6bmVnbyBtaWVqc2NhIGRvIGzEhWRvd2FuaWEgbmEgcGnEmXRyemUgJHt0YXJnZXRGbG9vcn0hYFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2FtZS5jaGFyYWN0ZXIueCA9IGVtZXJnZW5jeVNwYXduLng7XHJcbiAgICAgICAgZ2FtZS5jaGFyYWN0ZXIueSA9IGVtZXJnZW5jeVNwYXduLnk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICBgW0xpZnRUcmFuc2l0aW9uXSBBd2FyeWpuZSBsxIVkb3dhbmllIHcgbG9zb3d5bSBtaWVqc2N1OiAoJHtnYW1lLmNoYXJhY3Rlci54LnRvRml4ZWQoXHJcbiAgICAgICAgICAgIDFcclxuICAgICAgICAgICl9LCAke2dhbWUuY2hhcmFjdGVyLnkudG9GaXhlZCgxKX0pYFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZ2FtZS5jaGFyYWN0ZXIueCA9IHNhZmVTcGF3blRpbGUueDsgLy8gVcW8eWogem5hbGV6aW9uZWdvIGJlenBpZWN6bmVnbyBtaWVqc2NhXHJcbiAgICAgICAgZ2FtZS5jaGFyYWN0ZXIueSA9IHNhZmVTcGF3blRpbGUueTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgIGBbTGlmdFRyYW5zaXRpb25dIEzEhWRvd2FuaWUgb2JvayB3aW5keSB3OiAoJHtnYW1lLmNoYXJhY3Rlci54LnRvRml4ZWQoXHJcbiAgICAgICAgICAgIDFcclxuICAgICAgICAgICl9LCAke2dhbWUuY2hhcmFjdGVyLnkudG9GaXhlZCgxKX0pYFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGdhbWUuY2hhcmFjdGVyLmN1cnJlbnREaXJlY3Rpb24gPSBDaGFyYWN0ZXIuRGlyZWN0aW9uLkRPV047IC8vIE9icmFjYW15IHcgZMOzxYJcclxuICAgICAgZ2FtZS5jaGFyYWN0ZXIuaXNNb3ZpbmcgPSBmYWxzZTsgLy8gVXBld25pYW15IHNpxJksIMW8ZSBuaWUgbWEgYW5pbWFjamkgY2hvZHplbmlhXHJcblxyXG4gICAgICAvLyA0LiAhIE5BVFlDSE1JQVNUIGNlbnRydWplbXkga2FtZXLEmSBuYSBwb3N0YWNpIFBPIHVzdGF3aWVuaXUgcG96eWNqaSFcclxuICAgICAgZ2FtZS5yZW5kZXJlcj8uY2VudGVyQ2FtZXJhT25DaGFyYWN0ZXIoKTtcclxuXHJcbiAgICAgIC8vIDUuICEgT1BDSk9OQUxOSUU6IERvZGF0a293ZSBzcHJhd2R6ZW5pZSBlbnN1cmVDaGFyYWN0ZXJJc09uV2Fsa2FibGVUaWxlLCBqZcWbbGkgbmFkYWwgc8SFIHByb2JsZW15XHJcbiAgICAgIC8vIHRoaXMuZW5zdXJlQ2hhcmFjdGVySXNPbldhbGthYmxlVGlsZShmYWxzZSk7IC8vIGZhbHNlLCBibyBuaWUgY2hjZW15IHN0YcSHIG5hIHdpbmR6aWVcclxuXHJcbiAgICAgIC8vIDYuIFVydWNoYW1pYW15IHRpbWVyIGNvb2xkb3dudSAob24gcHJ6eXdyw7NjaSBzdGFuIGRvIFBMQVlJTkcgcG8gemFrb8WEY3plbml1KVxyXG4gICAgICBnYW1lLnN0YXJ0TGlmdENvb2xkb3duVGltZXIoKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIC0tLSBPYnPFgnVnYSBixYLEmWTDs3cgcHJ6ZWrFm2NpYSAtLS1cclxuICAgICAgY29uc29sZS5lcnJvcihgW0xpZnRUcmFuc2l0aW9uXSBCxYLEhWQgcG9kY3phcyBwcnplasWbY2lhIG5hIHBpxJl0cm8gJHt0YXJnZXRGbG9vcn06YCwgZXJyb3IpO1xyXG4gICAgICBnYW1lLmxpZnRDb29sZG93bkFjdGl2ZSA9IGZhbHNlOyAvLyBSZXNldHVqZW15IGNvb2xkb3duIHByenkgYsWCxJlkemllXHJcblxyXG4gICAgICAvLyBXcmFjYW15IGRvIHN0YW51IGdyeSwgamXFm2xpIGdyYSBuaWUgemFrb8WEY3p5xYJhIHNpxJkgYsWCxJlkZW0ga3J5dHljem55bVxyXG4gICAgICBpZiAoZ2FtZS5nYW1lU3RhdGUgIT09IEdhbWVTdGF0ZS5HQU1FX09WRVIpIHtcclxuICAgICAgICBnYW1lLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuUExBWUlORyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gVHJha3R1amVteSBixYLEhWQgamFrbyBrcnl0eWN6bnkgKHd5d2/FgmEgX3NldEdhbWVPdmVyKGZhbHNlKSlcclxuICAgICAgZ2FtZS5faGFuZGxlRmF0YWxFcnJvcihcclxuICAgICAgICBgS3J5dHljem55IGLFgsSFZCBwb2RjemFzIHByemVqxZtjaWEgbmEgcGnEmXRybyAke3RhcmdldEZsb29yfTogJHtlcnJvci5tZXNzYWdlIHx8IGVycm9yfWBcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNwcmF3ZHphLCBjenkgcG9zdGHEhyB6bmFqZHVqZSBzacSZIG5hIHByemVjaG9kbmllaiBrcmF0Y2UgKGx1YiBvYm9rIG5pZWopLlxyXG4gICAqIEplxZtsaSBwb3N0YcSHIHV0a27EmcWCYSAoa29saWRlciBwcnplY2luYSDFm2NpYW7EmSBsdWIgxZtyb2RlayBuYSBuaWVwcnplY2hvZG5pZWoga3JhdGNlKSxcclxuICAgKiBwcsOzYnVqZSB6bmFsZcW6xIcgbmFqYmxpxbxzesSFIEJFWlBJRUNaTsSEIChuaWUgd2luZMSZLCBuaWUgxZtjaWFuxJkpIHByemVjaG9kbmnEhSBrcmF0a8SZXHJcbiAgICogaSBwcnplbmllxZvEhyB0YW0gcG9zdGHEhy5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFthbGxvd1N0YW5kaW5nT25MaWZ0PWZhbHNlXSAtIEplxZtsaSB0cnVlLCBwb3p5Y2phIE5BIHDFgnl0Y2Ugd2luZHlcclxuICAgKiBqZXN0IHV3YcW8YW5hIHphIHByYXdpZMWCb3fEhSBkbGEgcG9jesSFdGtvd2VnbyBzcHJhd2R6ZW5pYSAodcW8eXdhbmUgdHXFvCBwbyB0ZWxlcG9ydGFjamkpLlxyXG4gICAqIFphend5Y3phaiBwb3dpbm5vIGJ5xIcgZmFsc2UsIGFieSB3eXBjaG7EhcSHIHBvc3RhxIcgWiB3aW5keS5cclxuICAgKi9cclxuICBlbnN1cmVDaGFyYWN0ZXJJc09uV2Fsa2FibGVUaWxlKGFsbG93U3RhbmRpbmdPbkxpZnQgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgY2hhciA9IHRoaXMuZ2FtZS5jaGFyYWN0ZXI7XHJcbiAgICBjb25zdCBtYXAgPSB0aGlzLmdhbWUubGV2ZWw/LmN1cnJlbnRNYXA7XHJcbiAgICBpZiAoIWNoYXIgfHwgIW1hcCkgcmV0dXJuOyAvLyBXeWrFm2NpZSwgamXFm2xpIGJyYWsgcG9zdGFjaSBsdWIgbWFweVxyXG5cclxuICAgIGNvbnN0IGN1cnJlbnRUaWxlWCA9IE1hdGguZmxvb3IoY2hhci54IC8gbWFwLnRpbGVTaXplKTtcclxuICAgIGNvbnN0IGN1cnJlbnRUaWxlWSA9IE1hdGguZmxvb3IoY2hhci55IC8gbWFwLnRpbGVTaXplKTtcclxuXHJcbiAgICAvLyBQb2JpZXJhbXkgdHlwIGthZmVsa2EgcG9kIMWbcm9ka2llbSBwb3N0YWNpIChqZcWbbGkgd3Nww7PFgnJ6xJlkbmUgc8SFIHByYXdpZMWCb3dlKVxyXG4gICAgY29uc3QgY3VycmVudFRpbGVWYWx1ZSA9XHJcbiAgICAgIGN1cnJlbnRUaWxlWCA+PSAwICYmIGN1cnJlbnRUaWxlWCA8IG1hcC5jb2xzICYmIGN1cnJlbnRUaWxlWSA+PSAwICYmIGN1cnJlbnRUaWxlWSA8IG1hcC5yb3dzXHJcbiAgICAgICAgPyBtYXAubWFwW2N1cnJlbnRUaWxlWV0/LltjdXJyZW50VGlsZVhdIC8vIEJlenBpZWN6bnkgZG9zdMSZcFxyXG4gICAgICAgIDogVElMRV9XQUxMOyAvLyBVem5hamVteSB6YSDFm2NpYW7EmSwgamXFm2xpIHBvemEgbWFwxIVcclxuXHJcbiAgICAvLyBTcHJhd2R6ZW5pZSAxOiBDenkga3JhdGthIHBvZCDFm3JvZGtpZW0gcG9zdGFjaSBqZXN0IHByemVjaG9kbmlhP1xyXG4gICAgLy8gVcW8eXdhbXkgaXNXYWxrYWJsZSwga3TDs3JhIG9iZWptdWplIHdpbmTEmSBqYWtvIHByemVjaG9kbmnEhS5cclxuICAgIGxldCBpc0NlbnRlclRpbGVXYWxrYWJsZUJ5TWFwID0gbWFwLmlzV2Fsa2FibGUoY2hhci54LCBjaGFyLnkpO1xyXG4gICAgY29uc3QgaXNMaWZ0ID0gY3VycmVudFRpbGVWYWx1ZSA9PT0gVElMRV9MSUZUO1xyXG5cclxuICAgIC8vIE9rcmXFm2xhbXksIGN6eSBiaWXFvMSFY2EgcG96eWNqYSBqZXN0IHV3YcW8YW5hIHphIFwiYmV6cGllY3puxIVcIiBkbyBzdGFuaWFcclxuICAgIC8vIEJlenBpZWN6bmllLCBqZcWbbGk6XHJcbiAgICAvLyAxLiBLcmF0a2EgamVzdCBwcnplY2hvZG5pYSB3ZWTFgnVnIG1hcHkgT1JBWiBuaWUgamVzdCB3aW5kxIUgKGNoeWJhIMW8ZSBwb3p3b2xvbm8pXHJcbiAgICBsZXQgaXNTYWZlVG9TdGFuZEhlcmUgPSBpc0NlbnRlclRpbGVXYWxrYWJsZUJ5TWFwICYmICghaXNMaWZ0IHx8IGFsbG93U3RhbmRpbmdPbkxpZnQpO1xyXG5cclxuICAgIC8vIFNwcmF3ZHplbmllIDI6IEN6eSBrb2xpZGVyIHBvc3RhY2kgcHJ6ZWNpbmEgamFraWVrb2x3aWVrIG5pZXByemVjaG9kbmllIGtyYXRraT9cclxuICAgIGNvbnN0IGlzQ29sbGlkaW5nV2l0aFdhbGwgPSB0aGlzLmNoZWNrQ29sbGlzaW9uKGNoYXIueCwgY2hhci55KTtcclxuXHJcbiAgICAvLyBXYXJ1bmVrIFwid3lwY2huacSZY2lhXCI6XHJcbiAgICAvLyAxLiBLb2xpZGVyIHBvc3RhY2kgcHJ6ZWNpbmEgxZtjaWFuxJkgKGlzQ29sbGlkaW5nV2l0aFdhbGwpXHJcbiAgICAvLyBMVUJcclxuICAgIC8vIDIuIFBvenljamEsIG5hIGt0w7NyZWogc3RvaSwgbmllIGplc3QgdXdhxbxhbmEgemEgXCJiZXpwaWVjem7EhVwiIChpc1NhZmVUb1N0YW5kSGVyZSA9PT0gZmFsc2UpXHJcbiAgICBjb25zdCBuZWVkc051ZGdlID0gaXNDb2xsaWRpbmdXaXRoV2FsbCB8fCAhaXNTYWZlVG9TdGFuZEhlcmU7XHJcblxyXG4gICAgaWYgKG5lZWRzTnVkZ2UpIHtcclxuICAgICAgY29uc29sZS53YXJuKFxyXG4gICAgICAgIGBbQW50aVN0dWNrXSBQb3N0YcSHIHcgxZt3aWVjaWUoJHtjaGFyLngudG9GaXhlZCgxKX0sICR7Y2hhci55LnRvRml4ZWQoXHJcbiAgICAgICAgICAxXHJcbiAgICAgICAgKX0pIC8ga3JhdGNlKCR7Y3VycmVudFRpbGVYfSwgJHtjdXJyZW50VGlsZVl9KSB1dGtuxJnFgmEgKGtvbGl6amE6ICR7aXNDb2xsaWRpbmdXaXRoV2FsbH0sIGlzU2FmZVRvU3RhbmQ6ICR7aXNTYWZlVG9TdGFuZEhlcmV9LCB0aWxlVmFsdWU6ICR7Y3VycmVudFRpbGVWYWx1ZX0sIGFsbG93TGlmdDogJHthbGxvd1N0YW5kaW5nT25MaWZ0fSkuIFByw7NiYSB3eXBjaG5pxJljaWEuYFxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gU3p1a2FteSBuYWpibGnFvHN6ZWogQkVaUElFQ1pORUogcHJ6ZWNob2RuaWVqIGtyYXRraSAoa29yeXRhcnogbHViIHBvZMWCb2dhIHBva29qdSwgTklFIFdJTkRBKVxyXG4gICAgICAvLyBVxbx5d2FteSB3c3DDs8WCcnrEmWRueWNoIMWaV0lBVEEgZG8gd3lzenVraXdhbmlhXHJcbiAgICAgIGNvbnN0IHNhZmVTcG90ID0gbWFwLmZpbmROZWFyZXN0V2Fsa2FibGVUaWxlKFxyXG4gICAgICAgIGNoYXIueCxcclxuICAgICAgICBjaGFyLnksXHJcbiAgICAgICAgOCwgLy8gTWFrc3ltYWxueSBwcm9taWXFhCB3eXN6dWtpd2FuaWFcclxuICAgICAgICB0cnVlIC8vIEVYQ0xVREVfTElGVCA9IHRydWUgLSBzenVrYW15IHR5bGtvIGtvcnl0YXJ6YS9wb2tvanVcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChzYWZlU3BvdCkge1xyXG4gICAgICAgIC8vIEplxZtsaSB6bmFsZcW6bGnFm215IGJlenBpZWN6bmUgbWllanNjZSwgcHJ6ZW5vc2lteSB0YW0gcG9zdGHEh1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgYFtBbnRpU3R1Y2tdIFd5cHljaGFteSBwb3N0YcSHIGRvIGJlenBpZWN6bmVnbyBtaWVqc2NhOiDFm3dpYXQoJHtzYWZlU3BvdC54LnRvRml4ZWQoXHJcbiAgICAgICAgICAgIDFcclxuICAgICAgICAgICl9LCAke3NhZmVTcG90LnkudG9GaXhlZCgxKX0pYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY2hhci54ID0gc2FmZVNwb3QueDtcclxuICAgICAgICBjaGFyLnkgPSBzYWZlU3BvdC55O1xyXG4gICAgICAgIC8vIFdBxbtORTogUG9ub3duaWUgY2VudHJ1amVteSBrYW1lcsSZIFBPIHd5cGNobmnEmWNpdVxyXG4gICAgICAgIHRoaXMuZ2FtZS5yZW5kZXJlcj8uY2VudGVyQ2FtZXJhT25DaGFyYWN0ZXIoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBKZcWbbGkgbmllIHpuYWxlemlvbm8gYmV6cGllY3puZWdvIG1pZWpzY2EgKGJhcmR6byByemFka2kgaSB6xYJ5IHByenlwYWRlaylcclxuICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgYFtBbnRpU3R1Y2tdIELFgcSERCBLUllUWUNaTlk6IE5pZSB1ZGHFgm8gc2nEmSB6bmFsZcW6xIcgYmV6cGllY3puZWdvIHByemVjaG9kbmllZ28gbWllanNjYSAoa29yeXRhcnovcG9rw7NqKSB3IHBvYmxpxbx1IGtyYXRraSAoJHtjdXJyZW50VGlsZVh9LCAke2N1cnJlbnRUaWxlWX0pISBQb3N0YcSHIG1vxbxlIHBvem9zdGHEhyB3IHRla3N0dXJ6ZS5gXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBXYXJpYW50IGF3YXJ5am55OiBTcHLDs2J1am15IHpuYWxlxbrEhyBKQUtJRUtPTFdJRUsgcHJ6ZWNob2RuaWUgbWllanNjZSAodyB0eW0gd2luZMSZKSBqYWtvIG9zdGF0bmnEhSBkZXNrxJkgcmF0dW5rdVxyXG4gICAgICAgIC8vIFXFvHl3YW15IGZpbmRSYW5kb21Jbml0aWFsU3Bhd25Qb3NpdGlvbiBqYWtvIHd5c3p1a2l3YW5pYSBsb3Nvd2VqIE5JRS3FmkNJQU5ZXHJcbiAgICAgICAgY29uc3QgZW1lcmdlbmN5U3BvdCA9IG1hcC5maW5kUmFuZG9tSW5pdGlhbFNwYXduUG9zaXRpb24oKTsgLy8gU3p1a2Ega29yeXRhcnphIGx1YiBwb2TFgm9naSAoanXFvCB3eWtsdWN6YSB3aW5kxJkpXHJcbiAgICAgICAgaWYgKGVtZXJnZW5jeVNwb3QpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgICAgYFtBbnRpU3R1Y2tdIFd5asWbY2llIGF3YXJ5am5lOiBQcnplbm9zaW15IG5hIExPU09XxIQgYmV6cGllY3puxIUga3JhdGvEmSDFm3dpYXQoJHtlbWVyZ2VuY3lTcG90LngudG9GaXhlZChcclxuICAgICAgICAgICAgICAxXHJcbiAgICAgICAgICAgICl9LCAke2VtZXJnZW5jeVNwb3QueS50b0ZpeGVkKDEpfSlgXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgY2hhci54ID0gZW1lcmdlbmN5U3BvdC54O1xyXG4gICAgICAgICAgY2hhci55ID0gZW1lcmdlbmN5U3BvdC55O1xyXG4gICAgICAgICAgdGhpcy5nYW1lLnJlbmRlcmVyPy5jZW50ZXJDYW1lcmFPbkNoYXJhY3RlcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBKZcWbbGkgbmF3ZXQgbG9zb3dlaiBuaWUgdWRhxYJvIHNpxJkgem5hbGXFusSHIC0gY2HFgmtvd2l0YSBrYXRhc3Ryb2ZhXHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgICAnW0FudGlTdHVja10gVyBvZ8OzbGUgbmllIHpuYWxlemlvbm8gYmV6cGllY3pueWNoIGtyYXRlayEgR3JhIG1vxbxlIGJ5xIcgemVwc3V0YS4nXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgdGhpcy5nYW1lLl9oYW5kbGVGYXRhbEVycm9yKFxyXG4gICAgICAgICAgICAnQsWCxIVkIGtyeXR5Y3pueTogTmllIG1vxbxuYSB6bmFsZcW6xIcgYmV6cGllY3puZWdvIG1pZWpzY2EgZGxhIHBvc3RhY2khJ1xyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0gLy8gS29uaWVjIGtsYXN5IEdhbWVwbGF5TWFuYWdlclxyXG4iLCIvLyBzcmMvY29yZS9HYW1lLmpzXHJcbmltcG9ydCB7IElucHV0TWFuYWdlciB9IGZyb20gJy4vSW5wdXRNYW5hZ2VyLmpzJztcclxuaW1wb3J0IHsgVUlNYW5hZ2VyIH0gZnJvbSAnLi4vVUkvVUlNYW5hZ2VyLmpzJztcclxuaW1wb3J0IHsgQ2hhcmFjdGVyIH0gZnJvbSAnLi9DaGFyYWN0ZXIuanMnO1xyXG5pbXBvcnQgeyBMZXZlbCB9IGZyb20gJy4vTGV2ZWwuanMnO1xyXG5pbXBvcnQge1xyXG4gIEdhbWVTdGF0ZSxcclxuICBxdWVzdGlvbnMsXHJcbiAgVEFSR0VUX0JPT0tTX1RPX1dJTixcclxuICBMSUZUX0NPT0xET1dOX01TLFxyXG4gIFRJTEVfV0FMTCxcclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBHYW1lUmVuZGVyZXIgfSBmcm9tICcuL0dhbWVSZW5kZXJlci5qcyc7XHJcbmltcG9ydCB7IEdhbWVwbGF5TWFuYWdlciB9IGZyb20gJy4vR2FtZXBsYXlNYW5hZ2VyLmpzJztcclxuXHJcbi8vINCY0LzQv9C+0YDRgtGLINGA0LXRgdGD0YDRgdC+0LJcclxuaW1wb3J0IHJlZFNwcml0ZSBmcm9tICcuLi8uLi9pbWFnZXMvY2hhcmFjdGVyX3JlZC5wbmcnO1xyXG5pbXBvcnQgYmx1ZVNwcml0ZSBmcm9tICcuLi8uLi9pbWFnZXMvY2hhcmFjdGVyX2JsdWUucG5nJztcclxuaW1wb3J0IHllbGxvd1Nwcml0ZSBmcm9tICcuLi8uLi9pbWFnZXMvY2hhcmFjdGVyX3llbGxvdy5wbmcnO1xyXG5pbXBvcnQgZ3JlZW5TcHJpdGUgZnJvbSAnLi4vLi4vaW1hZ2VzL2NoYXJhY3Rlcl9ncmVlbi5wbmcnO1xyXG5pbXBvcnQgYm9va1Nwcml0ZSBmcm9tICcuLi8uLi9pbWFnZXMvYm9vay5wbmcnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWUge1xyXG4gIGNvbnN0cnVjdG9yKGNoYXJhY3RlckNvbG9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgW0dhbWVdIEluaXRpYWxpemluZyB3aXRoIGNoYXJhY3RlcjogJHtjaGFyYWN0ZXJDb2xvcn1gKTtcclxuICAgIHRoaXMuY2hhcmFjdGVyQ29sb3IgPSBjaGFyYWN0ZXJDb2xvcjtcclxuICAgIHRoaXMuX2dhbWVTdGF0ZSA9IEdhbWVTdGF0ZS5MT0FESU5HOyAvLyDQndCw0YfQsNC70YzQvdC+0LUg0YHQvtGB0YLQvtGP0L3QuNC1XHJcbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMudG90YWxCb29rc0NvbGxlY3RlZEdsb2JhbGx5ID0gMDtcclxuICAgIHRoaXMudGFyZ2V0Qm9va3NUb1dpbiA9IFRBUkdFVF9CT09LU19UT19XSU47XHJcbiAgICB0aGlzLmF2YWlsYWJsZVF1ZXN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5jdXJyZW50Qm9va1RhcmdldCA9IG51bGw7XHJcbiAgICB0aGlzLmN1cnJlbnRRdWVzdGlvbkRhdGEgPSBudWxsO1xyXG4gICAgdGhpcy5saWZ0Q29vbGRvd25BY3RpdmUgPSBmYWxzZTtcclxuICAgIHRoaXMubGlmdENvb2xkb3duVGltZXIgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuY2FudmFzID0gbnVsbDtcclxuICAgIHRoaXMuY3R4ID0gbnVsbDtcclxuICAgIHRoaXMuY2hhcmFjdGVyID0gbnVsbDtcclxuICAgIHRoaXMubGV2ZWwgPSBudWxsO1xyXG4gICAgdGhpcy5pbnB1dE1hbmFnZXIgPSBudWxsO1xyXG4gICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XHJcbiAgICB0aGlzLmdhbWVwbGF5TWFuYWdlciA9IG51bGw7IC8vINCR0YPQtNC10YIg0LjQvdC40YbQuNCw0LvQuNC30LjRgNC+0LLQsNC9INCyINC60L7QvdGB0YLRgNGD0LrRgtC+0YDQtVxyXG5cclxuICAgIHRoaXMuc3ByaXRlcyA9IHsgcmVkOiByZWRTcHJpdGUsIGJsdWU6IGJsdWVTcHJpdGUsIHllbGxvdzogeWVsbG93U3ByaXRlLCBncmVlbjogZ3JlZW5TcHJpdGUgfTtcclxuICAgIHRoaXMuYm9va0ltYWdlID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmdhbWVMb29wID0gdGhpcy5nYW1lTG9vcC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlRmF0YWxFcnJvciA9IHRoaXMuX2hhbmRsZUZhdGFsRXJyb3IuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2JvdW5kS2V5RG93bkhhbmRsZXIgPSBudWxsOyAvLyDQlNC70Y8g0YPQtNCw0LvQtdC90LjRjyDRgdC70YPRiNCw0YLQtdC70LXQuVxyXG4gICAgdGhpcy5fYm91bmRLZXlVcEhhbmRsZXIgPSBudWxsO1xyXG5cclxuICAgIC8vIC0tLSDQn9C+0YHQu9C10LTQvtCy0LDRgtC10LvRjNC90L7RgdGC0Ywg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40LggLS0tXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiDQntGB0L3QvtCy0L3Ri9C1INC60L7QvNC/0L7QvdC10L3RgtGLICjRgdC40L3RhdGA0L7QvdC90L4pXHJcbiAgICAgIHRoaXMuX2luaXRpYWxpemVDb3JlQ29tcG9uZW50cygpOyAvLyBJbnB1dE1hbmFnZXIsIExldmVsXHJcblxyXG4gICAgICAvLyAyLiBHYW1lcGxheU1hbmFnZXIgKNGB0LjQvdGF0YDQvtC90L3Qviwg0LTQviBVSSlcclxuICAgICAgdGhpcy5nYW1lcGxheU1hbmFnZXIgPSBuZXcgR2FtZXBsYXlNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICBjb25zb2xlLmxvZygnW0dhbWVdIEdhbWVwbGF5TWFuYWdlciBjcmVhdGVkLicpO1xyXG5cclxuICAgICAgLy8gMy4g0KDQtdC90LTQtdGA0LXRgCDQuCBDYW52YXMgKNGB0LjQvdGF0YDQvtC90L3QvilcclxuICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBHYW1lUmVuZGVyZXIodGhpcyk7XHJcbiAgICAgIGNvbnN0IHsgY2FudmFzLCBjdHggfSA9IHRoaXMucmVuZGVyZXIuaW5pdGlhbGl6ZUNhbnZhcygpO1xyXG4gICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgICAgdGhpcy5jdHggPSBjdHg7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbR2FtZV0gUmVuZGVyZXIgYW5kIENhbnZhcyBpbml0aWFsaXplZC4nKTtcclxuXHJcbiAgICAgIC8vIDQuINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPIFVJICjRgdC40L3RhdGA0L7QvdC90L4sIEdhbWVwbGF5TWFuYWdlciDRg9C20LUg0LTQvtGB0YLRg9C/0LXQvSlcclxuICAgICAgdGhpcy5faW5pdGlhbGl6ZVVJTWFuYWdlcigpO1xyXG4gICAgICBjb25zb2xlLmxvZygnW0dhbWVdIFVJTWFuYWdlciBzZXR1cCBpbml0aWF0ZWQuJyk7XHJcblxyXG4gICAgICAvLyA1LiDQk9C70L7QsdCw0LvRjNC90YvQtSDRgdC70YPRiNCw0YLQtdC70LggKNGB0LjQvdGF0YDQvtC90L3QvilcclxuICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgIC8vIDYuINCQ0YHQuNC90YXRgNC+0L3QvdCw0Y8g0LfQsNCz0YDRg9C30LrQsCDRgNC10YHRg9GA0YHQvtCyINC4INC30LDQv9GD0YHQuiDQvtGB0L3QvtCy0L3QvtC5INC70L7Qs9C40LrQuCDQuNCz0YDRi1xyXG4gICAgICAvLyAgICDQntCx0YDQsNCx0L7RgtC60LAg0L7RiNC40LHQvtC6INGN0YLQvtC5INCw0YHQuNC90YXRgNC+0L3QvdC+0Lkg0L7Qv9C10YDQsNGG0LjQuCDQv9GA0L7QuNGB0YXQvtC00LjRgiDQstC90YPRgtGA0Lgg0L3QtdGRXHJcbiAgICAgIC8vICAgINC40LvQuCDRh9C10YDQtdC3IC5jYXRjaCgpLCDQtdGB0LvQuCBfbG9hZEFzc2V0c0FuZFN0YXJ0INCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIFByb21pc2UuXHJcbiAgICAgIHRoaXMuX2xvYWRBc3NldHNBbmRUaGVuU3RhcnRMb2dpYygpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tHYW1lXSBBc3luYyBsb2FkaW5nIGFuZCBnYW1lIGxvZ2ljIHN0YXJ0IHNlcXVlbmNlIGNvbXBsZXRlZC4nKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgIC8vINCt0YLQsCDQvtGI0LjQsdC60LAg0LTQvtC70LbQvdCwINCx0YvRgtGMINGD0LbQtSDQvtCx0YDQsNCx0L7RgtCw0L3QsCDQsiBfbG9hZEFzc2V0c0FuZFRoZW5TdGFydExvZ2ljXHJcbiAgICAgICAgICAvLyDQuNC70LggX2hhbmRsZUZhdGFsRXJyb3IsINC90L4g0LTQu9GPINCx0LXQt9C+0L/QsNGB0L3QvtGB0YLQuCDQu9C+0LPQuNGA0YPQtdC8INC10YnQtSDRgNCw0LcuXHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgICAnW0dhbWVdIFVuaGFuZGxlZCBlcnJvciBmcm9tIF9sb2FkQXNzZXRzQW5kVGhlblN0YXJ0TG9naWMgaW4gY29uc3RydWN0b3I6JyxcclxuICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICAvLyDQo9Cx0LXQtNC40LzRgdGPLCDRh9GC0L4g0LjQs9GA0LAg0L3QtSDQsiDRgdC+0YHRgtC+0Y/QvdC40Lgg0LfQsNCy0LjRgdCw0L3QuNGPINC30LDQs9GA0YPQt9C60LhcclxuICAgICAgICAgIGNvbnN0IGxvYWRpbmdPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRpbmctb3ZlcmxheScpO1xyXG4gICAgICAgICAgaWYgKGxvYWRpbmdPdmVybGF5KSBsb2FkaW5nT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyDQm9C+0LLQuNC8INC+0YjQuNCx0LrQuCDRgdC40L3RhdGA0L7QvdC90L7QuSDRh9Cw0YHRgtC4INC60L7QvdGB0YLRgNGD0LrRgtC+0YDQsFxyXG4gICAgICBjb25zb2xlLmVycm9yKCdbR2FtZV0gU3luY2hyb25vdXMgY29yZSBpbml0aWFsaXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCBhbGVydCwg0YIu0LouIFVJTWFuYWdlci5mbGFzaE1lc3NhZ2Ug0LzQvtC20LXRgiDQsdGL0YLRjCDQtdGJ0LUg0L3QtSDQs9C+0YLQvtCyXHJcbiAgICAgIGFsZXJ0KGBDcml0aWNhbCBpbml0aWFsaXphdGlvbiBlcnJvcjogJHtlcnJvci5tZXNzYWdlfS4gR2FtZSBjYW5ub3Qgc3RhcnQuYCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZhdGFsRXJyb3IoYEluaXRpYWxpemF0aW9uIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCwgZmFsc2UpOyAvLyBmYWxzZSwg0YIu0LouIGFsZXJ0INGD0LbQtSDQsdGL0LtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBnYW1lU3RhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZ2FtZVN0YXRlO1xyXG4gIH1cclxuICBzZXRHYW1lU3RhdGUobmV3U3RhdGUpIHtcclxuICAgIGlmICh0aGlzLl9nYW1lU3RhdGUgIT09IG5ld1N0YXRlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBbR2FtZSBTdGF0ZV0gJHt0aGlzLl9nYW1lU3RhdGV9IC0+ICR7bmV3U3RhdGV9YCk7XHJcbiAgICAgIHRoaXMuX2dhbWVTdGF0ZSA9IG5ld1N0YXRlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2luaXRpYWxpemVDb3JlQ29tcG9uZW50cygpIHtcclxuICAgIHRoaXMuaW5wdXRNYW5hZ2VyID0gbmV3IElucHV0TWFuYWdlcigpO1xyXG4gICAgdGhpcy5sZXZlbCA9IG5ldyBMZXZlbCgxLCAzKTsgLy8g0J/RgNC40LzQtdGAOiDRjdGC0LDQttC4INC+0YIgMSDQtNC+IDNcclxuICB9XHJcblxyXG4gIF9pbml0aWFsaXplVUlNYW5hZ2VyKCkge1xyXG4gICAgaWYgKCF0aGlzLmdhbWVwbGF5TWFuYWdlcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1tHYW1lXSBHYW1lcGxheU1hbmFnZXIgaXMgTk9UIGRlZmluZWQgd2hlbiBfaW5pdGlhbGl6ZVVJTWFuYWdlciBpcyBjYWxsZWQhJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuaW5wdXRNYW5hZ2VyKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignW0dhbWVdIElucHV0TWFuYWdlciBpcyBOT1QgZGVmaW5lZCB3aGVuIF9pbml0aWFsaXplVUlNYW5hZ2VyIGlzIGNhbGxlZCEnKTtcclxuICAgIH1cclxuICAgIC8vINCh0L3QsNGH0LDQu9CwINC/0LXRgNC10LTQsNC10LwgR2FtZXBsYXlNYW5hZ2VyINCyIFVJTWFuYWdlclxyXG4gICAgVUlNYW5hZ2VyLnNldEdhbWVwbGF5TWFuYWdlcih0aGlzLmdhbWVwbGF5TWFuYWdlcik7XHJcbiAgICAvLyDQl9Cw0YLQtdC8INC40L3QuNGG0LjQsNC70LjQt9C40YDRg9C10Lwg0L7RgdGC0LDQu9GM0L3Ri9C1INGN0LvQtdC80LXQvdGC0YsgVUksINC60L7RgtC+0YDRi9C1INC80L7Qs9GD0YIg0LfQsNCy0LjRgdC10YLRjCDQvtGCIElucHV0TWFuYWdlclxyXG4gICAgVUlNYW5hZ2VyLmluaXRpYWxpemVVSSh0aGlzLmlucHV0TWFuYWdlcik7IC8vINCt0YLQvtGCINC80LXRgtC+0LQg0YHQvtC30LTQsNGB0YIg0LrQvtC90YLRgNC+0LvRiywgVUkg0LLQvtC/0YDQvtGB0L7QsiDQuCDRgi7QtC5cclxuICB9XHJcblxyXG4gIF9hZGRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB0aGlzLnJlbmRlcmVyPy5yZXNpemVDYW52YXMoKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBfbG9hZEFzc2V0c0FuZFRoZW5TdGFydExvZ2ljKCkge1xyXG4gICAgY29uc3QgbG9hZGluZ092ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZGluZy1vdmVybGF5Jyk7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuTE9BRElORyk7IC8vINCj0LHQtdC00LjQvNGB0Y8sINGH0YLQviDRgdC+0YHRgtC+0Y/QvdC40LUgTE9BRElORyDQv9C10YDQtdC0INC30LDQs9GA0YPQt9C60L7QuVxyXG4gICAgICAvLyDQntCy0LXRgNC70LXQuSDQt9Cw0LPRgNGD0LfQutC4INGD0LbQtSDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0L/QvtC60LDQt9Cw0L0g0LjQtyBNZW51LmpzXHJcblxyXG4gICAgICBhd2FpdCB0aGlzLl9sb2FkQXNzZXRzKCk7IC8vINCX0LDQs9GA0YPQt9C60LAg0YHQv9GA0LDQudGC0L7Qsiwg0LrQvdC40LPQuCDQuCDRgi7QtC5cclxuXHJcbiAgICAgIC8vINCf0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRgNC10YHRg9GA0YHQvtCyINC30LDQv9GD0YHQutCw0LXQvCDQvtGB0L3QvtCy0L3Rg9GOINC70L7Qs9C40LrRgyDQuNCz0YDRi1xyXG4gICAgICBhd2FpdCB0aGlzLl9zdGFydEdhbWVMb2dpYygpO1xyXG5cclxuICAgICAgLy8g0KHQutGA0YvQstCw0LXQvCDQvtCy0LXRgNC70LXQuSDQt9Cw0LPRgNGD0LfQutC4INC/0L7RgdC70LUg0YPRgdC/0LXRiNC90L7Qs9C+INGB0YLQsNGA0YLQsCDQstGB0LXQuSDQu9C+0LPQuNC60LhcclxuICAgICAgaWYgKGxvYWRpbmdPdmVybGF5KSBsb2FkaW5nT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbR2FtZV0gQXNzZXQgbG9hZGluZyBvciBnYW1lIGxvZ2ljIHN0YXJ0IGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIGlmIChsb2FkaW5nT3ZlcmxheSkgbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpOyAvLyDQo9Cx0YDQsNGC0Ywg0L7QstC10YDQu9C10Lkg0L/RgNC4INC+0YjQuNCx0LrQtVxyXG4gICAgICB0aGlzLl9oYW5kbGVGYXRhbEVycm9yKGBBc3NldC9TdGFydCBMb2dpYyBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAvLyDQktCw0LbQvdC+INC/0LXRgNC10LHRgNC+0YHQuNGC0Ywg0L7RiNC40LHQutGDLCDQtdGB0LvQuCDRjdGC0L7RgiDQvNC10YLQvtC0INCy0YvQt9GL0LLQsNC10YLRgdGPINGC0LDQuiwg0YfRgtC+INC+0LbQuNC00LDQtdGC0YHRjyBQcm9taXNlXHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX2xvYWRBc3NldHMoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnW0dhbWVdIExvYWRpbmcgYXNzZXRzLi4uJyk7XHJcbiAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xyXG4gICAgY29uc3Qgc3ByaXRlUGF0aCA9IHRoaXMuc3ByaXRlc1t0aGlzLmNoYXJhY3RlckNvbG9yXSB8fCB0aGlzLnNwcml0ZXMucmVkOyAvLyDQktGL0LHQvtGAINGB0L/RgNCw0LnRgtCwXHJcblxyXG4gICAgaWYgKCF0aGlzLmN0eCkgdGhyb3cgbmV3IEVycm9yKCdDYW52YXMgY29udGV4dCBub3QgYXZhaWxhYmxlIGZvciBDaGFyYWN0ZXIgY3JlYXRpb24uJyk7XHJcbiAgICB0aGlzLmNoYXJhY3RlciA9IG5ldyBDaGFyYWN0ZXIodGhpcy5jdHgsIHNwcml0ZVBhdGgsIHtcclxuICAgICAgc3BlZWQ6IDMsXHJcbiAgICAgIGZyYW1lU2l6ZTogMzIsXHJcbiAgICAgIHNjYWxlOiAyLFxyXG4gICAgICBhbmltYXRpb25TcGVlZDogMTUwLFxyXG4gICAgICBmcmFtZUNvdW50OiA0LFxyXG4gICAgfSk7XHJcbiAgICBwcm9taXNlcy5wdXNoKFxyXG4gICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXIuc3ByaXRlLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFtBc3NldHNdIENoYXJhY3RlciBzcHJpdGUgbG9hZGVkOiAke3Nwcml0ZVBhdGh9YCk7XHJcbiAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNoYXJhY3Rlci5zcHJpdGUub25lcnJvciA9IChlcnIpID0+XHJcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBjaGFyYWN0ZXIgc3ByaXRlOiAke3Nwcml0ZVBhdGh9LiBEZXRhaWxzOiAke2Vycn1gKSk7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChib29rU3ByaXRlKSB7XHJcbiAgICAgIHRoaXMuYm9va0ltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgIHRoaXMuYm9va0ltYWdlLnNyYyA9IGJvb2tTcHJpdGU7XHJcbiAgICAgIHByb21pc2VzLnB1c2goXHJcbiAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgIC8vINCe0YjQuNCx0LrRgyDQt9Cw0LPRgNGD0LfQutC4INC60L3QuNCz0Lgg0L3QtSDRgdGH0LjRgtCw0LXQvCDRhNCw0YLQsNC70YzQvdC+0LlcclxuICAgICAgICAgIHRoaXMuYm9va0ltYWdlLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYCAgW0Fzc2V0c10gQm9vayBpbWFnZSBsb2FkZWQ6ICR7Ym9va1Nwcml0ZX1gKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHRoaXMuYm9va0ltYWdlLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgICAgICBgIFtBc3NldHNdIEZhaWxlZCB0byBsb2FkIGJvb2sgaW1hZ2U6ICR7Ym9va1Nwcml0ZX0uIFVzaW5nIGZhbGxiYWNrIHJlbmRlcmluZy5gXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuYm9va0ltYWdlID0gbnVsbDsgLy8g0KHQsdGA0LDRgdGL0LLQsNC10LwsINGH0YLQvtCx0Ysg0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMIGZhbGxiYWNrXHJcbiAgICAgICAgICAgIHJlc29sdmUoKTsgLy8g0JLRgdC1INGA0LDQstC90L4gcmVzb2x2ZSwg0YIu0LouINGN0YLQviDQvdC10LrRgNC40YLQuNGH0L3QvlxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdbQXNzZXRzXSBObyBib29rIHNwcml0ZSBwYXRoIHByb3ZpZGVkLiBCb29rIHdpbGwgdXNlIGZhbGxiYWNrIHJlbmRlcmluZy4nKTtcclxuICAgICAgdGhpcy5ib29rSW1hZ2UgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcclxuICAgIGNvbnNvbGUubG9nKCdbR2FtZV0gQWxsIGFzc2V0cyBsb2FkZWQgc3VjY2Vzc2Z1bGx5LicpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgX3N0YXJ0R2FtZUxvZ2ljKCkge1xyXG4gICAgY29uc29sZS5sb2coJ1tHYW1lXSBTdGFydGluZyBjb3JlIGdhbWUgbG9naWMuLi4nKTtcclxuICAgIGlmICghdGhpcy5sZXZlbCB8fCAhdGhpcy5jaGFyYWN0ZXIgfHwgIXRoaXMuY2FudmFzIHx8ICF0aGlzLnJlbmRlcmVyIHx8ICF0aGlzLmdhbWVwbGF5TWFuYWdlcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzdGFydCBnYW1lIC0gZXNzZW50aWFsIGNvbXBvbmVudHMgYXJlIG1pc3NpbmcuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0KHQvtGB0YLQvtGP0L3QuNC1IExPQURJTkdfTEVWRUwg0LjQu9C4IFBSRVBBUklOR19MRVZFTFxyXG4gICAgdGhpcy5zZXRHYW1lU3RhdGUoR2FtZVN0YXRlLkxPQURJTkdfTEVWRUwpO1xyXG4gICAgLy8gVUlNYW5hZ2VyLmhpZGVHYW1lVUkoKTsgLy8g0KPQttC1INC00L7Qu9C20L3QviDQsdGL0YLRjCDRgdC60YDRi9GC0L4g0LjQtyBNZW51LmpzINC40LvQuCDQv9GA0Lgg0L7RiNC40LHQutC1XHJcbiAgICAvLyBVSU1hbmFnZXIuaGlkZVF1ZXN0aW9uKCk7XHJcbiAgICAvLyBVSU1hbmFnZXIuaGlkZUZsb29yU2VsZWN0aW9uVUkoKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCB0aGlzLmxldmVsLmxvYWRGbG9vcih0aGlzLmxldmVsLm1pbkZsb29yLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuICAgICAgY29uc3QgY3VycmVudE1hcCA9IHRoaXMubGV2ZWwuY3VycmVudE1hcDtcclxuICAgICAgaWYgKCFjdXJyZW50TWFwKSB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGluaXRpYWwgbWFwLiBNYXAgb2JqZWN0IGlzIG51bGwuJyk7XHJcblxyXG4gICAgICBjb25zdCBzdGFydFBvcyA9IGN1cnJlbnRNYXAuZmluZFJhbmRvbUluaXRpYWxTcGF3blBvc2l0aW9uKCk7XHJcbiAgICAgIGlmICghc3RhcnRQb3MpIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZpbmQgYSB2YWxpZCBzdGFydGluZyBwb3NpdGlvbiBvbiB0aGUgbWFwIScpO1xyXG4gICAgICB0aGlzLmNoYXJhY3Rlci54ID0gc3RhcnRQb3MueDtcclxuICAgICAgdGhpcy5jaGFyYWN0ZXIueSA9IHN0YXJ0UG9zLnk7XHJcbiAgICAgIHRoaXMuY2hhcmFjdGVyLmN1cnJlbnREaXJlY3Rpb24gPSBDaGFyYWN0ZXIuRGlyZWN0aW9uLkRPV047XHJcbiAgICAgIHRoaXMuY2hhcmFjdGVyLmlzTW92aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyDQo9Cx0LXQtNC40LzRgdGPLCDRh9GC0L4g0L/QtdGA0YHQvtC90LDQtiDQvdC1INC30LDRgdC/0LDQstC90LjQu9GB0Y8g0LIg0YHRgtC10L3QtVxyXG4gICAgICB0aGlzLmdhbWVwbGF5TWFuYWdlci5lbnN1cmVDaGFyYWN0ZXJJc09uV2Fsa2FibGVUaWxlKGZhbHNlKTtcclxuXHJcbiAgICAgIHRoaXMudG90YWxCb29rc0NvbGxlY3RlZEdsb2JhbGx5ID0gMDtcclxuICAgICAgdGhpcy5hdmFpbGFibGVRdWVzdGlvbnMgPSBbLi4ucXVlc3Rpb25zXTsgLy8g0KHQstC10LbQsNGPINC60L7Qv9C40Y8g0LLQvtC/0YDQvtGB0L7QslxyXG4gICAgICB0aGlzLmxpZnRDb29sZG93bkFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5saWZ0Q29vbGRvd25UaW1lcik7XHJcbiAgICAgIHRoaXMubGlmdENvb2xkb3duVGltZXIgPSBudWxsO1xyXG4gICAgICB0aGlzLmN1cnJlbnRCb29rVGFyZ2V0ID0gbnVsbDtcclxuICAgICAgdGhpcy5jdXJyZW50UXVlc3Rpb25EYXRhID0gbnVsbDtcclxuXHJcbiAgICAgIHRoaXMucmVuZGVyZXIuY2VudGVyQ2FtZXJhT25DaGFyYWN0ZXIoKTtcclxuXHJcbiAgICAgIFVJTWFuYWdlci51cGRhdGVTY29yZSh0aGlzLnRvdGFsQm9va3NDb2xsZWN0ZWRHbG9iYWxseSwgdGhpcy50YXJnZXRCb29rc1RvV2luKTtcclxuICAgICAgVUlNYW5hZ2VyLnNob3dHYW1lVUkoKTsgLy8g0J/QvtC60LDQt9GL0LLQsNC10LwgY2FudmFzLCDRgdGH0LXRgiwg0LrQvtC90YLRgNC+0LvRi1xyXG5cclxuICAgICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INGB0LvRg9GI0LDRgtC10LvQuCDQutC70LDQstC40LDRgtGD0YDRi1xyXG4gICAgICB0aGlzLl9ib3VuZEtleURvd25IYW5kbGVyID0gdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMuX2JvdW5kS2V5VXBIYW5kbGVyID0gdGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2JvdW5kS2V5RG93bkhhbmRsZXIpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9ib3VuZEtleVVwSGFuZGxlcik7XHJcblxyXG4gICAgICB0aGlzLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuUExBWUlORyk7XHJcbiAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZ2FtZUxvb3ApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbR2FtZV0gR2FtZSBsb2dpYyBzdGFydGVkLiBMb29wIGlzIHJ1bm5pbmcuJyk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tHYW1lXSBFcnJvciBkdXJpbmcgX3N0YXJ0R2FtZUxvZ2ljOicsIGVycm9yKTtcclxuICAgICAgdGhpcy5faGFuZGxlRmF0YWxFcnJvcihgTGV2ZWwgc3RhcnQgcHJvY2VzcyBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAvLyB0aGlzLmlzUnVubmluZyA9IGZhbHNlOyAvLyBfaGFuZGxlRmF0YWxFcnJvciDRjdGC0L4g0YHQtNC10LvQsNC10YJcclxuICAgICAgdGhyb3cgZXJyb3I7IC8vINCf0LXRgNC10LHRgNC+0YHQuNGC0Ywg0L7RiNC40LHQutGDINC00LvRjyDQvtCx0YDQsNCx0L7RgtC60Lgg0LIgX2xvYWRBc3NldHNBbmRUaGVuU3RhcnRMb2dpY1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEdhbWVPdmVyKHdpbiA9IHRydWUpIHtcclxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLkdBTUVfT1ZFUikgcmV0dXJuO1xyXG5cclxuICAgIHRoaXMuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5HQU1FX09WRVIpO1xyXG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLmNoYXJhY3RlcikgdGhpcy5jaGFyYWN0ZXIuaXNNb3ZpbmcgPSBmYWxzZTtcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLmxpZnRDb29sZG93blRpbWVyKTtcclxuXHJcbiAgICBpZiAodGhpcy5fYm91bmRLZXlEb3duSGFuZGxlcikgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9ib3VuZEtleURvd25IYW5kbGVyKTtcclxuICAgIGlmICh0aGlzLl9ib3VuZEtleVVwSGFuZGxlcikgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5fYm91bmRLZXlVcEhhbmRsZXIpO1xyXG4gICAgdGhpcy5fYm91bmRLZXlEb3duSGFuZGxlciA9IG51bGw7XHJcbiAgICB0aGlzLl9ib3VuZEtleVVwSGFuZGxlciA9IG51bGw7XHJcblxyXG4gICAgVUlNYW5hZ2VyLmhpZGVHYW1lVUkoKTtcclxuICAgIFVJTWFuYWdlci5oaWRlUXVlc3Rpb24oKTtcclxuICAgIFVJTWFuYWdlci5oaWRlRmxvb3JTZWxlY3Rpb25VSSgpO1xyXG5cclxuICAgIGlmICh3aW4pIHtcclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMucmVuZGVyZXI/LmRyYXdXaW5TY3JlZW4oKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDQn9GA0Lgg0L/RgNC+0LjQs9GA0YvRiNC1L9C+0YjQuNCx0LrQtSwgTWVudS5qcyDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0YHQvdC+0LLQsCDQstC40LTQtdC9LlxyXG4gICAgICAvLyDQrdGC0L4g0LzQvtC20L3QviDRgdC00LXQu9Cw0YLRjCwg0YPQtNCw0LvQuNCyINC60LvQsNGB0YEgJ2hpZGRlbicg0LjQu9C4INGD0YHRgtCw0L3QvtCy0LjQsiBkaXNwbGF5XHJcbiAgICAgIGNvbnN0IG1lbnVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1jb250YWluZXInKTtcclxuICAgICAgaWYgKG1lbnVDb250YWluZXIpIHtcclxuICAgICAgICBtZW51Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOyAvLyDQn9GA0LXQtNC/0L7Qu9Cw0LPQsNC10LwsINGH0YLQviBNZW51LmpzINC00L7QsdCw0LLQuNC7ICdoaWRkZW4nXHJcbiAgICAgICAgLy8gbWVudUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyAvLyDQmNC70Lgg0YLQsNC6LCDQtdGB0LvQuCDQutC70LDRgdGBINC90LUg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKGBbR2FtZV0gR2FtZSBPdmVyLiBXaW46ICR7d2lufWApO1xyXG4gIH1cclxuXHJcbiAgc3RvcEdhbWUoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnW0dhbWVdIEV4cGxpY2l0IHN0b3BHYW1lIHJlcXVlc3RlZC4nKTtcclxuICAgIHRoaXMuX3NldEdhbWVPdmVyKGZhbHNlKTsgLy8g0JfQsNCy0LXRgNGI0LDQtdC8INC40LPRgNGDINC60LDQuiDQv9GA0L7QuNCz0YDRi9GIL9C+0YHRgtCw0L3QvtCy0LrRg1xyXG5cclxuICAgIC8vIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB0aGlzLnJlbmRlcmVyPy5yZXNpemVDYW52YXMoKSk7IC8vINCh0LvRg9GI0LDRgtC10LvRjCDQvtGB0YLQsNC10YLRgdGPLCDQtdGB0LvQuCDQuNCz0YDQsCDQvNC+0LbQtdGCINC/0LXRgNC10LfQsNC/0YPRgdGC0LjRgtGM0YHRj1xyXG5cclxuICAgIC8vINCe0YfQuNGB0YLQutCwINGA0LXRgdGD0YDRgdC+0LIg0L3QtSDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdCwLCDQtdGB0LvQuCDRjdC60LfQtdC80L/Qu9GP0YAgR2FtZSDQsdGD0LTQtdGCINGD0LTQsNC70LXQvVxyXG4gICAgLy8gdGhpcy5jaGFyYWN0ZXIgPSBudWxsOyAuLi5cclxuICAgIGNvbnNvbGUubG9nKCdbR2FtZV0gR2FtZSBzdG9wcGVkLicpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUZhdGFsRXJyb3IobWVzc2FnZSwgc2hvd0FsZXJ0ID0gdHJ1ZSkge1xyXG4gICAgY29uc29sZS5lcnJvcignW0dhbWVdIEZBVEFMIEVSUk9SOicsIG1lc3NhZ2UpO1xyXG4gICAgaWYgKHNob3dBbGVydCAmJiB0aGlzLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLkdBTUVfT1ZFUikge1xyXG4gICAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCBVSU1hbmFnZXIuZmxhc2hNZXNzYWdlINC10YHQu9C4INC+0L0g0LTQvtGB0YLRg9C/0LXQvSwg0LjQvdCw0YfQtSBhbGVydFxyXG4gICAgICBpZiAoVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZUNvbnRhaW5lciAmJiBVSU1hbmFnZXIuZmxhc2hNZXNzYWdlKSB7XHJcbiAgICAgICAgVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZShgRkFUQUwgRVJST1I6ICR7bWVzc2FnZX1gLCAnZXJyb3InLCAxNTAwMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWxlcnQoYEZBVEFMIEVSUk9SOiAke21lc3NhZ2V9YCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuX3NldEdhbWVPdmVyKGZhbHNlKTsgLy8g0JfQsNCy0LXRgNGI0LDQtdC8INC40LPRgNGDXHJcbiAgfVxyXG5cclxuICBoYW5kbGVLZXlEb3duKGUpIHtcclxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLlBMQVlJTkcgfHwgIXRoaXMuaW5wdXRNYW5hZ2VyKSByZXR1cm47XHJcbiAgICBsZXQga2V5SGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgY29uc3Qga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmIChbJ2Fycm93dXAnLCAndyddLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgdGhpcy5pbnB1dE1hbmFnZXIuc2V0S2V5KCd1cCcsIHRydWUpO1xyXG4gICAgICBrZXlIYW5kbGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoWydhcnJvd2Rvd24nLCAncyddLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgdGhpcy5pbnB1dE1hbmFnZXIuc2V0S2V5KCdkb3duJywgdHJ1ZSk7XHJcbiAgICAgIGtleUhhbmRsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChbJ2Fycm93bGVmdCcsICdhJ10uaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICB0aGlzLmlucHV0TWFuYWdlci5zZXRLZXkoJ2xlZnQnLCB0cnVlKTtcclxuICAgICAga2V5SGFuZGxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKFsnYXJyb3dyaWdodCcsICdkJ10uaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICB0aGlzLmlucHV0TWFuYWdlci5zZXRLZXkoJ3JpZ2h0JywgdHJ1ZSk7XHJcbiAgICAgIGtleUhhbmRsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKGtleUhhbmRsZWQpIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUtleVVwKGUpIHtcclxuICAgIGlmICghdGhpcy5pbnB1dE1hbmFnZXIpIHJldHVybjtcclxuICAgIGNvbnN0IGtleSA9IGUua2V5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAoWydhcnJvd3VwJywgJ3cnXS5pbmNsdWRlcyhrZXkpKSB0aGlzLmlucHV0TWFuYWdlci5zZXRLZXkoJ3VwJywgZmFsc2UpO1xyXG4gICAgZWxzZSBpZiAoWydhcnJvd2Rvd24nLCAncyddLmluY2x1ZGVzKGtleSkpIHRoaXMuaW5wdXRNYW5hZ2VyLnNldEtleSgnZG93bicsIGZhbHNlKTtcclxuICAgIGVsc2UgaWYgKFsnYXJyb3dsZWZ0JywgJ2EnXS5pbmNsdWRlcyhrZXkpKSB0aGlzLmlucHV0TWFuYWdlci5zZXRLZXkoJ2xlZnQnLCBmYWxzZSk7XHJcbiAgICBlbHNlIGlmIChbJ2Fycm93cmlnaHQnLCAnZCddLmluY2x1ZGVzKGtleSkpIHRoaXMuaW5wdXRNYW5hZ2VyLnNldEtleSgncmlnaHQnLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBnYW1lTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIGlmICghdGhpcy5pc1J1bm5pbmcgfHwgdGhpcy5nYW1lU3RhdGUgPT09IEdhbWVTdGF0ZS5HQU1FX09WRVIpIHJldHVybjtcclxuICAgIHRoaXMuZ2FtZXBsYXlNYW5hZ2VyPy51cGRhdGUodGltZXN0YW1wKTtcclxuICAgIHRoaXMucmVuZGVyZXI/LmNlbnRlckNhbWVyYU9uQ2hhcmFjdGVyKCk7XHJcbiAgICB0aGlzLnJlbmRlcmVyPy5kcmF3RnJhbWUoKTtcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmdhbWVMb29wKTtcclxuICB9XHJcblxyXG4gIHN0YXJ0TGlmdENvb2xkb3duVGltZXIoKSB7XHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5saWZ0Q29vbGRvd25UaW1lcik7XHJcbiAgICBjb25zb2xlLmxvZyhgW0dhbWVdIFN0YXJ0aW5nIGxpZnQgY29vbGRvd24gdGltZXI6ICR7TElGVF9DT09MRE9XTl9NU31tcy5gKTtcclxuICAgIHRoaXMubGlmdENvb2xkb3duVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5saWZ0Q29vbGRvd25BY3RpdmUgPSBmYWxzZTtcclxuICAgICAgdGhpcy5saWZ0Q29vbGRvd25UaW1lciA9IG51bGw7XHJcbiAgICAgIGlmICh0aGlzLmdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLlRSQU5TSVRJT05JTkcpIHtcclxuICAgICAgICB0aGlzLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuUExBWUlORyk7XHJcbiAgICAgICAgVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZShgQXJyaXZlZCBhdCBmbG9vciAke3RoaXMubGV2ZWw/LmN1cnJlbnRGbG9vcn1gLCAnc3VjY2VzcycsIDE1MDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgIGBbR2FtZVRpbWVyXSBMaWZ0IGNvb2xkb3duIGVuZGVkLCBidXQgZ2FtZSBzdGF0ZSBpcyAke3RoaXMuZ2FtZVN0YXRlfS4gTm8gc3RhdGUgY2hhbmdlIGFwcGxpZWQuYFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0sIExJRlRfQ09PTERPV05fTVMpO1xyXG4gIH1cclxufVxyXG4iLCIvLyBzcmMvVUkvTWVudS5qc1xyXG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi4vQ29yZS9HYW1lLmpzJztcclxuLy8gaW1wb3J0IHsgQXVkaW9NYW5hZ2VyIH0gZnJvbSAnLi9BdWRpb01hbmFnZXIuanMnOyAvLyDQl9CQ0JrQntCc0JzQldCd0KLQmNCg0J7QktCQ0J3QnlxyXG5pbXBvcnQgeyBVSU1hbmFnZXIgfSBmcm9tICcuL1VJTWFuYWdlci5qcyc7XHJcblxyXG5sZXQgY3VycmVudEdhbWVJbnN0YW5jZSA9IG51bGw7XHJcblxyXG5jbGFzcyBNZW51IHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXIgPSBudWxsO1xyXG4gICAgdGhpcy51c2VySW50ZXJhY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdbTWVudV0gQ29uc3RydWN0b3IgY2FsbGVkLiBJbml0aWFsaXppbmcgZWxlbWVudHMuLi4nKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUVsZW1lbnRzKCk7XHJcbiAgICBjb25zb2xlLmxvZygnW01lbnVdIEFkZGluZyBldmVudCBsaXN0ZW5lcnMuLi4nKTtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIGNvbnNvbGUubG9nKCdbTWVudV0gSW5zdGFuY2UgY3JlYXRlZC4nKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVFbGVtZW50cygpIHtcclxuICAgIHRoaXMubWVudUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWNvbnRhaW5lcicpO1xyXG4gICAgaWYgKCF0aGlzLm1lbnVDb250YWluZXIpIGNvbnNvbGUuZXJyb3IoJ1tNZW51XSBDUklUSUNBTDogLm1lbnUtY29udGFpbmVyIG5vdCBmb3VuZCEnKTtcclxuXHJcbiAgICB0aGlzLnNldHRpbmdzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLWJ1dHRvbicpO1xyXG4gICAgdGhpcy5wbGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXktYnV0dG9uJyk7XHJcbiAgICB0aGlzLmNoYXJhY3RlckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXItYnV0dG9uJyk7XHJcblxyXG4gICAgaWYgKCF0aGlzLnBsYXlCdXR0b24pIGNvbnNvbGUud2FybignW01lbnVdIC5wbGF5LWJ1dHRvbiBub3QgZm91bmQuJyk7XHJcbiAgICBpZiAoIXRoaXMuY2hhcmFjdGVyQnV0dG9uKSBjb25zb2xlLndhcm4oJ1tNZW51XSAuY2hhcmFjdGVyLWJ1dHRvbiBub3QgZm91bmQuJyk7XHJcblxyXG4gICAgdGhpcy5zZXR0aW5nc1BhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLXBhbmVsJyk7XHJcbiAgICBpZiAodGhpcy5zZXR0aW5nc1BhbmVsKSB7XHJcbiAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAvLyAqKiogTW92ZSBwYW5lbCB0byBib2R5IHRvIGVuc3VyZSBjb3JyZWN0IHN0YWNraW5nIGNvbnRleHQgKioqXHJcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzUGFuZWwucGFyZW50Tm9kZSAhPT0gZG9jdW1lbnQuYm9keSkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5zZXR0aW5nc1BhbmVsKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnW01lbnUgRGVidWddIE1vdmVkIC5zZXR0aW5ncy1wYW5lbCB0byBkb2N1bWVudC5ib2R5Jyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgIHRoaXMubXVzaWNWb2x1bWUgPSB0aGlzLnNldHRpbmdzUGFuZWwucXVlcnlTZWxlY3RvcignI211c2ljLXZvbHVtZScpO1xyXG4gICAgICB0aGlzLnNmeFZvbHVtZSA9IHRoaXMuc2V0dGluZ3NQYW5lbC5xdWVyeVNlbGVjdG9yKCcjc2Z4LXZvbHVtZScpO1xyXG4gICAgICB0aGlzLmNsb3NlU2V0dGluZ3NCdXR0b24gPSB0aGlzLnNldHRpbmdzUGFuZWwucXVlcnlTZWxlY3RvcignLnBhbmVsLWNsb3NlLWJ1dHRvbicpO1xyXG4gICAgICBpZiAoIXRoaXMubXVzaWNWb2x1bWUpIGNvbnNvbGUud2FybignW01lbnVdICNtdXNpYy12b2x1bWUgbm90IGZvdW5kIGluIC5zZXR0aW5ncy1wYW5lbCcpO1xyXG4gICAgICBpZiAoIXRoaXMuc2Z4Vm9sdW1lKSBjb25zb2xlLndhcm4oJ1tNZW51XSAjc2Z4LXZvbHVtZSBub3QgZm91bmQgaW4gLnNldHRpbmdzLXBhbmVsJyk7XHJcbiAgICAgIGlmICghdGhpcy5jbG9zZVNldHRpbmdzQnV0dG9uKVxyXG4gICAgICAgIGNvbnNvbGUud2FybignW01lbnVdIC5wYW5lbC1jbG9zZS1idXR0b24gbm90IGZvdW5kIGluIC5zZXR0aW5ncy1wYW5lbCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdbTWVudV0gLnNldHRpbmdzLXBhbmVsIG5vdCBmb3VuZC4nKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNoYXJhY3RlclBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXJhY3Rlci1wYW5lbCcpO1xyXG4gICAgaWYgKHRoaXMuY2hhcmFjdGVyUGFuZWwpIHtcclxuICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgIC8vICoqKiBNb3ZlIHBhbmVsIHRvIGJvZHkgdG8gZW5zdXJlIGNvcnJlY3Qgc3RhY2tpbmcgY29udGV4dCAqKipcclxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyUGFuZWwucGFyZW50Tm9kZSAhPT0gZG9jdW1lbnQuYm9keSkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5jaGFyYWN0ZXJQYW5lbCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tNZW51IERlYnVnXSBNb3ZlZCAuY2hhcmFjdGVyLXBhbmVsIHRvIGRvY3VtZW50LmJvZHknKTtcclxuICAgICAgfVxyXG4gICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgdGhpcy5jaGFyYWN0ZXJHcmlkID0gdGhpcy5jaGFyYWN0ZXJQYW5lbC5xdWVyeVNlbGVjdG9yKCcuY2hhcmFjdGVyLWdyaWQnKTtcclxuICAgICAgaWYgKCF0aGlzLmNoYXJhY3RlckdyaWQpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1tNZW51XSAuY2hhcmFjdGVyLWdyaWQgbm90IGZvdW5kIGluIC5jaGFyYWN0ZXItcGFuZWwnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNoYXJhY3RlckdyaWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWVudSBEZWJ1Z10gQ2hhcmFjdGVyIGdyaWQgY2xpY2tlZC4gVGFyZ2V0OicsIGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICBjb25zdCBjbGlja2VkQ2FyZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuY2hhcmFjdGVyLWNhcmQnKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWVudSBEZWJ1Z10gQ2xpY2tlZCBjYXJkIGVsZW1lbnQ6JywgY2xpY2tlZENhcmQpO1xyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmNoYXJhY3RlclBhbmVsKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAgICdbTWVudSBEZWJ1Z10gQ2hhcmFjdGVyIHBhbmVsIGN1cnJlbnQgY2xhc3NMaXN0OicsXHJcbiAgICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJQYW5lbC5jbGFzc0xpc3QudmFsdWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgJ1tNZW51IERlYnVnXSBDaGFyYWN0ZXIgcGFuZWwgLnZpc2libGUgY2xhc3MgcHJlc2VudD86JyxcclxuICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlclBhbmVsLmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgICAgICdbTWVudSBEZWJ1Z10gQ1JJVElDQUw6IHRoaXMuY2hhcmFjdGVyUGFuZWwgaXMgbnVsbC91bmRlZmluZWQgaW5zaWRlIGNoYXJhY3RlckdyaWQgY2xpY2sgbGlzdGVuZXIuJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgY2xpY2tlZENhcmQgJiZcclxuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJQYW5lbCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlclBhbmVsLmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgJ1tNZW51IERlYnVnXSBDb25kaXRpb25zIGZvciBzZWxlY3RDaGFyYWN0ZXIgbWV0LiBDYWxsaW5nIHNlbGVjdENoYXJhY3Rlci4uLidcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGaXJzdEludGVyYWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2hhcmFjdGVyKGNsaWNrZWRDYXJkKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW01lbnUgRGVidWddIENvbmRpdGlvbnMgZm9yIHNlbGVjdENoYXJhY3RlciBOT1QgbWV0LicpO1xyXG4gICAgICAgICAgICBpZiAoIWNsaWNrZWRDYXJkKVxyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAgICAgJ1tNZW51IERlYnVnXSBSZWFzb246IE5vIC5jaGFyYWN0ZXItY2FyZCBmb3VuZCBhdCBvciBhYm92ZSB0aGUgY2xpY2sgdGFyZ2V0LidcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hhcmFjdGVyUGFuZWwpXHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNZW51IERlYnVnXSBSZWFzb246IHRoaXMuY2hhcmFjdGVyUGFuZWwgaXMgbnVsbC91bmRlZmluZWQuJyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJhY3RlclBhbmVsICYmICF0aGlzLmNoYXJhY3RlclBhbmVsLmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNZW51IERlYnVnXSBSZWFzb246IENoYXJhY3RlciBwYW5lbCBkb2VzIG5vdCBoYXZlIFwidmlzaWJsZVwiIGNsYXNzLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jbG9zZUNoYXJhY3RlclBhbmVsQnV0dG9uID0gdGhpcy5jaGFyYWN0ZXJQYW5lbC5xdWVyeVNlbGVjdG9yKCcucGFuZWwtY2xvc2UtYnV0dG9uJyk7XHJcbiAgICAgIGlmICghdGhpcy5jbG9zZUNoYXJhY3RlclBhbmVsQnV0dG9uKVxyXG4gICAgICAgIGNvbnNvbGUud2FybignW01lbnVdIC5wYW5lbC1jbG9zZS1idXR0b24gbm90IGZvdW5kIGluIC5jaGFyYWN0ZXItcGFuZWwnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNZW51XSBDUklUSUNBTDogLmNoYXJhY3Rlci1wYW5lbCBub3QgZm91bmQgZHVyaW5nIGluaXRpYWxpemF0aW9uIScpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheS5jbGFzc05hbWUgPSAnc2VsZWN0ZWQtY2hhcmFjdGVyLWRpc3BsYXknO1xyXG5cclxuICAgIGNvbnN0IG1haW5NZW51QnV0dG9uc0NvbnRhaW5lciA9IHRoaXMubWVudUNvbnRhaW5lclxyXG4gICAgICA/IHRoaXMubWVudUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubWFpbi1tZW51LWJ1dHRvbnMnKVxyXG4gICAgICA6IG51bGw7XHJcblxyXG4gICAgaWYgKHRoaXMucGxheUJ1dHRvbiAmJiB0aGlzLnBsYXlCdXR0b24ucGFyZW50Tm9kZSkge1xyXG4gICAgICB0aGlzLnBsYXlCdXR0b24ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5zZWxlY3RlZENoYXJhY3RlckRpc3BsYXksIHRoaXMucGxheUJ1dHRvbik7XHJcbiAgICB9IGVsc2UgaWYgKG1haW5NZW51QnV0dG9uc0NvbnRhaW5lcikge1xyXG4gICAgICBtYWluTWVudUJ1dHRvbnNDb250YWluZXIuaW5zZXJ0QmVmb3JlKFxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5LFxyXG4gICAgICAgIG1haW5NZW51QnV0dG9uc0NvbnRhaW5lci5jaGlsZHJlblsxXSB8fCBudWxsXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMubWVudUNvbnRhaW5lcikge1xyXG4gICAgICB0aGlzLm1lbnVDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5zZWxlY3RlZENoYXJhY3RlckRpc3BsYXkpO1xyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgJ1tNZW51XSAubWFpbi1tZW51LWJ1dHRvbnMgY29udGFpbmVyIG5vdCBmb3VuZC4gQXBwZW5kZWQgc2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5IHRvIC5tZW51LWNvbnRhaW5lci4nXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTWVudV0gQ2Fubm90IGFwcGVuZCBzZWxlY3RlZENoYXJhY3RlckRpc3BsYXk6IG5vIHN1aXRhYmxlIHBhcmVudCBmb3VuZC4nKTtcclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5KCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVGaXJzdEludGVyYWN0aW9uKCkge1xyXG4gICAgaWYgKCF0aGlzLnVzZXJJbnRlcmFjdGVkKSB7XHJcbiAgICAgIHRoaXMudXNlckludGVyYWN0ZWQgPSB0cnVlO1xyXG4gICAgICBjb25zb2xlLmxvZygnW01lbnVdIEZpcnN0IHVzZXIgaW50ZXJhY3Rpb24gZGV0ZWN0ZWQuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGFkZEludGVyYWN0aXZlTGlzdGVuZXIgPSAoZWxlbWVudCwgZXZlbnRUeXBlLCBoYW5kbGVyRm4pID0+IHtcclxuICAgICAgaWYgKGVsZW1lbnQpIHtcclxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlRmlyc3RJbnRlcmFjdGlvbigpO1xyXG4gICAgICAgICAgaGFuZGxlckZuKGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhZGRJbnRlcmFjdGl2ZUxpc3RlbmVyKHRoaXMuc2V0dGluZ3NCdXR0b24sICdjbGljaycsICgpID0+IHRoaXMudG9nZ2xlU2V0dGluZ3MoKSk7XHJcbiAgICBhZGRJbnRlcmFjdGl2ZUxpc3RlbmVyKHRoaXMucGxheUJ1dHRvbiwgJ2NsaWNrJywgKCkgPT4gdGhpcy5zdGFydEdhbWUoKSk7XHJcbiAgICBhZGRJbnRlcmFjdGl2ZUxpc3RlbmVyKHRoaXMuY2hhcmFjdGVyQnV0dG9uLCAnY2xpY2snLCAoKSA9PiB0aGlzLm9wZW5DaGFyYWN0ZXJNb2RhbCgpKTtcclxuXHJcbiAgICBpZiAodGhpcy5jbG9zZVNldHRpbmdzQnV0dG9uKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VTZXR0aW5nc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2VTZXR0aW5ncygpKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmNsb3NlQ2hhcmFjdGVyUGFuZWxCdXR0b24pIHtcclxuICAgICAgdGhpcy5jbG9zZUNoYXJhY3RlclBhbmVsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZUNoYXJhY3Rlck1vZGFsKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm11c2ljVm9sdW1lKSB7XHJcbiAgICAgIHRoaXMubXVzaWNWb2x1bWUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdNdXNpYyB2b2x1bWUgY2hhbmdlZCAoYXVkaW8gZGlzYWJsZWQpJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc2Z4Vm9sdW1lKSB7XHJcbiAgICAgIHRoaXMuc2Z4Vm9sdW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU0ZYIHZvbHVtZSBjaGFuZ2VkIChhdWRpbyBkaXNhYmxlZCknKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcGVuQ2hhcmFjdGVyTW9kYWwoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnW01lbnUgRGVidWddIG9wZW5DaGFyYWN0ZXJNb2RhbCgpIGNhbGxlZC4nKTtcclxuICAgIGlmICghdGhpcy5jaGFyYWN0ZXJQYW5lbCB8fCAhdGhpcy5jaGFyYWN0ZXJHcmlkKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAnW01lbnVdIENoYXJhY3RlciBwYW5lbCBvciBncmlkIG5vdCBmb3VuZCwgY2Fubm90IG9wZW4gbW9kYWwuIENoZWNrIGluaXRpYWxpemF0aW9uIGxvZ3MuJ1xyXG4gICAgICApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1tNZW51XSBPcGVuaW5nIGNoYXJhY3RlciBtb2RhbC4nKTtcclxuICAgIHRoaXMuY2hhcmFjdGVyUGFuZWwuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgY29uc29sZS5sb2coXHJcbiAgICAgICdbTWVudSBEZWJ1Z10gXCJ2aXNpYmxlXCIgY2xhc3MgQURERUQgdG8gY2hhcmFjdGVyUGFuZWwuIEN1cnJlbnQgY2xhc3NlczonLFxyXG4gICAgICB0aGlzLmNoYXJhY3RlclBhbmVsLmNsYXNzTGlzdC52YWx1ZVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodGhpcy5zZXR0aW5nc1BhbmVsPy5jbGFzc0xpc3QuY29udGFpbnMoJ3Zpc2libGUnKSkge1xyXG4gICAgICB0aGlzLmNsb3NlU2V0dGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMub3ZlcmxheSkge1xyXG4gICAgICB0aGlzLm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTmFtZSA9ICdjaGFyYWN0ZXItbW9kYWwtb3ZlcmxheSc7XHJcbiAgICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgLy8gT25seSBjbG9zZSBpZiB0aGUgb3ZlcmxheSBpdHNlbGYgKG5vdCBpdHMgY2hpbGRyZW4gbGlrZSB0aGUgcGFuZWwpIGlzIGNsaWNrZWRcclxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMub3ZlcmxheSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tNZW51IERlYnVnXSBPdmVybGF5IGNsaWNrZWQsIGNsb3NpbmcgY2hhcmFjdGVyIG1vZGFsLicpO1xyXG4gICAgICAgICAgdGhpcy5jbG9zZUNoYXJhY3Rlck1vZGFsKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAnW01lbnUgRGVidWddIENsaWNrIHdhcyBvbiBzb21ldGhpbmcgb3RoZXIgdGhhbiBvdmVybGF5IGl0c2VsZi4gVGFyZ2V0OicsXHJcbiAgICAgICAgICAgIGUudGFyZ2V0XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5KTtcclxuICAgICAgY29uc29sZS5sb2coJ1tNZW51IERlYnVnXSBPdmVybGF5IGNyZWF0ZWQgYW5kIGFwcGVuZGVkIHRvIGJvZHkuJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm92ZXJsYXkuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgY29uc29sZS5sb2coXHJcbiAgICAgICdbTWVudSBEZWJ1Z10gXCJ2aXNpYmxlXCIgY2xhc3MgQURERUQgdG8gb3ZlcmxheS4gQ3VycmVudCBjbGFzc2VzOicsXHJcbiAgICAgIHRoaXMub3ZlcmxheS5jbGFzc0xpc3QudmFsdWVcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjbG9zZUNoYXJhY3Rlck1vZGFsKCkge1xyXG4gICAgY29uc29sZS5sb2coJ1tNZW51IERlYnVnXSBjbG9zZUNoYXJhY3Rlck1vZGFsKCkgY2FsbGVkLicpO1xyXG4gICAgaWYgKHRoaXMuY2hhcmFjdGVyUGFuZWwpIHtcclxuICAgICAgdGhpcy5jaGFyYWN0ZXJQYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICdbTWVudSBEZWJ1Z10gXCJ2aXNpYmxlXCIgY2xhc3MgUkVNT1ZFRCBmcm9tIGNoYXJhY3RlclBhbmVsLiBDdXJyZW50IGNsYXNzZXM6JyxcclxuICAgICAgICB0aGlzLmNoYXJhY3RlclBhbmVsLmNsYXNzTGlzdC52YWx1ZVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMub3ZlcmxheSkge1xyXG4gICAgICB0aGlzLm92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAnW01lbnUgRGVidWddIFwidmlzaWJsZVwiIGNsYXNzIFJFTU9WRUQgZnJvbSBvdmVybGF5LiBDdXJyZW50IGNsYXNzZXM6JyxcclxuICAgICAgICB0aGlzLm92ZXJsYXkuY2xhc3NMaXN0LnZhbHVlXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnW01lbnVdIENoYXJhY3RlciBtb2RhbCBjbG9zZWQuJyk7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RDaGFyYWN0ZXIoY2FyZEVsZW1lbnQpIHtcclxuICAgIGNvbnNvbGUubG9nKCdbTWVudSBEZWJ1Z10gc2VsZWN0Q2hhcmFjdGVyKCkgY2FsbGVkIHdpdGggY2FyZDonLCBjYXJkRWxlbWVudCk7XHJcbiAgICBpZiAoIXRoaXMuY2hhcmFjdGVyR3JpZCB8fCAhY2FyZEVsZW1lbnQ/LmRhdGFzZXQ/LmNoYXJhY3Rlcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgJ1tNZW51XSBDYW5ub3Qgc2VsZWN0IGNoYXJhY3RlcjogaW52YWxpZCBjYXJkIG9yIG1pc3NpbmcgZGF0YSBhdHRyaWJ1dGUuIEdyaWQ6JyxcclxuICAgICAgICB0aGlzLmNoYXJhY3RlckdyaWQsXHJcbiAgICAgICAgJ0NhcmQ6JyxcclxuICAgICAgICBjYXJkRWxlbWVudFxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coYFtNZW51XSBDaGFyYWN0ZXIgc2VsZWN0ZWQ6ICR7Y2FyZEVsZW1lbnQuZGF0YXNldC5jaGFyYWN0ZXJ9YCk7XHJcblxyXG4gICAgdGhpcy5jaGFyYWN0ZXJHcmlkXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhcmFjdGVyLWNhcmQnKVxyXG4gICAgICAuZm9yRWFjaCgoYykgPT4gYy5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTtcclxuXHJcbiAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gICAgdGhpcy5zZWxlY3RlZENoYXJhY3RlciA9IGNhcmRFbGVtZW50LmRhdGFzZXQuY2hhcmFjdGVyO1xyXG5cclxuICAgIGlmICh0aGlzLnBsYXlCdXR0b24pIHtcclxuICAgICAgdGhpcy5wbGF5QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbTWVudV0gUGxheSBidXR0b24gZW5hYmxlZC4nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW01lbnVdIFBsYXkgYnV0dG9uIG5vdCBmb3VuZCB0byBlbmFibGUuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZENoYXJhY3RlckRpc3BsYXkoKTtcclxuICAgIHRoaXMuY2xvc2VDaGFyYWN0ZXJNb2RhbCgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlU2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5KCkge1xyXG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgJ1tNZW51IERlYnVnXSB1cGRhdGVTZWxlY3RlZENoYXJhY3RlckRpc3BsYXk6IHNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheSBlbGVtZW50IG5vdCBmb3VuZC4nXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAnW01lbnUgRGVidWddIHVwZGF0ZVNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheSgpIGNhbGxlZC4gU2VsZWN0ZWQgY2hhcmFjdGVyOicsXHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXJcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXIgJiYgdGhpcy5jaGFyYWN0ZXJHcmlkKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkQ2FyZEVsZW1lbnQgPSB0aGlzLmNoYXJhY3RlckdyaWQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgLmNoYXJhY3Rlci1jYXJkW2RhdGEtY2hhcmFjdGVyPVwiJHt0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyfVwiXWBcclxuICAgICAgKTtcclxuICAgICAgaWYgKHNlbGVjdGVkQ2FyZEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBpbWdFbGVtZW50ID0gc2VsZWN0ZWRDYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcclxuICAgICAgICBjb25zdCBuYW1lRWxlbWVudCA9IHNlbGVjdGVkQ2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignaDMnKTtcclxuICAgICAgICBjb25zdCBpbWdTcmMgPSBpbWdFbGVtZW50ID8gaW1nRWxlbWVudC5zcmMgOiAnJztcclxuICAgICAgICBjb25zdCBuYW1lID0gbmFtZUVsZW1lbnQgPyBuYW1lRWxlbWVudC50ZXh0Q29udGVudCA6ICdDaGFyYWN0ZXInO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheS5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCIke2ltZ1NyY31cIiBhbHQ9XCIke25hbWV9XCIgc3R5bGU9XCJ3aWR0aDo0MHB4O2hlaWdodDo0MHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXJnaW4tcmlnaHQ6MC43NXJlbTsgYm9yZGVyLXJhZGl1czo1MCU7IG9iamVjdC1maXQ6Y292ZXI7IGJhY2tncm91bmQtY29sb3I6ICMzMzM7XCI+IDxzcGFuPiR7bmFtZX08L3NwYW4+YDtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW01lbnVdIFVwZGF0ZWQgZGlzcGxheSBmb3I6ICR7bmFtZX1gKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheS5pbm5lckhUTUwgPSBgPHNwYW4gc3R5bGU9XCJjb2xvcjojYWFhO1wiPlNlbGVjdGVkIGNoYXJhY3RlciBkYXRhIG5vdCBmb3VuZCBpbiBncmlkLjwvc3Bhbj5gO1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgIGBbTWVudV0gQ291bGQgbm90IGZpbmQgLmNoYXJhY3Rlci1jYXJkW2RhdGEtY2hhcmFjdGVyPVwiJHt0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyfVwiXSBpbiBjaGFyYWN0ZXJHcmlkIGZvciBkaXNwbGF5IHVwZGF0ZS5gXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZENoYXJhY3RlckRpc3BsYXkuaW5uZXJIVE1MID1cclxuICAgICAgICAnPHNwYW4gc3R5bGU9XCJjb2xvcjojYWFhO1wiPk5vIGNoYXJhY3RlciBzZWxlY3RlZDwvc3Bhbj4nO1xyXG4gICAgICBpZiAoIXRoaXMuY2hhcmFjdGVyR3JpZClcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1tNZW51IERlYnVnXSB1cGRhdGVTZWxlY3RlZENoYXJhY3RlckRpc3BsYXk6IGNoYXJhY3RlckdyaWQgbm90IGZvdW5kLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlU2V0dGluZ3MoKSB7XHJcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3NQYW5lbCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tNZW51IERlYnVnXSB0b2dnbGVTZXR0aW5nczogc2V0dGluZ3NQYW5lbCBub3QgZm91bmQuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKCdbTWVudV0gVG9nZ2xpbmcgc2V0dGluZ3MgcGFuZWwuJyk7XHJcbiAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLnNldHRpbmdzUGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJyk7XHJcbiAgICBpZiAoaXNWaXNpYmxlKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VTZXR0aW5ncygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuU2V0dGluZ3MoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9wZW5TZXR0aW5ncygpIHtcclxuICAgIGlmICh0aGlzLnNldHRpbmdzUGFuZWwpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1tNZW51XSBPcGVuaW5nIHNldHRpbmdzIHBhbmVsLicpO1xyXG4gICAgICB0aGlzLnNldHRpbmdzUGFuZWwuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJQYW5lbD8uY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHtcclxuICAgICAgICB0aGlzLmNsb3NlQ2hhcmFjdGVyTW9kYWwoKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdbTWVudSBEZWJ1Z10gb3BlblNldHRpbmdzOiBzZXR0aW5nc1BhbmVsIG5vdCBmb3VuZC4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsb3NlU2V0dGluZ3MoKSB7XHJcbiAgICBpZiAodGhpcy5zZXR0aW5nc1BhbmVsICYmIHRoaXMuc2V0dGluZ3NQYW5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Zpc2libGUnKSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW01lbnVdIENsb3Npbmcgc2V0dGluZ3MgcGFuZWwuJyk7XHJcbiAgICAgIHRoaXMuc2V0dGluZ3NQYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBzdGFydEdhbWUoKSB7XHJcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXIpIHtcclxuICAgICAgVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZSgnUGxlYXNlIHNlbGVjdCBhIGNoYXJhY3RlciBmaXJzdCEnLCAnd2FybmluZycsIDI1MDApO1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tNZW51XSBzdGFydEdhbWU6IE5vIGNoYXJhY3RlciBzZWxlY3RlZC4nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ1tNZW51XSBQcmVwYXJpbmcgdG8gc3RhcnQgZ2FtZS4nKTtcclxuXHJcbiAgICBjb25zdCBsb2FkaW5nT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkaW5nLW92ZXJsYXknKTtcclxuICAgIGlmIChsb2FkaW5nT3ZlcmxheSkgbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG5cclxuICAgIGlmICh0aGlzLm1lbnVDb250YWluZXIpIHtcclxuICAgICAgdGhpcy5tZW51Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW01lbnVdIENSSVRJQ0FMOiAubWVudS1jb250YWluZXIgbm90IGZvdW5kIGZvciBoaWRpbmchJyk7XHJcbiAgICAgIGlmIChsb2FkaW5nT3ZlcmxheSkgbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coYFtNZW51XSBBdHRlbXB0aW5nIHRvIHN0YXJ0IGdhbWUgd2l0aCBjaGFyYWN0ZXI6ICR7dGhpcy5zZWxlY3RlZENoYXJhY3Rlcn1gKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChjdXJyZW50R2FtZUluc3RhbmNlPy5zdG9wR2FtZSkge1xyXG4gICAgICAgIGN1cnJlbnRHYW1lSW5zdGFuY2Uuc3RvcEdhbWUoKTtcclxuICAgICAgfVxyXG4gICAgICBjdXJyZW50R2FtZUluc3RhbmNlID0gbmV3IEdhbWUodGhpcy5zZWxlY3RlZENoYXJhY3Rlcik7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTWVudV0gQ3JpdGljYWwgZXJyb3IgZHVyaW5nIGdhbWUgaW5pdGlhbGl6YXRpb246JywgZXJyb3IpO1xyXG4gICAgICBVSU1hbmFnZXIuZmxhc2hNZXNzYWdlKGBHYW1lIFN0YXJ0IEZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsICdlcnJvcicsIDEwMDAwKTtcclxuICAgICAgaWYgKHRoaXMubWVudUNvbnRhaW5lcikgdGhpcy5tZW51Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOyAvLyBTaG91bGQgYmUgcmVtb3ZlIGhpZGRlbiBvbiBmYWlsXHJcbiAgICAgIGlmIChsb2FkaW5nT3ZlcmxheSkgbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG4gICAgICBjdXJyZW50R2FtZUluc3RhbmNlID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuZXhwb3J0IHsgTWVudSB9O1xyXG4iLCIvLyBzcmMvbWFpbi5qc1xyXG5pbXBvcnQgeyBNZW51IH0gZnJvbSAnLi9VSS9tZW51LmpzJzsgLy8g0J/Rg9GC0Ywg0LogTWVudS5qc1xyXG5pbXBvcnQgJy4uL2Nzcy9zdHlsZXMuY3NzJzsgLy8g0JLQsNGI0Lgg0YHRgtC40LvQuFxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuICBjb25zb2xlLmxvZygnW21haW4uanNdIERPTUNvbnRlbnRMb2FkZWQuIEluaXRpYWxpemluZyBNZW51Li4uJyk7XHJcbiAgbmV3IE1lbnUoKTsgLy8g0JXQtNC40L3RgdGC0LLQtdC90L3Ri9C5INCy0YvQt9C+0LIg0LrQvtC90YHRgtGA0YPQutGC0L7RgNCwIE1lbnVcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0IiwidGFnTmFtZSIsInRvVXBwZXJDYXNlIiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiaSIsInRlc3QiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiSW5wdXRNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJrZXlzIiwidXAiLCJkb3duIiwibGVmdCIsInJpZ2h0Iiwic2V0S2V5Iiwia2V5IiwiaXNQcmVzc2VkIiwiaGFzT3duUHJvcGVydHkiLCJnZXRJbnB1dERpcmVjdGlvbiIsIngiLCJ5IiwiVUlNYW5hZ2VyIiwic3RhdGljIiwic2V0R2FtZXBsYXlNYW5hZ2VyIiwibWFuYWdlciIsImdhbWVwbGF5TWFuYWdlckluc3RhbmNlIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiaW5pdGlhbGl6ZVVJIiwiaW5wdXRNYW5hZ2VyIiwiY3JlYXRlQ29udHJvbHMiLCJjcmVhdGVRdWVzdGlvblVJIiwiY3JlYXRlRmxvb3JTZWxlY3Rpb25VSSIsImVuc3VyZUZsYXNoTWVzc2FnZUNvbnRhaW5lciIsIndhcm4iLCJjb250cm9sc0NvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiYm9keSIsImFwcGVuZENoaWxkIiwiaW5uZXJIVE1MIiwiZGlyZWN0aW9uIiwiaWNvbiIsImdyaWRBcmVhIiwiZm9yRWFjaCIsImJ0biIsImNsYXNzTmFtZSIsInRleHRDb250ZW50Iiwic3R5bGUiLCJkYXRhc2V0Iiwic3RhcnRQcmVzcyIsInByZXZlbnREZWZhdWx0IiwiZW5kUHJlc3MiLCJyZW1vdmUiLCJhZGRFdmVudExpc3RlbmVyIiwicGFzc2l2ZSIsInNjb3JlRGlzcGxheUNvbnRhaW5lciIsInNjb3JlRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0YXJnZXRFbGVtZW50Iiwic2NvcmVEaXYiLCJxdWVzdGlvbk92ZXJsYXkiLCJxdWVzdGlvblRleHRFbGVtZW50IiwiYW5zd2VyQnV0dG9uc0NvbnRhaW5lciIsImZsb29yU2VsZWN0aW9uUGFuZWwiLCJmbG9vckJ1dHRvbnNDb250YWluZXIiLCJmbGFzaE1lc3NhZ2VDb250YWluZXIiLCJmbGFzaE1lc3NhZ2UiLCJtZXNzYWdlIiwidHlwZSIsImR1cmF0aW9uIiwiY29udGFpbmVyIiwibWVzc2FnZUVsZW1lbnQiLCJtZXNzYWdlSWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2xlYXJUaW1lb3V0IiwiZmxhc2hNZXNzYWdlVGltZW91dHMiLCJzZXRUaW1lb3V0IiwiaGFuZGxlVHJhbnNpdGlvbkVuZCIsImV2ZW50IiwicHJvcGVydHlOYW1lIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwib25jZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzaG93UXVlc3Rpb24iLCJxdWVzdGlvbkRhdGEiLCJoYW5kbGVBbnN3ZXIiLCJoaWRlUXVlc3Rpb24iLCJxdWVzdGlvbiIsIm9wdGlvbnMiLCJvcHRpb25UZXh0IiwiaW5kZXgiLCJidXR0b24iLCJzZWxlY3RlZEluZGV4IiwicGFyc2VJbnQiLCJ0YXJnZXQiLCJzaG93Rmxvb3JTZWxlY3Rpb25VSSIsIm1pbkZsb29yIiwibWF4Rmxvb3IiLCJjdXJyZW50Rmxvb3IiLCJoYW5kbGVGbG9vclNlbGVjdGlvbiIsImhpZGVGbG9vclNlbGVjdGlvblVJIiwiZmxvb3IiLCJkaXNhYmxlZCIsInVwZGF0ZVNjb3JlIiwic2NvcmUiLCJzaG93R2FtZVVJIiwiY2FudmFzIiwibWVudUNvbnRhaW5lciIsInNjb3JlRGlzcGxheSIsImRpc3BsYXkiLCJjb250YWlucyIsImhpZGVHYW1lVUkiLCJDaGFyYWN0ZXIiLCJET1dOIiwiUklHSFQiLCJVUCIsIkxFRlQiLCJjdHgiLCJzcHJpdGVVcmwiLCJzcHJpdGUiLCJJbWFnZSIsImZyYW1lU2l6ZSIsImZyYW1lQ291bnQiLCJzY2FsZSIsInJlbmRlclNpemUiLCJzcGVlZCIsImFuaW1hdGlvblNwZWVkIiwiY29sbGlzaW9uQm94V2lkdGhSYXRpbyIsImNvbGxpc2lvbkJveEhlaWdodFJhdGlvIiwiY29sbGlzaW9uQm94RmVldE9mZnNldFJhdGlvIiwiY3VycmVudERpcmVjdGlvbiIsIkRpcmVjdGlvbiIsImN1cnJlbnRGcmFtZSIsImlzTW92aW5nIiwibGFzdEZyYW1lVGltZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJ1cGRhdGVBbmltYXRpb24iLCJ0aW1lc3RhbXAiLCJnZXRDb2xsaXNpb25Cb3giLCJwb3NYIiwicG9zWSIsIndpZHRoIiwiaGVpZ2h0IiwiaGFsZldpZHRoIiwiZmVldE9mZnNldFkiLCJ0b3AiLCJib3R0b20iLCJkcmF3Iiwib2Zmc2V0WCIsIm9mZnNldFkiLCJjb21wbGV0ZSIsIm5hdHVyYWxIZWlnaHQiLCJmcmFtZVgiLCJmcmFtZVkiLCJzY3JlZW5YIiwic2NyZWVuWSIsImRyYXdJbWFnZSIsIkJvb2siLCJ0aWxlU2l6ZSIsInNpemUiLCJjb2xsZWN0ZWQiLCJpc0NvbGxlY3RlZCIsImJvb2tJbWFnZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwic3Ryb2tlU3R5bGUiLCJzdHJva2VSZWN0IiwiZm9udCIsInRleHRBbGlnbiIsInRleHRCYXNlbGluZSIsImZpbGxUZXh0IiwiR2FtZVN0YXRlIiwiTE9BRElORyIsIk1FTlUiLCJQTEFZSU5HIiwiQVNLSU5HX1FVRVNUSU9OIiwiU0VMRUNUSU5HX0ZMT09SIiwiVFJBTlNJVElPTklORyIsIkdBTUVfT1ZFUiIsInF1ZXN0aW9ucyIsImNvcnJlY3RBbnN3ZXIiLCJyYW5kb21JbnQiLCJtaW4iLCJtYXgiLCJjZWlsIiwic2ltcGxlSGFzaCIsInNlZWQiLCJoIiwiaW11bCIsImFkanVzdENvbG9yQnJpZ2h0bmVzcyIsImhleENvbG9yIiwiZmFjdG9yIiwiciIsInNsaWNlIiwiYiIsInJvdW5kIiwicGFkU3RhcnQiLCJNYXBSZW5kZXJlciIsInRpbGVDb2xvcnMiLCJiYXNlV2FsbENvbG9yIiwiYmFzZUNvcnJpZG9yQ29sb3IiLCJiYXNlUm9vbUZsb29yQ29sb3IiLCJsaWZ0Q29sb3IiLCJlcnJvckNvbG9yIiwicmVzZXRDb2xvckNhY2hlIiwiZ2V0VGlsZUNvbG9yIiwiYyIsInRpbGVWYWx1ZSIsInJvb21zIiwiY29sb3IiLCJtYXBEYXRhIiwibWFwIiwiYm9va3MiLCJsaWZ0UG9zaXRpb24iLCJjb2xzIiwicm93cyIsImN1cnJlbnRPZmZzZXRYIiwiY3VycmVudE9mZnNldFkiLCJzdGFydENvbCIsImVuZENvbCIsInN0YXJ0Um93IiwiZW5kUm93Iiwic2F2ZSIsImRyYXdCYXNlVGlsZXMiLCJkcmF3Um9vbURldGFpbHMiLCJkcmF3TGlmdERldGFpbHMiLCJkcmF3Qm9va3MiLCJyZXN0b3JlIiwic2hhZG93Q29sb3IiLCJ3YWxsRWRnZUNvbG9yRGFyayIsIndhbGxFZGdlQ29sb3JMaWdodCIsIndhbGxUb3BFZGdlQ29sb3IiLCJ1bmRlZmluZWQiLCJlZGdlU2l6ZSIsInJvb20iLCJjb2wiLCJyb3ciLCJyb29tU2NyZWVuWCIsInJvb21TY3JlZW5ZIiwicm9vbVNjcmVlblciLCJyb29tU2NyZWVuSCIsImZsb29yQ29sb3IiLCJmbG9vck51bSIsImZsb29yTnVtYmVyIiwicm9vbVNlZWQiLCJicmlnaHRuZXNzRmFjdG9yIiwibGluZVdpZHRoIiwiZHJhd1Jvb21EZWNvcmF0aW9ucyIsInRpbGVYIiwidGlsZVkiLCJidXR0b25SYWRpdXMiLCJidXR0b25YIiwiYnV0dG9uWSIsImJlZ2luUGF0aCIsImFyYyIsIlBJIiwiZmlsbCIsInciLCJ0cyIsIm1hcmdpbiIsIm9iak1hcmdpbiIsImRyYXdSZWN0IiwicngiLCJyeSIsInJ3IiwicmgiLCJvdXRsaW5lIiwic2NyZWVuVyIsInNjcmVlbkgiLCJkcmF3Q2lyY2xlIiwiY3giLCJjeSIsInJhZGl1cyIsInN0cm9rZSIsImRlc2tXIiwiZGVza0giLCJjaGFpckgiLCJzcGFjZVgiLCJzcGFjZVkiLCJyb3dZIiwiY29sWCIsInRhYmxlVyIsInRhYmxlSCIsImNhYmluZXRXIiwic2hlbGZXIiwic2hlbGZTcGFjaW5nIiwic3giLCJzaGVsZlkiLCJtb3ZlVG8iLCJsaW5lVG8iLCJ0YWJsZUxpYlgiLCJsYWJUYWJsZUgiLCJtZXRhbFNoZWxmVyIsIm1ldGFsU2hlbGZIIiwiYm94U2l6ZSIsImRlZmF1bHRCb29rU2l6ZSIsImJvb2siLCJib29rU2l6ZSIsImNvbnNpc3RlbnRMaWZ0Q29vcmRzIiwiREVGQVVMVF9HRU5fUEFSQU1TIiwibWluUm9vbVNpemUiLCJtYXhSb29tU2l6ZSIsImNvcnJpZG9yVGhpY2tuZXNzIiwibnVtUm9vbXMiLCJtYXhSb29tQXR0ZW1wdHMiLCJyb29tVHlwZVdlaWdodHMiLCJjbGFzc3Jvb20iLCJvZmZpY2UiLCJsaWJyYXJ5IiwiZ3ltIiwidXRpbGl0eSIsIl9jYXJ2ZUNvcnJpZG9yQmV0d2VlbiIsInJvb21BIiwicm9vbUIiLCJjZW50ZXJUaWxlWCIsImF4IiwiY2VudGVyVGlsZVkiLCJheSIsImJ4IiwiYnkiLCJfY2FydmVIb3Jpem9udGFsQ29ycmlkb3IiLCJfY2FydmVWZXJ0aWNhbENvcnJpZG9yIiwiYzEiLCJjMiIsInIxIiwicjIiLCJfZm9yY2VDb25uZWN0aW9uVG9Qb2ludCIsInRhcmdldFgiLCJ0YXJnZXRZIiwiZGlyZWN0aW9ucyIsImlzQWRqYWNlbnRUb1dhbGthYmxlIiwiYWRqYWNlbnRXYWxrYWJsZUNvb3JkIiwiZHgiLCJkeSIsIm54IiwibnkiLCJuZWlnaGJvclRpbGUiLCJxdWV1ZSIsInZpc2l0ZWQiLCJTZXQiLCJiZnNQYXRoYWJsZSIsInRhcmdldFdhbGthYmxlIiwiY2xvc2VzdFdhbGthYmxlIiwibWluRm91bmREaXN0IiwiSW5maW5pdHkiLCJjdXJyWCIsImN1cnJZIiwiZGlzdCIsInNoaWZ0IiwibmV4dFgiLCJuZXh0WSIsImhhcyIsImluY2x1ZGVzIiwicHVzaCIsIl9pc0xpZnRSZWFjaGFibGUiLCJyZWFjaGFibGUiLCJtYXBHcmlkIiwic3RhcnRYIiwic3RhcnRZIiwid2Fsa2FibGVUaWxlVmFsdWVzIiwicGVyZm9ybUJGUyIsIlByb2NlZHVyYWxNYXAiLCJjYW52YXNXaWR0aCIsImNhbnZhc0hlaWdodCIsInJlbmRlcmVyIiwiZ2VuZXJhdGlvblBhcmFtcyIsImJvb2tzUGVyTWFwIiwibGFiIiwic3RvcmFnZSIsImdlbmVyYXRpb25Db25maWciLCJjb25maWciLCJ1c2VyUGFyYW1zIiwiZ2VuUGFyYW1zIiwiR1lNX0NIQU5DRV9PTl9GSVJTVF9GTE9PUiIsIkFycmF5IiwiZnJvbSIsInJvb21BdHRlbXB0cyIsIndlaWdodGVkVHlwZXMiLCJ0b3RhbFdlaWdodCIsIndlaWdodCIsInJvb21XaWR0aCIsInJvb21IZWlnaHQiLCJyb29tQ29sIiwicm9vbVJvdyIsIm5ld1Jvb20iLCJjb25uZWN0ZWQiLCJvdmVybGFwcyIsImJ1ZmZlciIsImV4aXN0aW5nUm9vbSIsIl9wbGFjZVJvb21zIiwiY29ubmVjdGVkU2V0IiwidW5jb25uZWN0ZWRSb29tcyIsImJlc3REaXN0YW5jZVNxIiwiYmVzdFVuY29ubmVjdGVkUm9vbSIsImJlc3RDb25uZWN0ZWRSb29tSWQiLCJiZXN0VW5jb25uZWN0ZWRJbmRleCIsInJvb21VIiwicm9vbUMiLCJkaXN0U3EiLCJiZXN0Q29ubmVjdGVkUm9vbSIsImZpbmQiLCJzcGxpY2UiLCJfY29ubmVjdFJvb21zQmV0dGVyIiwicGxhY2VkTGlmdERhdGEiLCJjdXJyZW50Q29uc2lzdGVudENvb3JkcyIsImNvb3Jkc1RvVXNlIiwibmV3bHlGb3VuZENvb3JkcyIsImNlbnRlclgiLCJjZW50ZXJZIiwiYmVzdFNwb3QiLCJtaW5EaXN0YW5jZVNxIiwibWF4U2VhcmNoUmFkaXVzIiwiYWJzIiwiY2hlY2tYIiwiY2hlY2tZIiwidGlsZSIsImlzQ29ubmVjdGVkIiwiZGR4IiwiZGR5IiwiX2ZpbmRMaWZ0UGxhY2VtZW50TG9jYXRpb24iLCJsaWZ0V29ybGRQb3MiLCJ0b0ZpeGVkIiwicG9zaXRpb24iLCJjb29yZHMiLCJfcGxhY2VMaWZ0IiwiX2Vuc3VyZU1hcEJvcmRlcnMiLCJlcnJvck1zZyIsImdlbmVyYXRlTGV2ZWxEYXRhIiwicGxhY2VCb29rc1JlbGlhYmx5IiwicG90ZW50aWFsTG9jYXRpb25zIiwicGxhY2VkQ29vcmRzIiwiaXNMaWZ0VGlsZSIsImJvb2tzUGxhY2VkIiwicmFuZG9tSW5kZXgiLCJjb29yZEtleSIsImJvb2tXb3JsZFgiLCJib29rV29ybGRZIiwiYm9va0lkIiwiaXNXYWxrYWJsZSIsIndvcmxkWCIsIndvcmxkWSIsImZpbmRSYW5kb21Jbml0aWFsU3Bhd25Qb3NpdGlvbiIsInN1aXRhYmxlVGlsZXMiLCJpc0xpZnQiLCJmaW5kTmVhcmVzdFdhbGthYmxlVGlsZSIsInRhcmdldFdvcmxkWCIsInRhcmdldFdvcmxkWSIsIm1heFJhZGl1cyIsImV4Y2x1ZGVMaWZ0IiwidGFyZ2V0VGlsZVgiLCJ0YXJnZXRUaWxlWSIsInRhcmdldFNhZmVUaWxlcyIsInN0YXJ0VGlsZVZhbHVlIiwiYmZzV2Fsa2FibGVQYXRoIiwiZmluZE5lYXJieVVuYW5zd2VyZWRCb29rIiwiY2xvc2VzdEJvb2siLCJkaXN0YW5jZVNxIiwibWFya0Jvb2tBc0NvbGxlY3RlZCIsImJvb2tUb0NvbGxlY3QiLCJmaW5kTmVhcmJ5TGlmdCIsImdldExpZnRQb3NpdGlvbiIsImxvZ01hcEdyaWQiLCJoZWFkZXIiLCJyb3dOdW0iLCJyb3dTdHJpbmciLCJqb2luIiwiTGV2ZWwiLCJjdXJyZW50TWFwIiwibG9hZEZsb29yIiwibGlmdFBvcyIsIlByb21pc2UiLCJyZXNvbHZlIiwiZ2V0Q3VycmVudEJvb2tzIiwiR2FtZVJlbmRlcmVyIiwiZ2FtZSIsImluaXRpYWxpemVDYW52YXMiLCJnZXRDb250ZXh0IiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwicmVzaXplQ2FudmFzIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiY2hhcmFjdGVyIiwibGV2ZWwiLCJjZW50ZXJDYW1lcmFPbkNoYXJhY3RlciIsImRyYXdGcmFtZSIsImNsZWFyUmVjdCIsImNoYXIiLCJkcmF3V2luU2NyZWVuIiwidGFyZ2V0Qm9va3NUb1dpbiIsIkdhbWVwbGF5TWFuYWdlciIsImJpbmQiLCJ1cGRhdGUiLCJnYW1lU3RhdGUiLCJ1cGRhdGVQbGF5aW5nU3RhdGUiLCJtb3ZlZCIsImhhbmRsZU1vdmVtZW50IiwiaGFuZGxlSW50ZXJhY3Rpb25zIiwiaW5wdXQiLCJhY3R1YWxNb3ZlWCIsImFjdHVhbE1vdmVZIiwiY2FuTW92ZVgiLCJjaGVja0NvbGxpc2lvbiIsImNhbk1vdmVZIiwiY29sbGlzaW9uQm94IiwicG9pbnRzVG9DaGVjayIsInBvaW50IiwibmVhcmJ5Qm9vayIsImluaXRpYXRlUXVlc3Rpb24iLCJsaWZ0Q29vbGRvd25BY3RpdmUiLCJpbml0aWF0ZUZsb29yU2VsZWN0aW9uIiwic2V0R2FtZVN0YXRlIiwiY3VycmVudEJvb2tUYXJnZXQiLCJhdmFpbGFibGVRdWVzdGlvbnMiLCJxSW5kZXgiLCJjdXJyZW50UXVlc3Rpb25EYXRhIiwic2VsZWN0ZWRPcHRpb25JbmRleCIsInRvdGFsQm9va3NDb2xsZWN0ZWRHbG9iYWxseSIsIl9zZXRHYW1lT3ZlciIsInNlbGVjdGVkRmxvb3IiLCJoYW5kbGVMaWZ0VHJhbnNpdGlvbiIsImNhdGNoIiwiZXJyIiwiX2hhbmRsZUZhdGFsRXJyb3IiLCJ0YXJnZXRGbG9vciIsIkxJRlRfQ09PTERPV05fTVMiLCJuZXdNYXAiLCJzYWZlU3Bhd25UaWxlIiwiZW1lcmdlbmN5U3Bhd24iLCJzdGFydExpZnRDb29sZG93blRpbWVyIiwiZW5zdXJlQ2hhcmFjdGVySXNPbldhbGthYmxlVGlsZSIsImFsbG93U3RhbmRpbmdPbkxpZnQiLCJjdXJyZW50VGlsZVgiLCJjdXJyZW50VGlsZVkiLCJjdXJyZW50VGlsZVZhbHVlIiwiaXNTYWZlVG9TdGFuZEhlcmUiLCJpc0NvbGxpZGluZ1dpdGhXYWxsIiwic2FmZVNwb3QiLCJlbWVyZ2VuY3lTcG90IiwiR2FtZSIsImNoYXJhY3RlckNvbG9yIiwiX2dhbWVTdGF0ZSIsImlzUnVubmluZyIsImxpZnRDb29sZG93blRpbWVyIiwiZ2FtZXBsYXlNYW5hZ2VyIiwic3ByaXRlcyIsInJlZCIsImJsdWUiLCJ5ZWxsb3ciLCJncmVlbiIsImdhbWVMb29wIiwiX2JvdW5kS2V5RG93bkhhbmRsZXIiLCJfYm91bmRLZXlVcEhhbmRsZXIiLCJfaW5pdGlhbGl6ZUNvcmVDb21wb25lbnRzIiwiX2luaXRpYWxpemVVSU1hbmFnZXIiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJfbG9hZEFzc2V0c0FuZFRoZW5TdGFydExvZ2ljIiwidGhlbiIsImxvYWRpbmdPdmVybGF5IiwiYWxlcnQiLCJuZXdTdGF0ZSIsIl9sb2FkQXNzZXRzIiwiX3N0YXJ0R2FtZUxvZ2ljIiwicHJvbWlzZXMiLCJzcHJpdGVQYXRoIiwicmVqZWN0IiwiYWxsIiwiTE9BRElOR19MRVZFTCIsInN0YXJ0UG9zIiwiaGFuZGxlS2V5RG93biIsImhhbmRsZUtleVVwIiwid2luIiwic3RvcEdhbWUiLCJzaG93QWxlcnQiLCJrZXlIYW5kbGVkIiwidG9Mb3dlckNhc2UiLCJjdXJyZW50R2FtZUluc3RhbmNlIiwiTWVudSIsInNlbGVjdGVkQ2hhcmFjdGVyIiwidXNlckludGVyYWN0ZWQiLCJpbml0aWFsaXplRWxlbWVudHMiLCJhZGRFdmVudExpc3RlbmVycyIsInNldHRpbmdzQnV0dG9uIiwicGxheUJ1dHRvbiIsImNoYXJhY3RlckJ1dHRvbiIsInNldHRpbmdzUGFuZWwiLCJtdXNpY1ZvbHVtZSIsInNmeFZvbHVtZSIsImNsb3NlU2V0dGluZ3NCdXR0b24iLCJjaGFyYWN0ZXJQYW5lbCIsImNoYXJhY3RlckdyaWQiLCJjbGlja2VkQ2FyZCIsImNsb3Nlc3QiLCJ2YWx1ZSIsImhhbmRsZUZpcnN0SW50ZXJhY3Rpb24iLCJzZWxlY3RDaGFyYWN0ZXIiLCJjbG9zZUNoYXJhY3RlclBhbmVsQnV0dG9uIiwic2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5IiwibWFpbk1lbnVCdXR0b25zQ29udGFpbmVyIiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGRyZW4iLCJ1cGRhdGVTZWxlY3RlZENoYXJhY3RlckRpc3BsYXkiLCJhZGRJbnRlcmFjdGl2ZUxpc3RlbmVyIiwiZWxlbWVudCIsImV2ZW50VHlwZSIsImhhbmRsZXJGbiIsInRvZ2dsZVNldHRpbmdzIiwic3RhcnRHYW1lIiwib3BlbkNoYXJhY3Rlck1vZGFsIiwiY2xvc2VTZXR0aW5ncyIsImNsb3NlQ2hhcmFjdGVyTW9kYWwiLCJvdmVybGF5IiwiY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2VsZWN0ZWRDYXJkRWxlbWVudCIsImltZ0VsZW1lbnQiLCJuYW1lRWxlbWVudCIsImltZ1NyYyIsIm5hbWUiLCJvcGVuU2V0dGluZ3MiXSwic291cmNlUm9vdCI6IiJ9