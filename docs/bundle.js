(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var i=e.g.document;if(!t&&i&&(i.currentScript&&"SCRIPT"===i.currentScript.tagName.toUpperCase()&&(t=i.currentScript.src),!t)){var o=i.getElementsByTagName("script");if(o.length)for(var a=o.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=o[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();class t{constructor(){this.keys={up:!1,down:!1,left:!1,right:!1}}setKey(e,t){this.keys.hasOwnProperty(e)&&(this.keys[e]=t)}getInputDirection(){let e=0,t=0;return this.keys.up&&(t-=1),this.keys.down&&(t+=1),this.keys.left&&(e-=1),this.keys.right&&(e+=1),{x:e,y:t}}}const i={LOADING:"LOADING",MENU:"MENU",PLAYING:"PLAYING",ASKING_QUESTION:"ASKING_QUESTION",SELECTING_FLOOR:"SELECTING_FLOOR",TRANSITIONING:"TRANSITIONING",GAME_OVER:"GAME_OVER"},o=[{question:"Który język programowania jest znany ze swojej wszechstronności i używany zarówno w backendzie (Node.js), jak i frontendzie?",options:["Python","Java","JavaScript","C#"],correctAnswer:2},{question:"Co oznacza skrót HTML?",options:["HyperText Markup Language","High Transfer Machine Language","Hyperlink and Text Management Language","Home Tool Markup Language"],correctAnswer:0},{question:"Która struktura danych działa na zasadzie LIFO (Last-In, First-Out)?",options:["Kolejka (Queue)","Stos (Stack)","Lista (List)","Drzewo (Tree)"],correctAnswer:1},{question:"Jak nazywa się proces znajdowania i naprawiania błędów w kodzie?",options:["Kompilacja","Testowanie","Debugowanie","Refaktoryzacja"],correctAnswer:2},{question:"Który paradygmat programowania opiera się na koncepcji 'obiektów', które mogą zawierać dane i kod?",options:["Programowanie funkcyjne","Programowanie proceduralne","Programowanie obiektowe","Programowanie logiczne"],correctAnswer:2},{question:"Co oznacza CSS?",options:["Cascading Style Sheets","Computer Style Syntax","Creative Styling System","Colorful Style Scripts"],correctAnswer:0},{question:"Który operator w JavaScript służy do ścisłego porównania (wartość i typ)?",options:["==","=","===","!="],correctAnswer:2},{question:"Jak nazywa się popularny system kontroli wersji używany przez programistów?",options:["Subversion (SVN)","Git","Mercurial","CVS"],correctAnswer:1},{question:"Który typ pętli w większości języków programowania jest najbardziej odpowiedni do iteracji po elementach tablicy, gdy nie znamy ich liczby?",options:["for","while","do...while","foreach (lub for...of)"],correctAnswer:3},{question:"Co to jest API?",options:["Advanced Programming Interface","Application Programming Interface","Automated Program Interaction","Algorithmic Processing Input"],correctAnswer:1},{question:"Co to jest PLC i do czego najczęściej służy w automatyce?",options:["Programowalny Logic Controller, do sterowania procesami przemysłowymi","Personal Learning Computer, do nauki programowania","Power Line Communication, do przesyłu danych przez sieć elektryczną","Project Lifecycle Cost, do zarządzania kosztami projektu"],correctAnswer:0},{question:"Za co odpowiada przysłona (apertura) w aparacie fotograficznym?",options:["Kontrolę czasu naświetlania","Regulację głębi ostrości i ilości wpadającego światła","Ustawienie balansu bieli","Stabilizację obrazu"],correctAnswer:1},{question:"Który element komputera jest odpowiedzialny za tymczasowe przechowywanie danych używanych przez procesor?",options:["Dysk twardy (HDD/SSD)","Karta graficzna (GPU)","Pamięć RAM","Płyta główna"],correctAnswer:2},{question:"W jakim języku programowania najczęściej pisane są skrypty po stronie serwera (backend)?",options:["HTML","CSS","SQL","PHP, Python lub Node.js (JavaScript)"],correctAnswer:3},{question:"Jaki typ sygnału charakteryzuje się płynną zmianą wartości w czasie, w przeciwieństwie do sygnału cyfrowego?",options:["Binarny","Analogowy","Zero-jedynkowy","Impulsowy"],correctAnswer:1},{question:"Który parametr ustawia czułość matrycy aparatu na światło i wpływa na poziom szumów na zdjęciu?",options:["Czas naświetlania","Przysłona","ISO","Ogniskowa"],correctAnswer:2},{question:"Co to jest adres IP w sieci komputerowej?",options:["Unikalny identyfikator urządzenia w sieci","Nazwa użytkownika do logowania","Adres strony internetowej","Typ kabla sieciowego"],correctAnswer:0},{question:"Czym różni się instrukcja warunkowa `if` od pętli `while` w programowaniu?",options:["`if` powtarza blok kodu, `while` sprawdza warunek jednokrotnie","`if` sprawdza warunek jednokrotnie, `while` powtarza blok kodu dopóki warunek jest prawdziwy","Nie ma między nimi różnicy","`if` służy tylko do deklarowania zmiennych, `while` do operacji matematycznych"],correctAnswer:1},{question:"Do czego najczęściej służy czujnik ciśnienia w systemie automatyki?",options:["Pomiaru temperatury","Pomiaru odległości","Pomiaru siły","Pomiaru ciśnienia"],correctAnswer:3},{question:"Co oznacza zasada trójpodziału w kompozycji fotograficznej?",options:["Dzielenie obrazu na 3 równe części pionowo i poziomo i umieszczanie kluczowych elementów na liniach lub ich przecięciach","Używanie tylko 3 głównych kolorów w kadrze","Robienie zawsze 3 zdjęć tej samej sceny","Balansowanie 3 głównych obiektów w kadrze"],correctAnswer:0},{question:"Jaka jest podstawowa rola systemu operacyjnego?",options:["Tworzenie grafiki komputerowej","Zarządzanie zasobami sprzętowymi i programowymi komputera","Pisanie kodu programów","Przeglądanie Internetu"],correctAnswer:1},{question:"Jakiego typu danych najczęściej użyjesz do przechowywania wieku osoby (liczba całkowita)?",options:["String (ciąg znaków)","Boolean (wartość logiczna)","Float (liczba zmiennoprzecinkowa)","Integer (liczba całkowita)"],correctAnswer:3},{question:"Element wykonawczy (aktuator) w systemie automatyki to urządzenie, które...",options:["Odczytuje dane z czujników","Wykonuje komendy ze sterownika, aby wykonać fizyczne działanie (np. ruch)","Przechowuje dane historyczne","Służy do komunikacji z operatorem"],correctAnswer:1},{question:"Który format pliku graficznego jest bezstratny i często używany w profesjonalnej edycji, zachowując maksymalną jakość kosztem rozmiaru?",options:["JPEG","GIF","PNG","RAW"],correctAnswer:3},{question:"Co chroni sieć komputerową przed nieautoryzowanym dostępem z zewnątrz?",options:["Router","Switch","Modem","Firewall (zapora sieciowa)"],correctAnswer:3},{question:"Co to jest IDE (Integrated Development Environment) w kontekście programowania?",options:["System operacyjny","Narzędzie do zarządzania bazą danych","Zintegrowane środowisko programistyczne (edytor kodu, kompilator, debugger w jednym)","Protokół sieciowy"],correctAnswer:2},{question:"Przykładem czujnika zbliżeniowego, wykrywającego obecność obiektu bez fizycznego kontaktu, może być:",options:["Termometr","Fotokomórka","Manometr (czujnik ciśnienia)","Akcelerometr"],correctAnswer:1},{question:"Do czego służy balans bieli (white balance) w aparacie fotograficznym?",options:["Do regulacji ostrości","Do korekcji kolorów, aby biały wyglądał na biały niezależnie od źródła światła","Do ustawiania czasu naświetlania","Do dodawania efektów specjalnych"],correctAnswer:1},{question:"Który protokół jest używany do bezpiecznego (szyfrowanego) przesyłania stron internetowych?",options:["HTTP","FTP","SMTP","HTTPS"],correctAnswer:3},{question:"Co to jest zmienna w programowaniu?",options:["Funkcja wykonująca określone zadanie","Typ pętli","Nazwane miejsce w pamięci komputera służące do przechowywania danych","Polecenie wyświetlające tekst na ekranie"],correctAnswer:2}];class a{static scoreElement=null;static targetElement=null;static controlsContainer=null;static questionOverlay=null;static questionTextElement=null;static answerButtonsContainer=null;static floorSelectionPanel=null;static floorButtonsContainer=null;static flashMessageContainer=null;static loadingOverlayElement=null;static gameOverScreenElement=null;static gameOverTitleElement=null;static creatorNamesListElement=null;static classInfoElement=null;static returnToMenuButtonElement=null;static leaderboardBody=null;static gameplayManagerInstance=null;static flashMessageTimeouts={};static timerElement=null;static gameStartTime=0;static timerIntervalId=null;static leaderboardData=[];static setGameplayManager(e){e?(this.gameplayManagerInstance=e,console.log("[UIManager] GameplayManager instance registered.")):console.error("[UIManager] Attempted to set GameplayManager to null/undefined!")}static initializeUI(e){console.log("[UIManager] Initializing in-game UI elements..."),e||console.warn("[UIManager] InputManager not provided. On-screen controls may not function."),this.createControls(e),this.createQuestionUI(),this.createFloorSelectionUI(),this.ensureFlashMessageContainer(),this.getLoadingOverlay(),this.createGameOverScreen(),this.initializeTimer(),this.gameplayManagerInstance||console.warn("[UIManager] WARNING: GameplayManager not set by end of initializeUI. Interactive UI may fail."),console.log("[UIManager] In-game UI initialization complete.")}static createControls(e){this.controlsContainer=document.getElementById("controls-container"),this.controlsContainer||(this.controlsContainer=document.createElement("div"),this.controlsContainer.id="controls-container",this.controlsContainer.classList.add("controls-container"),document.body.appendChild(this.controlsContainer)),this.controlsContainer.innerHTML="",[{direction:"up",icon:"↑",gridArea:"up"},{direction:"left",icon:"←",gridArea:"left"},{direction:"right",icon:"→",gridArea:"right"},{direction:"down",icon:"↓",gridArea:"down"}].forEach((({direction:t,icon:i,gridArea:o})=>{const a=document.createElement("button");if(a.className=`control-btn ${t}`,a.textContent=i,a.style.gridArea=o,a.dataset.direction=t,e){const i=i=>{e.setKey(t,!0),a.classList.add("active"),i.preventDefault()},o=i=>{e.keys[t]&&e.setKey(t,!1),a.classList.remove("active"),i.preventDefault()};a.addEventListener("touchstart",i,{passive:!1}),a.addEventListener("touchend",o,{passive:!1}),a.addEventListener("touchcancel",o,{passive:!1}),a.addEventListener("mousedown",i),a.addEventListener("mouseup",o),a.addEventListener("mouseleave",o)}this.controlsContainer.appendChild(a)}));const t=document.getElementById("score-display");if(t)this.scoreElement=t.querySelector("#score-value"),this.targetElement=t.querySelector("#score-target");else{const e=document.createElement("div");e.id="score-display",e.classList.add("score-display"),e.innerHTML='Książki: <span id="score-value">0</span> / <span id="score-target">?</span>',document.body.appendChild(e),this.scoreElement=e.querySelector("#score-value"),this.targetElement=e.querySelector("#score-target")}this.scoreElement&&(this.scoreElement.textContent="0"),this.targetElement&&(this.targetElement.textContent="?")}static createQuestionUI(){this.questionOverlay=document.getElementById("question-overlay"),this.questionOverlay||(this.questionOverlay=document.createElement("div"),this.questionOverlay.id="question-overlay",this.questionOverlay.classList.add("ui-panel"),this.questionOverlay.innerHTML='<div id="blackboard-content"><h2>Question</h2><div id="question-box"><p id="question-text"></p><div id="answer-buttons"></div></div></div>',document.body.appendChild(this.questionOverlay)),this.questionTextElement=this.questionOverlay.querySelector("#question-text"),this.answerButtonsContainer=this.questionOverlay.querySelector("#answer-buttons"),this.questionTextElement&&this.answerButtonsContainer||console.error("[UIManager] Failed to find/create question UI children.")}static createFloorSelectionUI(){this.floorSelectionPanel=document.getElementById("floor-selection-ui"),this.floorSelectionPanel||(this.floorSelectionPanel=document.createElement("div"),this.floorSelectionPanel.id="floor-selection-ui",this.floorSelectionPanel.classList.add("ui-panel"),this.floorSelectionPanel.innerHTML='<h2>Select Floor</h2><div id="floor-buttons-container"></div>',document.body.appendChild(this.floorSelectionPanel)),this.floorButtonsContainer=this.floorSelectionPanel.querySelector("#floor-buttons-container"),this.floorButtonsContainer||console.error("[UIManager] Failed to find/create floor buttons container.")}static ensureFlashMessageContainer(){return this.flashMessageContainer=document.getElementById("flash-message-container"),this.flashMessageContainer||(this.flashMessageContainer=document.createElement("div"),this.flashMessageContainer.id="flash-message-container",document.body.appendChild(this.flashMessageContainer)),this.flashMessageContainer}static flashMessage(e,t="info",i=3e3){const o=this.ensureFlashMessageContainer();if(!o)return void console.error("[UIManager] Flash msg container not found.");const a=document.createElement("div");a.textContent=e,a.className="flash-message",a.classList.add(`flash-${t}`);const s=`flash-${Date.now()}-${Math.random().toString(36).substr(2,5)}`;a.id=s,o.appendChild(a),requestAnimationFrame((()=>a.classList.add("visible"))),clearTimeout(this.flashMessageTimeouts[s]),this.flashMessageTimeouts[s]=setTimeout((()=>{a.classList.remove("visible");const e=e=>{"opacity"!==e.propertyName&&"transform"!==e.propertyName||(a.parentNode&&a.parentNode.removeChild(a),delete this.flashMessageTimeouts[s])};a.addEventListener("transitionend",e,{once:!0}),setTimeout((()=>{a.parentNode&&(a.removeEventListener("transitionend",e),a.parentNode.removeChild(a)),delete this.flashMessageTimeouts[s]}),500)}),i)}static getLoadingOverlay(){if(!this.loadingOverlayElement&&(this.loadingOverlayElement=document.getElementById("loading-overlay"),!this.loadingOverlayElement)){this.loadingOverlayElement=document.createElement("div"),this.loadingOverlayElement.id="loading-overlay",this.loadingOverlayElement.className="loading-overlay";const e=document.createElement("p");e.textContent="Loading...",this.loadingOverlayElement.appendChild(e),document.body.appendChild(this.loadingOverlayElement),console.log("[UIManager] Loading overlay created.")}return this.loadingOverlayElement}static createGameOverScreen(){this.gameOverScreenElement=document.getElementById("game-over-screen"),this.gameOverScreenElement?(this.gameOverTitleElement=this.gameOverScreenElement.querySelector("#game-over-title"),this.creatorNamesListElement=this.gameOverScreenElement.querySelector("#creator-names"),this.classInfoElement=this.gameOverScreenElement.querySelector("#class-info"),this.returnToMenuButtonElement=this.gameOverScreenElement.querySelector("#return-to-menu-button"),this.leaderboardBody=this.gameOverScreenElement.querySelector("#leaderboard-body"),this.gameOverTitleElement&&this.creatorNamesListElement&&this.classInfoElement&&this.returnToMenuButtonElement&&this.leaderboardBody?(this.returnToMenuButtonElement.addEventListener("click",(()=>window.location.reload())),console.log("[UIManager] Game Over screen elements initialized.")):console.error("[UIManager] Failed to find Game Over screen children or leaderboard body.")):console.error("[UIManager] CRIT: #game-over-screen not in HTML!")}static showGameOverScreen(e,t=[],i=""){this.gameOverScreenElement||(console.error("[UIManager] Game Over Screen not init, creating."),this.createGameOverScreen(),this.gameOverScreenElement)?(this.gameOverTitleElement&&(this.gameOverTitleElement.textContent=e?"Brawo uciekłeś!":"Koniec gry",this.gameOverTitleElement.className=e?"win-title":"lose-title"),this.creatorNamesListElement&&(this.creatorNamesListElement.innerHTML="",t.forEach((e=>{const t=document.createElement("li");t.textContent=e,this.creatorNamesListElement.appendChild(t)}))),this.classInfoElement&&(this.classInfoElement.textContent=i),this.updateLeaderboard(),this.gameOverScreenElement.classList.add("visible"),this.hideGameUI(),this.hideQuestion(),this.hideFloorSelectionUI()):console.error("[UIManager] Still unable to show Game Over screen.")}static hideGameOverScreen(){this.gameOverScreenElement&&this.gameOverScreenElement.classList.remove("visible")}static showQuestion(e){if(this.questionOverlay&&this.questionTextElement&&this.answerButtonsContainer||(console.error("[UIManager] Question UI not ready, creating."),this.createQuestionUI(),this.questionOverlay&&this.questionTextElement&&this.answerButtonsContainer))if(e){if(!this.gameplayManagerInstance?.handleAnswer)return console.error("[UIManager] CRIT: GameplayManager/handleAnswer not set/invalid!"),this.flashMessage("Error: Game interaction (Q) failed.","error",5e3),void this.hideQuestion();this.questionTextElement.textContent=e.question,this.answerButtonsContainer.innerHTML="",e.options.forEach(((e,t)=>{const i=document.createElement("button");i.textContent=e,i.dataset.index=t.toString(),i.classList.add("answer-button"),i.addEventListener("click",(e=>this.gameplayManagerInstance.handleAnswer(parseInt(e.target.dataset.index,10)))),this.answerButtonsContainer.appendChild(i)})),this.questionOverlay.classList.add("visible")}else console.error("[UIManager] No questionData to show.")}static hideQuestion(){this.questionOverlay&&(this.questionOverlay.classList.remove("visible"),this.questionTextElement&&(this.questionTextElement.textContent=""),this.answerButtonsContainer&&(this.answerButtonsContainer.innerHTML=""))}static showFloorSelectionUI(e,t,i){if(this.floorSelectionPanel&&this.floorButtonsContainer||(console.error("[UIManager] Floor selection UI not ready, creating."),this.createFloorSelectionUI(),this.floorSelectionPanel&&this.floorButtonsContainer)){if(!this.gameplayManagerInstance?.handleFloorSelection)return console.error("[UIManager] CRIT: GameplayManager/handleFloorSelection not set/invalid!"),this.flashMessage("Error: Game interaction (F) failed.","error",5e3),void this.hideFloorSelectionUI();this.floorButtonsContainer.innerHTML="";for(let o=e;o<=t;o++){const e=document.createElement("button");e.textContent=`Floor ${o}`,e.classList.add("floor-button"),e.dataset.floor=o.toString(),o===i?(e.disabled=!0,e.classList.add("current")):e.addEventListener("click",(()=>this.gameplayManagerInstance.handleFloorSelection(o))),this.floorButtonsContainer.appendChild(e)}this.floorSelectionPanel.classList.add("visible")}}static hideFloorSelectionUI(){this.floorSelectionPanel&&this.floorSelectionPanel.classList.remove("visible")}static updateScore(e,t){this.scoreElement||(this.scoreElement=document.getElementById("score-value")),this.targetElement||(this.targetElement=document.getElementById("score-target")),this.scoreElement&&(this.scoreElement.textContent=e.toString()),this.targetElement&&(this.targetElement.textContent=t.toString())}static showGameUI(){console.log("[UIManager] Showing Game UI...");const e=document.getElementById("game-canvas"),t=document.getElementById("score-display");e?e.style.display="block":console.warn("[UIManager] #game-canvas not found."),this.controlsContainer?this.controlsContainer.classList.add("visible"):console.warn("[UIManager] Controls container not found."),t?(t.style.display="flex",t.classList.add("visible")):console.warn("[UIManager] Score display not found."),this.timerElement&&(this.timerElement.style.display="block"),this.hideQuestion(),this.hideFloorSelectionUI(),this.hideGameOverScreen()}static hideGameUI(){console.log("[UIManager] Hiding Game UI...");const e=document.getElementById("game-canvas"),t=document.getElementById("score-display");e&&(e.style.display="none"),this.controlsContainer&&this.controlsContainer.classList.remove("visible"),t&&(t.style.display="none",t.classList.remove("visible")),this.timerElement&&(this.timerElement.style.display="none")}static initializeTimer(){this.timerElement||(this.timerElement=document.getElementById("game-timer"),this.timerElement)||(this.timerElement=document.createElement("div"),this.timerElement.id="game-timer",this.timerElement.classList.add("game-timer"),(document.getElementById("game-container")||document.body).appendChild(this.timerElement),console.log("[UIManager] Timer element dynamically created.")),this.timerElement.textContent="Czas: 0:00",this.timerElement.style.display="none";const e=localStorage.getItem("gameLeaderboard");try{this.leaderboardData=e?JSON.parse(e):[]}catch(e){console.error("[UIManager] Error parsing leaderboard from localStorage:",e),this.leaderboardData=[],localStorage.removeItem("gameLeaderboard")}console.log("[UIManager] Timer and leaderboard data initialized.")}static startTimer(){this.timerIntervalId&&(cancelAnimationFrame(this.timerIntervalId),this.timerIntervalId=null);const e=this.gameplayManagerInstance?.game;e&&e.gameState===i.PLAYING?(this.gameStartTime=Date.now(),console.log(`[UIManager] Game timer starting. Start time: ${this.gameStartTime}. State: ${e.gameState}`),this.updateTimer()):console.warn(`[UIManager] Timer start denied. Game: ${!!e}, State: ${e?.gameState}. Expected PLAYING.`)}static updateTimer(){const e=this.gameplayManagerInstance?.game;if(!this.gameStartTime||!e||e.gameState!==i.PLAYING&&e.gameState!==i.ASKING_QUESTION&&e.gameState!==i.SELECTING_FLOOR&&e.gameState!==i.TRANSITIONING)return void(this.timerIntervalId&&(cancelAnimationFrame(this.timerIntervalId),this.timerIntervalId=null));const t=Math.floor((Date.now()-this.gameStartTime)/1e3),o=Math.floor(t/60),a=t%60;this.timerElement&&(this.timerElement.textContent=`Czas: ${o}:${a.toString().padStart(2,"0")}`),this.timerIntervalId=requestAnimationFrame((()=>this.updateTimer()))}static stopTimer(e){if(!this.gameStartTime)return;this.timerIntervalId&&(cancelAnimationFrame(this.timerIntervalId),this.timerIntervalId=null);const t=(Date.now()-this.gameStartTime)/1e3;if(console.log(`[UIManager] Czas zatrzymany. Czas: ${t.toFixed(3)}s. Wygrana: ${e}`),e){this.leaderboardData.push({name:`Podejście ${this.leaderboardData.length+1}`,time:t,date:(new Date).toLocaleDateString()}),this.leaderboardData.sort(((e,t)=>e.time-t.time));try{localStorage.setItem("gameLeaderboard",JSON.stringify(this.leaderboardData.slice(0,10)))}catch(e){console.error("[UIManager] Failed to save leaderboard:",e)}}this.gameStartTime=0}static updateLeaderboard(){if(!this.leaderboardBody){const e=document.getElementById("game-over-screen");if(e&&(this.leaderboardBody=e.querySelector("#leaderboard-body")),!this.leaderboardBody)return}this.leaderboardBody.innerHTML="";const e=this.leaderboardData.slice(0,10);if(0===e.length){const e=this.leaderboardBody.insertRow().insertCell();e.colSpan=3,e.textContent="No records yet.",e.style.textAlign="center"}else e.forEach((e=>{const t=Math.floor(e.time/60),i=Math.floor(e.time%60),o=Math.floor(1e3*e.time%1e3),a=this.leaderboardBody.insertRow();a.insertCell().textContent=e.name,a.insertCell().textContent=`${t}:${i.toString().padStart(2,"0")}.${o.toString().padStart(3,"0")}`,a.insertCell().textContent=e.date}))}}class s{static Direction={DOWN:0,RIGHT:1,UP:2,LEFT:3};constructor(e,t,i={}){this.ctx=e,this.sprite=new Image,this.frameSize=i.frameSize||32,this.frameCount=i.frameCount||4,this.scale=i.scale||2,this.renderSize=this.frameSize*this.scale,this.speed=i.speed||3,this.animationSpeed=i.animationSpeed||150,this.collisionBoxWidthRatio=i.collisionBoxWidthRatio||.4,this.collisionBoxHeightRatio=i.collisionBoxHeightRatio||.2,this.collisionBoxFeetOffsetRatio=i.collisionBoxFeetOffsetRatio||.4,this.x=0,this.y=0,this.currentDirection=s.Direction.DOWN,this.currentFrame=0,this.isMoving=!1,this.lastFrameTime=0,this.sprite.onload=()=>{console.log(`[Character] Sprite loaded successfully: ${t}`)},this.sprite.onerror=()=>{console.error(`[Character] Failed to load sprite: ${t}`)},this.sprite.src=t}updateAnimation(e){if(!this.isMoving)return this.currentFrame=0,void(this.lastFrameTime=e);this.lastFrameTime||(this.lastFrameTime=e),e-this.lastFrameTime>this.animationSpeed&&(this.currentFrame=(this.currentFrame+1)%this.frameCount,this.lastFrameTime=e)}getCollisionBox(e,t){const i=this.renderSize*this.collisionBoxWidthRatio,o=this.renderSize*this.collisionBoxHeightRatio,a=i/2,s=this.renderSize*this.collisionBoxFeetOffsetRatio;return{top:t+s-o/2,bottom:t+s+o/2,left:e-a,right:e+a,width:i,height:o}}draw(e,t){if(!this.sprite.complete||0===this.sprite.naturalHeight)return;const i=this.currentFrame*this.frameSize,o=this.currentDirection*this.frameSize,a=Math.floor(this.x-this.renderSize/2+e),s=Math.floor(this.y-this.renderSize/2+t);try{this.ctx.drawImage(this.sprite,i,o,this.frameSize,this.frameSize,a,s,this.renderSize,this.renderSize)}catch(e){console.error("[Character] Error drawing sprite:",e)}}}class n{constructor(e,t,i,o){this.x=e,this.y=t,this.id=i,this.tileSize=o,this.size=.6*o,this.collected=!1,this.isCollected=!1}draw(e,t,i,o){const a=Math.floor(this.x+t-this.size/2),s=Math.floor(this.y+i-this.size/2);o?e.drawImage(o,a,s,this.size,this.size):(e.fillStyle="#8d6e63",e.fillRect(a,s,this.size,this.size),e.strokeStyle="#5d4037",e.strokeRect(a,s,this.size,this.size),e.fillStyle="#eee",e.font=.6*this.size+"px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText("?",a+this.size/2,s+this.size/2+2))}}function r(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function l(e){let t=3735928559^e;return t=Math.imul(t^t>>>16,2246822507),t=Math.imul(t^t>>>13,3266489909),(t^=t>>>16)>>>0}function c(e,t){if(!e||"string"!=typeof e||e.length<7)return e;let i=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return i=Math.min(255,Math.max(0,Math.round(i*t))),o=Math.min(255,Math.max(0,Math.round(o*t))),a=Math.min(255,Math.max(0,Math.round(a*t))),`#${i.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`}class h{constructor(e){this.tileSize=e,this.tileColors={},this.baseWallColor="#1c1e22",this.baseCorridorColor="#a0a0a0",this.baseRoomFloorColor="#c0c0c0",this.liftColor="#707080",this.errorColor="#ff00ff"}resetColorCache(){this.tileColors={}}getTileColor(e,t,i,o){const a=`${e},${t}`;if(this.tileColors[a])return this.tileColors[a];let s;switch(i){case 0:s=this.baseWallColor;break;case 1:s=this.baseCorridorColor;break;case 2:s=this.baseRoomFloorColor;break;case 3:s=this.liftColor;break;default:s=this.errorColor}return this.tileColors[a]=s,s}draw(e,t,i=null){const{map:o,rooms:a,books:s,liftPosition:n,offsetX:r,offsetY:l,cols:c,rows:h}=t,d=Math.floor(r),m=Math.floor(l),u=Math.max(0,Math.floor(-d/this.tileSize)-1),g=Math.min(c,Math.ceil((-d+e.canvas.width)/this.tileSize)+1),f=Math.max(0,Math.floor(-m/this.tileSize)-1),p=Math.min(h,Math.ceil((-m+e.canvas.height)/this.tileSize)+1);e.save(),this.drawBaseTiles(e,o,a,d,m,c,h,f,p,u,g),this.drawRoomDetails(e,o,a,n,d,m,c,h,f,p,u,g),this.drawLiftDetails(e,n,d,m),this.drawBooks(e,s,d,m,i),e.restore()}drawBaseTiles(e,t,i,o,a,s,n,r,l,c,h){e.save(),e.shadowColor="transparent";const d="#383838",m="#606060",u="#757575";for(let g=r;g<l;g++)for(let r=c;r<h;r++){const l=t[g]?.[r];if(void 0===l)continue;const c=Math.floor(r*this.tileSize+o),h=Math.floor(g*this.tileSize+a),f=this.getTileColor(g,r,l,i);if(e.fillStyle=f,e.fillRect(c,h,this.tileSize,this.tileSize),0===l){e.fillStyle="rgba(0,0,0,0.06)";for(let t=0;t<5;t++)e.fillRect(c+Math.random()*this.tileSize,h+Math.random()*this.tileSize,1,1);const i=2;g>0&&0!==t[g-1]?.[r]&&(e.fillStyle=u,e.fillRect(c,h,this.tileSize,i)),g<n-1&&0!==t[g+1]?.[r]&&(e.fillStyle=d,e.fillRect(c,h+this.tileSize-i,this.tileSize,i)),r>0&&0!==t[g]?.[r-1]&&(e.fillStyle=m,e.fillRect(c,h+i,i,this.tileSize-i)),r<s-1&&0!==t[g]?.[r+1]&&(e.fillStyle=d,e.fillRect(c+this.tileSize-i,h+i,i,this.tileSize-i)),g>0&&r>0&&0!==t[g-1]?.[r]&&0!==t[g]?.[r-1]&&0!==t[g-1]?.[r-1]&&(e.fillStyle=m,e.fillRect(c,h,i,i)),g>0&&r<s-1&&0!==t[g-1]?.[r]&&0!==t[g]?.[r+1]&&0!==t[g-1]?.[r+1]&&(e.fillStyle=u,e.fillRect(c+this.tileSize-i,h,i,i))}else if(1===l){e.fillStyle="rgba(255,255,255,0.03)";for(let t=0;t<3;t++)e.fillRect(c+Math.random()*this.tileSize,h+Math.random()*this.tileSize,1,1)}}e.restore()}drawRoomDetails(e,t,i,o,a,s,n,r,h,d,m,u){e.save(),e.shadowColor="transparent";for(const o of i){if(o.col+o.width<m||o.col>u||o.row+o.height<h||o.row>d)continue;const i=Math.floor(o.col*this.tileSize+a),n=Math.floor(o.row*this.tileSize+s),r=o.width*this.tileSize,g=o.height*this.tileSize;let f=this.baseRoomFloorColor;const p="number"==typeof this.floorNumber?this.floorNumber:0;let y=l(o.id)+100*p;switch(o.type){case"classroom":f=c("#a0c8e0",.9+l(y)%11/100);break;case"office":f=c("#f0e8c0",.9+l(y+1)%11/100);break;case"library":f=c("#d8c0a8",.9+l(y+2)%11/100);break;case"gym":f=c("#b0d0b0",.9+l(y+3)%11/100);break;case"lab":f=c("#e0e0ff",.9+l(y+4)%11/100);break;case"storage":f=c("#b0a090",.9+l(y+5)%11/100);break;case"utility":f=c("#b0b0b0",.9+l(y+6)%11/100)}for(let i=Math.max(o.row,h);i<Math.min(o.row+o.height,d);i++)for(let n=Math.max(o.col,m);n<Math.min(o.col+o.width,u);n++){const r=t[i]?.[n];if(2===r){const t=Math.floor(n*this.tileSize+a),r=Math.floor(i*this.tileSize+s),h=.98+(l(5e3*i+3*n+y)%11-5)/100;e.fillStyle=c(f,h),e.fillRect(t,r,this.tileSize,this.tileSize),"lab"===o.type&&(e.strokeStyle="rgba(0,0,0,0.08)",e.lineWidth=1,e.strokeRect(t+.5,r+.5,this.tileSize-1,this.tileSize-1))}}this.drawRoomDecorations(e,o,i,n,r,g)}e.restore()}drawLiftDetails(e,t,i,o){if(!t)return;const a=Math.floor(t.tileX*this.tileSize+i),s=Math.floor(t.tileY*this.tileSize+o);if(a+this.tileSize<0||a>e.canvas.width||s+this.tileSize<0||s>e.canvas.height)return;e.save(),e.shadowColor="transparent",e.strokeStyle="#d0d0d0",e.lineWidth=1,e.strokeRect(a+.5,s+.5,this.tileSize-1,this.tileSize-1),e.strokeStyle="#404040",e.strokeRect(a+1.5,s+1.5,this.tileSize-3,this.tileSize-3);const n=.15*this.tileSize,r=a+.8*this.tileSize,l=s+.5*this.tileSize;e.fillStyle="#444",e.beginPath(),e.arc(r,l,n,0,2*Math.PI),e.fill(),e.fillStyle="#ff4444",e.beginPath(),e.arc(r,l,.8*n,0,2*Math.PI),e.fill(),e.fillStyle="rgba(255, 255, 255, 0.5)",e.beginPath(),e.arc(r-.2*n,l-.2*n,.3*n,0,2*Math.PI),e.fill(),e.restore()}drawRoomDecorations(e,t,i,o,a,s){const n=this.tileSize,r=.2*n,l=.1*n;e.lineWidth=1,e.strokeStyle="#444";const c=(t,a,s,n,r,l=!0)=>{e.fillStyle=r;const c=Math.floor(i+t),h=Math.floor(o+a),d=Math.floor(s),m=Math.floor(n);e.fillRect(c,h,d,m),l&&e.strokeRect(c+.5,h+.5,d-1,m-1)},h=(t,a,s,n,r=!0)=>{e.fillStyle=n;const l=Math.floor(i+t),c=Math.floor(o+a);e.beginPath(),e.arc(l,c,Math.floor(s),0,2*Math.PI),e.fill(),r&&e.stroke()};switch(t.type){case"classroom":e.strokeStyle="#5d4037";const t=.6*n,d=.4*n,m=.25*n,u=1*n,g=.9*n;c(.25*a,r,.5*a,.2*n,"#333",!0),c(.25*a+2,r+2,.5*a-4,.2*n-4,"#4CAF50",!1);for(let e=0;;e++){const i=r+.5*n+e*g;if(i+d+m>s-r)break;for(let e=0;;e++){const o=r+e*u;if(o+t>a-r)break;c(o,i,t,d,"#8B4513"),c(o+.1*t,i+d+l,.8*t,m,"#6a4a3a")}}break;case"office":e.strokeStyle="#5d4037";const f=Math.min(.6*a,2.5*n),p=Math.min(.4*s,1.2*n);c(r,r,f,p,"#a0522d"),c(r+f+l,r+.1*p,.6*n,.6*n,"#444");const y=.8*n;c(a-r-y,r,y,s-2*r,"#6B4F41"),c(r+l,r+l,.5*n,.4*n,"#333"),c(r+l+.1*n,r+l+.4*n+2,.3*n,.1*n,"#555");break;case"library":e.strokeStyle="#402a10";const w=.6*n,S=1.5*n;for(let t=r;t<a-r-w;t+=S){c(t,r,w,s-2*r,"#654321"),e.strokeStyle="rgba(0,0,0,0.3)";for(let a=r+.5*n;a<s-r;a+=.7*n)e.beginPath(),e.moveTo(i+t,o+a),e.lineTo(i+t+w,o+a),e.stroke();e.strokeStyle="#402a10"}if(a>1.5*S){const e=w+r+(a-2*w-2*r-1.5*n)/2;e>w+r&&(c(e,.3*s,1.5*n,.4*s,"#966F33"),c(e+.2*n,.3*s-.3*n,.5*n,.25*n,"#6a4a3a"),c(e+.2*n,.3*s+.4*s+l,.5*n,.25*n,"#6a4a3a"))}break;case"gym":e.strokeStyle="#555",c(r,r,.4*a,.3*s,"#778899"),c(a-r-.3*a,s-r-.4*s,.3*a,.4*s,"#778899"),c(.6*a,r,.8*n,1.8*n,"#333"),c(.6*a+.1*n,r+.1*n,.6*n,1.6*n,"#555",!1),c(r,.5*s,1.5*n,.4*n,"#8B4513"),c(a-r-.5*n,r,.5*n,1.5*n,"#444"),h(a-r-.25*n,r+.3*n,.15*n,"#666"),h(a-r-.25*n,r+.7*n,.15*n,"#666"),h(a-r-.25*n,r+1.1*n,.15*n,"#666");break;case"lab":e.strokeStyle="#668";const M=.8*n;c(r,r,a-2*r,M,"#d0d0d8"),c(r,s-r-M,a-2*r,M,"#d0d0d8"),c(r+.2*n,r+.1*n,.5*n,.5*n,"#4a90e2"),c(r+1*n,r+.1*n,.3*n,.6*n,"#f5a623"),h(a-2*r-.4*n,r+.5*M,.2*n,"#e04040",!0),c(.4*a,r+M+l,n,s-2*r-2*M-2*l,"#a0a0b0");break;case"storage":e.strokeStyle="#4d4030";const v=a-2*r,b=.5*n;c(r,r,v,b,"#9e9e9e"),c(r,s-r-b,v,b,"#9e9e9e");const C=.6*n;c(r+.2*n,r+b+l,C,C,"#bf8f6f"),c(r+1*n,r+b+l,C,C,"#bf8f6f"),c(a-r-1.5*C,r+b+3*l,1.2*C,.8*C,"#bf8f6f"),c(a-r-n,s-r-n,.8*n,.8*n,"#6a4a3a");break;default:e.strokeStyle="#5d4037",c(.1*a,.15*s,.3*a,.25*s,"#A0522D"),c(.6*a,.5*s,.3*a,.4*s,"#A0522D"),c(a-r-.5*n,r,.5*n,s-2*r,"#777"),e.strokeStyle="#555",e.lineWidth=3,e.beginPath(),e.moveTo(i+r,o+.8*s),e.lineTo(i+a-r,o+.8*s),e.stroke(),e.beginPath(),e.moveTo(i+.7*a,o+r),e.lineTo(i+.7*a,o+s-r),e.stroke(),e.lineWidth=1}}drawBooks(e,t,i,o,a){if(!t||0===t.length)return;const s=.6*this.tileSize;for(const n of t)if(!n.isCollected&&!n.collected){const t=n.size||s,r=Math.floor(n.x+i-t/2),l=Math.floor(n.y+o-t/2);r+t>0&&r<e.canvas.width&&l+t>0&&l<e.canvas.height&&("function"==typeof n.draw?n.draw(e,i,o,a):a?e.drawImage(a,r,l,t,t):(e.fillStyle="#8d6e63",e.fillRect(r,l,t,t),e.strokeStyle="#5d4037",e.lineWidth=1,e.strokeRect(r+.5,l+.5,t-1,t-1)))}}}let d=null;const m={minRoomSize:5,maxRoomSize:10,corridorThickness:1,numRooms:12,maxRoomAttempts:200,roomTypeWeights:{classroom:50,office:25,library:15,gym:0,utility:10,lab:10,storage:5}};function u(e,t,i,o,a){const{centerTileX:s,centerTileY:n}=t,{centerTileX:r,centerTileY:l}=i;Math.random()<.5?(g(e,n,s,r,o,a),f(e,r,n,l,o,a)):(f(e,s,n,l,o,a),g(e,l,s,r,o,a))}function g(e,t,i,o,a,s){if(t<0||t>=s)return;const n=Math.max(0,Math.min(i,o)),r=Math.min(a-1,Math.max(i,o));for(let i=n;i<=r;i++)0===e[t]?.[i]&&(e[t][i]=1)}function f(e,t,i,o,a,s){if(t<0||t>=a)return;const n=Math.max(0,Math.min(i,o)),r=Math.min(s-1,Math.max(i,o));for(let i=n;i<=r;i++)0===e[i]?.[t]&&(e[i][t]=1)}function p(e,t,i,o,a){const s=(e,t)=>{if(e<0||e>=o||t<0||t>=a)return!1;const s=i[t]?.[e];return 1===s||2===s||3===s};let n=0;const r=[{dx:0,dy:-1},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:0}];let l=[!1,!1,!1,!1];for(let i=0;i<r.length;i++)s(e+r[i].dx,t+r[i].dy)&&(n++,l[i]=!0);return{openSides:n,isChokepoint:2===n&&(l[0]&&l[1]&&!l[2]&&!l[3]||l[2]&&l[3]&&!l[0]&&!l[1])}}function y(e,t,i,o,a){console.log(`  [MapGen Connect] Forcing connection to (${t},${i})...`);const s=[[0,-1],[0,1],[-1,0],[1,0]];for(const[o,a]of s){const s=e[i+a]?.[t+o];if(1===s||2===s||3===s)return 0===e[i][t]&&(e[i][t]=1),!0}const n=[[t,i,0]],r=new Set([`${t},${i}`]),l=[0,1,2,3],c=[1,2];let h=null,d=1/0;for(;n.length>0;){const[t,i,m]=n.shift();if(!(m>=d&&h))for(const[u,g]of s){const s=t+u,f=i+g,p=`${s},${f}`;if(s>=0&&s<o&&f>=0&&f<a&&!r.has(p)){const t=e[f]?.[s];r.add(p),c.includes(t)?m+1<=d&&(d=m+1,h={x:s,y:f,dist:d}):l.includes(t)&&(m+1<d||!h)&&n.push([s,f,m+1])}}}return h?(console.log(`  [MapGen Connect] Closest walkable @(${h.x},${h.y}), dist ${h.dist}. Carving...`),g(e,i,t,h.x,o,a),f(e,h.x,i,h.y,o,a),1===e[i][t]||2===e[i][t]||(console.warn(`  [MapGen Connect] Carved, but target (${t},${i}) not Corridor/Floor (is ${e[i][t]}).`),0!==e[i][t])):(console.error(`  [MapGen Connect] FAILED to find ANY walkable from (${t},${i}).`),!1)}function w(e,t,i,o){if(!t)return!1;const{tileX:a,tileY:s}=t;if(s<0||s>=o||a<0||a>=i||3!==e[s]?.[a])return console.error(`[MapVal Reach] Invalid lift @(${a},${s}) or not LIFT.`),!1;const{reachable:n}=function(e,t,i,o,a,s){const n=[[t,i]],r=new Set([`${t},${i}`]),l=[[0,-1],[0,1],[-1,0],[1,0]];let c=!1;for(e[i];n.length>0;){const[t,i]=n.shift();for(const[h,d]of l){const l=t+h,m=i+d,u=`${l},${m}`;if(l>=0&&l<o&&m>=0&&m<a&&!r.has(u)){const t=e[m]?.[l];r.add(u),s.includes(t)&&(n.push([l,m]),1!==t&&2!==t||(c=!0))}}}return{reachable:c}}(e,a,s,i,o,[1,2,3]);return n||console.error(`[MapVal Reach] FAILED. Lift @(${a},${s}) isolated.`),n}function S(e,t,i){if(!e)return void console.log("[DEBUG MAP] null map.");console.log("--- DEBUG MAP GRID ---");let o="   ";for(let e=0;e<t;e++)o+=e%10==0?Math.floor(e/10):" ";console.log(o),o="   ";for(let e=0;e<t;e++)o+=e%10;console.log(o);for(let t=0;t<i;t++){if(!e[t]){console.log(`${t.toString().padStart(2," ")} [ROW UNDEF]`);continue}const i=e[t].map((e=>{switch(e){case 0:return"#";case 1:return".";case 2:return" ";case 3:return"L";default:return"?"}})).join("");console.log(`${t.toString().padStart(2," ")} ${i}`)}console.log("--- END DEBUG MAP GRID ---")}class M{constructor(e,t,i,o,a){this.tileSize=32,this.cols=40,this.rows=30,this.width=this.cols*this.tileSize,this.height=this.rows*this.tileSize,this.offsetX=0,this.offsetY=0,this.floorNumber=i,this.minFloor=o,this.maxFloor=a,this.map=null,this.rooms=[],this.books=[],this.liftPosition=null,this.renderer=new h(this.tileSize),this.renderer.floorNumber=this.floorNumber;const s={minRoomSize:5,maxRoomSize:10,corridorThickness:1,numRooms:12,maxRoomAttempts:200,booksPerMap:5,roomTypeWeights:{classroom:50,office:25,library:15,lab:10,storage:5,utility:10,gym:0}};try{const e={cols:this.cols,rows:this.rows,floorNumber:this.floorNumber,minFloor:this.minFloor,maxFloor:this.maxFloor,tileSize:this.tileSize,generationParams:s},{map:t,rooms:i,liftPosition:o}=function(e){const{cols:t,rows:i,floorNumber:o,minFloor:a,tileSize:s,generationParams:n}=e,l={...m,...n};l.floorNumber=o,l.roomTypeWeights.gym=o===a?60:0,o===a&&(d=null,console.log(`[MapGen Floor ${o}] Reset consistent lift coords for the first floor.`)),console.log(`[MapGen Floor ${o}] Starting map generation (${t}x${i})...`);const c=Array.from({length:i},(()=>Array(t).fill(0))),h=[];let g=null;if(function(e,t,i,o,a){const{minRoomSize:s,maxRoomSize:n,numRooms:l,maxRoomAttempts:c,roomTypeWeights:h}=a;let d=0;const m=[];for(const e in h){const t=h[e];if(t>0)for(let i=0;i<t;i++)m.push(e)}for(0===m.length&&(m.push("utility"),console.warn("[MapGen Rooms] No room types. Defaulting to 'utility'."));t.length<l&&d<c;){d++;const l=r(s,n),c=r(s,n),h=r(1,i-l-2),u=r(1,o-c-2),g={col:h,row:u,width:l,height:c,type:m[r(0,m.length-1)],id:`room_f${a.floorNumber}_${t.length+1}`,centerTileX:Math.floor(h+l/2),centerTileY:Math.floor(u+c/2),connected:!1,x:h,y:u};let f=!1;const p=2;for(const e of t)if(g.col<e.col+e.width+p&&g.col+g.width+p>e.col&&g.row<e.row+e.height+p&&g.row+g.height+p>e.row){f=!0;break}if(!f){t.push(g);for(let t=g.row;t<g.row+g.height;t++)for(let a=g.col;a<g.col+g.width;a++)t>=0&&t<o&&a>=0&&a<i&&(e[t][a]=2)}}t.length<l?console.warn(`[MapGen Rooms] Placed ${t.length}/${l} rooms.`):console.log(`[MapGen Rooms] Placed ${t.length} rooms.`)}(c,h,t,i,l),h.length<1){const e=`[MapGen Floor ${o}] CRITICAL: No rooms generated. Cannot place lift.`;throw console.error(e),new Error(e)}h.length>=2?function(e,t,i,o){if(t.length<2)return;console.log(`[MapGen Connect] Connecting ${t.length} rooms...`);const a=new Set([t[0].id]);let s=t.slice(1);for(;s.length>0;){let n=1/0,r=null,l=null,c=-1;for(let e=0;e<s.length;e++){const i=s[e];for(const o of t)if(a.has(o.id)){const t=i.centerTileX-o.centerTileX,a=i.centerTileY-o.centerTileY,s=t*t+a*a;s<n&&(n=s,r=i,l=o.id,c=e)}}if(!r||null===l){console.error("[MapGen Connect] Could not find next pair. Remaining:",s.map((e=>e.id)));break}{const n=t.find((e=>e.id===l));if(!n){console.error(`[MapGen Connect] Error finding connected room ${l}.`),s.splice(c,1);continue}u(e,n,r,i,o),a.add(r.id),s.splice(c,1)}}console.log(`[MapGen Connect] Finished. Connected: ${a.size}`)}(c,h,t,i):console.warn(`[MapGen Floor ${o}] Only 1 room generated. No corridors needed between rooms.`);try{const e=function(e,t,i,o,a,s,n,r){let l=n,c=null;if(o===a){if(console.log(`[MapGen F${o}] Finding initial IN-ROOM lift loc...`),l=function(e,t,i,o){if(console.log("  [MapGen FindLift V6] Searching for lift spot INSIDE a room..."),!o||0===o.length)return console.warn("  [MapGen FindLift V6] No rooms. Placement will fail."),null;const a=[];for(const s of o){const o=s.col+1,n=s.col+s.width-2,r=s.row+1,l=s.row+s.height-2;if(o<=n&&r<=l){for(let c=r;c<=l;c++)for(let r=o;r<=n;r++)if(2===e[c]?.[r]){const o=p(r,c,e,t,i);!o.isChokepoint&&o.openSides>=2&&a.push({tileX:r,tileY:c,room:s})}}else{const o=s.centerTileX,n=s.centerTileY;if(o>=s.col&&o<s.col+s.width&&n>=s.row&&n<s.row+s.height&&2===e[n]?.[o]){const r=p(o,n,e,t,i);!r.isChokepoint&&r.openSides>=1&&a.push({tileX:o,tileY:n,room:s})}}}if(a.length>0){const e=Math.floor(t/2),o=Math.floor(i/2);a.sort(((t,i)=>(t.tileX-e)**2+(t.tileY-o)**2-((i.tileX-e)**2+(i.tileY-o)**2)));const s=a[0];return console.log(`  [MapGen FindLift V6] Selected IN ROOM (${s.room.id}) @(${s.tileX},${s.tileY}).`),{tileX:s.tileX,tileY:s.tileY}}return console.warn("[MapGen FindLift V6] No suitable IN-ROOM location. Will fail."),null}(e,t,i,r),!l)throw new Error(`[MapGen F${o}] CRIT: No valid IN-ROOM lift loc on minFloor.`);console.log(`[MapGen F${o}] Established consistent IN-ROOM lift @(${l.tileX},${l.tileY})`),c=l}else if(!l)throw new Error(`[MapGen Lift] CRIT: Missing consistent lift coords for F${o}.`);const{tileX:h,tileY:d}=l;if(d<0||d>=i||h<0||h>=t)throw new Error(`[MapGen Lift] Coords (${h},${d}) out of bounds F${o}.`);const m=e[d]?.[h];0===e[d][h]&&(console.warn(`[MapGen F${o}] Lift loc (${h},${d}) is WALL. Forcing connection...`),y(e,h,d,t,i)||0!==e[d][h]||console.error(`[MapGen LiftConnect] FAILED to connect wall @(${h},${d}) & it REMAINED WALL.`)),e[d][h]=3;let u=null;for(const e of r)if(h>=e.col&&h<e.col+e.width&&d>=e.row&&d<e.row+e.height&&2===m){u=e,console.log(`  [MapGen Lift F${o}] Lift @(${h},${d}) is on TILE_ROOM_FLOOR within existing room ${e.id}.`);break}if(!u){const s=u?`Original tile was ${m}, not TILE_ROOM_FLOOR.`:"Not in existing room region";console.warn(`[MapGen F${o}] Lift @(${h},${d}) will use carved alcove. Reason: ${s}`),o===a&&2!==m&&console.error(`[MapGen F${o}] CRITICAL MISMATCH on minFloor! _findLiftPlacementLocation selected (${h},${d}) which was type ${m}, not TILE_ROOM_FLOOR. This indicates a flaw in _findLiftPlacementLocation.`);const n=3,l=Math.max(1,h-Math.floor(n/2)),c=Math.max(1,d-Math.floor(n/2)),g={col:l,row:c,width:Math.min(n,t-1-l),height:Math.min(n,i-1-c),type:"lift_alcove",id:`room_f${o}_liftalcove_${h}_${d}`,centerTileX:h,centerTileY:d,connected:!0,x:l,y:c};for(let o=g.row;o<g.row+g.height;o++)for(let a=g.col;a<g.col+g.width;a++)3!==e[o]?.[a]&&o>0&&o<i-1&&a>0&&a<t-1&&(e[o][a]=2);r.push(g),u=g}if(!u){const a=`[MapGen Lift F${o}] CRIT: Could NOT associate lift @(${h},${d}) with any room object even after alcove attempt.`;throw console.error(a),S(e,t,i),new Error(a)}const g={x:(h+.5)*s,y:(d+.5)*s,tileX:h,tileY:d,roomId:u.id};return console.log(`[MapGen F${o}] Placed lift @(${h},${d}) in room ${u.id}. World:(${g.x.toFixed(1)},${g.y.toFixed(1)})`),{position:g,coords:c||l}}(c,t,i,o,a,s,d,h);g=e.position,e.coords&&(d=e.coords)}catch(e){throw console.error(`[MapGen Floor ${o}] CRITICAL: Lift placement failed:`,e),new Error(`Lift placement failed on floor ${o}: ${e.message}`)}if(function(e,t,i){for(let o=0;o<t;o++)e[0][o]=0,e[i-1][o]=0;for(let o=0;o<i;o++)e[o][0]=0,e[o][t-1]=0}(c,t,i),g&&!w(c,g,t,i)){if(console.warn(`[MapValidation Floor ${o}] Lift at tile(${g.tileX}, ${g.tileY}) initially unreachable. Attempting final force connection.`),!y(c,g.tileX,g.tileY,t,i)||!w(c,g,t,i)){const e=`CRITICAL: Placed lift at tile(${g.tileX}, ${g.tileY}) is UNREACHABLE even after force connect! Generation failed.`;throw console.error(`[MapGen Floor ${o}] ${e}`),S(c,t,i),new Error(`Lift is unreachable on floor ${o}. Cannot proceed.`)}console.log(`[MapValidation Floor ${o}] Lift connection successful after second attempt.`)}else{if(!g)throw new Error(`Map generated without a valid lift position on floor ${o}.`);console.log(`[MapValidation Floor ${o}] Lift at tile(${g.tileX}, ${g.tileY}) is reachable.`)}return console.log(`[MapGen Floor ${o}] Map generation completed successfully.`),{map:c,rooms:h,liftPosition:g}}(e);this.map=t,this.rooms=i,this.liftPosition=o,this.renderer.resetColorCache(),this.placeBooksReliably(s.booksPerMap),null===this.floorNumber&&(console.log(`[ProcMap F${this.floorNumber}] Init complete. Lift@(${o?.tileX},${o?.tileY}). Rooms: ${this.rooms.length}`),this.logMapGrid())}catch(e){throw console.error(`[ProcMap F${this.floorNumber}] CRIT ERR during map gen/setup:`,e),e}}placeBooksReliably(e){this.books=[];const t=[],i=new Set;for(let e=0;e<this.rows;e++)for(let i=0;i<this.cols;i++){const o=this.map[e]?.[i],a=this.liftPosition&&e===this.liftPosition.tileY&&i===this.liftPosition.tileX;1!==o&&2!==o||a||t.push({r:e,c:i})}let o=0;for(;o<e&&t.length>0;){const e=Math.floor(Math.random()*t.length),{r:a,c:s}=t.splice(e,1)[0],r=`${s},${a}`;if((1===this.map[a]?.[s]||2===this.map[a]?.[s])&&!i.has(r)){const e=`book_f${this.floorNumber}_${o+1}`;this.books.push(new n((s+.5)*this.tileSize,(a+.5)*this.tileSize,e,this.tileSize)),i.add(r),o++}}}isWalkable(e,t){if(!this.map)return!1;const i=Math.floor(e/this.tileSize),o=Math.floor(t/this.tileSize);if(i<0||i>=this.cols||o<0||o>=this.rows)return!1;const a=this.map[o]?.[i];return 1===a||2===a||3===a}findRandomInitialSpawnPosition(e=null){if(!this.map)return;const t=[],i=e?{width:e.collisionBoxWidth,height:e.collisionBoxHeight}:{width:.6*this.tileSize,height:.8*this.tileSize},o=(e,t)=>{const o=(e+.5)*this.tileSize,a=(t+.5)*this.tileSize,s=this.map[t]?.[e],n=this.liftPosition&&t===this.liftPosition.tileY&&e===this.liftPosition.tileX;if(1!==s&&2!==s||n)return!1;const r=i.width/2,l=i.height/2,c=[{x:o-r,y:a-l},{x:o+r,y:a-l},{x:o-r,y:a+l},{x:o+r,y:a+l},{x:o,y:a-l},{x:o,y:a+l},{x:o-r,y:a},{x:o+r,y:a}];for(const e of c)if(!this.isWalkable(e.x,e.y))return!1;return!0};for(let e=1;e<this.rows-1;e++)for(let i=1;i<this.cols-1;i++)o(i,e)&&this.isTileOpenEnough(i,e,2,!0)&&t.push({r:e,c:i});if(0===t.length){console.warn(`[ProcMap F${this.floorNumber} Spawn] No ideal open spots found, checking all valid tiles.`);for(let e=0;e<this.rows;e++)for(let i=0;i<this.cols;i++)o(i,e)&&t.push({r:e,c:i})}if(0===t.length){console.error(`[ProcMap F${this.floorNumber} Spawn] CRITICAL: No suitable spawn tiles found after thorough check!`);for(const e of this.rooms)for(let t=0;t<e.height;t++)for(let i=0;i<e.width;i++){const o=e.y+t,a=e.x+i;if(2===this.map[o]?.[a])return console.warn(`[ProcMap F${this.floorNumber} Spawn] EMERGENCY FALLBACK to first room floor tile: (${a},${o})`),{x:(a+.5)*this.tileSize,y:(o+.5)*this.tileSize}}return}const{r:a,c:s}=t[Math.floor(Math.random()*t.length)];return console.log(`[ProcMap F${this.floorNumber} Spawn] Selected spawn tile: (${s},${a})`),{x:(s+.5)*this.tileSize,y:(a+.5)*this.tileSize}}isTileOpenEnough(e,t,i=2,o=!1){if(!this.map)return!1;let a=0;const s=[[0,-1],[0,1],[-1,0],[1,0]],n=[!1,!1,!1,!1];for(let i=0;i<s.length;i++){const o=e+s[i][0],r=t+s[i][1];if(o>=0&&o<this.cols&&r>=0&&r<this.rows){const e=this.map[r]?.[o];1!==e&&2!==e&&3!==e||(a++,n[i]=!0)}}return!(a<i||o&&2===a&&(n[0]&&n[1]&&!n[2]&&!n[3]||n[2]&&n[3]&&!n[0]&&!n[1]))}findNearestWalkableTile(e,t,i=8,o=!1,a=!1){if(!this.map)return null;const s=Math.floor(e/this.tileSize),n=Math.floor(t/this.tileSize),r=[1,2];if(s>=0&&s<this.cols&&n>=0&&n<this.rows){const e=this.map[n][s];if(r.includes(e)&&(!o||3!==e)&&this.isTileOpenEnough(s,n,2,a))return{x:(s+.5)*this.tileSize,y:(n+.5)*this.tileSize}}for(let e=1;e<=i;e++)for(let t=-e;t<=e;t++)for(let i=-e;i<=e;i++){if(Math.abs(i)<e&&Math.abs(t)<e)continue;const l=s+i,c=n+t;if(l<0||l>=this.cols||c<0||c>=this.rows)continue;const h=this.map[c]?.[l];if(r.includes(h)&&(!o||3!==h)&&this.isTileOpenEnough(l,c,2,a))return{x:(l+.5)*this.tileSize,y:(c+.5)*this.tileSize}}const l=[[s,n]],c=new Set([`${s},${n}`]),h=[1,2,3];for(;l.length>0;){const[e,t]=l.shift();for(const[i,s]of[[0,-1],[0,1],[-1,0],[1,0]]){const n=e+i,d=t+s,m=`${n},${d}`;if(n>=0&&n<this.cols&&d>=0&&d<this.rows&&!c.has(m)){const e=this.map[d]?.[n];if(c.add(m),r.includes(e)&&(!o||3!==e)&&this.isTileOpenEnough(n,d,2,a))return{x:(n+.5)*this.tileSize,y:(d+.5)*this.tileSize};h.includes(e)&&l.push([n,d])}}}return null}getRoomContainingTile(e,t){if(!this.rooms||0===this.rooms.length)return null;for(const i of this.rooms)if(e>=i.col&&e<i.col+i.width&&t>=i.row&&t<i.row+i.height){const o=this.map[t]?.[e];if(3===o||2===o&&"lift_alcove"!==i.type)return i;if("lift_alcove"===i.type&&3===o)return i}return null}getRoomCenter(e){return e?{x:(e.col+e.width/2)*this.tileSize,y:(e.row+e.height/2)*this.tileSize}:null}getSpawnPointInRoomOfLift(e,t,i=1){const o=this.getRoomContainingTile(e,t);if(!o)return null;const a=[{dx:0,dy:-1},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:0}],s=[];for(const i of a){const a=e+i.dx,n=t+i.dy;a>=o.col&&a<o.col+o.width&&n>=o.row&&n<o.row+o.height&&2===this.map[n]?.[a]&&this.isTileOpenEnough(a,n,2,!0)&&s.push({x:(a+.5)*this.tileSize,y:(n+.5)*this.tileSize})}return s.length>0?s[0]:this.getRoomCenter(o)}findNearbyUnansweredBook(e,t,i=.8*this.tileSize){if(!this.books||0===this.books.length)return null;let o=null,a=i*i;for(const i of this.books)if(!i.isCollected){const s=i.x-e,n=i.y-t,r=s*s+n*n;r<a&&(a=r,o=i)}return o}markBookAsCollected(e){if(!e||!this.books)return!1;const t=this.books.find((t=>t.id===e.id));return!(!t||t.isCollected||(t.isCollected=!0,0))}findNearbyLift(e,t,i=.7*this.tileSize){if(!this.liftPosition)return null;const o=e-this.liftPosition.x,a=t-this.liftPosition.y;return o*o+a*a<i*i?this.liftPosition:null}getLiftPosition(){return this.liftPosition}draw(e,t=null){this.map&&this.renderer&&this.renderer.draw(e,{map:this.map,rooms:this.rooms,books:this.books,liftPosition:this.liftPosition,offsetX:this.offsetX,offsetY:this.offsetY,cols:this.cols,rows:this.rows,tileSize:this.tileSize},t)}logMapGrid(){if(!this.map)return void console.log(`[ProcMap F${this.floorNumber}] Map grid N/A.`);console.log(`--- Map Grid F${this.floorNumber} (${this.cols}x${this.rows}) ---`);let e="   ";for(let t=0;t<this.cols;t++)e+=t%10==0?Math.floor(t/10):" ";console.log(e),e="   ";for(let t=0;t<this.cols;t++)e+=t%10;console.log(e);for(let e=0;e<this.rows;e++){const t=e.toString().padStart(2," "),i=this.map[e].map((e=>{switch(e){case 0:return"#";case 1:return".";case 2:return" ";case 3:return"L";default:return"?"}})).join("");console.log(`${t} ${i}`)}this.liftPosition?console.log(`Lift tile map[${this.liftPosition.tileY}][${this.liftPosition.tileX}]: ${this.map[this.liftPosition.tileY]?.[this.liftPosition.tileX]}. Reported @(${this.liftPosition.tileX},${this.liftPosition.tileY})`):console.log("Lift N/A."),console.log(`--- End Map Grid F${this.floorNumber} ---`)}}class v{constructor(e=1,t=3){e>=t?(console.warn(`Level constructor: minFloor (${e}) must be less than maxFloor (${t}). Using defaults 1 and 3.`),this.minFloor=1,this.maxFloor=3):(this.minFloor=e,this.maxFloor=t),this.currentFloor=this.minFloor,this.currentMap=null,this.tileSize=32}async loadFloor(e,t,i){if(e<this.minFloor||e>this.maxFloor){const t=`Attempted to load invalid floor: ${e}. Allowed range: [${this.minFloor}-${this.maxFloor}]`;throw console.error(`[Level] ${t}`),new Error(t)}console.log(`[Level] Loading floor ${e}...`),this.currentFloor=e;try{if(this.currentMap=new M(t,i,this.currentFloor,this.minFloor,this.maxFloor),!(this.currentMap.tileSize&&this.currentMap.map&&this.currentMap.books&&this.currentMap.getLiftPosition()))throw new Error("[Level] ProceduralMap instance is missing essential properties after creation (tileSize, map, books, or liftPosition).");this.tileSize=this.currentMap.tileSize;const o=this.currentMap.getLiftPosition();console.log(`  [Level] Map generated for floor ${this.currentFloor}. TileSize: ${this.tileSize}. Lift at tile(${o.tileX}, ${o.tileY}).`),console.log(`[Level] Floor ${e} loaded successfully. Map size: ${this.currentMap.cols}x${this.currentMap.rows}. ${this.currentMap.books.length} books placed.`)}catch(t){throw console.error(`[Level] CRITICAL FAILURE loading floor ${e}: Failed to create or validate ProceduralMap:`,t),this.currentMap=null,new Error(`Map generation/validation failed for floor ${e}. ${t.message||t}`)}return Promise.resolve()}getCurrentBooks(){return this.currentMap?this.currentMap.books:[]}}class b{constructor(e){this.game=e,this.canvas=null,this.ctx=null}initializeCanvas(){if(this.canvas=document.getElementById("game-canvas"),!this.canvas)throw new Error("[Renderer] Canvas 'game-canvas' not found!");if(this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("[Renderer] Failed to get 2D context.");return this.ctx.imageSmoothingEnabled=!1,this.resizeCanvas(),console.log("[Renderer] Canvas initialized."),{canvas:this.canvas,ctx:this.ctx}}resizeCanvas(){this.canvas&&(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.game.character&&this.game.level?.currentMap&&this.centerCameraOnCharacter(),console.log(`[Renderer] Canvas resized to ${this.canvas.width}x${this.canvas.height}`))}centerCameraOnCharacter(){const{character:e,level:t,canvas:i}=this.game;e&&t?.currentMap&&i&&(t.currentMap.offsetX=Math.floor(i.width/2-e.x),t.currentMap.offsetY=Math.floor(i.height/2-e.y))}drawFrame(){if(!this.ctx||!this.canvas)return;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const e=this.game.level?.currentMap,t=this.game.character;e&&e.draw(this.ctx,this.game.bookImage),t&&e&&t.draw(e.offsetX,e.offsetY)}drawWinScreen(){this.ctx&&this.canvas&&(this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle="lime",this.ctx.font='clamp(32px, 8vw, 48px) "Press Start 2P", cursive, Arial, sans-serif',this.ctx.fillText("ZWYCIĘSTWO!",this.canvas.width/2,this.canvas.height/2-80),this.ctx.fillStyle="white",this.ctx.font="clamp(24px, 5vw, 32px) Arial, sans-serif",this.ctx.fillText(`Zebrano wszystkie ${this.game.targetBooksToWin} książki!`,this.canvas.width/2,this.canvas.height/2),this.ctx.font="clamp(18px, 4vw, 24px) Arial, sans-serif",this.ctx.fillText("Uniwersytet uratowany!",this.canvas.width/2,this.canvas.height/2+60),this.ctx.font="clamp(14px, 3vw, 18px) Arial, sans-serif",this.ctx.fillStyle="#ccc",this.ctx.fillText("(Odśwież stronę, aby zagrać ponownie)",this.canvas.width/2,this.canvas.height-50))}}const C=null;class I{constructor(e){this.game=e,this.handleAnswer=this.handleAnswer.bind(this),this.handleFloorSelection=this.handleFloorSelection.bind(this)}update(e){this.game.gameState===i.PLAYING&&this.updatePlayingState(e)}updatePlayingState(e){const t=this.game.character;if(!this.game.level?.currentMap||!t||!this.game.inputManager)return;const{moved:o}=this.handleMovement();t?.updateAnimation&&t.updateAnimation(e),o||this.game.gameState!==i.PLAYING||this.handleInteractions()}handleMovement(){const e=this.game.character,t=this.game.level.currentMap,i=this.game.inputManager;if(!e||!t||!i)return{moved:!1};const o=i.getInputDirection();let a=o.x*e.speed,n=o.y*e.speed,r=0,l=0,c=!1;if(0!==a||0!==n){const t=0!==a&&!this.checkCollision(e.x+a,e.y),i=0!==n&&!this.checkCollision(e.x,e.y+n);t&&(r=a),i&&(l=n),0!==a&&0!==n&&this.checkCollision(e.x+a,e.y+n)&&(t&&!i?l=0:i&&!t?r=0:t||i||(r=0,l=0)),0===r&&0===l||(e.x+=r,e.y+=l,c=!0,Math.abs(r)>=Math.abs(l)?0!==r&&(e.currentDirection=r>0?s.Direction.RIGHT:s.Direction.LEFT):0!==l&&(e.currentDirection=l>0?s.Direction.DOWN:s.Direction.UP))}return e.isMoving=c,{moved:c}}checkCollision(e,t){const i=this.game.level?.currentMap,o=this.game.character;if(!i||!o)return!0;const a=o.getCollisionBox(e,t),s=[{x:a.left,y:a.top},{x:a.right,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:e,y:a.top},{x:e,y:a.bottom},{x:a.left,y:t+o.renderSize*o.collisionBoxFeetOffsetRatio},{x:a.right,y:t+o.renderSize*o.collisionBoxFeetOffsetRatio}];for(const e of s)if(!i.isWalkable(e.x,e.y))return!0;return!1}handleInteractions(){const e=this.game.level?.currentMap,t=this.game.character;if(!e||!t||this.game.gameState!==i.PLAYING)return;const o=e.findNearbyUnansweredBook(t.x,t.y);o?this.initiateQuestion(o):this.game.liftCooldownActive||e.findNearbyLift(t.x,t.y)&&this.initiateFloorSelection()}initiateQuestion(e){if(this.game.gameState!==i.PLAYING)return;if(this.game.setGameState(i.ASKING_QUESTION),this.game.character&&(this.game.character.isMoving=!1),this.game.currentBookTarget=e,0===this.game.availableQuestions.length&&(this.game.availableQuestions=[...o],0===this.game.availableQuestions.length))return a.flashMessage("Brak pytań!","error"),this.game.setGameState(i.PLAYING),void(this.game.currentBookTarget=null);const t=Math.floor(Math.random()*this.game.availableQuestions.length);this.game.currentQuestionData=this.game.availableQuestions.splice(t,1)[0],a.showQuestion(this.game.currentQuestionData)}handleAnswer(e){const{gameState:t,currentQuestionData:o,currentBookTarget:s,level:n}=this.game;if(t!==i.ASKING_QUESTION||!o||!s)return a.hideQuestion(),this.game.currentBookTarget=null,this.game.currentQuestionData=null,void(this.game.gameState!==i.GAME_OVER&&this.game.setGameState(i.PLAYING));if(e===o.correctAnswer)if(a.flashMessage("Prawidłowo!","success",1500),n?.currentMap?.markBookAsCollected(s)){if(this.game.totalBooksCollectedGlobally++,a.updateScore(this.game.totalBooksCollectedGlobally,this.game.targetBooksToWin),this.game.totalBooksCollectedGlobally>=this.game.targetBooksToWin)return a.hideQuestion(),void this.game._setGameOver(!0)}else a.flashMessage("Błąd zbierania!","error");else a.flashMessage("Nieprawidłowa!","error"),this.game.availableQuestions.push(o);a.hideQuestion(),this.game.currentBookTarget=null,this.game.currentQuestionData=null,this.game.gameState!==i.GAME_OVER&&this.game.setGameState(i.PLAYING)}initiateFloorSelection(){this.game.gameState!==i.PLAYING||this.game.liftCooldownActive||(this.game.setGameState(i.SELECTING_FLOOR),this.game.character&&(this.game.character.isMoving=!1),a.showFloorSelectionUI(this.game.level.minFloor,this.game.level.maxFloor,this.game.level.currentFloor))}handleFloorSelection(e){this.game.gameState===i.SELECTING_FLOOR?(a.hideFloorSelectionUI(),e===this.game.level.currentFloor||e<this.game.level.minFloor||e>this.game.level.maxFloor?this.game.setGameState(i.PLAYING):this.handleLiftTransition(e).catch((e=>{this.game._handleFatalError(`Błąd przejścia: ${e.message}`)}))):a.hideFloorSelectionUI()}async handleLiftTransition(e){const t=this.game,o=this.game.level?.currentFloor===C||e===C;if(o&&console.log(`[GM F${e} LiftTrans] Start. Cooldown:${t.liftCooldownActive}`),t.liftCooldownActive&&t.gameState!==i.SELECTING_FLOOR)o&&console.warn(`[GM F${e} LiftTrans] Aborted: Cooldown or invalid state (${t.gameState})`);else{t.gameState===i.SELECTING_FLOOR?t.setGameState(i.TRANSITIONING):t.gameState!==i.TRANSITIONING&&(console.warn(`[GM F${e} LiftTrans] Unexpected state ${t.gameState}. Forcing TRANSITIONING.`),t.setGameState(i.TRANSITIONING)),t.character&&(t.character.isMoving=!1),a.hideQuestion(),a.hideFloorSelectionUI(),t.liftCooldownActive=!0,a.flashMessage(`Przejście na piętro ${e}...`,"info",1800);try{await t.level.loadFloor(e,t.canvas.width,t.canvas.height);const i=t.level.currentMap;if(!i)throw new Error(`Map instance null for F${e}.`);const a=i.getLiftPosition();if(!a)throw new Error(`No lift pos data on F${e}!`);o&&console.log(`  [GM F${e} LiftTrans] Lift @(${a.tileX},${a.tileY})`);let n=null;const r=i.getRoomContainingTile(a.tileX,a.tileY);if(r?(o&&console.log(`  [GM F${e} LiftTrans] Lift in room ${r.id||"N/A"}. Spawning center.`),n=i.getRoomCenter(r),n||(console.error(`  [GM F${e} LiftTrans] CRIT: getRoomCenter null for room ${r.id||"N/A"}. Fallback.`),n=i.getSpawnPointInRoomOfLift(a.tileX,a.tileY,1))):(console.error(`  [GM F${e} LiftTrans] CRIT: Lift @(${a.tileX},${a.tileY}) NOT in any room! Fallback near lift.`),n=i.getSpawnPointInRoomOfLift(a.tileX,a.tileY,1)||i.findNearestWalkableTile(a.x,a.y,3,!0,!1)),n||(n={x:a.x,y:a.y}),!n)throw new Error(`PANIC: No spawn pos for F${e}.`);t.character.x=n.x,t.character.y=n.y,o&&console.log(`  [GM F${e} LiftTrans] Initial land (pre-nudge):(${t.character.x.toFixed(1)},${t.character.y.toFixed(1)})`),t.character.currentDirection=s.Direction.DOWN,t.character.isMoving=!1,this.ensureCharacterIsOnWalkableTile(!1),o&&console.log(`  [GM F${e} LiftTrans] Final pos (post-nudge):(${t.character.x.toFixed(1)},${t.character.y.toFixed(1)})`),t.renderer?.centerCameraOnCharacter(),t.startLiftCooldownTimer()}catch(o){console.error(`[GM F${e} LiftTrans] Error:`,o),t.liftCooldownActive=!1,t.gameState!==i.TRANSITIONING&&t.gameState!==i.SELECTING_FLOOR||t.setGameState(i.PLAYING),this.game._handleFatalError(`Transition error to F${e}: ${o.message||o}`)}}}ensureCharacterIsOnWalkableTile(e=!1){const t=this.game.character,i=this.game.level?.currentMap;if(!t||!i)return;const o=Math.floor(t.x/i.tileSize),a=Math.floor(t.y/i.tileSize),s=o>=0&&o<i.cols&&a>=0&&a<i.rows?i.map[a]?.[o]:0,n=3===s,r=i.isWalkable(t.x,t.y)&&(!n||e),l=this.checkCollision(t.x,t.y),c=l||!r,h=this.game.level?.currentFloor===C;if(c){h&&console.warn(`[GM F${this.game.level.currentFloor} AntiStuck] Char@(${t.x.toFixed(1)},${t.y.toFixed(1)}) tile ${s}(${o},${a}) needs nudge. Collide:${l},SafeStand:${r}(allowLift:${e})`);let c=i.findNearestWalkableTile(t.x,t.y,8,!0,!0);if(c||(h&&console.warn("  [AntiStuck] Initial (avoidNarrow) failed. Retrying allowNarrow..."),c=i.findNearestWalkableTile(t.x,t.y,8,!0,!1)),c||!n||e||(h&&console.warn("  [AntiStuck] AllowNarrow failed. Trying any spot incl. lift..."),c=i.findNearestWalkableTile(t.x,t.y,3,!1,!1)),c)h&&console.log(`  [AntiStuck] Nudging to safe:(${c.x.toFixed(1)},${c.y.toFixed(1)})`),t.x=c.x,t.y=c.y,this.game.renderer?.centerCameraOnCharacter();else{h&&console.error("  [AntiStuck] CRIT: No safe nudge spot. Random map spawn...");const e=i.findRandomInitialSpawnPosition();e?(h&&console.warn(`  [AntiStuck] Emergency random:(${e.x.toFixed(1)},${e.y.toFixed(1)})`),t.x=e.x,t.y=e.y,this.game.renderer?.centerCameraOnCharacter()):(h&&console.error("  [AntiStuck] EVEN RANDOM SPAWN FAILED! Unrecoverable."),this.game._handleFatalError("Anti-Stuck system failed: No spawnable tiles found."))}}}}const z={track1:e.p+"assets/audio/back126c4c9e8849503fadb12.mp3",track2:e.p+"assets/audio/back2ddba92be3cd8ac98633a.mp3",track3:e.p+"assets/audio/back381530afe1194de9f2bb1.mp3"},k=["track1","track2","track3"];class E{constructor(){this.musicVolume=.5,this.currentMusicElement=null,this.currentTrackKey=null,this.isMusicPlaying=!1;const e=localStorage.getItem("musicVolume");null!==e&&(this.musicVolume=parseFloat(e)),this.audioElements={},this._preloadTracks()}_preloadTracks(){console.log("[AudioManager] Preloading tracks from imported sources...");for(const e in z)if(z.hasOwnProperty(e)){const t=z[e],i=new Audio(t);i.preload="auto",this.audioElements[e]=i,console.log(`  Preloaded ${e} from ${t}`)}}setMusicVolume(e){this.musicVolume=Math.max(0,Math.min(1,e)),this.currentMusicElement&&(this.currentMusicElement.volume=this.musicVolume),localStorage.setItem("musicVolume",this.musicVolume.toString()),console.log(`[AudioManager] Music volume set to: ${this.musicVolume}`)}getMusicVolume(){return this.musicVolume}playMusic(e,t=!0){if(!this.audioElements[e]){if(console.warn(`[AudioManager] Track "${e}" not found or not preloaded.`),!z[e])return void console.error(`[AudioManager] Source for track "${e}" not defined in MUSIC_SOURCES.`);this.audioElements[e]=new Audio(z[e])}this.isMusicPlaying&&this.currentTrackKey===e||(this.stopMusic(),this.currentMusicElement=this.audioElements[e],this.currentMusicElement.volume=this.musicVolume,this.currentMusicElement.loop=t,this.currentTrackKey=e,this.currentMusicElement.play().then((()=>{this.isMusicPlaying=!0,console.log(`[AudioManager] Playing music: ${e} (Volume: ${this.currentMusicElement.volume})`)})).catch((t=>{console.error(`[AudioManager] Error playing "${e}":`,t),console.error(`  Playback failure details: userInteracted (check Menu.js), document.hasFocus(): ${document.hasFocus()}`),this.isMusicPlaying=!1,this.currentMusicElement=null,this.currentTrackKey=null})))}stopMusic(){this.currentMusicElement&&(this.currentMusicElement.pause(),this.currentMusicElement.currentTime=0,this.isMusicPlaying=!1,console.log(`[AudioManager] Stopped music: ${this.currentTrackKey}`))}changeTrackForFloor(e){const t=Math.max(0,e-1)%k.length,i=k[t];i?(console.log(`[AudioManager] Floor ${e} -> Music track: ${i}`),this.playMusic(i)):console.warn(`[AudioManager] No track found for floor index ${t}.`)}startInitialMusic(e=1){console.log("[AudioManager] Attempting to start initial music..."),this.changeTrackForFloor(e)}}const L=e.p+"assets/images/character_red9229918d5325fcdf2e6e.png",T=e.p+"assets/images/character_blue7b9b140f7eb486e8a968.png",$=e.p+"assets/images/character_yellowff53afbc44f903d97313.png",x=e.p+"assets/images/character_green007c77c97eef8cbb1e94.png",F=e.p+"assets/images/booka54431ef16a38389c12e.png";class G{static CREATOR_NAMES=["Rafał","Dima","Venia","Kacper"];static CLASS_ATTENDING_INFO="Klasa 2P2T / Projektowanie stron internetowych";constructor(e){if(console.log(`[Game] Initializing with character: ${e}`),!e){const e="[Game] CRITICAL: Game initialized without a characterColor!";throw console.error(e),alert("Game cannot start: no character was selected."),new Error(e)}this.characterColor=e,this._gameState=i.IDLE,this.isRunning=!1,this.totalBooksCollectedGlobally=0,this.targetBooksToWin=15,this.availableQuestions=[],this.currentBookTarget=null,this.currentQuestionData=null,this.liftCooldownActive=!1,this.liftCooldownTimer=null,this.canvas=null,this.ctx=null,this.character=null,this.level=null,this.inputManager=null,this.renderer=null,this.gameplayManager=null,this.audioManager=null,this.sprites={red:L,blue:T,yellow:$,green:x},this.bookImage=null,this.gameLoop=this.gameLoop.bind(this),this._handleFatalError=this._handleFatalError.bind(this),this._boundKeyDownHandler=null,this._boundKeyUpHandler=null;try{this._initializeCoreComponents(),this.audioManager=new E,console.log("[Game] AudioManager created."),this.gameplayManager=new I(this),console.log("[Game] GameplayManager created."),this.renderer=new b(this);const{canvas:e,ctx:t}=this.renderer.initializeCanvas();this.canvas=e,this.ctx=t,console.log("[Game] Renderer and Canvas initialized."),a.setGameplayManager(this.gameplayManager),a.initializeUI(this.inputManager),console.log("[Game] UIManager for in-game UI initialized."),this._addEventListeners(),console.log("[Game] Core components initialized. Waiting for triggerGameStart() from Menu.")}catch(e){console.error("[Game] Synchronous core initialization failed:",e),alert(`Critical initialization error: ${e.message}. Game cannot start.`)}}get gameState(){return this._gameState}setGameState(e){this._gameState!==e&&(console.log(`[Game State] ${this._gameState} -> ${e}`),this._gameState=e)}_initializeCoreComponents(){this.inputManager=new t,this.level=new v(1,3)}_addEventListeners(){window.addEventListener("resize",(()=>this.renderer?.resizeCanvas()))}async triggerGameStart(){if(this.gameState!==i.IDLE)return void console.warn(`[Game] triggerGameStart called but game state is ${this.gameState}. Aborting.`);console.log(`[Game] triggerGameStart received for character: ${this.characterColor}. Starting asset loading...`);const e=a.getLoadingOverlay();e&&e.classList.add("visible");try{await this._loadAssetsAndThenStartLogic(),console.log("[Game] Game start sequence completed successfully.")}catch(t){console.error("[Game] Error during _loadAssetsAndThenStartLogic (from triggerGameStart):",t),e&&e.classList.remove("visible"),this.gameState!==i.GAME_OVER&&this._handleFatalError(`Game start process failed: ${t.message}`)}}async _loadAssetsAndThenStartLogic(){const e=a.getLoadingOverlay();try{this.setGameState(i.LOADING),e&&!e.classList.contains("visible")&&e.classList.add("visible"),await this._loadAssets(),await this._startGameLogic(),e&&e.classList.remove("visible")}catch(t){throw console.error("[Game] _loadAssetsAndThenStartLogic failed:",t),e&&e.classList.remove("visible"),this._handleFatalError(`Asset loading or game logic start error: ${t.message}`),t}}async _loadAssets(){console.log("[Game] Loading assets...");const e=[],t=this.characterColor||"red",i=this.sprites[t];if(!i)throw new Error(`Sprite path for character color "${t}" is undefined.`);if(console.log(`[Game] Using sprite: ${i} for character ${t}`),!this.ctx)throw new Error("Canvas context not available for Character creation.");this.character=new s(this.ctx,i,{speed:3,frameSize:32,scale:2,animationSpeed:150,frameCount:4}),e.push(new Promise(((e,t)=>{this.character.sprite.onload=()=>{console.log(`  [Assets] Character sprite loaded: ${i}`),e()},this.character.sprite.onerror=e=>t(new Error(`Failed to load character sprite: ${i}. Details: ${e.message||e}`))}))),F?(this.bookImage=new Image,this.bookImage.src=F,e.push(new Promise((e=>{this.bookImage.onload=()=>{console.log(`  [Assets] Book image loaded: ${F}`),e()},this.bookImage.onerror=()=>{console.warn(` [Assets] Failed to load book image: ${F}. Using fallback.`),this.bookImage=null,e()}})))):(console.warn("[Assets] No book sprite. Fallback rendering will be used."),this.bookImage=null),await Promise.all(e),console.log("[Game] All visual assets loaded successfully.")}async _startGameLogic(){if(console.log("[Game] Starting core game logic..."),!(this.level&&this.character&&this.canvas&&this.renderer&&this.gameplayManager&&this.audioManager))throw new Error("Cannot start game - essential components missing.");this.setGameState(i.LOADING_LEVEL);try{await this.level.loadFloor(this.level.minFloor,this.canvas.width,this.canvas.height);const e=this.level.currentMap;if(!e)throw new Error("Failed to load initial map.");const t=e.findRandomInitialSpawnPosition(this.character);if(!t)throw new Error("Failed to find a valid starting position on the map!");this.character.x=t.x,this.character.y=t.y,this.character.currentDirection=s.Direction.DOWN,this.character.isMoving=!1,this.gameplayManager.ensureCharacterIsOnWalkableTile(!1),this.totalBooksCollectedGlobally=0,this.availableQuestions=[...o],this.liftCooldownActive=!1,clearTimeout(this.liftCooldownTimer),this.liftCooldownTimer=null,this.currentBookTarget=null,this.currentQuestionData=null,this.renderer.centerCameraOnCharacter(),a.updateScore(this.totalBooksCollectedGlobally,this.targetBooksToWin),a.showGameUI(),this._boundKeyDownHandler=this.handleKeyDown.bind(this),this._boundKeyUpHandler=this.handleKeyUp.bind(this),window.addEventListener("keydown",this._boundKeyDownHandler),window.addEventListener("keyup",this._boundKeyUpHandler),this.audioManager.startInitialMusic(this.level.currentFloor),console.log(`[Game] Initial music started for floor ${this.level.currentFloor}`),this.setGameState(i.PLAYING),a.startTimer(),this.isRunning||(this.isRunning=!0,requestAnimationFrame(this.gameLoop),console.log("[Game] Game logic started. Game loop is running."))}catch(e){throw console.error("[Game] Error during _startGameLogic:",e),this._handleFatalError(`Level start process error: ${e.message}`),e}}_setGameOver(e=!0){this.gameState!==i.GAME_OVER&&(console.log(`[Game] Game Over. Win: ${e}`),this.setGameState(i.GAME_OVER),this.isRunning=!1,this.character&&(this.character.isMoving=!1),clearTimeout(this.liftCooldownTimer),this.audioManager&&this.audioManager.stopMusic(),this._boundKeyDownHandler&&window.removeEventListener("keydown",this._boundKeyDownHandler),this._boundKeyUpHandler&&window.removeEventListener("keyup",this._boundKeyUpHandler),this._boundKeyDownHandler=null,this._boundKeyUpHandler=null,a.stopTimer(e),a.showGameOverScreen(e,G.CREATOR_NAMES,G.CLASS_ATTENDING_INFO))}stopGame(){console.log("[Game] Explicit stopGame requested."),this.gameState!==i.GAME_OVER?this._setGameOver(!1):console.log("[Game] stopGame called, but game is already over.")}_handleFatalError(e,t=!0){console.error("[Game] FATAL ERROR:",e),t&&this.gameState!==i.GAME_OVER&&a.flashMessage(`FATAL ERROR: ${e}`,"error",15e3),this.gameState!==i.GAME_OVER&&this._setGameOver(!1)}handleKeyDown(e){if(this.gameState!==i.PLAYING||!this.inputManager)return;let t=!1;const o=e.key.toLowerCase();["arrowup","w"].includes(o)?(this.inputManager.setKey("up",!0),t=!0):["arrowdown","s"].includes(o)?(this.inputManager.setKey("down",!0),t=!0):["arrowleft","a"].includes(o)?(this.inputManager.setKey("left",!0),t=!0):["arrowright","d"].includes(o)&&(this.inputManager.setKey("right",!0),t=!0),t&&e.preventDefault()}handleKeyUp(e){if(!this.inputManager)return;const t=e.key.toLowerCase();["arrowup","w"].includes(t)?this.inputManager.setKey("up",!1):["arrowdown","s"].includes(t)?this.inputManager.setKey("down",!1):["arrowleft","a"].includes(t)?this.inputManager.setKey("left",!1):["arrowright","d"].includes(t)&&this.inputManager.setKey("right",!1)}gameLoop(e){this.isRunning&&this.gameState!==i.GAME_OVER&&(this.gameplayManager?.update(e),this.renderer?.centerCameraOnCharacter(),this.renderer?.drawFrame(),requestAnimationFrame(this.gameLoop))}startLiftCooldownTimer(){clearTimeout(this.liftCooldownTimer),console.log("[Game] Starting lift cooldown: 2000ms."),this.liftCooldownTimer=setTimeout((()=>{this.liftCooldownActive=!1,this.liftCooldownTimer=null,this.gameState===i.TRANSITIONING?(this.setGameState(i.PLAYING),a.flashMessage(`Arrived at floor ${this.level?.currentFloor}`,"success",1500)):console.warn(`[GameTimer] Lift cooldown ended, but state is ${this.gameState}. No state change.`)}),2e3)}}let A=null;class P{constructor(e){this.characterImageSources=e,this.selectedCharacter=null,this.userInteracted=!1,this.overlay=null,this.audioManagerInstance=null,console.log("[Menu] Constructor called. Initializing elements..."),this.initializeElements(),this.characterPanel&&this.characterGrid?this.setupCharacterImages():console.error("[Menu Constructor] CRITICAL: characterPanel or characterGrid is null AFTER initializeElements. Cannot setup images."),console.log("[Menu] Adding event listeners..."),this.addEventListeners(),this.show(),console.log("[Menu] Instance created and displayed.")}setAudioManager(e){if(this.audioManagerInstance=e,console.log("[Menu] AudioManager instance received in Menu."),this.musicVolume&&this.audioManagerInstance)this.musicVolume.value=100*this.audioManagerInstance.getMusicVolume();else if(this.musicVolume){const e=localStorage.getItem("musicVolume");this.musicVolume.value=null!==e?100*parseFloat(e):50}}initializeElements(){if(this.menuContainer=document.querySelector(".menu-container"),!this.menuContainer)return void console.error("[Menu Init] CRITICAL: .menu-container not found!");this.settingsButton=this.menuContainer.querySelector(".settings-button"),this.playButton=this.menuContainer.querySelector(".play-button"),this.characterButton=this.menuContainer.querySelector(".character-button"),this.playButton?this.playButton.disabled=!0:console.warn("[Menu Init] .play-button not found."),this.characterButton||console.warn("[Menu Init] .character-button not found."),this.settingsButton||console.warn("[Menu Init] .settings-button not found."),this.settingsPanel=document.querySelector(".settings-panel"),this.settingsPanel?(this.settingsPanel.parentNode!==document.body&&this.settingsPanel.parentNode!==this.menuContainer&&document.body.appendChild(this.settingsPanel.parentNode.removeChild(this.settingsPanel)),this.musicVolume=this.settingsPanel.querySelector("#music-volume"),this.sfxVolume=this.settingsPanel.querySelector("#sfx-volume"),this.closeSettingsButton=this.settingsPanel.querySelector(".panel-close-button"),this.musicVolume||console.warn("[Menu Init] #music-volume slider not found in settings panel."),this.closeSettingsButton||console.warn("[Menu Init] .panel-close-button not found in settings panel.")):console.warn("[Menu Init] .settings-panel not found."),this.characterPanel=document.querySelector(".character-panel"),this.characterPanel?(this.characterPanel.parentNode!==document.body&&this.characterPanel.parentNode!==this.menuContainer&&document.body.appendChild(this.characterPanel.parentNode.removeChild(this.characterPanel)),this.characterGrid=this.characterPanel.querySelector(".character-grid"),this.closeCharacterPanelButton=this.characterPanel.querySelector(".panel-close-button"),this.characterGrid||console.error("[Menu Init] CRITICAL: .character-grid not found in character panel!"),this.closeCharacterPanelButton||console.warn("[Menu Init] .panel-close-button not found in character panel.")):console.error("[Menu Init] CRITICAL: .character-panel not found!");let e=this.menuContainer.querySelector(".main-menu-buttons");this.selectedCharacterDisplay=e?e.querySelector(".selected-character-display"):null,this.selectedCharacterDisplay||(this.selectedCharacterDisplay=document.createElement("div"),this.selectedCharacterDisplay.className="selected-character-display",this.playButton&&this.playButton.parentNode?this.playButton.parentNode.insertBefore(this.selectedCharacterDisplay,this.playButton):e?e.insertBefore(this.selectedCharacterDisplay,e.children[1]||null):this.menuContainer.appendChild(this.selectedCharacterDisplay)),this.updateSelectedCharacterDisplay()}setupCharacterImages(){if(!this.characterPanel||!this.characterGrid)return void console.warn("[Menu setupCharacterImages] Character panel or grid not found.");if(!this.characterImageSources||0===Object.keys(this.characterImageSources).length)return void console.warn("[Menu setupCharacterImages] No character image sources provided.");const e=this.characterGrid.querySelectorAll(".character-card");0!==e.length?e.forEach((e=>{const t=e.dataset.character,i=e.querySelector(".character-preview img");i&&this.characterImageSources[t]?i.src=this.characterImageSources[t]:i&&(console.warn(`[Menu setupCharacterImages] Image element found, but no source for character: ${t}`),i.alt=`${t} preview not available`)})):console.warn("[Menu setupCharacterImages] No character cards found in the grid.")}handleFirstInteraction(){this.userInteracted||(this.userInteracted=!0,console.log("[Menu] First user interaction recorded."))}addEventListeners(){const e=(e,t,i)=>{e&&e.addEventListener(t,(e=>{this.handleFirstInteraction(),i.call(this,e)}))};if(e(this.settingsButton,"click",this.toggleSettings),e(this.playButton,"click",this.startGame),e(this.characterButton,"click",this.openCharacterModal),this.closeSettingsButton?this.closeSettingsButton.addEventListener("click",(()=>this.closeSettings())):this.settingsPanel&&console.warn("[Menu addEventListeners] Close button for settings panel not found."),this.closeCharacterPanelButton?this.closeCharacterPanelButton.addEventListener("click",(()=>this.closeCharacterModal())):this.characterPanel&&console.warn("[Menu addEventListeners] Close button for character panel not found."),this.musicVolume){if(!this.audioManagerInstance){const e=localStorage.getItem("musicVolume");this.musicVolume.value=null!==e?100*parseFloat(e):50}this.musicVolume.addEventListener("input",(e=>{this.handleFirstInteraction();const t=parseFloat(e.target.value)/100;this.audioManagerInstance?(this.audioManagerInstance.setMusicVolume(t),console.log(`[Menu] Music volume changed via slider to: ${t}`)):(localStorage.setItem("musicVolume",t.toString()),console.warn("[Menu] Music volume slider changed, AudioManager not available. Saved to localStorage."))}))}this.sfxVolume,this.characterGrid&&this.characterGrid.addEventListener("click",(e=>{const t=e.target.closest(".character-card");t&&this.characterPanel&&this.characterPanel.classList.contains("visible")&&(this.handleFirstInteraction(),this.selectCharacter(t))}))}openCharacterModal(){this.characterPanel?(this.characterPanel.classList.add("visible"),this.settingsPanel?.classList.contains("visible")&&this.closeSettings(),this._ensureOverlay().classList.add("visible")):console.error("Character panel not found.")}closeCharacterModal(){this.characterPanel?.classList.remove("visible"),this.overlay?.classList.remove("visible")}selectCharacter(e){this.characterGrid&&e?.dataset?.character&&(this.selectedCharacter=e.dataset.character,this.characterGrid.querySelectorAll(".character-card").forEach((e=>e.classList.remove("selected"))),e.classList.add("selected"),this.playButton&&(this.playButton.disabled=!1),this.updateSelectedCharacterDisplay(),this.closeCharacterModal(),a.flashMessage(`Character ${this.selectedCharacter.charAt(0).toUpperCase()+this.selectedCharacter.slice(1)} selected!`,"success",2e3))}updateSelectedCharacterDisplay(){if(this.selectedCharacterDisplay)if(this.selectedCharacter&&this.characterImageSources&&this.characterImageSources[this.selectedCharacter]){const e=this.selectedCharacter,t=this.characterImageSources[e];let i=e.charAt(0).toUpperCase()+e.slice(1);if(this.characterGrid){const t=this.characterGrid.querySelector(`.character-card[data-character="${e}"] h3`);t&&(i=t.textContent)}this.selectedCharacterDisplay.innerHTML=`<img src="${t}" alt="${i}" class="selected-char-preview-img"> <span class="selected-char-name char-name-${e}">${i}</span>`}else this.selectedCharacterDisplay.innerHTML='<span style="color:#aaa;">No character selected</span>'}toggleSettings(){this.settingsPanel&&(this.settingsPanel.classList.contains("visible")?this.closeSettings():this.openSettings())}openSettings(){if(this.settingsPanel){if(this.settingsPanel.classList.add("visible"),this.characterPanel?.classList.contains("visible")&&this.closeCharacterModal(),this._ensureOverlay().classList.add("visible"),this.musicVolume&&this.audioManagerInstance)this.musicVolume.value=100*this.audioManagerInstance.getMusicVolume();else if(this.musicVolume){const e=localStorage.getItem("musicVolume");this.musicVolume.value=e?100*parseFloat(e):50}}else console.error("Settings panel not found.")}closeSettings(){this.settingsPanel?.classList.remove("visible"),this.overlay?.classList.remove("visible")}_ensureOverlay(){return this.overlay||(this.overlay=document.createElement("div"),this.overlay.className="ui-modal-overlay",this.overlay.addEventListener("click",(e=>{e.target===this.overlay&&(this.characterPanel?.classList.contains("visible")&&this.closeCharacterModal(),this.settingsPanel?.classList.contains("visible")&&this.closeSettings())})),document.body.appendChild(this.overlay)),this.overlay}async startGame(){if(!this.userInteracted)return void a.flashMessage("Please interact with the menu first (e.g., click a button or choose a character).","warning",3e3);if(!this.selectedCharacter)return void a.flashMessage("Please select a character first!","warning",2500);const e=a.getLoadingOverlay();e&&e.classList.add("visible"),this.hide();const t=document.getElementById("game-canvas");if(!t)return console.error("[Menu] CRITICAL: #game-canvas not found!"),e&&e.classList.remove("visible"),void this.show();t.style.display="block";try{if(A&&"function"==typeof A.stopGame&&(console.log("[Menu] Stopping previous game instance."),A.stopGame(),A=null),console.log(`[Menu] Creating new Game instance with character: ${this.selectedCharacter}`),A=new G(this.selectedCharacter),!A||"function"!=typeof A.triggerGameStart)throw new Error("Game instance created, but triggerGameStart is not available.");await A.triggerGameStart()}catch(i){console.error("[Menu] Error during game initialization or start:",i),a.flashMessage(`Game Start Failed: ${i.message}`,"error",1e4),e&&e.classList.remove("visible"),this.show(),t&&(t.style.display="none"),A=null}}show(){this.menuContainer&&(this.menuContainer.style.display="flex");const e=document.getElementById("game-canvas");e&&(e.style.display="none"),a.hideGameUI(),a.hideGameOverScreen();const t=a.getLoadingOverlay();t&&t.classList.remove("visible")}hide(){this.menuContainer&&(this.menuContainer.style.display="none")}}const N=e.p+"assets/images/redc0823efecc8ece1a10c4.png",O=e.p+"assets/images/bluea60b5a2890283d3db0d0.png",R=e.p+"assets/images/yellowe7fd8d3003d4e49a0ad5.png",B=e.p+"assets/images/green1ba3e373f73ba58a2658.png";document.addEventListener("DOMContentLoaded",(()=>{console.log("[main.js] DOMContentLoaded. Initializing Menu..."),new P({red:N,blue:O,yellow:R,green:B}),console.log("[main.js] Menu instance created.")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUUMsSUFBSSxvREFTWixJQUFJMHFCLEVBUDBCLENBQzVCakMsSUFBSyxFQUNMQyxLQUFNLEVBQ05DLE9BQVEsRUFDUkMsTUFBTyxJQUlUN29CLFFBQVFDLElBQUksbUNBQW1DLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL0NvcmUvSW5wdXRNYW5hZ2VyLmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvLi9qcy9VSS9VSU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvQ29yZS9DaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvbWFwL0Jvb2suanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvdXRpbHMvbWFwLmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL21hcC9NYXBSZW5kZXJlci5qcyIsIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvLi9qcy9tYXAvTWFwR2VuLmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL21hcC9Qcm9jZWR1cmFsTWFwLmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL0NvcmUvTGV2ZWwuanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvQ29yZS9HYW1lUmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvQ29yZS9HYW1lcGxheU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vc3R1ZGVudC1nYW1lLy4vanMvYXVkaW8vQXVkaW9NYW5hZ2VyLmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL0NvcmUvR2FtZS5qcyIsIndlYnBhY2s6Ly9zdHVkZW50LWdhbWUvLi9qcy9VSS9NZW51LmpzIiwid2VicGFjazovL3N0dWRlbnQtZ2FtZS8uL2pzL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0ICYmIGRvY3VtZW50LmN1cnJlbnRTY3JpcHQudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnU0NSSVBUJylcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgKCFzY3JpcHRVcmwgfHwgIS9eaHR0cChzPyk6Ly50ZXN0KHNjcmlwdFVybCkpKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC9eYmxvYjovLCBcIlwiKS5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiLy8gc3JjL2NvcmUvSW5wdXRNYW5hZ2VyLmpzXG5leHBvcnQgY2xhc3MgSW5wdXRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5rZXlzID0ge1xuICAgICAgdXA6IGZhbHNlLFxuICAgICAgZG93bjogZmFsc2UsXG4gICAgICBsZWZ0OiBmYWxzZSxcbiAgICAgIHJpZ2h0OiBmYWxzZSxcbiAgICB9O1xuICB9XG5cbiAgc2V0S2V5KGtleSwgaXNQcmVzc2VkKSB7XG4gICAgaWYgKHRoaXMua2V5cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICB0aGlzLmtleXNba2V5XSA9IGlzUHJlc3NlZDtcbiAgICB9XG4gIH1cblxuICBnZXRJbnB1dERpcmVjdGlvbigpIHtcbiAgICBsZXQgeCA9IDA7XG4gICAgbGV0IHkgPSAwO1xuICAgIGlmICh0aGlzLmtleXMudXApIHkgLT0gMTtcbiAgICBpZiAodGhpcy5rZXlzLmRvd24pIHkgKz0gMTtcbiAgICBpZiAodGhpcy5rZXlzLmxlZnQpIHggLT0gMTtcbiAgICBpZiAodGhpcy5rZXlzLnJpZ2h0KSB4ICs9IDE7XG4gICAgcmV0dXJuIHsgeCwgeSB9O1xuICB9XG59XG4iLCIvLyBzcmMvdXRpbHMvY29uc3RhbnRzLmpzXG5cbi8vIERlZmluaWNqZSB0eXDDs3cga2FmZWxrw7N3IG1hcHlcbmV4cG9ydCBjb25zdCBUSUxFX1dBTEwgPSAwOyAvLyDFmmNpYW5hXG5leHBvcnQgY29uc3QgVElMRV9DT1JSSURPUiA9IDE7IC8vIEtvcnl0YXJ6XG5leHBvcnQgY29uc3QgVElMRV9ST09NX0ZMT09SID0gMjsgLy8gUG9kxYJvZ2EgcG9rb2p1XG5leHBvcnQgY29uc3QgVElMRV9MSUZUID0gMzsgLy8gV2luZGFcbi8vIE1vxbxuYSBkb2RhxIcgd2nEmWNlaiB0eXDDs3csIG5wLiBUSUxFX0RPT1IsIFRJTEVfV0lORE9XIGl0cC5cblxuLy8gU3RhbnkgZ3J5XG5leHBvcnQgY29uc3QgR2FtZVN0YXRlID0ge1xuICBMT0FESU5HOiAnTE9BRElORycsIC8vIMWBYWRvd2FuaWUgemFzb2LDs3csIGdlbmVyb3dhbmllIHBvemlvbXVcbiAgTUVOVTogJ01FTlUnLCAvLyBNZW51IGfFgsOzd25lICh3eWLDs3IgcG9zdGFjaSlcbiAgUExBWUlORzogJ1BMQVlJTkcnLCAvLyBHxYLDs3duYSByb3pncnl3a2FcbiAgQVNLSU5HX1FVRVNUSU9OOiAnQVNLSU5HX1FVRVNUSU9OJywgLy8gV3nFm3dpZXRsYW5pZSBweXRhbmlhXG4gIFNFTEVDVElOR19GTE9PUjogJ1NFTEVDVElOR19GTE9PUicsIC8vIFd5xZt3aWV0bGFuaWUgVUkgd3lib3J1IHBpxJl0cmFcbiAgVFJBTlNJVElPTklORzogJ1RSQU5TSVRJT05JTkcnLCAvLyBBbmltYWNqYS9vY3pla2l3YW5pZSBuYSBwcnplasWbY2llIHdpbmR5XG4gIEdBTUVfT1ZFUjogJ0dBTUVfT1ZFUicsIC8vIEtvbmllYyBncnkgKHd5Z3JhbmEgbHViIHByemVncmFuYSlcbn07XG5cbi8vIFBhcmFtZXRyeSByb3pncnl3a2lcbmV4cG9ydCBjb25zdCBUQVJHRVRfQk9PS1NfVE9fV0lOID0gMTU7IC8vIExpY3piYSBrc2nEhcW8ZWsgZG8gemVicmFuaWEsIGFieSB3eWdyYcSHIChnbG9iYWxuaWUpXG5leHBvcnQgY29uc3QgTElGVF9DT09MRE9XTl9NUyA9IDIwMDA7IC8vIEN6YXMgb2Rub3dpZW5pYSB3aW5keSB3IG1pbGlzZWt1bmRhY2ggKDIgc2VrdW5keSlcbmV4cG9ydCBjb25zdCBMSUZUX0lOVEVSQUNUSU9OX1JBRElVU19NVUxUSVBMSUVSID0gMC43OyAvLyBNbm/FvG5payBwcm9taWVuaWEgaW50ZXJha2NqaSB6IHdpbmTEhSAod3pnbMSZZGVtIHRpbGVTaXplKVxuXG4vLyBTemFuc2EgbmEgcG9qYXdpZW5pZSBzacSZIHNpxYJvd25pIG5hIHBpZXJ3c3p5bSBwacSZdHJ6ZSAoMC4wIGRvIDEuMClcbmV4cG9ydCBjb25zdCBHWU1fQ0hBTkNFX09OX0ZJUlNUX0ZMT09SID0gMC42OyAvLyA2MCUgc3phbnN5XG5cbi8vIFB5dGFuaWEgaSBvZHBvd2llZHppXG5leHBvcnQgY29uc3QgcXVlc3Rpb25zID0gW1xuICB7XG4gICAgcXVlc3Rpb246XG4gICAgICAnS3TDs3J5IGrEmXp5ayBwcm9ncmFtb3dhbmlhIGplc3Qgem5hbnkgemUgc3dvamVqIHdzemVjaHN0cm9ubm/Fm2NpIGkgdcW8eXdhbnkgemFyw7N3bm8gdyBiYWNrZW5kemllIChOb2RlLmpzKSwgamFrIGkgZnJvbnRlbmR6aWU/JyxcbiAgICBvcHRpb25zOiBbJ1B5dGhvbicsICdKYXZhJywgJ0phdmFTY3JpcHQnLCAnQyMnXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAyLCAvLyBJbmRla3MgcG9wcmF3bmVqIG9kcG93aWVkemkgKEphdmFTY3JpcHQpXG4gIH0sXG4gIHtcbiAgICBxdWVzdGlvbjogJ0NvIG96bmFjemEgc2tyw7N0IEhUTUw/JyxcbiAgICBvcHRpb25zOiBbXG4gICAgICAnSHlwZXJUZXh0IE1hcmt1cCBMYW5ndWFnZScsXG4gICAgICAnSGlnaCBUcmFuc2ZlciBNYWNoaW5lIExhbmd1YWdlJyxcbiAgICAgICdIeXBlcmxpbmsgYW5kIFRleHQgTWFuYWdlbWVudCBMYW5ndWFnZScsXG4gICAgICAnSG9tZSBUb29sIE1hcmt1cCBMYW5ndWFnZScsXG4gICAgXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAwLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246ICdLdMOzcmEgc3RydWt0dXJhIGRhbnljaCBkemlhxYJhIG5hIHphc2FkemllIExJRk8gKExhc3QtSW4sIEZpcnN0LU91dCk/JyxcbiAgICBvcHRpb25zOiBbJ0tvbGVqa2EgKFF1ZXVlKScsICdTdG9zIChTdGFjayknLCAnTGlzdGEgKExpc3QpJywgJ0RyemV3byAoVHJlZSknXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAxLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246ICdKYWsgbmF6eXdhIHNpxJkgcHJvY2VzIHpuYWpkb3dhbmlhIGkgbmFwcmF3aWFuaWEgYsWCxJlkw7N3IHcga29kemllPycsXG4gICAgb3B0aW9uczogWydLb21waWxhY2phJywgJ1Rlc3Rvd2FuaWUnLCAnRGVidWdvd2FuaWUnLCAnUmVmYWt0b3J5emFjamEnXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAyLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246XG4gICAgICBcIkt0w7NyeSBwYXJhZHlnbWF0IHByb2dyYW1vd2FuaWEgb3BpZXJhIHNpxJkgbmEga29uY2VwY2ppICdvYmlla3TDs3cnLCBrdMOzcmUgbW9nxIUgemF3aWVyYcSHIGRhbmUgaSBrb2Q/XCIsXG4gICAgb3B0aW9uczogW1xuICAgICAgJ1Byb2dyYW1vd2FuaWUgZnVua2N5am5lJyxcbiAgICAgICdQcm9ncmFtb3dhbmllIHByb2NlZHVyYWxuZScsXG4gICAgICAnUHJvZ3JhbW93YW5pZSBvYmlla3Rvd2UnLFxuICAgICAgJ1Byb2dyYW1vd2FuaWUgbG9naWN6bmUnLFxuICAgIF0sXG4gICAgY29ycmVjdEFuc3dlcjogMixcbiAgfSxcbiAge1xuICAgIHF1ZXN0aW9uOiAnQ28gb3puYWN6YSBDU1M/JyxcbiAgICBvcHRpb25zOiBbXG4gICAgICAnQ2FzY2FkaW5nIFN0eWxlIFNoZWV0cycsXG4gICAgICAnQ29tcHV0ZXIgU3R5bGUgU3ludGF4JyxcbiAgICAgICdDcmVhdGl2ZSBTdHlsaW5nIFN5c3RlbScsXG4gICAgICAnQ29sb3JmdWwgU3R5bGUgU2NyaXB0cycsXG4gICAgXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAwLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246ICdLdMOzcnkgb3BlcmF0b3IgdyBKYXZhU2NyaXB0IHPFgnXFvHkgZG8gxZtjaXPFgmVnbyBwb3LDs3duYW5pYSAod2FydG/Fm8SHIGkgdHlwKT8nLFxuICAgIG9wdGlvbnM6IFsnPT0nLCAnPScsICc9PT0nLCAnIT0nXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAyLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246ICdKYWsgbmF6eXdhIHNpxJkgcG9wdWxhcm55IHN5c3RlbSBrb250cm9saSB3ZXJzamkgdcW8eXdhbnkgcHJ6ZXogcHJvZ3JhbWlzdMOzdz8nLFxuICAgIG9wdGlvbnM6IFsnU3VidmVyc2lvbiAoU1ZOKScsICdHaXQnLCAnTWVyY3VyaWFsJywgJ0NWUyddLFxuICAgIGNvcnJlY3RBbnN3ZXI6IDEsXG4gIH0sXG4gIHtcbiAgICBxdWVzdGlvbjpcbiAgICAgICdLdMOzcnkgdHlwIHDEmXRsaSB3IHdpxJlrc3pvxZtjaSBqxJl6eWvDs3cgcHJvZ3JhbW93YW5pYSBqZXN0IG5hamJhcmR6aWVqIG9kcG93aWVkbmkgZG8gaXRlcmFjamkgcG8gZWxlbWVudGFjaCB0YWJsaWN5LCBnZHkgbmllIHpuYW15IGljaCBsaWN6Ynk/JyxcbiAgICBvcHRpb25zOiBbJ2ZvcicsICd3aGlsZScsICdkby4uLndoaWxlJywgJ2ZvcmVhY2ggKGx1YiBmb3IuLi5vZiknXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAzLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246ICdDbyB0byBqZXN0IEFQST8nLFxuICAgIG9wdGlvbnM6IFtcbiAgICAgICdBZHZhbmNlZCBQcm9ncmFtbWluZyBJbnRlcmZhY2UnLFxuICAgICAgJ0FwcGxpY2F0aW9uIFByb2dyYW1taW5nIEludGVyZmFjZScsXG4gICAgICAnQXV0b21hdGVkIFByb2dyYW0gSW50ZXJhY3Rpb24nLFxuICAgICAgJ0FsZ29yaXRobWljIFByb2Nlc3NpbmcgSW5wdXQnLFxuICAgIF0sXG4gICAgY29ycmVjdEFuc3dlcjogMSxcbiAgfSxcbiAge1xuICAgIHF1ZXN0aW9uOiAnQ28gdG8gamVzdCBQTEMgaSBkbyBjemVnbyBuYWpjesSZxZtjaWVqIHPFgnXFvHkgdyBhdXRvbWF0eWNlPycsXG4gICAgb3B0aW9uczogW1xuICAgICAgJ1Byb2dyYW1vd2FsbnkgTG9naWMgQ29udHJvbGxlciwgZG8gc3Rlcm93YW5pYSBwcm9jZXNhbWkgcHJ6ZW15c8WCb3d5bWknLFxuICAgICAgJ1BlcnNvbmFsIExlYXJuaW5nIENvbXB1dGVyLCBkbyBuYXVraSBwcm9ncmFtb3dhbmlhJyxcbiAgICAgICdQb3dlciBMaW5lIENvbW11bmljYXRpb24sIGRvIHByemVzecWCdSBkYW55Y2ggcHJ6ZXogc2llxIcgZWxla3RyeWN6bsSFJyxcbiAgICAgICdQcm9qZWN0IExpZmVjeWNsZSBDb3N0LCBkbyB6YXJ6xIVkemFuaWEga29zenRhbWkgcHJvamVrdHUnLFxuICAgIF0sXG4gICAgY29ycmVjdEFuc3dlcjogMCxcbiAgfSxcbiAge1xuICAgIHF1ZXN0aW9uOiAnWmEgY28gb2Rwb3dpYWRhIHByenlzxYJvbmEgKGFwZXJ0dXJhKSB3IGFwYXJhY2llIGZvdG9ncmFmaWN6bnltPycsXG4gICAgb3B0aW9uczogW1xuICAgICAgJ0tvbnRyb2zEmSBjemFzdSBuYcWbd2lldGxhbmlhJyxcbiAgICAgICdSZWd1bGFjasSZIGfFgsSZYmkgb3N0cm/Fm2NpIGkgaWxvxZtjaSB3cGFkYWrEhWNlZ28gxZt3aWF0xYJhJyxcbiAgICAgICdVc3Rhd2llbmllIGJhbGFuc3UgYmllbGknLFxuICAgICAgJ1N0YWJpbGl6YWNqxJkgb2JyYXp1JyxcbiAgICBdLFxuICAgIGNvcnJlY3RBbnN3ZXI6IDEsXG4gIH0sXG4gIHtcbiAgICBxdWVzdGlvbjpcbiAgICAgICdLdMOzcnkgZWxlbWVudCBrb21wdXRlcmEgamVzdCBvZHBvd2llZHppYWxueSB6YSB0eW1jemFzb3dlIHByemVjaG93eXdhbmllIGRhbnljaCB1xbx5d2FueWNoIHByemV6IHByb2Nlc29yPycsXG4gICAgb3B0aW9uczogWydEeXNrIHR3YXJkeSAoSEREL1NTRCknLCAnS2FydGEgZ3JhZmljem5hIChHUFUpJywgJ1BhbWnEmcSHIFJBTScsICdQxYJ5dGEgZ8WCw7N3bmEnXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAyLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246XG4gICAgICAnVyBqYWtpbSBqxJl6eWt1IHByb2dyYW1vd2FuaWEgbmFqY3rEmcWbY2llaiBwaXNhbmUgc8SFIHNrcnlwdHkgcG8gc3Ryb25pZSBzZXJ3ZXJhIChiYWNrZW5kKT8nLFxuICAgIG9wdGlvbnM6IFsnSFRNTCcsICdDU1MnLCAnU1FMJywgJ1BIUCwgUHl0aG9uIGx1YiBOb2RlLmpzIChKYXZhU2NyaXB0KSddLFxuICAgIGNvcnJlY3RBbnN3ZXI6IDMsXG4gIH0sXG4gIHtcbiAgICBxdWVzdGlvbjpcbiAgICAgICdKYWtpIHR5cCBzeWduYcWCdSBjaGFyYWt0ZXJ5enVqZSBzacSZIHDFgnlubsSFIHptaWFuxIUgd2FydG/Fm2NpIHcgY3phc2llLCB3IHByemVjaXdpZcWEc3R3aWUgZG8gc3lnbmHFgnUgY3lmcm93ZWdvPycsXG4gICAgb3B0aW9uczogWydCaW5hcm55JywgJ0FuYWxvZ293eScsICdaZXJvLWplZHlua293eScsICdJbXB1bHNvd3knXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAxLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246XG4gICAgICAnS3TDs3J5IHBhcmFtZXRyIHVzdGF3aWEgY3p1xYJvxZvEhyBtYXRyeWN5IGFwYXJhdHUgbmEgxZt3aWF0xYJvIGkgd3DFgnl3YSBuYSBwb3ppb20gc3p1bcOzdyBuYSB6ZGrEmWNpdT8nLFxuICAgIG9wdGlvbnM6IFsnQ3phcyBuYcWbd2lldGxhbmlhJywgJ1ByenlzxYJvbmEnLCAnSVNPJywgJ09nbmlza293YSddLFxuICAgIGNvcnJlY3RBbnN3ZXI6IDIsXG4gIH0sXG4gIHtcbiAgICBxdWVzdGlvbjogJ0NvIHRvIGplc3QgYWRyZXMgSVAgdyBzaWVjaSBrb21wdXRlcm93ZWo/JyxcbiAgICBvcHRpb25zOiBbXG4gICAgICAnVW5pa2FsbnkgaWRlbnR5ZmlrYXRvciB1cnrEhWR6ZW5pYSB3IHNpZWNpJyxcbiAgICAgICdOYXp3YSB1xbx5dGtvd25pa2EgZG8gbG9nb3dhbmlhJyxcbiAgICAgICdBZHJlcyBzdHJvbnkgaW50ZXJuZXRvd2VqJyxcbiAgICAgICdUeXAga2FibGEgc2llY2lvd2VnbycsXG4gICAgXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAwLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246ICdDenltIHLDs8W8bmkgc2nEmSBpbnN0cnVrY2phIHdhcnVua293YSBgaWZgIG9kIHDEmXRsaSBgd2hpbGVgIHcgcHJvZ3JhbW93YW5pdT8nLFxuICAgIG9wdGlvbnM6IFtcbiAgICAgICdgaWZgIHBvd3RhcnphIGJsb2sga29kdSwgYHdoaWxlYCBzcHJhd2R6YSB3YXJ1bmVrIGplZG5va3JvdG5pZScsXG4gICAgICAnYGlmYCBzcHJhd2R6YSB3YXJ1bmVrIGplZG5va3JvdG5pZSwgYHdoaWxlYCBwb3d0YXJ6YSBibG9rIGtvZHUgZG9ww7NraSB3YXJ1bmVrIGplc3QgcHJhd2R6aXd5JyxcbiAgICAgICdOaWUgbWEgbWnEmWR6eSBuaW1pIHLDs8W8bmljeScsXG4gICAgICAnYGlmYCBzxYJ1xbx5IHR5bGtvIGRvIGRla2xhcm93YW5pYSB6bWllbm55Y2gsIGB3aGlsZWAgZG8gb3BlcmFjamkgbWF0ZW1hdHljem55Y2gnLFxuICAgIF0sXG4gICAgY29ycmVjdEFuc3dlcjogMSxcbiAgfSxcbiAge1xuICAgIHF1ZXN0aW9uOiAnRG8gY3plZ28gbmFqY3rEmcWbY2llaiBzxYJ1xbx5IGN6dWpuaWsgY2nFm25pZW5pYSB3IHN5c3RlbWllIGF1dG9tYXR5a2k/JyxcbiAgICBvcHRpb25zOiBbJ1BvbWlhcnUgdGVtcGVyYXR1cnknLCAnUG9taWFydSBvZGxlZ8WCb8WbY2knLCAnUG9taWFydSBzacWCeScsICdQb21pYXJ1IGNpxZtuaWVuaWEnXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAzLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246ICdDbyBvem5hY3phIHphc2FkYSB0csOzanBvZHppYcWCdSB3IGtvbXBvenljamkgZm90b2dyYWZpY3puZWo/JyxcbiAgICBvcHRpb25zOiBbXG4gICAgICAnRHppZWxlbmllIG9icmF6dSBuYSAzIHLDs3duZSBjesSZxZtjaSBwaW9ub3dvIGkgcG96aW9tbyBpIHVtaWVzemN6YW5pZSBrbHVjem93eWNoIGVsZW1lbnTDs3cgbmEgbGluaWFjaCBsdWIgaWNoIHByemVjacSZY2lhY2gnLFxuICAgICAgJ1XFvHl3YW5pZSB0eWxrbyAzIGfFgsOzd255Y2gga29sb3LDs3cgdyBrYWRyemUnLFxuICAgICAgJ1JvYmllbmllIHphd3N6ZSAzIHpkasSZxIcgdGVqIHNhbWVqIHNjZW55JyxcbiAgICAgICdCYWxhbnNvd2FuaWUgMyBnxYLDs3dueWNoIG9iaWVrdMOzdyB3IGthZHJ6ZScsXG4gICAgXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAwLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246ICdKYWthIGplc3QgcG9kc3Rhd293YSByb2xhIHN5c3RlbXUgb3BlcmFjeWpuZWdvPycsXG4gICAgb3B0aW9uczogW1xuICAgICAgJ1R3b3J6ZW5pZSBncmFmaWtpIGtvbXB1dGVyb3dlaicsXG4gICAgICAnWmFyesSFZHphbmllIHphc29iYW1pIHNwcnrEmXRvd3ltaSBpIHByb2dyYW1vd3ltaSBrb21wdXRlcmEnLFxuICAgICAgJ1Bpc2FuaWUga29kdSBwcm9ncmFtw7N3JyxcbiAgICAgICdQcnplZ2zEhWRhbmllIEludGVybmV0dScsXG4gICAgXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAxLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246XG4gICAgICAnSmFraWVnbyB0eXB1IGRhbnljaCBuYWpjesSZxZtjaWVqIHXFvHlqZXN6IGRvIHByemVjaG93eXdhbmlhIHdpZWt1IG9zb2J5IChsaWN6YmEgY2HFgmtvd2l0YSk/JyxcbiAgICBvcHRpb25zOiBbXG4gICAgICAnU3RyaW5nIChjacSFZyB6bmFrw7N3KScsXG4gICAgICAnQm9vbGVhbiAod2FydG/Fm8SHIGxvZ2ljem5hKScsXG4gICAgICAnRmxvYXQgKGxpY3piYSB6bWllbm5vcHJ6ZWNpbmtvd2EpJyxcbiAgICAgICdJbnRlZ2VyIChsaWN6YmEgY2HFgmtvd2l0YSknLFxuICAgIF0sXG4gICAgY29ycmVjdEFuc3dlcjogMyxcbiAgfSxcbiAge1xuICAgIHF1ZXN0aW9uOiAnRWxlbWVudCB3eWtvbmF3Y3p5IChha3R1YXRvcikgdyBzeXN0ZW1pZSBhdXRvbWF0eWtpIHRvIHVyesSFZHplbmllLCBrdMOzcmUuLi4nLFxuICAgIG9wdGlvbnM6IFtcbiAgICAgICdPZGN6eXR1amUgZGFuZSB6IGN6dWpuaWvDs3cnLFxuICAgICAgJ1d5a29udWplIGtvbWVuZHkgemUgc3Rlcm93bmlrYSwgYWJ5IHd5a29uYcSHIGZpenljem5lIGR6aWHFgmFuaWUgKG5wLiBydWNoKScsXG4gICAgICAnUHJ6ZWNob3d1amUgZGFuZSBoaXN0b3J5Y3puZScsXG4gICAgICAnU8WCdcW8eSBkbyBrb211bmlrYWNqaSB6IG9wZXJhdG9yZW0nLFxuICAgIF0sXG4gICAgY29ycmVjdEFuc3dlcjogMSxcbiAgfSxcbiAge1xuICAgIHF1ZXN0aW9uOlxuICAgICAgJ0t0w7NyeSBmb3JtYXQgcGxpa3UgZ3JhZmljem5lZ28gamVzdCBiZXpzdHJhdG55IGkgY3rEmXN0byB1xbx5d2FueSB3IHByb2Zlc2pvbmFsbmVqIGVkeWNqaSwgemFjaG93dWrEhWMgbWFrc3ltYWxuxIUgamFrb8WbxIcga29zenRlbSByb3ptaWFydT8nLFxuICAgIG9wdGlvbnM6IFsnSlBFRycsICdHSUYnLCAnUE5HJywgJ1JBVyddLFxuICAgIGNvcnJlY3RBbnN3ZXI6IDMsXG4gIH0sXG4gIHtcbiAgICBxdWVzdGlvbjogJ0NvIGNocm9uaSBzaWXEhyBrb21wdXRlcm93xIUgcHJ6ZWQgbmllYXV0b3J5em93YW55bSBkb3N0xJlwZW0geiB6ZXduxIV0cno/JyxcbiAgICBvcHRpb25zOiBbJ1JvdXRlcicsICdTd2l0Y2gnLCAnTW9kZW0nLCAnRmlyZXdhbGwgKHphcG9yYSBzaWVjaW93YSknXSxcbiAgICBjb3JyZWN0QW5zd2VyOiAzLFxuICB9LFxuICB7XG4gICAgcXVlc3Rpb246ICdDbyB0byBqZXN0IElERSAoSW50ZWdyYXRlZCBEZXZlbG9wbWVudCBFbnZpcm9ubWVudCkgdyBrb250ZWvFm2NpZSBwcm9ncmFtb3dhbmlhPycsXG4gICAgb3B0aW9uczogW1xuICAgICAgJ1N5c3RlbSBvcGVyYWN5am55JyxcbiAgICAgICdOYXJ6xJlkemllIGRvIHphcnrEhWR6YW5pYSBiYXrEhSBkYW55Y2gnLFxuICAgICAgJ1ppbnRlZ3Jvd2FuZSDFm3JvZG93aXNrbyBwcm9ncmFtaXN0eWN6bmUgKGVkeXRvciBrb2R1LCBrb21waWxhdG9yLCBkZWJ1Z2dlciB3IGplZG55bSknLFxuICAgICAgJ1Byb3Rva8OzxYIgc2llY2lvd3knLFxuICAgIF0sXG4gICAgY29ycmVjdEFuc3dlcjogMixcbiAgfSxcbiAge1xuICAgIHF1ZXN0aW9uOlxuICAgICAgJ1ByenlrxYJhZGVtIGN6dWpuaWthIHpibGnFvGVuaW93ZWdvLCB3eWtyeXdhasSFY2VnbyBvYmVjbm/Fm8SHIG9iaWVrdHUgYmV6IGZpenljem5lZ28ga29udGFrdHUsIG1vxbxlIGJ5xIc6JyxcbiAgICBvcHRpb25zOiBbJ1Rlcm1vbWV0cicsICdGb3Rva29tw7Nya2EnLCAnTWFub21ldHIgKGN6dWpuaWsgY2nFm25pZW5pYSknLCAnQWtjZWxlcm9tZXRyJ10sXG4gICAgY29ycmVjdEFuc3dlcjogMSxcbiAgfSxcbiAge1xuICAgIHF1ZXN0aW9uOiAnRG8gY3plZ28gc8WCdcW8eSBiYWxhbnMgYmllbGkgKHdoaXRlIGJhbGFuY2UpIHcgYXBhcmFjaWUgZm90b2dyYWZpY3pueW0/JyxcbiAgICBvcHRpb25zOiBbXG4gICAgICAnRG8gcmVndWxhY2ppIG9zdHJvxZtjaScsXG4gICAgICAnRG8ga29yZWtjamkga29sb3LDs3csIGFieSBiaWHFgnkgd3lnbMSFZGHFgiBuYSBiaWHFgnkgbmllemFsZcW8bmllIG9kIMW6csOzZMWCYSDFm3dpYXTFgmEnLFxuICAgICAgJ0RvIHVzdGF3aWFuaWEgY3phc3UgbmHFm3dpZXRsYW5pYScsXG4gICAgICAnRG8gZG9kYXdhbmlhIGVmZWt0w7N3IHNwZWNqYWxueWNoJyxcbiAgICBdLFxuICAgIGNvcnJlY3RBbnN3ZXI6IDEsXG4gIH0sXG4gIHtcbiAgICBxdWVzdGlvbjpcbiAgICAgICdLdMOzcnkgcHJvdG9rw7PFgiBqZXN0IHXFvHl3YW55IGRvIGJlenBpZWN6bmVnbyAoc3p5ZnJvd2FuZWdvKSBwcnplc3nFgmFuaWEgc3Ryb24gaW50ZXJuZXRvd3ljaD8nLFxuICAgIG9wdGlvbnM6IFsnSFRUUCcsICdGVFAnLCAnU01UUCcsICdIVFRQUyddLFxuICAgIGNvcnJlY3RBbnN3ZXI6IDMsXG4gIH0sXG4gIHtcbiAgICBxdWVzdGlvbjogJ0NvIHRvIGplc3Qgem1pZW5uYSB3IHByb2dyYW1vd2FuaXU/JyxcbiAgICBvcHRpb25zOiBbXG4gICAgICAnRnVua2NqYSB3eWtvbnVqxIVjYSBva3JlxZtsb25lIHphZGFuaWUnLFxuICAgICAgJ1R5cCBwxJl0bGknLFxuICAgICAgJ05hendhbmUgbWllanNjZSB3IHBhbWnEmWNpIGtvbXB1dGVyYSBzxYJ1xbzEhWNlIGRvIHByemVjaG93eXdhbmlhIGRhbnljaCcsXG4gICAgICAnUG9sZWNlbmllIHd5xZt3aWV0bGFqxIVjZSB0ZWtzdCBuYSBla3JhbmllJyxcbiAgICBdLFxuICAgIGNvcnJlY3RBbnN3ZXI6IDIsXG4gIH0sXG4gIC8vIERvZGFqIHdpxJljZWogcHl0YcWEIHR1dGFqXG5dO1xuIiwiLy8gc3JjL1VJL1VJTWFuYWdlci5qc1xuaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGNsYXNzIFVJTWFuYWdlciB7XG4gIHN0YXRpYyBzY29yZUVsZW1lbnQgPSBudWxsO1xuICBzdGF0aWMgdGFyZ2V0RWxlbWVudCA9IG51bGw7XG4gIHN0YXRpYyBjb250cm9sc0NvbnRhaW5lciA9IG51bGw7XG4gIHN0YXRpYyBxdWVzdGlvbk92ZXJsYXkgPSBudWxsO1xuICBzdGF0aWMgcXVlc3Rpb25UZXh0RWxlbWVudCA9IG51bGw7XG4gIHN0YXRpYyBhbnN3ZXJCdXR0b25zQ29udGFpbmVyID0gbnVsbDtcbiAgc3RhdGljIGZsb29yU2VsZWN0aW9uUGFuZWwgPSBudWxsO1xuICBzdGF0aWMgZmxvb3JCdXR0b25zQ29udGFpbmVyID0gbnVsbDtcbiAgc3RhdGljIGZsYXNoTWVzc2FnZUNvbnRhaW5lciA9IG51bGw7XG4gIHN0YXRpYyBsb2FkaW5nT3ZlcmxheUVsZW1lbnQgPSBudWxsO1xuXG4gIHN0YXRpYyBnYW1lT3ZlclNjcmVlbkVsZW1lbnQgPSBudWxsO1xuICBzdGF0aWMgZ2FtZU92ZXJUaXRsZUVsZW1lbnQgPSBudWxsO1xuICBzdGF0aWMgY3JlYXRvck5hbWVzTGlzdEVsZW1lbnQgPSBudWxsO1xuICBzdGF0aWMgY2xhc3NJbmZvRWxlbWVudCA9IG51bGw7XG4gIHN0YXRpYyByZXR1cm5Ub01lbnVCdXR0b25FbGVtZW50ID0gbnVsbDtcbiAgc3RhdGljIGxlYWRlcmJvYXJkQm9keSA9IG51bGw7XG5cbiAgc3RhdGljIGdhbWVwbGF5TWFuYWdlckluc3RhbmNlID0gbnVsbDtcbiAgc3RhdGljIGZsYXNoTWVzc2FnZVRpbWVvdXRzID0ge307XG5cbiAgc3RhdGljIHRpbWVyRWxlbWVudCA9IG51bGw7XG4gIHN0YXRpYyBnYW1lU3RhcnRUaW1lID0gMDsgLy8gVGltZXN0YW1wIG9mIHdoZW4gdGhlIGdhbWUgKHRpbWVyKSBhY3R1YWxseSBzdGFydGVkXG4gIHN0YXRpYyB0aW1lckludGVydmFsSWQgPSBudWxsOyAvLyBUbyBzdG9yZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgSURcbiAgc3RhdGljIGxlYWRlcmJvYXJkRGF0YSA9IFtdO1xuXG4gIHN0YXRpYyBzZXRHYW1lcGxheU1hbmFnZXIobWFuYWdlcikge1xuICAgIGlmICghbWFuYWdlcikge1xuICAgICAgY29uc29sZS5lcnJvcignW1VJTWFuYWdlcl0gQXR0ZW1wdGVkIHRvIHNldCBHYW1lcGxheU1hbmFnZXIgdG8gbnVsbC91bmRlZmluZWQhJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZ2FtZXBsYXlNYW5hZ2VySW5zdGFuY2UgPSBtYW5hZ2VyO1xuICAgIGNvbnNvbGUubG9nKCdbVUlNYW5hZ2VyXSBHYW1lcGxheU1hbmFnZXIgaW5zdGFuY2UgcmVnaXN0ZXJlZC4nKTtcbiAgfVxuXG4gIHN0YXRpYyBpbml0aWFsaXplVUkoaW5wdXRNYW5hZ2VyKSB7XG4gICAgY29uc29sZS5sb2coJ1tVSU1hbmFnZXJdIEluaXRpYWxpemluZyBpbi1nYW1lIFVJIGVsZW1lbnRzLi4uJyk7XG4gICAgaWYgKCFpbnB1dE1hbmFnZXIpXG4gICAgICBjb25zb2xlLndhcm4oJ1tVSU1hbmFnZXJdIElucHV0TWFuYWdlciBub3QgcHJvdmlkZWQuIE9uLXNjcmVlbiBjb250cm9scyBtYXkgbm90IGZ1bmN0aW9uLicpO1xuXG4gICAgdGhpcy5jcmVhdGVDb250cm9scyhpbnB1dE1hbmFnZXIpO1xuICAgIHRoaXMuY3JlYXRlUXVlc3Rpb25VSSgpO1xuICAgIHRoaXMuY3JlYXRlRmxvb3JTZWxlY3Rpb25VSSgpO1xuICAgIHRoaXMuZW5zdXJlRmxhc2hNZXNzYWdlQ29udGFpbmVyKCk7XG4gICAgdGhpcy5nZXRMb2FkaW5nT3ZlcmxheSgpOyAvLyBFbnN1cmVzIGl0IGV4aXN0cyBidXQgZG9lc24ndCBzaG93IGl0XG4gICAgdGhpcy5jcmVhdGVHYW1lT3ZlclNjcmVlbigpOyAvLyBJbml0aWFsaXplcyBHYW1lIE92ZXIgc2NyZWVuIGVsZW1lbnRzXG4gICAgdGhpcy5pbml0aWFsaXplVGltZXIoKTsgLy8gSW5pdGlhbGl6ZXMgdGltZXIgZWxlbWVudCBhbmQgbG9hZHMgbGVhZGVyYm9hcmRcblxuICAgIGlmICghdGhpcy5nYW1lcGxheU1hbmFnZXJJbnN0YW5jZSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnW1VJTWFuYWdlcl0gV0FSTklORzogR2FtZXBsYXlNYW5hZ2VyIG5vdCBzZXQgYnkgZW5kIG9mIGluaXRpYWxpemVVSS4gSW50ZXJhY3RpdmUgVUkgbWF5IGZhaWwuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ1tVSU1hbmFnZXJdIEluLWdhbWUgVUkgaW5pdGlhbGl6YXRpb24gY29tcGxldGUuJyk7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlQ29udHJvbHMoaW5wdXRNYW5hZ2VyKSB7XG4gICAgdGhpcy5jb250cm9sc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250cm9scy1jb250YWluZXInKTtcbiAgICBpZiAoIXRoaXMuY29udHJvbHNDb250YWluZXIpIHtcbiAgICAgIHRoaXMuY29udHJvbHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRoaXMuY29udHJvbHNDb250YWluZXIuaWQgPSAnY29udHJvbHMtY29udGFpbmVyJztcbiAgICAgIHRoaXMuY29udHJvbHNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29udHJvbHMtY29udGFpbmVyJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuY29udHJvbHNDb250YWluZXIpOyAvLyBDb25zaWRlciBhcHBlbmRpbmcgdG8gYSBnYW1lLXNwZWNpZmljIFVJIGxheWVyXG4gICAgfVxuICAgIHRoaXMuY29udHJvbHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG5cbiAgICBjb25zdCBhcnJvd3MgPSBbXG4gICAgICB7IGRpcmVjdGlvbjogJ3VwJywgaWNvbjogJ+KGkScsIGdyaWRBcmVhOiAndXAnIH0sXG4gICAgICB7IGRpcmVjdGlvbjogJ2xlZnQnLCBpY29uOiAn4oaQJywgZ3JpZEFyZWE6ICdsZWZ0JyB9LFxuICAgICAgeyBkaXJlY3Rpb246ICdyaWdodCcsIGljb246ICfihpInLCBncmlkQXJlYTogJ3JpZ2h0JyB9LFxuICAgICAgeyBkaXJlY3Rpb246ICdkb3duJywgaWNvbjogJ+KGkycsIGdyaWRBcmVhOiAnZG93bicgfSxcbiAgICBdO1xuICAgIGFycm93cy5mb3JFYWNoKCh7IGRpcmVjdGlvbiwgaWNvbiwgZ3JpZEFyZWEgfSkgPT4ge1xuICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBidG4uY2xhc3NOYW1lID0gYGNvbnRyb2wtYnRuICR7ZGlyZWN0aW9ufWA7XG4gICAgICBidG4udGV4dENvbnRlbnQgPSBpY29uO1xuICAgICAgYnRuLnN0eWxlLmdyaWRBcmVhID0gZ3JpZEFyZWE7XG4gICAgICBidG4uZGF0YXNldC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICBpZiAoaW5wdXRNYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gKGUpID0+IHtcbiAgICAgICAgICBpbnB1dE1hbmFnZXIuc2V0S2V5KGRpcmVjdGlvbiwgdHJ1ZSk7XG4gICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZW5kID0gKGUpID0+IHtcbiAgICAgICAgICBpZiAoaW5wdXRNYW5hZ2VyLmtleXNbZGlyZWN0aW9uXSkgaW5wdXRNYW5hZ2VyLnNldEtleShkaXJlY3Rpb24sIGZhbHNlKTtcbiAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHN0YXJ0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBlbmQsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIGVuZCwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHN0YXJ0KTtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBlbmQpO1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGVuZCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNvbnRyb2xzQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ0bik7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzY29yZURpc3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUtZGlzcGxheScpO1xuICAgIGlmICghc2NvcmVEaXNwKSB7XG4gICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGRpdi5pZCA9ICdzY29yZS1kaXNwbGF5JztcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdzY29yZS1kaXNwbGF5Jyk7XG4gICAgICBkaXYuaW5uZXJIVE1MID0gYEtzacSFxbxraTogPHNwYW4gaWQ9XCJzY29yZS12YWx1ZVwiPjA8L3NwYW4+IC8gPHNwYW4gaWQ9XCJzY29yZS10YXJnZXRcIj4/PC9zcGFuPmA7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7IC8vIENvbnNpZGVyIGdhbWUtc3BlY2lmaWMgVUkgbGF5ZXJcbiAgICAgIHRoaXMuc2NvcmVFbGVtZW50ID0gZGl2LnF1ZXJ5U2VsZWN0b3IoJyNzY29yZS12YWx1ZScpO1xuICAgICAgdGhpcy50YXJnZXRFbGVtZW50ID0gZGl2LnF1ZXJ5U2VsZWN0b3IoJyNzY29yZS10YXJnZXQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zY29yZUVsZW1lbnQgPSBzY29yZURpc3AucXVlcnlTZWxlY3RvcignI3Njb3JlLXZhbHVlJyk7XG4gICAgICB0aGlzLnRhcmdldEVsZW1lbnQgPSBzY29yZURpc3AucXVlcnlTZWxlY3RvcignI3Njb3JlLXRhcmdldCcpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zY29yZUVsZW1lbnQpIHRoaXMuc2NvcmVFbGVtZW50LnRleHRDb250ZW50ID0gJzAnO1xuICAgIGlmICh0aGlzLnRhcmdldEVsZW1lbnQpIHRoaXMudGFyZ2V0RWxlbWVudC50ZXh0Q29udGVudCA9ICc/JztcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVRdWVzdGlvblVJKCkge1xuICAgIHRoaXMucXVlc3Rpb25PdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9uLW92ZXJsYXknKTtcbiAgICBpZiAoIXRoaXMucXVlc3Rpb25PdmVybGF5KSB7XG4gICAgICB0aGlzLnF1ZXN0aW9uT3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGhpcy5xdWVzdGlvbk92ZXJsYXkuaWQgPSAncXVlc3Rpb24tb3ZlcmxheSc7XG4gICAgICB0aGlzLnF1ZXN0aW9uT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCd1aS1wYW5lbCcpO1xuICAgICAgdGhpcy5xdWVzdGlvbk92ZXJsYXkuaW5uZXJIVE1MID0gYDxkaXYgaWQ9XCJibGFja2JvYXJkLWNvbnRlbnRcIj48aDI+UXVlc3Rpb248L2gyPjxkaXYgaWQ9XCJxdWVzdGlvbi1ib3hcIj48cCBpZD1cInF1ZXN0aW9uLXRleHRcIj48L3A+PGRpdiBpZD1cImFuc3dlci1idXR0b25zXCI+PC9kaXY+PC9kaXY+PC9kaXY+YDtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5xdWVzdGlvbk92ZXJsYXkpO1xuICAgIH1cbiAgICB0aGlzLnF1ZXN0aW9uVGV4dEVsZW1lbnQgPSB0aGlzLnF1ZXN0aW9uT3ZlcmxheS5xdWVyeVNlbGVjdG9yKCcjcXVlc3Rpb24tdGV4dCcpO1xuICAgIHRoaXMuYW5zd2VyQnV0dG9uc0NvbnRhaW5lciA9IHRoaXMucXVlc3Rpb25PdmVybGF5LnF1ZXJ5U2VsZWN0b3IoJyNhbnN3ZXItYnV0dG9ucycpO1xuICAgIGlmICghdGhpcy5xdWVzdGlvblRleHRFbGVtZW50IHx8ICF0aGlzLmFuc3dlckJ1dHRvbnNDb250YWluZXIpXG4gICAgICBjb25zb2xlLmVycm9yKCdbVUlNYW5hZ2VyXSBGYWlsZWQgdG8gZmluZC9jcmVhdGUgcXVlc3Rpb24gVUkgY2hpbGRyZW4uJyk7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlRmxvb3JTZWxlY3Rpb25VSSgpIHtcbiAgICB0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxvb3Itc2VsZWN0aW9uLXVpJyk7XG4gICAgaWYgKCF0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwpIHtcbiAgICAgIHRoaXMuZmxvb3JTZWxlY3Rpb25QYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGhpcy5mbG9vclNlbGVjdGlvblBhbmVsLmlkID0gJ2Zsb29yLXNlbGVjdGlvbi11aSc7XG4gICAgICB0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwuY2xhc3NMaXN0LmFkZCgndWktcGFuZWwnKTtcbiAgICAgIHRoaXMuZmxvb3JTZWxlY3Rpb25QYW5lbC5pbm5lckhUTUwgPSBgPGgyPlNlbGVjdCBGbG9vcjwvaDI+PGRpdiBpZD1cImZsb29yLWJ1dHRvbnMtY29udGFpbmVyXCI+PC9kaXY+YDtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5mbG9vclNlbGVjdGlvblBhbmVsKTtcbiAgICB9XG4gICAgdGhpcy5mbG9vckJ1dHRvbnNDb250YWluZXIgPSB0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwucXVlcnlTZWxlY3RvcignI2Zsb29yLWJ1dHRvbnMtY29udGFpbmVyJyk7XG4gICAgaWYgKCF0aGlzLmZsb29yQnV0dG9uc0NvbnRhaW5lcilcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVSU1hbmFnZXJdIEZhaWxlZCB0byBmaW5kL2NyZWF0ZSBmbG9vciBidXR0b25zIGNvbnRhaW5lci4nKTtcbiAgfVxuXG4gIHN0YXRpYyBlbnN1cmVGbGFzaE1lc3NhZ2VDb250YWluZXIoKSB7XG4gICAgdGhpcy5mbGFzaE1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhc2gtbWVzc2FnZS1jb250YWluZXInKTtcbiAgICBpZiAoIXRoaXMuZmxhc2hNZXNzYWdlQ29udGFpbmVyKSB7XG4gICAgICB0aGlzLmZsYXNoTWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGhpcy5mbGFzaE1lc3NhZ2VDb250YWluZXIuaWQgPSAnZmxhc2gtbWVzc2FnZS1jb250YWluZXInO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmZsYXNoTWVzc2FnZUNvbnRhaW5lcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZsYXNoTWVzc2FnZUNvbnRhaW5lcjtcbiAgfVxuXG4gIHN0YXRpYyBmbGFzaE1lc3NhZ2UobWVzc2FnZSwgdHlwZSA9ICdpbmZvJywgZHVyYXRpb24gPSAzMDAwKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5lbnN1cmVGbGFzaE1lc3NhZ2VDb250YWluZXIoKTtcbiAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgY29uc29sZS5lcnJvcignW1VJTWFuYWdlcl0gRmxhc2ggbXNnIGNvbnRhaW5lciBub3QgZm91bmQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1zZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbXNnRWwudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIG1zZ0VsLmNsYXNzTmFtZSA9ICdmbGFzaC1tZXNzYWdlJztcbiAgICBtc2dFbC5jbGFzc0xpc3QuYWRkKGBmbGFzaC0ke3R5cGV9YCk7XG4gICAgY29uc3QgbXNnSWQgPSBgZmxhc2gtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA1KX1gO1xuICAgIG1zZ0VsLmlkID0gbXNnSWQ7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1zZ0VsKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gbXNnRWwuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpKTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5mbGFzaE1lc3NhZ2VUaW1lb3V0c1ttc2dJZF0pO1xuICAgIGNvbnN0IHJlbW92ZSA9ICgpID0+IHtcbiAgICAgIG1zZ0VsLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgIGNvbnN0IGVuZEhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdvcGFjaXR5JyB8fCBlLnByb3BlcnR5TmFtZSA9PT0gJ3RyYW5zZm9ybScpIHtcbiAgICAgICAgICBpZiAobXNnRWwucGFyZW50Tm9kZSkgbXNnRWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtc2dFbCk7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuZmxhc2hNZXNzYWdlVGltZW91dHNbbXNnSWRdO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgbXNnRWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGVuZEhhbmRsZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyBGYWxsYmFjayByZW1vdmFsXG4gICAgICAgIGlmIChtc2dFbC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgbXNnRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGVuZEhhbmRsZXIpO1xuICAgICAgICAgIG1zZ0VsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobXNnRWwpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmZsYXNoTWVzc2FnZVRpbWVvdXRzW21zZ0lkXTtcbiAgICAgIH0sIDUwMCk7XG4gICAgfTtcbiAgICB0aGlzLmZsYXNoTWVzc2FnZVRpbWVvdXRzW21zZ0lkXSA9IHNldFRpbWVvdXQocmVtb3ZlLCBkdXJhdGlvbik7XG4gIH1cblxuICBzdGF0aWMgZ2V0TG9hZGluZ092ZXJsYXkoKSB7XG4gICAgaWYgKCF0aGlzLmxvYWRpbmdPdmVybGF5RWxlbWVudCkge1xuICAgICAgdGhpcy5sb2FkaW5nT3ZlcmxheUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7XG4gICAgICBpZiAoIXRoaXMubG9hZGluZ092ZXJsYXlFbGVtZW50KSB7XG4gICAgICAgIHRoaXMubG9hZGluZ092ZXJsYXlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMubG9hZGluZ092ZXJsYXlFbGVtZW50LmlkID0gJ2xvYWRpbmctb3ZlcmxheSc7XG4gICAgICAgIHRoaXMubG9hZGluZ092ZXJsYXlFbGVtZW50LmNsYXNzTmFtZSA9ICdsb2FkaW5nLW92ZXJsYXknO1xuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICB0ZXh0LnRleHRDb250ZW50ID0gJ0xvYWRpbmcuLi4nO1xuICAgICAgICB0aGlzLmxvYWRpbmdPdmVybGF5RWxlbWVudC5hcHBlbmRDaGlsZCh0ZXh0KTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmxvYWRpbmdPdmVybGF5RWxlbWVudCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbVUlNYW5hZ2VyXSBMb2FkaW5nIG92ZXJsYXkgY3JlYXRlZC4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubG9hZGluZ092ZXJsYXlFbGVtZW50O1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUdhbWVPdmVyU2NyZWVuKCkge1xuICAgIHRoaXMuZ2FtZU92ZXJTY3JlZW5FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtb3Zlci1zY3JlZW4nKTtcbiAgICBpZiAoIXRoaXMuZ2FtZU92ZXJTY3JlZW5FbGVtZW50KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbVUlNYW5hZ2VyXSBDUklUOiAjZ2FtZS1vdmVyLXNjcmVlbiBub3QgaW4gSFRNTCEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5nYW1lT3ZlclRpdGxlRWxlbWVudCA9IHRoaXMuZ2FtZU92ZXJTY3JlZW5FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnYW1lLW92ZXItdGl0bGUnKTtcbiAgICB0aGlzLmNyZWF0b3JOYW1lc0xpc3RFbGVtZW50ID0gdGhpcy5nYW1lT3ZlclNjcmVlbkVsZW1lbnQucXVlcnlTZWxlY3RvcignI2NyZWF0b3ItbmFtZXMnKTtcbiAgICB0aGlzLmNsYXNzSW5mb0VsZW1lbnQgPSB0aGlzLmdhbWVPdmVyU2NyZWVuRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjY2xhc3MtaW5mbycpO1xuICAgIHRoaXMucmV0dXJuVG9NZW51QnV0dG9uRWxlbWVudCA9XG4gICAgICB0aGlzLmdhbWVPdmVyU2NyZWVuRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjcmV0dXJuLXRvLW1lbnUtYnV0dG9uJyk7XG4gICAgdGhpcy5sZWFkZXJib2FyZEJvZHkgPSB0aGlzLmdhbWVPdmVyU2NyZWVuRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjbGVhZGVyYm9hcmQtYm9keScpO1xuXG4gICAgaWYgKFxuICAgICAgIXRoaXMuZ2FtZU92ZXJUaXRsZUVsZW1lbnQgfHxcbiAgICAgICF0aGlzLmNyZWF0b3JOYW1lc0xpc3RFbGVtZW50IHx8XG4gICAgICAhdGhpcy5jbGFzc0luZm9FbGVtZW50IHx8XG4gICAgICAhdGhpcy5yZXR1cm5Ub01lbnVCdXR0b25FbGVtZW50IHx8XG4gICAgICAhdGhpcy5sZWFkZXJib2FyZEJvZHlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVSU1hbmFnZXJdIEZhaWxlZCB0byBmaW5kIEdhbWUgT3ZlciBzY3JlZW4gY2hpbGRyZW4gb3IgbGVhZGVyYm9hcmQgYm9keS4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZXR1cm5Ub01lbnVCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpKTtcbiAgICAvLyB1cGRhdGVMZWFkZXJib2FyZCB3aWxsIGJlIGNhbGxlZCBieSBzdG9wVGltZXIgb3Igc2hvd0dhbWVPdmVyU2NyZWVuXG4gICAgY29uc29sZS5sb2coJ1tVSU1hbmFnZXJdIEdhbWUgT3ZlciBzY3JlZW4gZWxlbWVudHMgaW5pdGlhbGl6ZWQuJyk7XG4gIH1cblxuICBzdGF0aWMgc2hvd0dhbWVPdmVyU2NyZWVuKGlzV2luLCBjcmVhdG9ycyA9IFtdLCBjbGFzc0luZm9UZXh0ID0gJycpIHtcbiAgICBpZiAoIXRoaXMuZ2FtZU92ZXJTY3JlZW5FbGVtZW50KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbVUlNYW5hZ2VyXSBHYW1lIE92ZXIgU2NyZWVuIG5vdCBpbml0LCBjcmVhdGluZy4nKTtcbiAgICAgIHRoaXMuY3JlYXRlR2FtZU92ZXJTY3JlZW4oKTtcbiAgICAgIGlmICghdGhpcy5nYW1lT3ZlclNjcmVlbkVsZW1lbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW1VJTWFuYWdlcl0gU3RpbGwgdW5hYmxlIHRvIHNob3cgR2FtZSBPdmVyIHNjcmVlbi4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5nYW1lT3ZlclRpdGxlRWxlbWVudCkge1xuICAgICAgdGhpcy5nYW1lT3ZlclRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IGlzV2luID8gJ0JyYXdvIHVjaWVrxYJlxZshJyA6ICdLb25pZWMgZ3J5JztcbiAgICAgIHRoaXMuZ2FtZU92ZXJUaXRsZUVsZW1lbnQuY2xhc3NOYW1lID0gaXNXaW4gPyAnd2luLXRpdGxlJyA6ICdsb3NlLXRpdGxlJztcbiAgICB9XG4gICAgaWYgKHRoaXMuY3JlYXRvck5hbWVzTGlzdEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuY3JlYXRvck5hbWVzTGlzdEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICBjcmVhdG9ycy5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgbGkudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICB0aGlzLmNyZWF0b3JOYW1lc0xpc3RFbGVtZW50LmFwcGVuZENoaWxkKGxpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5jbGFzc0luZm9FbGVtZW50KSB0aGlzLmNsYXNzSW5mb0VsZW1lbnQudGV4dENvbnRlbnQgPSBjbGFzc0luZm9UZXh0O1xuICAgIHRoaXMudXBkYXRlTGVhZGVyYm9hcmQoKTsgLy8gTG9hZCBhbmQgZGlzcGxheSBsZWFkZXJib2FyZCBkYXRhXG4gICAgdGhpcy5nYW1lT3ZlclNjcmVlbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgIHRoaXMuaGlkZUdhbWVVSSgpO1xuICAgIHRoaXMuaGlkZVF1ZXN0aW9uKCk7XG4gICAgdGhpcy5oaWRlRmxvb3JTZWxlY3Rpb25VSSgpO1xuICB9XG5cbiAgc3RhdGljIGhpZGVHYW1lT3ZlclNjcmVlbigpIHtcbiAgICBpZiAodGhpcy5nYW1lT3ZlclNjcmVlbkVsZW1lbnQpIHRoaXMuZ2FtZU92ZXJTY3JlZW5FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgfVxuXG4gIHN0YXRpYyBzaG93UXVlc3Rpb24ocXVlc3Rpb25EYXRhKSB7XG4gICAgaWYgKCF0aGlzLnF1ZXN0aW9uT3ZlcmxheSB8fCAhdGhpcy5xdWVzdGlvblRleHRFbGVtZW50IHx8ICF0aGlzLmFuc3dlckJ1dHRvbnNDb250YWluZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVSU1hbmFnZXJdIFF1ZXN0aW9uIFVJIG5vdCByZWFkeSwgY3JlYXRpbmcuJyk7XG4gICAgICB0aGlzLmNyZWF0ZVF1ZXN0aW9uVUkoKTtcbiAgICAgIGlmICghdGhpcy5xdWVzdGlvbk92ZXJsYXkgfHwgIXRoaXMucXVlc3Rpb25UZXh0RWxlbWVudCB8fCAhdGhpcy5hbnN3ZXJCdXR0b25zQ29udGFpbmVyKVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcXVlc3Rpb25EYXRhKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbVUlNYW5hZ2VyXSBObyBxdWVzdGlvbkRhdGEgdG8gc2hvdy4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmdhbWVwbGF5TWFuYWdlckluc3RhbmNlPy5oYW5kbGVBbnN3ZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVSU1hbmFnZXJdIENSSVQ6IEdhbWVwbGF5TWFuYWdlci9oYW5kbGVBbnN3ZXIgbm90IHNldC9pbnZhbGlkIScpO1xuICAgICAgdGhpcy5mbGFzaE1lc3NhZ2UoJ0Vycm9yOiBHYW1lIGludGVyYWN0aW9uIChRKSBmYWlsZWQuJywgJ2Vycm9yJywgNTAwMCk7XG4gICAgICB0aGlzLmhpZGVRdWVzdGlvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnF1ZXN0aW9uVGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSBxdWVzdGlvbkRhdGEucXVlc3Rpb247XG4gICAgdGhpcy5hbnN3ZXJCdXR0b25zQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIHF1ZXN0aW9uRGF0YS5vcHRpb25zLmZvckVhY2goKG9wdGlvblRleHQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIGJ0bi50ZXh0Q29udGVudCA9IG9wdGlvblRleHQ7XG4gICAgICBidG4uZGF0YXNldC5pbmRleCA9IGluZGV4LnRvU3RyaW5nKCk7XG4gICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYW5zd2VyLWJ1dHRvbicpO1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+XG4gICAgICAgIHRoaXMuZ2FtZXBsYXlNYW5hZ2VySW5zdGFuY2UuaGFuZGxlQW5zd2VyKHBhcnNlSW50KGUudGFyZ2V0LmRhdGFzZXQuaW5kZXgsIDEwKSlcbiAgICAgICk7XG4gICAgICB0aGlzLmFuc3dlckJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnRuKTtcbiAgICB9KTtcbiAgICB0aGlzLnF1ZXN0aW9uT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gIH1cblxuICBzdGF0aWMgaGlkZVF1ZXN0aW9uKCkge1xuICAgIGlmICh0aGlzLnF1ZXN0aW9uT3ZlcmxheSkge1xuICAgICAgdGhpcy5xdWVzdGlvbk92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgaWYgKHRoaXMucXVlc3Rpb25UZXh0RWxlbWVudCkgdGhpcy5xdWVzdGlvblRleHRFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgICBpZiAodGhpcy5hbnN3ZXJCdXR0b25zQ29udGFpbmVyKSB0aGlzLmFuc3dlckJ1dHRvbnNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNob3dGbG9vclNlbGVjdGlvblVJKG1pbkZsb29yLCBtYXhGbG9vciwgY3VycmVudEZsb29yKSB7XG4gICAgaWYgKCF0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwgfHwgIXRoaXMuZmxvb3JCdXR0b25zQ29udGFpbmVyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbVUlNYW5hZ2VyXSBGbG9vciBzZWxlY3Rpb24gVUkgbm90IHJlYWR5LCBjcmVhdGluZy4nKTtcbiAgICAgIHRoaXMuY3JlYXRlRmxvb3JTZWxlY3Rpb25VSSgpO1xuICAgICAgaWYgKCF0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwgfHwgIXRoaXMuZmxvb3JCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy5nYW1lcGxheU1hbmFnZXJJbnN0YW5jZT8uaGFuZGxlRmxvb3JTZWxlY3Rpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVSU1hbmFnZXJdIENSSVQ6IEdhbWVwbGF5TWFuYWdlci9oYW5kbGVGbG9vclNlbGVjdGlvbiBub3Qgc2V0L2ludmFsaWQhJyk7XG4gICAgICB0aGlzLmZsYXNoTWVzc2FnZSgnRXJyb3I6IEdhbWUgaW50ZXJhY3Rpb24gKEYpIGZhaWxlZC4nLCAnZXJyb3InLCA1MDAwKTtcbiAgICAgIHRoaXMuaGlkZUZsb29yU2VsZWN0aW9uVUkoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5mbG9vckJ1dHRvbnNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgZm9yIChsZXQgZmxvb3IgPSBtaW5GbG9vcjsgZmxvb3IgPD0gbWF4Rmxvb3I7IGZsb29yKyspIHtcbiAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgYnRuLnRleHRDb250ZW50ID0gYEZsb29yICR7Zmxvb3J9YDtcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdmbG9vci1idXR0b24nKTtcbiAgICAgIGJ0bi5kYXRhc2V0LmZsb29yID0gZmxvb3IudG9TdHJpbmcoKTtcbiAgICAgIGlmIChmbG9vciA9PT0gY3VycmVudEZsb29yKSB7XG4gICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XG4gICAgICB9IGVsc2VcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT5cbiAgICAgICAgICB0aGlzLmdhbWVwbGF5TWFuYWdlckluc3RhbmNlLmhhbmRsZUZsb29yU2VsZWN0aW9uKGZsb29yKVxuICAgICAgICApO1xuICAgICAgdGhpcy5mbG9vckJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnRuKTtcbiAgICB9XG4gICAgdGhpcy5mbG9vclNlbGVjdGlvblBhbmVsLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgfVxuXG4gIHN0YXRpYyBoaWRlRmxvb3JTZWxlY3Rpb25VSSgpIHtcbiAgICBpZiAodGhpcy5mbG9vclNlbGVjdGlvblBhbmVsKSB0aGlzLmZsb29yU2VsZWN0aW9uUGFuZWwuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICB9XG5cbiAgc3RhdGljIHVwZGF0ZVNjb3JlKHNjb3JlLCB0YXJnZXQpIHtcbiAgICBpZiAoIXRoaXMuc2NvcmVFbGVtZW50KSB0aGlzLnNjb3JlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZS12YWx1ZScpO1xuICAgIGlmICghdGhpcy50YXJnZXRFbGVtZW50KSB0aGlzLnRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUtdGFyZ2V0Jyk7XG4gICAgaWYgKHRoaXMuc2NvcmVFbGVtZW50KSB0aGlzLnNjb3JlRWxlbWVudC50ZXh0Q29udGVudCA9IHNjb3JlLnRvU3RyaW5nKCk7XG4gICAgaWYgKHRoaXMudGFyZ2V0RWxlbWVudCkgdGhpcy50YXJnZXRFbGVtZW50LnRleHRDb250ZW50ID0gdGFyZ2V0LnRvU3RyaW5nKCk7XG4gIH1cblxuICBzdGF0aWMgc2hvd0dhbWVVSSgpIHtcbiAgICBjb25zb2xlLmxvZygnW1VJTWFuYWdlcl0gU2hvd2luZyBHYW1lIFVJLi4uJyk7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzJyk7XG4gICAgY29uc3Qgc2NvcmVEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlLWRpc3BsYXknKTtcbiAgICBpZiAoY2FudmFzKSBjYW52YXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgZWxzZSBjb25zb2xlLndhcm4oJ1tVSU1hbmFnZXJdICNnYW1lLWNhbnZhcyBub3QgZm91bmQuJyk7XG4gICAgaWYgKHRoaXMuY29udHJvbHNDb250YWluZXIpIHRoaXMuY29udHJvbHNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgIGVsc2UgY29uc29sZS53YXJuKCdbVUlNYW5hZ2VyXSBDb250cm9scyBjb250YWluZXIgbm90IGZvdW5kLicpO1xuICAgIGlmIChzY29yZURpc3BsYXkpIHtcbiAgICAgIHNjb3JlRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgc2NvcmVEaXNwbGF5LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICB9IGVsc2UgY29uc29sZS53YXJuKCdbVUlNYW5hZ2VyXSBTY29yZSBkaXNwbGF5IG5vdCBmb3VuZC4nKTtcbiAgICBpZiAodGhpcy50aW1lckVsZW1lbnQpIHRoaXMudGltZXJFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgdGhpcy5oaWRlUXVlc3Rpb24oKTtcbiAgICB0aGlzLmhpZGVGbG9vclNlbGVjdGlvblVJKCk7XG4gICAgdGhpcy5oaWRlR2FtZU92ZXJTY3JlZW4oKTtcbiAgfVxuXG4gIHN0YXRpYyBoaWRlR2FtZVVJKCkge1xuICAgIGNvbnNvbGUubG9nKCdbVUlNYW5hZ2VyXSBIaWRpbmcgR2FtZSBVSS4uLicpO1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLWNhbnZhcycpO1xuICAgIGNvbnN0IHNjb3JlRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZS1kaXNwbGF5Jyk7XG4gICAgaWYgKGNhbnZhcykgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgaWYgKHRoaXMuY29udHJvbHNDb250YWluZXIpIHRoaXMuY29udHJvbHNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgIGlmIChzY29yZURpc3BsYXkpIHtcbiAgICAgIHNjb3JlRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgc2NvcmVEaXNwbGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudGltZXJFbGVtZW50KSB0aGlzLnRpbWVyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG5cbiAgc3RhdGljIGluaXRpYWxpemVUaW1lcigpIHtcbiAgICBpZiAoIXRoaXMudGltZXJFbGVtZW50KSB7XG4gICAgICB0aGlzLnRpbWVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLXRpbWVyJyk7XG4gICAgICBpZiAoIXRoaXMudGltZXJFbGVtZW50KSB7XG4gICAgICAgIHRoaXMudGltZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMudGltZXJFbGVtZW50LmlkID0gJ2dhbWUtdGltZXInO1xuICAgICAgICB0aGlzLnRpbWVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdnYW1lLXRpbWVyJyk7XG4gICAgICAgIGNvbnN0IGdhbWVVaUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLWNvbnRhaW5lcicpIHx8IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIGdhbWVVaUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnRpbWVyRWxlbWVudCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbVUlNYW5hZ2VyXSBUaW1lciBlbGVtZW50IGR5bmFtaWNhbGx5IGNyZWF0ZWQuJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudGltZXJFbGVtZW50LnRleHRDb250ZW50ID0gJ0N6YXM6IDA6MDAnO1xuICAgIHRoaXMudGltZXJFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEhpZGRlbiBieSBkZWZhdWx0XG5cbiAgICBjb25zdCBzYXZlZERhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZUxlYWRlcmJvYXJkJyk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubGVhZGVyYm9hcmREYXRhID0gc2F2ZWREYXRhID8gSlNPTi5wYXJzZShzYXZlZERhdGEpIDogW107XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignW1VJTWFuYWdlcl0gRXJyb3IgcGFyc2luZyBsZWFkZXJib2FyZCBmcm9tIGxvY2FsU3RvcmFnZTonLCBlKTtcbiAgICAgIHRoaXMubGVhZGVyYm9hcmREYXRhID0gW107XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZ2FtZUxlYWRlcmJvYXJkJyk7XG4gICAgfVxuICAgIC8vIHVwZGF0ZUxlYWRlcmJvYXJkKCkgaXMgdXN1YWxseSBjYWxsZWQgd2hlbiBHYW1lT3ZlciBzY3JlZW4gaXMgc2hvd25cbiAgICBjb25zb2xlLmxvZygnW1VJTWFuYWdlcl0gVGltZXIgYW5kIGxlYWRlcmJvYXJkIGRhdGEgaW5pdGlhbGl6ZWQuJyk7XG4gIH1cblxuICBzdGF0aWMgc3RhcnRUaW1lcigpIHtcbiAgICBpZiAodGhpcy50aW1lckludGVydmFsSWQpIHtcbiAgICAgIC8vIENsZWFyIHByZXZpb3VzIGludGVydmFsIGlmIGFueVxuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy50aW1lckludGVydmFsSWQpO1xuICAgICAgdGhpcy50aW1lckludGVydmFsSWQgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCBnYW1lID0gdGhpcy5nYW1lcGxheU1hbmFnZXJJbnN0YW5jZT8uZ2FtZTtcbiAgICBpZiAoZ2FtZSAmJiBnYW1lLmdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLlBMQVlJTkcpIHtcbiAgICAgIHRoaXMuZ2FtZVN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYFtVSU1hbmFnZXJdIEdhbWUgdGltZXIgc3RhcnRpbmcuIFN0YXJ0IHRpbWU6ICR7dGhpcy5nYW1lU3RhcnRUaW1lfS4gU3RhdGU6ICR7Z2FtZS5nYW1lU3RhdGV9YFxuICAgICAgKTtcbiAgICAgIHRoaXMudXBkYXRlVGltZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgW1VJTWFuYWdlcl0gVGltZXIgc3RhcnQgZGVuaWVkLiBHYW1lOiAkeyEhZ2FtZX0sIFN0YXRlOiAke1xuICAgICAgICAgIGdhbWU/LmdhbWVTdGF0ZVxuICAgICAgICB9LiBFeHBlY3RlZCBQTEFZSU5HLmBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZVRpbWVyKCkge1xuICAgIGNvbnN0IGdhbWUgPSB0aGlzLmdhbWVwbGF5TWFuYWdlckluc3RhbmNlPy5nYW1lO1xuICAgIGlmIChcbiAgICAgICF0aGlzLmdhbWVTdGFydFRpbWUgfHxcbiAgICAgICFnYW1lIHx8XG4gICAgICAoZ2FtZS5nYW1lU3RhdGUgIT09IEdhbWVTdGF0ZS5QTEFZSU5HICYmXG4gICAgICAgIGdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuQVNLSU5HX1FVRVNUSU9OICYmXG4gICAgICAgIGdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuU0VMRUNUSU5HX0ZMT09SICYmXG4gICAgICAgIGdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuVFJBTlNJVElPTklORylcbiAgICApIHtcbiAgICAgIGlmICh0aGlzLnRpbWVySW50ZXJ2YWxJZCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnRpbWVySW50ZXJ2YWxJZCk7XG4gICAgICAgIHRoaXMudGltZXJJbnRlcnZhbElkID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZWxhcHNlZCA9IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSB0aGlzLmdhbWVTdGFydFRpbWUpIC8gMTAwMCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoZWxhcHNlZCAvIDYwKTtcbiAgICBjb25zdCBzZWNvbmRzID0gZWxhcHNlZCAlIDYwO1xuICAgIGlmICh0aGlzLnRpbWVyRWxlbWVudClcbiAgICAgIHRoaXMudGltZXJFbGVtZW50LnRleHRDb250ZW50ID0gYEN6YXM6ICR7bWludXRlc306JHtzZWNvbmRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgIHRoaXMudGltZXJJbnRlcnZhbElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMudXBkYXRlVGltZXIoKSk7XG4gIH1cblxuICBzdGF0aWMgc3RvcFRpbWVyKHdhc1dpbikge1xuICAgIGlmICghdGhpcy5nYW1lU3RhcnRUaW1lKSByZXR1cm47IC8vIFRpbWVyIHdhc24ndCBydW5uaW5nXG4gICAgaWYgKHRoaXMudGltZXJJbnRlcnZhbElkKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnRpbWVySW50ZXJ2YWxJZCk7XG4gICAgICB0aGlzLnRpbWVySW50ZXJ2YWxJZCA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHRvdGFsVGltZSA9IChlbmRUaW1lIC0gdGhpcy5nYW1lU3RhcnRUaW1lKSAvIDEwMDA7XG4gICAgY29uc29sZS5sb2coYFtVSU1hbmFnZXJdIEN6YXMgemF0cnp5bWFueS4gQ3phczogJHt0b3RhbFRpbWUudG9GaXhlZCgzKX1zLiBXeWdyYW5hOiAke3dhc1dpbn1gKTtcbiAgICBpZiAod2FzV2luKSB7XG4gICAgICB0aGlzLmxlYWRlcmJvYXJkRGF0YS5wdXNoKHtcbiAgICAgICAgbmFtZTogYFBvZGVqxZtjaWUgJHt0aGlzLmxlYWRlcmJvYXJkRGF0YS5sZW5ndGggKyAxfWAsXG4gICAgICAgIHRpbWU6IHRvdGFsVGltZSxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5sZWFkZXJib2FyZERhdGEuc29ydCgoYSwgYikgPT4gYS50aW1lIC0gYi50aW1lKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lTGVhZGVyYm9hcmQnLCBKU09OLnN0cmluZ2lmeSh0aGlzLmxlYWRlcmJvYXJkRGF0YS5zbGljZSgwLCAxMCkpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW1VJTWFuYWdlcl0gRmFpbGVkIHRvIHNhdmUgbGVhZGVyYm9hcmQ6JywgZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZ2FtZVN0YXJ0VGltZSA9IDA7IC8vIFJlc2V0LCBlZmZlY3RpdmVseSBzdG9wcGluZyB1cGRhdGVUaW1lciBsb29wXG4gICAgLy8gdXBkYXRlTGVhZGVyYm9hcmQoKSB3aWxsIGJlIGNhbGxlZCBieSBzaG93R2FtZU92ZXJTY3JlZW5cbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVMZWFkZXJib2FyZCgpIHtcbiAgICBpZiAoIXRoaXMubGVhZGVyYm9hcmRCb2R5KSB7XG4gICAgICBjb25zdCBnb1NjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLW92ZXItc2NyZWVuJyk7XG4gICAgICBpZiAoZ29TY3JlZW4pIHRoaXMubGVhZGVyYm9hcmRCb2R5ID0gZ29TY3JlZW4ucXVlcnlTZWxlY3RvcignI2xlYWRlcmJvYXJkLWJvZHknKTtcbiAgICAgIGlmICghdGhpcy5sZWFkZXJib2FyZEJvZHkpIHtcbiAgICAgICAgLyogY29uc29sZS53YXJuKCdbVUlNYW5hZ2VyXSBMZWFkZXJib2FyZCBib2R5IG5vdCBmb3VuZCBmb3IgdXBkYXRlLicpOyAqLyByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGVhZGVyYm9hcmRCb2R5LmlubmVySFRNTCA9ICcnO1xuICAgIGNvbnN0IHRvcFNjb3JlcyA9IHRoaXMubGVhZGVyYm9hcmREYXRhLnNsaWNlKDAsIDEwKTtcbiAgICBpZiAodG9wU2NvcmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3Qgcm93ID0gdGhpcy5sZWFkZXJib2FyZEJvZHkuaW5zZXJ0Um93KCk7XG4gICAgICBjb25zdCBjZWxsID0gcm93Lmluc2VydENlbGwoKTtcbiAgICAgIGNlbGwuY29sU3BhbiA9IDM7XG4gICAgICBjZWxsLnRleHRDb250ZW50ID0gJ05vIHJlY29yZHMgeWV0Lic7XG4gICAgICBjZWxsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b3BTY29yZXMuZm9yRWFjaCgocnVuKSA9PiB7XG4gICAgICAgIGNvbnN0IG1pbnMgPSBNYXRoLmZsb29yKHJ1bi50aW1lIC8gNjApO1xuICAgICAgICBjb25zdCBzZWNzID0gTWF0aC5mbG9vcihydW4udGltZSAlIDYwKTtcbiAgICAgICAgY29uc3QgbWlsbHMgPSBNYXRoLmZsb29yKChydW4udGltZSAqIDEwMDApICUgMTAwMCk7XG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMubGVhZGVyYm9hcmRCb2R5Lmluc2VydFJvdygpO1xuICAgICAgICByb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gcnVuLm5hbWU7XG4gICAgICAgIHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBgJHttaW5zfToke3NlY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfS4ke21pbGxzXG4gICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgICAucGFkU3RhcnQoMywgJzAnKX1gO1xuICAgICAgICByb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gcnVuLmRhdGU7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIHNyYy9jb3JlL0NoYXJhY3Rlci5qc1xuXG5leHBvcnQgY2xhc3MgQ2hhcmFjdGVyIHtcbiAgLyoqIFN0YXRpYyBvYmplY3QgZm9yIGRpcmVjdGlvbiBjb25zdGFudHMgKi9cbiAgc3RhdGljIERpcmVjdGlvbiA9IHtcbiAgICBET1dOOiAwLFxuICAgIFJJR0hUOiAxLFxuICAgIFVQOiAyLFxuICAgIExFRlQ6IDMsXG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQ2hhcmFjdGVyIGluc3RhbmNlLlxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY3R4IC0gVGhlIHJlbmRlcmluZyBjb250ZXh0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3ByaXRlVXJsIC0gVVJMIG9mIHRoZSBjaGFyYWN0ZXIncyBzcHJpdGUgc2hlZXQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuZnJhbWVTaXplPTMyXSAtIFNpemUgb2Ygb25lIGZyYW1lIGluIHRoZSBzcHJpdGUgc2hlZXQgKHBpeGVscykuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5mcmFtZUNvdW50PTRdIC0gTnVtYmVyIG9mIGZyYW1lcyBwZXIgYW5pbWF0aW9uIGN5Y2xlIChwZXIgZGlyZWN0aW9uKS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNjYWxlPTJdIC0gU2NhbGluZyBmYWN0b3IgZm9yIHJlbmRlcmluZy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNwZWVkPTNdIC0gTW92ZW1lbnQgc3BlZWQgaW4gcGl4ZWxzIHBlciB1cGRhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5hbmltYXRpb25TcGVlZD0xNTBdIC0gTWlsbGlzZWNvbmRzIHBlciBhbmltYXRpb24gZnJhbWUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5jb2xsaXNpb25Cb3hXaWR0aFJhdGlvPTAuNF0gLSBXaWR0aCBvZiBjb2xsaXNpb24gYm94IHJlbGF0aXZlIHRvIHJlbmRlclNpemUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5jb2xsaXNpb25Cb3hIZWlnaHRSYXRpbz0wLjJdIC0gSGVpZ2h0IG9mIGNvbGxpc2lvbiBib3ggcmVsYXRpdmUgdG8gcmVuZGVyU2l6ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmNvbGxpc2lvbkJveEZlZXRPZmZzZXRSYXRpbz0wLjRdIC0gVmVydGljYWwgb2Zmc2V0IG9mIGNvbGxpc2lvbiBib3ggY2VudGVyIGZyb20gY2hhcmFjdGVyIGNlbnRlciAodG93YXJkcyBmZWV0KSwgcmVsYXRpdmUgdG8gcmVuZGVyU2l6ZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGN0eCwgc3ByaXRlVXJsLCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICB0aGlzLnNwcml0ZSA9IG5ldyBJbWFnZSgpO1xuXG4gICAgLy8gQ29uZmlndXJhdGlvbiB3aXRoIGRlZmF1bHRzXG4gICAgdGhpcy5mcmFtZVNpemUgPSBvcHRpb25zLmZyYW1lU2l6ZSB8fCAzMjtcbiAgICB0aGlzLmZyYW1lQ291bnQgPSBvcHRpb25zLmZyYW1lQ291bnQgfHwgNDsgLy8gTnVtYmVyIG9mIGZyYW1lcyBwZXIgZGlyZWN0aW9uXG4gICAgdGhpcy5zY2FsZSA9IG9wdGlvbnMuc2NhbGUgfHwgMjtcbiAgICB0aGlzLnJlbmRlclNpemUgPSB0aGlzLmZyYW1lU2l6ZSAqIHRoaXMuc2NhbGU7XG4gICAgdGhpcy5zcGVlZCA9IG9wdGlvbnMuc3BlZWQgfHwgMztcbiAgICB0aGlzLmFuaW1hdGlvblNwZWVkID0gb3B0aW9ucy5hbmltYXRpb25TcGVlZCB8fCAxNTA7IC8vIG1zIHBlciBmcmFtZVxuXG4gICAgLy8gQ29sbGlzaW9uIEJveCBDb25maWd1cmF0aW9uXG4gICAgdGhpcy5jb2xsaXNpb25Cb3hXaWR0aFJhdGlvID0gb3B0aW9ucy5jb2xsaXNpb25Cb3hXaWR0aFJhdGlvIHx8IDAuNDtcbiAgICB0aGlzLmNvbGxpc2lvbkJveEhlaWdodFJhdGlvID0gb3B0aW9ucy5jb2xsaXNpb25Cb3hIZWlnaHRSYXRpbyB8fCAwLjI7XG4gICAgdGhpcy5jb2xsaXNpb25Cb3hGZWV0T2Zmc2V0UmF0aW8gPSBvcHRpb25zLmNvbGxpc2lvbkJveEZlZXRPZmZzZXRSYXRpbyB8fCAwLjQ7XG5cbiAgICAvLyBTdGF0ZVxuICAgIHRoaXMueCA9IDA7IC8vIFdvcmxkIFggY29vcmRpbmF0ZVxuICAgIHRoaXMueSA9IDA7IC8vIFdvcmxkIFkgY29vcmRpbmF0ZVxuICAgIHRoaXMuY3VycmVudERpcmVjdGlvbiA9IENoYXJhY3Rlci5EaXJlY3Rpb24uRE9XTjsgLy8gU3RhcnQgZmFjaW5nIGRvd25cbiAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7IC8vIEN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lIGluZGV4XG4gICAgdGhpcy5pc01vdmluZyA9IGZhbHNlOyAvLyBJcyB0aGUgY2hhcmFjdGVyIGN1cnJlbnRseSBtb3Zpbmc/XG4gICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gMDsgLy8gVGltZXN0YW1wIG9mIHRoZSBsYXN0IGZyYW1lIHVwZGF0ZVxuXG4gICAgLy8gTG9hZCBzcHJpdGUgYW5kIGFkZCBoYW5kbGVyc1xuICAgIHRoaXMuc3ByaXRlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBbQ2hhcmFjdGVyXSBTcHJpdGUgbG9hZGVkIHN1Y2Nlc3NmdWxseTogJHtzcHJpdGVVcmx9YCk7XG4gICAgfTtcbiAgICB0aGlzLnNwcml0ZS5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihgW0NoYXJhY3Rlcl0gRmFpbGVkIHRvIGxvYWQgc3ByaXRlOiAke3Nwcml0ZVVybH1gKTtcbiAgICB9O1xuICAgIHRoaXMuc3ByaXRlLnNyYyA9IHNwcml0ZVVybDsgLy8gU3RhcnQgbG9hZGluZ1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNoYXJhY3RlcidzIGFuaW1hdGlvbiBmcmFtZSBiYXNlZCBvbiBtb3ZlbWVudCBzdGF0ZSBhbmQgdGltZS5cbiAgICogU2hvdWxkIGJlIGNhbGxlZCBpbiB0aGUgZ2FtZSdzIHVwZGF0ZSBsb29wLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZXN0YW1wIC0gVGhlIGN1cnJlbnQgaGlnaC1yZXNvbHV0aW9uIHRpbWVzdGFtcCAoZS5nLiwgZnJvbSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUpLlxuICAgKi9cbiAgdXBkYXRlQW5pbWF0aW9uKHRpbWVzdGFtcCkge1xuICAgIGlmICghdGhpcy5pc01vdmluZykge1xuICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAwO1xuICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gdGltZXN0YW1wO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMubGFzdEZyYW1lVGltZSkge1xuICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gdGltZXN0YW1wO1xuICAgIH1cbiAgICBjb25zdCBlbGFwc2VkID0gdGltZXN0YW1wIC0gdGhpcy5sYXN0RnJhbWVUaW1lO1xuICAgIGlmIChlbGFwc2VkID4gdGhpcy5hbmltYXRpb25TcGVlZCkge1xuICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAodGhpcy5jdXJyZW50RnJhbWUgKyAxKSAlIHRoaXMuZnJhbWVDb3VudDtcbiAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IHRpbWVzdGFtcDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgY29sbGlzaW9uIGJvdW5kaW5nIGJveCBiYXNlZCBvbiBhIHBvdGVudGlhbCBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBvc1ggLSBUaGUgcG90ZW50aWFsIFggY29vcmRpbmF0ZSBmb3IgdGhlIGNvbGxpc2lvbiBjaGVjay5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBvc1kgLSBUaGUgcG90ZW50aWFsIFkgY29vcmRpbmF0ZSBmb3IgdGhlIGNvbGxpc2lvbiBjaGVjay5cbiAgICogQHJldHVybnMge3t0b3A6IG51bWJlciwgYm90dG9tOiBudW1iZXIsIGxlZnQ6IG51bWJlciwgcmlnaHQ6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXJ9fSBUaGUgY29sbGlzaW9uIGJveCBwcm9wZXJ0aWVzLlxuICAgKi9cbiAgZ2V0Q29sbGlzaW9uQm94KHBvc1gsIHBvc1kpIHtcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMucmVuZGVyU2l6ZSAqIHRoaXMuY29sbGlzaW9uQm94V2lkdGhSYXRpbztcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnJlbmRlclNpemUgKiB0aGlzLmNvbGxpc2lvbkJveEhlaWdodFJhdGlvO1xuICAgIGNvbnN0IGhhbGZXaWR0aCA9IHdpZHRoIC8gMjtcbiAgICBjb25zdCBmZWV0T2Zmc2V0WSA9IHRoaXMucmVuZGVyU2l6ZSAqIHRoaXMuY29sbGlzaW9uQm94RmVldE9mZnNldFJhdGlvO1xuICAgIGNvbnN0IHRvcCA9IHBvc1kgKyBmZWV0T2Zmc2V0WSAtIGhlaWdodCAvIDI7XG4gICAgY29uc3QgYm90dG9tID0gcG9zWSArIGZlZXRPZmZzZXRZICsgaGVpZ2h0IC8gMjtcbiAgICBjb25zdCBsZWZ0ID0gcG9zWCAtIGhhbGZXaWR0aDtcbiAgICBjb25zdCByaWdodCA9IHBvc1ggKyBoYWxmV2lkdGg7XG4gICAgcmV0dXJuIHsgdG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0LCB3aWR0aCwgaGVpZ2h0IH07XG4gIH1cblxuICAvKipcbiAgICogRHJhd3MgdGhlIGNoYXJhY3RlciBvbnRvIHRoZSBjYW52YXMgYXQgaXRzIGN1cnJlbnQgcG9zaXRpb24sXG4gICAqIGNvbnNpZGVyaW5nIHRoZSBjYW1lcmEgb2Zmc2V0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WCAtIFRoZSBjYW1lcmEncyBYIG9mZnNldC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFkgLSBUaGUgY2FtZXJhJ3MgWSBvZmZzZXQuXG4gICAqL1xuICBkcmF3KG9mZnNldFgsIG9mZnNldFkpIHtcbiAgICBpZiAoIXRoaXMuc3ByaXRlLmNvbXBsZXRlIHx8IHRoaXMuc3ByaXRlLm5hdHVyYWxIZWlnaHQgPT09IDApIHtcbiAgICAgIHJldHVybjsgLy8gRG9uJ3QgZHJhdyBpZiBzcHJpdGUgaXNuJ3QgcmVhZHlcbiAgICB9XG4gICAgY29uc3QgZnJhbWVYID0gdGhpcy5jdXJyZW50RnJhbWUgKiB0aGlzLmZyYW1lU2l6ZTtcbiAgICBjb25zdCBmcmFtZVkgPSB0aGlzLmN1cnJlbnREaXJlY3Rpb24gKiB0aGlzLmZyYW1lU2l6ZTtcbiAgICBjb25zdCBzY3JlZW5YID0gTWF0aC5mbG9vcih0aGlzLnggLSB0aGlzLnJlbmRlclNpemUgLyAyICsgb2Zmc2V0WCk7XG4gICAgY29uc3Qgc2NyZWVuWSA9IE1hdGguZmxvb3IodGhpcy55IC0gdGhpcy5yZW5kZXJTaXplIC8gMiArIG9mZnNldFkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZShcbiAgICAgICAgdGhpcy5zcHJpdGUsXG4gICAgICAgIGZyYW1lWCxcbiAgICAgICAgZnJhbWVZLFxuICAgICAgICB0aGlzLmZyYW1lU2l6ZSxcbiAgICAgICAgdGhpcy5mcmFtZVNpemUsIC8vIFNvdXJjZSByZWN0XG4gICAgICAgIHNjcmVlblgsXG4gICAgICAgIHNjcmVlblksXG4gICAgICAgIHRoaXMucmVuZGVyU2l6ZSxcbiAgICAgICAgdGhpcy5yZW5kZXJTaXplIC8vIERlc3QgcmVjdFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQ2hhcmFjdGVyXSBFcnJvciBkcmF3aW5nIHNwcml0ZTonLCBlKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIHNyYy9tYXAvQm9vay5qc1xuZXhwb3J0IGNsYXNzIEJvb2sge1xuICBjb25zdHJ1Y3Rvcih4LCB5LCBpZCwgdGlsZVNpemUpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMudGlsZVNpemUgPSB0aWxlU2l6ZTtcbiAgICB0aGlzLnNpemUgPSB0aWxlU2l6ZSAqIDAuNjtcbiAgICB0aGlzLmNvbGxlY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuaXNDb2xsZWN0ZWQgPSBmYWxzZTtcbiAgfVxuICBkcmF3KGN0eCwgb2Zmc2V0WCwgb2Zmc2V0WSwgYm9va0ltYWdlKSB7XG4gICAgY29uc3Qgc2NyZWVuWCA9IE1hdGguZmxvb3IodGhpcy54ICsgb2Zmc2V0WCAtIHRoaXMuc2l6ZSAvIDIpO1xuICAgIGNvbnN0IHNjcmVlblkgPSBNYXRoLmZsb29yKHRoaXMueSArIG9mZnNldFkgLSB0aGlzLnNpemUgLyAyKTtcbiAgICBpZiAoYm9va0ltYWdlKSB7XG4gICAgICBjdHguZHJhd0ltYWdlKGJvb2tJbWFnZSwgc2NyZWVuWCwgc2NyZWVuWSwgdGhpcy5zaXplLCB0aGlzLnNpemUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJyM4ZDZlNjMnO1xuICAgICAgY3R4LmZpbGxSZWN0KHNjcmVlblgsIHNjcmVlblksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNWQ0MDM3JztcbiAgICAgIGN0eC5zdHJva2VSZWN0KHNjcmVlblgsIHNjcmVlblksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VlZSc7XG4gICAgICBjdHguZm9udCA9IGAke3RoaXMuc2l6ZSAqIDAuNn1weCBBcmlhbGA7XG4gICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4gICAgICBjdHguZmlsbFRleHQoJz8nLCBzY3JlZW5YICsgdGhpcy5zaXplIC8gMiwgc2NyZWVuWSArIHRoaXMuc2l6ZSAvIDIgKyAyKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIHNyYy91dGlscy9tYXAuanNcbmltcG9ydCB7IFRJTEVfQ09SUklET1IsIFRJTEVfUk9PTV9GTE9PUiwgVElMRV9MSUZUIH0gZnJvbSAnLi9jb25zdGFudHMuanMnOyAvLyBQb3RyemVibmUgZG8gQkZTXG5cbi8qKlxuICogR2VuZXJ1amUgbG9zb3fEhSBsaWN6YsSZIGNhxYJrb3dpdMSFIHogcHJ6ZWR6aWHFgnUgW21pbiwgbWF4XSAod8WCxIVjem5pZSkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIERvbG5hIGdyYW5pY2EuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IEfDs3JuYSBncmFuaWNhLlxuICogQHJldHVybnMge251bWJlcn0gTG9zb3dhIGxpY3piYSBjYcWCa293aXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tSW50KG1pbiwgbWF4KSB7XG4gIG1pbiA9IE1hdGguY2VpbChtaW4pO1xuICBtYXggPSBNYXRoLmZsb29yKG1heCk7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xufVxuXG4vKipcbiAqIFByb3N0YSAobmlla3J5cHRvZ3JhZmljem5hKSBmdW5rY2phIGhhc2h1asSFY2EuXG4gKiBVxbx5d2FuYSBkbyB1enlza2FuaWEgcHNldWRvbG9zb3dlaiwgYWxlIGRldGVybWluaXN0eWN6bmVqIHdhcnRvxZtjaSB6IGxpY3pieSAoa29vcmR5bmF0w7N3KS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzZWVkIFppYXJubyAobnAuIHNrb21iaW5vd2FuZSBrb29yZHluYXR5KS5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IEJlenpuYWtvd2EgMzItYml0b3dhIGxpY3piYSBjYcWCa293aXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2ltcGxlSGFzaChzZWVkKSB7XG4gIGxldCBoID0gc2VlZCBeIDB4ZGVhZGJlZWY7IC8vIFhPUiB6IHdhcnRvxZtjacSFIHBvY3rEhXRrb3fEhVxuICBoID0gTWF0aC5pbXVsKGggXiAoaCA+Pj4gMTYpLCAyMjQ2ODIyNTA3KTtcbiAgaCA9IE1hdGguaW11bChoIF4gKGggPj4+IDEzKSwgMzI2NjQ4OTkwOSk7XG4gIHJldHVybiAoaCBePSBoID4+PiAxNikgPj4+IDA7IC8vIEtvbndlcnNqYSBkbyBsaWN6YnkgYmV6IHpuYWt1IDMyLWJpdG93ZWpcbn1cblxuLy8gLS0tIEZ1bmtjamUga29sb3LDs3cgLS0tXG5cbi8qKlxuICogR2VuZXJ1amUgbG9zb3d5IG9kY2llxYQgc3phcm/Fm2NpIHcgemFkYW55bSB6YWtyZXNpZSBqYXNub8WbY2kgKDAtMjU1KS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5CcmlnaHRuZXNzIE1pbmltYWxuYSBqYXNub8WbxIcuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4QnJpZ2h0bmVzcyBNYWtzeW1hbG5hIGphc25vxZvEhy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEtvbG9yIHcgZm9ybWFjaWUgcmdiKCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21HcmF5KG1pbkJyaWdodG5lc3MsIG1heEJyaWdodG5lc3MpIHtcbiAgY29uc3QgYnJpZ2h0bmVzcyA9IHJhbmRvbUludChtaW5CcmlnaHRuZXNzLCBtYXhCcmlnaHRuZXNzKTtcbiAgcmV0dXJuIGByZ2IoJHticmlnaHRuZXNzfSwke2JyaWdodG5lc3N9LCR7YnJpZ2h0bmVzc30pYDtcbn1cblxuLyoqXG4gKiBHZW5lcnVqZSBsb3Nvd3kgb2RjaWXFhCBzemFyb8WbY2kgZGxhIGtvcnl0YXJ6eS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5CcmlnaHRuZXNzIE1pbmltYWxuYSBqYXNub8WbxIcuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4QnJpZ2h0bmVzcyBNYWtzeW1hbG5hIGphc25vxZvEhy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEtvbG9yIHcgZm9ybWFjaWUgcmdiKCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21Db3JyaWRvckdyYXkobWluQnJpZ2h0bmVzcywgbWF4QnJpZ2h0bmVzcykge1xuICAvLyBNb8W8bmEgdcW8ecSHIHRlaiBzYW1laiBsb2dpa2kgY28gcmFuZG9tR3JheSBsdWIgdWN6eW5pxIcgamUgbmllY28gY2llcGxlanN6eW1pL2NoxYJvZG5pZWpzenltaVxuICBjb25zdCBicmlnaHRuZXNzID0gcmFuZG9tSW50KG1pbkJyaWdodG5lc3MsIG1heEJyaWdodG5lc3MpO1xuICByZXR1cm4gYHJnYigke2JyaWdodG5lc3N9LCR7YnJpZ2h0bmVzc30sJHticmlnaHRuZXNzfSlgO1xufVxuXG4vKipcbiAqIERvc3Rvc293dWplIGphc25vxZvEhyBrb2xvcnUgSEVYIChucC4gJyNSUkdHQkInKS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBoZXhDb2xvciBLb2xvciB3IGZvcm1hY2llIEhFWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYWN0b3IgV3Nww7PFgmN6eW5uaWsgamFzbm/Fm2NpICgxLjAgPSBiZXogem1pYW4sIDwxIGNpZW1uaWVqLCA+MSBqYcWbbmllaikuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBOb3d5IGtvbG9yIHcgZm9ybWFjaWUgSEVYLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRqdXN0Q29sb3JCcmlnaHRuZXNzKGhleENvbG9yLCBmYWN0b3IpIHtcbiAgaWYgKCFoZXhDb2xvciB8fCB0eXBlb2YgaGV4Q29sb3IgIT09ICdzdHJpbmcnIHx8IGhleENvbG9yLmxlbmd0aCA8IDcpIHJldHVybiBoZXhDb2xvcjsgLy8gWndyw7PEhywgamXFm2xpIGtvbG9yIGplc3QgbmllcHJhd2lkxYJvd3lcblxuICBsZXQgciA9IHBhcnNlSW50KGhleENvbG9yLnNsaWNlKDEsIDMpLCAxNik7XG4gIGxldCBnID0gcGFyc2VJbnQoaGV4Q29sb3Iuc2xpY2UoMywgNSksIDE2KTtcbiAgbGV0IGIgPSBwYXJzZUludChoZXhDb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuXG4gIHIgPSBNYXRoLm1pbigyNTUsIE1hdGgubWF4KDAsIE1hdGgucm91bmQociAqIGZhY3RvcikpKTtcbiAgZyA9IE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChnICogZmFjdG9yKSkpO1xuICBiID0gTWF0aC5taW4oMjU1LCBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKGIgKiBmYWN0b3IpKSk7XG5cbiAgY29uc3QgckhleCA9IHIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IGdIZXggPSBnLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCBiSGV4ID0gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKTtcblxuICByZXR1cm4gYCMke3JIZXh9JHtnSGV4fSR7YkhleH1gO1xufVxuXG4vKipcbiAqIFd5a29udWplIGFsZ29yeXRtIHByemVzenVraXdhbmlhIHdzemVyeiAoQkZTKSBuYSBzaWF0Y2UgbWFweS5cbiAqIE1vxbxlIGJ5xIcgdcW8eXdhbnkgZG8gem5hamRvd2FuaWEgxZtjaWXFvGtpIGx1YiBzcHJhd2R6YW5pYSBvc2nEhWdhbG5vxZtjaS5cbiAqIEBwYXJhbSB7bnVtYmVyW11bXX0gbWFwR3JpZCBTaWF0a2EgbWFweSAoMkQgYXJyYXkgeiB3YXJ0b8WbY2lhbWkga2FmZWxrw7N3KS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFggUG9jesSFdGtvd2Egd3Nww7PFgnJ6xJlkbmEgWCBrYWZlbGthLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WSBQb2N6xIV0a293YSB3c3DDs8WCcnrEmWRuYSBZIGthZmVsa2EuXG4gKiBAcGFyYW0ge251bWJlcn0gY29scyBMaWN6YmEga29sdW1uIHcgbWFwR3JpZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3dzIExpY3piYSByesSZZMOzdyB3IG1hcEdyaWQuXG4gKiBAcGFyYW0ge251bWJlcltdfSB3YWxrYWJsZVRpbGVWYWx1ZXMgVGFibGljYSB3YXJ0b8WbY2kga2FmZWxrw7N3IHV3YcW8YW55Y2ggemEgcHJ6ZWNob2RuaWUgZGxhIHRlZ28gQkZTLlxuICogQHJldHVybnMge3tyZWFjaGFibGU6IGJvb2xlYW59fSBPYmlla3Qgd3NrYXp1asSFY3ksIGN6eSBCRlMgb3NpxIVnbsSFxYIgb2tyZcWbbG9ueSBjZWwgKHcgdHltIHByenlwYWRrdSwgY3p5IHogcHVua3R1IHN0YXJ0b3dlZ28gbW/FvG5hIGRvasWbxIcgZG8ga29yeXRhcnphL3Bva29qdSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwZXJmb3JtQkZTKG1hcEdyaWQsIHN0YXJ0WCwgc3RhcnRZLCBjb2xzLCByb3dzLCB3YWxrYWJsZVRpbGVWYWx1ZXMpIHtcbiAgY29uc3QgcXVldWUgPSBbW3N0YXJ0WCwgc3RhcnRZXV07XG4gIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0KFtgJHtzdGFydFh9LCR7c3RhcnRZfWBdKTtcbiAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICBbMCwgLTFdLCAvLyBHw7NyYVxuICAgIFswLCAxXSwgLy8gRMOzxYJcbiAgICBbLTEsIDBdLCAvLyBMZXdvXG4gICAgWzEsIDBdLCAvLyBQcmF3b1xuICBdO1xuICBsZXQgcmVhY2hhYmxlID0gZmFsc2U7IC8vIEZsYWdhLCBjenkgQkZTIGRvdGFyxYIgZG8ga2FmZWxrw7N3IGtvcnl0YXJ6YS9wb2tvanUgKGplxZtsaSBzenVrYW5vIG9kIHdpbmR5KVxuXG4gIC8vIFNwcmF3ZHplbmllIHB1bmt0dSBzdGFydG93ZWdvIChqZcWbbGkgc3p1a2FteSBvc2nEhWdhbG5vxZtjaSB6IHdpbmR5KVxuICBjb25zdCBzdGFydFRpbGVWYWx1ZSA9IG1hcEdyaWRbc3RhcnRZXT8uW3N0YXJ0WF07XG4gIC8vIEN6eSBwdW5rdCBzdGFydG93eSAobnAuIHdpbmRhKSBqZXN0IGp1xbwgbmEgYmV6cGllY3pueW0gdGVyZW5pZSAoZGxhIGNlbHUgc3ByYXdkemVuaWEgb3NpxIVnYWxub8WbY2kpP1xuICAvLyBXIHR5bSBrb25rcmV0bnltIHXFvHljaXUgKHNwcmF3ZHplbmllIHdpbmR5KSBpbnRlcmVzdWplIG5hcywgY3p5IHogd2luZHkgbW/FvG5hIGRvdHJ6ZcSHIGRvIEtPUllUQVJaQS9QT0tPSlUuXG4gIC8vIFNhbW8gc3RhbmllIG5hIHdpbmR6aWUgbmllIG96bmFjemEgb3NpxIVnYWxub8WbY2kgYmV6cGllY3puZWogc3RyZWZ5LlxuICAvLyBTcHJhd2R6aW15IHPEhXNpYWTDs3cgd2luZHkuXG5cbiAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBbY3VyclgsIGN1cnJZXSA9IHF1ZXVlLnNoaWZ0KCk7XG5cbiAgICBmb3IgKGNvbnN0IFtkeCwgZHldIG9mIGRpcmVjdGlvbnMpIHtcbiAgICAgIGNvbnN0IG5leHRYID0gY3VyclggKyBkeDtcbiAgICAgIGNvbnN0IG5leHRZID0gY3VyclkgKyBkeTtcbiAgICAgIGNvbnN0IGtleSA9IGAke25leHRYfSwke25leHRZfWA7XG5cbiAgICAgIC8vIFNwcmF3ZHplbmllIGdyYW5pYyBpIGN6eSBqdcW8IG9kd2llZHpvbmVcbiAgICAgIGlmIChuZXh0WCA+PSAwICYmIG5leHRYIDwgY29scyAmJiBuZXh0WSA+PSAwICYmIG5leHRZIDwgcm93cyAmJiAhdmlzaXRlZC5oYXMoa2V5KSkge1xuICAgICAgICBjb25zdCB0aWxlVmFsdWUgPSBtYXBHcmlkW25leHRZXT8uW25leHRYXTtcbiAgICAgICAgdmlzaXRlZC5hZGQoa2V5KTsgLy8gT2R3aWVkemFteSBuaWV6YWxlxbxuaWUgb2QgdHlwdVxuXG4gICAgICAgIC8vIEN6eSB0ZW4ga2FmZWxlayBqZXN0IHByemVjaG9kbmkgRExBIFRFR08gQkZTP1xuICAgICAgICBpZiAod2Fsa2FibGVUaWxlVmFsdWVzLmluY2x1ZGVzKHRpbGVWYWx1ZSkpIHtcbiAgICAgICAgICBxdWV1ZS5wdXNoKFtuZXh0WCwgbmV4dFldKTtcblxuICAgICAgICAgIC8vIEN6eSB0ZW4ga2FmZWxlayBqZXN0IEtPUllUQVJaRU0gbHViIFBPRMWBT0fEhCBQT0tPSlU/XG4gICAgICAgICAgLy8gSmXFm2xpIHRhaywgdG8gem5hbGXFumxpxZtteSBiZXpwaWVjem7EhSBzdHJlZsSZIG9zacSFZ2FsbsSFIHogcHVua3R1IHN0YXJ0b3dlZ28uXG4gICAgICAgICAgaWYgKHRpbGVWYWx1ZSA9PT0gVElMRV9DT1JSSURPUiB8fCB0aWxlVmFsdWUgPT09IFRJTEVfUk9PTV9GTE9PUikge1xuICAgICAgICAgICAgcmVhY2hhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIE1vxbxuYSBieSB0dSB6YWtvxYRjennEhyBwxJl0bMSZLCBqZcWbbGkgaW50ZXJlc3VqZSBuYXMgdHlsa28gQ1pZIGplc3Qgb3NpxIVnYWxuZVxuICAgICAgICAgICAgLy8gcmV0dXJuIHsgcmVhY2hhYmxlOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIFp3csOzxIcgd3luaWsgQkZTIC0gdyB0eW0gcHJ6eXBhZGt1LCBmbGFnxJkgb3NpxIVnYWxub8WbY2kgYmV6cGllY3puZWogc3RyZWZ5XG4gIHJldHVybiB7IHJlYWNoYWJsZSB9O1xufVxuXG4vLyAuLi4gKGlubmUgbmFyesSZZHppYSBtYXB5LCBqZcWbbGkgaXN0bmllasSFKVxuIiwiLy8gc3JjL21hcC9tYXBSZW5kZXJlci5qc1xuXG5pbXBvcnQgeyBUSUxFX1dBTEwsIFRJTEVfQ09SUklET1IsIFRJTEVfUk9PTV9GTE9PUiwgVElMRV9MSUZUIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcbi8vIFJlbW92ZWQgdW51c2VkIHJhbmRvbUdyYXksIHJhbmRvbUNvcnJpZG9yR3JheSBpbXBvcnRzXG5pbXBvcnQgeyBhZGp1c3RDb2xvckJyaWdodG5lc3MsIHNpbXBsZUhhc2ggfSBmcm9tICcuLi91dGlscy9tYXAuanMnO1xuXG5leHBvcnQgY2xhc3MgTWFwUmVuZGVyZXIge1xuICBjb25zdHJ1Y3Rvcih0aWxlU2l6ZSkge1xuICAgIHRoaXMudGlsZVNpemUgPSB0aWxlU2l6ZTtcbiAgICAvLyBDYWNoZSBpcyBsZXNzIGNyaXRpY2FsIG5vdyBmb3IgYmFzZSB0aWxlcyBidXQgc3RpbGwgdXNlZnVsIGZvciByb29tIGZsb29ycy9vdGhlciBlbGVtZW50c1xuICAgIHRoaXMudGlsZUNvbG9ycyA9IHt9O1xuICAgIHRoaXMuYmFzZVdhbGxDb2xvciA9ICcjMWMxZTIyJzsgLy8gU2luZ2xlLCBjb25zaXN0ZW50IHdhbGwgY29sb3JcbiAgICB0aGlzLmJhc2VDb3JyaWRvckNvbG9yID0gJyNhMGEwYTAnOyAvLyBTaW5nbGUsIGNvbnNpc3RlbnQgY29ycmlkb3IgY29sb3JcbiAgICB0aGlzLmJhc2VSb29tRmxvb3JDb2xvciA9ICcjYzBjMGMwJzsgLy8gRGVmYXVsdCByb29tIGZsb29yIChvdmVyd3JpdHRlbiBieSBkcmF3Um9vbURldGFpbHMpXG4gICAgdGhpcy5saWZ0Q29sb3IgPSAnIzcwNzA4MCc7IC8vIENvbnNpc3RlbnQgbGlmdCBjb2xvclxuICAgIHRoaXMuZXJyb3JDb2xvciA9ICcjZmYwMGZmJzsgLy8gRXJyb3IgY29sb3JcbiAgfVxuXG4gIC8vIFJlc2V0IGNvbG9yIGNhY2hlIHdoZW4gYSBuZXcgbWFwIGlzIGRyYXduIChjYWxsZWQgYnkgUHJvY2VkdXJhbE1hcClcbiAgcmVzZXRDb2xvckNhY2hlKCkge1xuICAgIHRoaXMudGlsZUNvbG9ycyA9IHt9O1xuICB9XG5cbiAgLyoqIEdldCBvciBnZW5lcmF0ZSB0aGUgY29sb3IgZm9yIGEgc3BlY2lmaWMgdGlsZSAqL1xuICBnZXRUaWxlQ29sb3IociwgYywgdGlsZVZhbHVlLCByb29tcykge1xuICAgIC8vIE5PVEU6IFdlIHN0aWxsIHVzZSB0aGUgY2FjaGUga2V5LCBtYWlubHkgdXNlZnVsIGlmIHJvb21zIG5lZWQgc3BlY2lmaWNcbiAgICAvLyB0aWxlIGNvbG9ycyBub3QgaGFuZGxlZCBieSBkcmF3Um9vbURldGFpbHMgbGF0ZXIsIG9yIGlmIHdlIGFkZCBtb3JlIGNvbXBsZXggbG9naWMuXG4gICAgLy8gRm9yIHRoZSBiYXNlIHRpbGVzIG1vZGlmaWVkIGJlbG93LCBpdCdzIGxlc3MgZXNzZW50aWFsLlxuICAgIGNvbnN0IGtleSA9IGAke3J9LCR7Y31gO1xuICAgIGlmICh0aGlzLnRpbGVDb2xvcnNba2V5XSkge1xuICAgICAgcmV0dXJuIHRoaXMudGlsZUNvbG9yc1trZXldO1xuICAgIH1cblxuICAgIGxldCBjb2xvcjtcblxuICAgIC8vIC0tLSBSRU1PVkVEIHBlci10aWxlIGhhc2gvdmFyaWF0aW9uIGZvciBiYXNlIHR5cGVzIC0tLVxuICAgIC8vIGNvbnN0IGhhc2ggPSBzaW1wbGVIYXNoKHIgKiAxMDAwICsgYyk7XG4gICAgLy8gY29uc3QgdmFyaWF0aW9uID0gKChoYXNoICUgMjEpIC0gMTApIC8gMTAwO1xuXG4gICAgc3dpdGNoICh0aWxlVmFsdWUpIHtcbiAgICAgIGNhc2UgVElMRV9XQUxMOlxuICAgICAgICAvLyBVc2UgdGhlIHNpbmdsZSwgY29uc2lzdGVudCBiYXNlIGNvbG9yIGRpcmVjdGx5XG4gICAgICAgIGNvbG9yID0gdGhpcy5iYXNlV2FsbENvbG9yO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVElMRV9DT1JSSURPUjpcbiAgICAgICAgLy8gVXNlIHRoZSBzaW5nbGUsIGNvbnNpc3RlbnQgYmFzZSBjb2xvciBkaXJlY3RseVxuICAgICAgICBjb2xvciA9IHRoaXMuYmFzZUNvcnJpZG9yQ29sb3I7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUSUxFX1JPT01fRkxPT1I6XG4gICAgICAgIC8vIFVzZSB0aGUgY29uc2lzdGVudCBiYXNlIHJvb20gZmxvb3IgY29sb3IuXG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSBkcmF3Um9vbURldGFpbHMgZm9yIGFjdHVhbCByb29tIHRpbGVzLlxuICAgICAgICAvLyBJdCBzZXJ2ZXMgYXMgdGhlIGNvbG9yIGlmIGEgVElMRV9ST09NX0ZMT09SIHNvbWVob3cgZXhpc3RzIG91dHNpZGUgYSBkZWZpbmVkIHJvb20uXG4gICAgICAgIGNvbG9yID0gdGhpcy5iYXNlUm9vbUZsb29yQ29sb3I7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUSUxFX0xJRlQ6XG4gICAgICAgIC8vIFVzZSB0aGUgY29uc2lzdGVudCBsaWZ0IGNvbG9yXG4gICAgICAgIGNvbG9yID0gdGhpcy5saWZ0Q29sb3I7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29sb3IgPSB0aGlzLmVycm9yQ29sb3I7IC8vIEVycm9yIGNvbG9yXG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIFN0aWxsIGNhY2hlIHRoZSByZXN1bHRcbiAgICB0aGlzLnRpbGVDb2xvcnNba2V5XSA9IGNvbG9yO1xuICAgIHJldHVybiBjb2xvcjtcbiAgfVxuXG4gIC8qKiBNYWluIGRyYXdpbmcgZnVuY3Rpb24gKi9cbiAgZHJhdyhjdHgsIG1hcERhdGEsIGJvb2tJbWFnZSA9IG51bGwpIHtcbiAgICBjb25zdCB7IG1hcCwgcm9vbXMsIGJvb2tzLCBsaWZ0UG9zaXRpb24sIG9mZnNldFgsIG9mZnNldFksIGNvbHMsIHJvd3MgfSA9IG1hcERhdGE7XG5cbiAgICAvLyBSb3VuZCBvZmZzZXRzIGZvciBzaGFycG5lc3NcbiAgICBjb25zdCBjdXJyZW50T2Zmc2V0WCA9IE1hdGguZmxvb3Iob2Zmc2V0WCk7XG4gICAgY29uc3QgY3VycmVudE9mZnNldFkgPSBNYXRoLmZsb29yKG9mZnNldFkpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIHZpc2libGUgdGlsZXMgd2l0aCBhIHNtYWxsIGJ1ZmZlclxuICAgIGNvbnN0IHN0YXJ0Q29sID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcigtY3VycmVudE9mZnNldFggLyB0aGlzLnRpbGVTaXplKSAtIDEpO1xuICAgIGNvbnN0IGVuZENvbCA9IE1hdGgubWluKFxuICAgICAgY29scyxcbiAgICAgIE1hdGguY2VpbCgoLWN1cnJlbnRPZmZzZXRYICsgY3R4LmNhbnZhcy53aWR0aCkgLyB0aGlzLnRpbGVTaXplKSArIDFcbiAgICApO1xuICAgIGNvbnN0IHN0YXJ0Um93ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcigtY3VycmVudE9mZnNldFkgLyB0aGlzLnRpbGVTaXplKSAtIDEpO1xuICAgIGNvbnN0IGVuZFJvdyA9IE1hdGgubWluKFxuICAgICAgcm93cyxcbiAgICAgIE1hdGguY2VpbCgoLWN1cnJlbnRPZmZzZXRZICsgY3R4LmNhbnZhcy5oZWlnaHQpIC8gdGhpcy50aWxlU2l6ZSkgKyAxXG4gICAgKTtcblxuICAgIGN0eC5zYXZlKCk7IC8vIFNhdmUgY29udGV4dCBzdGF0ZVxuXG4gICAgLy8gMS4gRHJhdyBiYXNlIHRpbGVzICh3YWxscywgY29ycmlkb3JzLCBkZWZhdWx0IGZsb29yLCBsaWZ0IGJhc2UpXG4gICAgLy8gICAgVGhlc2Ugd2lsbCBub3cgdXNlIHRoZSBjb25zaXN0ZW50IGNvbG9ycyBmcm9tIGdldFRpbGVDb2xvci5cbiAgICB0aGlzLmRyYXdCYXNlVGlsZXMoXG4gICAgICBjdHgsXG4gICAgICBtYXAsXG4gICAgICByb29tcyxcbiAgICAgIGN1cnJlbnRPZmZzZXRYLFxuICAgICAgY3VycmVudE9mZnNldFksXG4gICAgICBjb2xzLFxuICAgICAgcm93cyxcbiAgICAgIHN0YXJ0Um93LFxuICAgICAgZW5kUm93LFxuICAgICAgc3RhcnRDb2wsXG4gICAgICBlbmRDb2xcbiAgICApO1xuXG4gICAgLy8gMi4gRHJhdyBzcGVjaWZpYyByb29tIGZsb29ycyBhbmQgZGVjb3JhdGlvbnNcbiAgICAvLyAgICBUaGlzIGZ1bmN0aW9uIFdJTEwgYXBwbHkgc3BlY2lmaWMgY29sb3JzIGJhc2VkIG9uIHJvb20gdHlwZSxcbiAgICAvLyAgICBhbmQgc3VidGxlIHBlci10aWxlIHZhcmlhdGlvbnMgV0lUSElOIHRoZSByb29tIGZsb29yLlxuICAgIHRoaXMuZHJhd1Jvb21EZXRhaWxzKFxuICAgICAgY3R4LFxuICAgICAgbWFwLFxuICAgICAgcm9vbXMsXG4gICAgICBsaWZ0UG9zaXRpb24sXG4gICAgICBjdXJyZW50T2Zmc2V0WCxcbiAgICAgIGN1cnJlbnRPZmZzZXRZLFxuICAgICAgY29scyxcbiAgICAgIHJvd3MsXG4gICAgICBzdGFydFJvdyxcbiAgICAgIGVuZFJvdyxcbiAgICAgIHN0YXJ0Q29sLFxuICAgICAgZW5kQ29sXG4gICAgKTtcblxuICAgIC8vIDMuIERyYXcgbGlmdCBkZXRhaWxzIChvdmVybGF5aW5nIHJvb20gZmxvb3JzIGlmIG5lZWRlZClcbiAgICB0aGlzLmRyYXdMaWZ0RGV0YWlscyhjdHgsIGxpZnRQb3NpdGlvbiwgY3VycmVudE9mZnNldFgsIGN1cnJlbnRPZmZzZXRZKTtcblxuICAgIC8vIDQuIERyYXcgYm9va3NcbiAgICB0aGlzLmRyYXdCb29rcyhjdHgsIGJvb2tzLCBjdXJyZW50T2Zmc2V0WCwgY3VycmVudE9mZnNldFksIGJvb2tJbWFnZSk7XG5cbiAgICBjdHgucmVzdG9yZSgpOyAvLyBSZXN0b3JlIGNvbnRleHQgc3RhdGVcbiAgfVxuXG4gIC8qKiBEcmF3IGJhc2UgdGlsZXMgKi9cbiAgZHJhd0Jhc2VUaWxlcyhjdHgsIG1hcCwgcm9vbXMsIG9mZnNldFgsIG9mZnNldFksIGNvbHMsIHJvd3MsIHN0YXJ0Um93LCBlbmRSb3csIHN0YXJ0Q29sLCBlbmRDb2wpIHtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5zaGFkb3dDb2xvciA9ICd0cmFuc3BhcmVudCc7XG5cbiAgICBjb25zdCB3YWxsRWRnZUNvbG9yRGFyayA9ICcjMzgzODM4JztcbiAgICBjb25zdCB3YWxsRWRnZUNvbG9yTGlnaHQgPSAnIzYwNjA2MCc7XG4gICAgY29uc3Qgd2FsbFRvcEVkZ2VDb2xvciA9ICcjNzU3NTc1JztcblxuICAgIGZvciAobGV0IHIgPSBzdGFydFJvdzsgciA8IGVuZFJvdzsgcisrKSB7XG4gICAgICBmb3IgKGxldCBjID0gc3RhcnRDb2w7IGMgPCBlbmRDb2w7IGMrKykge1xuICAgICAgICBjb25zdCB0aWxlVmFsdWUgPSBtYXBbcl0/LltjXTtcbiAgICAgICAgaWYgKHRpbGVWYWx1ZSA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcblxuICAgICAgICBjb25zdCBzY3JlZW5YID0gTWF0aC5mbG9vcihjICogdGhpcy50aWxlU2l6ZSArIG9mZnNldFgpO1xuICAgICAgICBjb25zdCBzY3JlZW5ZID0gTWF0aC5mbG9vcihyICogdGhpcy50aWxlU2l6ZSArIG9mZnNldFkpO1xuICAgICAgICAvLyBHZXQgdGhlIGNvbG9yIC0gbm93IGNvbnNpc3RlbnQgZm9yIHdhbGxzL2NvcnJpZG9ycy9kZWZhdWx0IGZsb29yL2xpZnRcbiAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLmdldFRpbGVDb2xvcihyLCBjLCB0aWxlVmFsdWUsIHJvb21zKTtcblxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgIGN0eC5maWxsUmVjdChzY3JlZW5YLCBzY3JlZW5ZLCB0aGlzLnRpbGVTaXplLCB0aGlzLnRpbGVTaXplKTtcblxuICAgICAgICAvLyAtLS0gV2FsbCBFZGdlcyBhbmQgTm9pc2UgKFN0aWxsIEFwcGxpZWQgZm9yIERldGFpbCkgLS0tXG4gICAgICAgIGlmICh0aWxlVmFsdWUgPT09IFRJTEVfV0FMTCkge1xuICAgICAgICAgIC8vIE5vaXNlIHRleHR1cmUgKGFwcGxpZWQgT04gVE9QIG9mIHRoZSBjb25zaXN0ZW50IGJhc2UgY29sb3IpXG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsMCwwLDAuMDYpJztcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KFxuICAgICAgICAgICAgICBzY3JlZW5YICsgTWF0aC5yYW5kb20oKSAqIHRoaXMudGlsZVNpemUsXG4gICAgICAgICAgICAgIHNjcmVlblkgKyBNYXRoLnJhbmRvbSgpICogdGhpcy50aWxlU2l6ZSxcbiAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFZGdlIHJlbmRlcmluZyAoYXBwbGllZCBPTiBUT1ApXG4gICAgICAgICAgY29uc3QgZWRnZVNpemUgPSAyO1xuICAgICAgICAgIGlmIChyID4gMCAmJiBtYXBbciAtIDFdPy5bY10gIT09IFRJTEVfV0FMTCkge1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHdhbGxUb3BFZGdlQ29sb3I7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NyZWVuWCwgc2NyZWVuWSwgdGhpcy50aWxlU2l6ZSwgZWRnZVNpemUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAociA8IHJvd3MgLSAxICYmIG1hcFtyICsgMV0/LltjXSAhPT0gVElMRV9XQUxMKSB7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gd2FsbEVkZ2VDb2xvckRhcms7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NyZWVuWCwgc2NyZWVuWSArIHRoaXMudGlsZVNpemUgLSBlZGdlU2l6ZSwgdGhpcy50aWxlU2l6ZSwgZWRnZVNpemUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYyA+IDAgJiYgbWFwW3JdPy5bYyAtIDFdICE9PSBUSUxFX1dBTEwpIHtcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB3YWxsRWRnZUNvbG9yTGlnaHQ7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NyZWVuWCwgc2NyZWVuWSArIGVkZ2VTaXplLCBlZGdlU2l6ZSwgdGhpcy50aWxlU2l6ZSAtIGVkZ2VTaXplKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGMgPCBjb2xzIC0gMSAmJiBtYXBbcl0/LltjICsgMV0gIT09IFRJTEVfV0FMTCkge1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHdhbGxFZGdlQ29sb3JEYXJrO1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KFxuICAgICAgICAgICAgICBzY3JlZW5YICsgdGhpcy50aWxlU2l6ZSAtIGVkZ2VTaXplLFxuICAgICAgICAgICAgICBzY3JlZW5ZICsgZWRnZVNpemUsXG4gICAgICAgICAgICAgIGVkZ2VTaXplLFxuICAgICAgICAgICAgICB0aGlzLnRpbGVTaXplIC0gZWRnZVNpemVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIENvcm5lciBsb2dpYyAocmVtYWlucyB0aGUgc2FtZSlcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICByID4gMCAmJlxuICAgICAgICAgICAgYyA+IDAgJiZcbiAgICAgICAgICAgIG1hcFtyIC0gMV0/LltjXSAhPT0gVElMRV9XQUxMICYmXG4gICAgICAgICAgICBtYXBbcl0/LltjIC0gMV0gIT09IFRJTEVfV0FMTCAmJlxuICAgICAgICAgICAgbWFwW3IgLSAxXT8uW2MgLSAxXSAhPT0gVElMRV9XQUxMXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gd2FsbEVkZ2VDb2xvckxpZ2h0O1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHNjcmVlblgsIHNjcmVlblksIGVkZ2VTaXplLCBlZGdlU2l6ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHIgPiAwICYmXG4gICAgICAgICAgICBjIDwgY29scyAtIDEgJiZcbiAgICAgICAgICAgIG1hcFtyIC0gMV0/LltjXSAhPT0gVElMRV9XQUxMICYmXG4gICAgICAgICAgICBtYXBbcl0/LltjICsgMV0gIT09IFRJTEVfV0FMTCAmJlxuICAgICAgICAgICAgbWFwW3IgLSAxXT8uW2MgKyAxXSAhPT0gVElMRV9XQUxMXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gd2FsbFRvcEVkZ2VDb2xvcjtcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdChzY3JlZW5YICsgdGhpcy50aWxlU2l6ZSAtIGVkZ2VTaXplLCBzY3JlZW5ZLCBlZGdlU2l6ZSwgZWRnZVNpemUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyAuLi4gcG90ZW50aWFsbHkgb3RoZXIgY29ybmVyc1xuICAgICAgICB9IGVsc2UgaWYgKHRpbGVWYWx1ZSA9PT0gVElMRV9DT1JSSURPUikge1xuICAgICAgICAgIC8vIENvcnJpZG9yIE5vaXNlIChhcHBsaWVkIE9OIFRPUCBvZiB0aGUgY29uc2lzdGVudCBiYXNlIGNvbG9yKVxuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjAzKSc7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdChcbiAgICAgICAgICAgICAgc2NyZWVuWCArIE1hdGgucmFuZG9tKCkgKiB0aGlzLnRpbGVTaXplLFxuICAgICAgICAgICAgICBzY3JlZW5ZICsgTWF0aC5yYW5kb20oKSAqIHRoaXMudGlsZVNpemUsXG4gICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE5PVEU6IE5vIHNwZWNpYWwgZHJhd2luZyBuZWVkZWQgaGVyZSBmb3IgVElMRV9ST09NX0ZMT09SIG9yIFRJTEVfTElGVFxuICAgICAgICAvLyBhcyBkcmF3Um9vbURldGFpbHMgYW5kIGRyYXdMaWZ0RGV0YWlscyBoYW5kbGUgdGhlaXIgc3BlY2lmaWNzLlxuICAgICAgfVxuICAgIH1cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgLyoqIERyYXcgc3BlY2lmaWMgcm9vbSBmbG9vcnMgYW5kIGRlY29yYXRpb25zICovXG4gIGRyYXdSb29tRGV0YWlscyhcbiAgICBjdHgsXG4gICAgbWFwLFxuICAgIHJvb21zLFxuICAgIGxpZnRQb3NpdGlvbixcbiAgICBvZmZzZXRYLFxuICAgIG9mZnNldFksXG4gICAgY29scyxcbiAgICByb3dzLFxuICAgIHN0YXJ0Um93LFxuICAgIGVuZFJvdyxcbiAgICBzdGFydENvbCxcbiAgICBlbmRDb2xcbiAgKSB7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHguc2hhZG93Q29sb3IgPSAndHJhbnNwYXJlbnQnO1xuXG4gICAgZm9yIChjb25zdCByb29tIG9mIHJvb21zKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHJvb20uY29sICsgcm9vbS53aWR0aCA8IHN0YXJ0Q29sIHx8XG4gICAgICAgIHJvb20uY29sID4gZW5kQ29sIHx8XG4gICAgICAgIHJvb20ucm93ICsgcm9vbS5oZWlnaHQgPCBzdGFydFJvdyB8fFxuICAgICAgICByb29tLnJvdyA+IGVuZFJvd1xuICAgICAgKVxuICAgICAgICBjb250aW51ZTtcblxuICAgICAgY29uc3Qgcm9vbVNjcmVlblggPSBNYXRoLmZsb29yKHJvb20uY29sICogdGhpcy50aWxlU2l6ZSArIG9mZnNldFgpO1xuICAgICAgY29uc3Qgcm9vbVNjcmVlblkgPSBNYXRoLmZsb29yKHJvb20ucm93ICogdGhpcy50aWxlU2l6ZSArIG9mZnNldFkpO1xuICAgICAgY29uc3Qgcm9vbVNjcmVlblcgPSByb29tLndpZHRoICogdGhpcy50aWxlU2l6ZTtcbiAgICAgIGNvbnN0IHJvb21TY3JlZW5IID0gcm9vbS5oZWlnaHQgKiB0aGlzLnRpbGVTaXplO1xuXG4gICAgICAvLyAtLS0gRGV0ZXJtaW5lIEZsb29yIENvbG9yIEJhc2VkIG9uIFJvb20gVHlwZSAoVGhpcyBsb2dpYyByZW1haW5zKSAtLS1cbiAgICAgIGxldCBmbG9vckNvbG9yID0gdGhpcy5iYXNlUm9vbUZsb29yQ29sb3I7IC8vIFN0YXJ0IHdpdGggZGVmYXVsdFxuICAgICAgLy8gVXNlIGEgc2VlZCB0aGF0IGNoYW5nZXMgcGVyIHJvb20gYnV0IGlzIGNvbnNpc3RlbnQgZm9yIHRoYXQgcm9vbVxuICAgICAgLy8gQWRkZWQgZmxvb3JOdW1iZXIgZGVwZW5kZW5jeSBpZiBhdmFpbGFibGUgaW4gYHRoaXNgLCBvdGhlcndpc2UgdXNlIHJvb20uaWRcbiAgICAgIGNvbnN0IGZsb29yTnVtID0gdHlwZW9mIHRoaXMuZmxvb3JOdW1iZXIgPT09ICdudW1iZXInID8gdGhpcy5mbG9vck51bWJlciA6IDA7XG4gICAgICBsZXQgcm9vbVNlZWQgPSBzaW1wbGVIYXNoKHJvb20uaWQpICsgZmxvb3JOdW0gKiAxMDA7IC8vIFVzZSBoYXNoIG9mIElEIGZvciBtb3JlIHZhcmlhdGlvblxuXG4gICAgICBzd2l0Y2ggKHJvb20udHlwZSkge1xuICAgICAgICBjYXNlICdjbGFzc3Jvb20nOlxuICAgICAgICAgIGZsb29yQ29sb3IgPSBhZGp1c3RDb2xvckJyaWdodG5lc3MoJyNhMGM4ZTAnLCAwLjkgKyAoc2ltcGxlSGFzaChyb29tU2VlZCkgJSAxMSkgLyAxMDApO1xuICAgICAgICAgIGJyZWFrOyAvLyBCbHVpc2hcbiAgICAgICAgY2FzZSAnb2ZmaWNlJzpcbiAgICAgICAgICBmbG9vckNvbG9yID0gYWRqdXN0Q29sb3JCcmlnaHRuZXNzKFxuICAgICAgICAgICAgJyNmMGU4YzAnLFxuICAgICAgICAgICAgMC45ICsgKHNpbXBsZUhhc2gocm9vbVNlZWQgKyAxKSAlIDExKSAvIDEwMFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7IC8vIEJlaWdlXG4gICAgICAgIGNhc2UgJ2xpYnJhcnknOlxuICAgICAgICAgIGZsb29yQ29sb3IgPSBhZGp1c3RDb2xvckJyaWdodG5lc3MoXG4gICAgICAgICAgICAnI2Q4YzBhOCcsXG4gICAgICAgICAgICAwLjkgKyAoc2ltcGxlSGFzaChyb29tU2VlZCArIDIpICUgMTEpIC8gMTAwXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhazsgLy8gV29vZGVuXG4gICAgICAgIGNhc2UgJ2d5bSc6XG4gICAgICAgICAgZmxvb3JDb2xvciA9IGFkanVzdENvbG9yQnJpZ2h0bmVzcyhcbiAgICAgICAgICAgICcjYjBkMGIwJyxcbiAgICAgICAgICAgIDAuOSArIChzaW1wbGVIYXNoKHJvb21TZWVkICsgMykgJSAxMSkgLyAxMDBcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrOyAvLyBHcmVlbmlzaFxuICAgICAgICBjYXNlICdsYWInOlxuICAgICAgICAgIGZsb29yQ29sb3IgPSBhZGp1c3RDb2xvckJyaWdodG5lc3MoXG4gICAgICAgICAgICAnI2UwZTBmZicsXG4gICAgICAgICAgICAwLjkgKyAoc2ltcGxlSGFzaChyb29tU2VlZCArIDQpICUgMTEpIC8gMTAwXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhazsgLy8gTGlnaHQgYmx1ZS1wdXJwbGVcbiAgICAgICAgY2FzZSAnc3RvcmFnZSc6XG4gICAgICAgICAgZmxvb3JDb2xvciA9IGFkanVzdENvbG9yQnJpZ2h0bmVzcyhcbiAgICAgICAgICAgICcjYjBhMDkwJyxcbiAgICAgICAgICAgIDAuOSArIChzaW1wbGVIYXNoKHJvb21TZWVkICsgNSkgJSAxMSkgLyAxMDBcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrOyAvLyBHcmF5LWJyb3duXG4gICAgICAgIGNhc2UgJ3V0aWxpdHknOlxuICAgICAgICAgIGZsb29yQ29sb3IgPSBhZGp1c3RDb2xvckJyaWdodG5lc3MoXG4gICAgICAgICAgICAnI2IwYjBiMCcsXG4gICAgICAgICAgICAwLjkgKyAoc2ltcGxlSGFzaChyb29tU2VlZCArIDYpICUgMTEpIC8gMTAwXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhazsgLy8gR3JheSBjb25jcmV0ZVxuICAgICAgfVxuXG4gICAgICAvLyAtLS0gRHJhdyBSb29tIEZsb29yIChUaWxlIGJ5IFRpbGUgd2l0aGluIFZpc2libGUgQXJlYSkgLS0tXG4gICAgICBmb3IgKFxuICAgICAgICBsZXQgciA9IE1hdGgubWF4KHJvb20ucm93LCBzdGFydFJvdyk7XG4gICAgICAgIHIgPCBNYXRoLm1pbihyb29tLnJvdyArIHJvb20uaGVpZ2h0LCBlbmRSb3cpO1xuICAgICAgICByKytcbiAgICAgICkge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIGxldCBjID0gTWF0aC5tYXgocm9vbS5jb2wsIHN0YXJ0Q29sKTtcbiAgICAgICAgICBjIDwgTWF0aC5taW4ocm9vbS5jb2wgKyByb29tLndpZHRoLCBlbmRDb2wpO1xuICAgICAgICAgIGMrK1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCB0aWxlVmFsdWUgPSBtYXBbcl0/LltjXTtcbiAgICAgICAgICAvLyBPbmx5IGRyYXcgaWYgaXQncyBhY3R1YWxseSBhIFRJTEVfUk9PTV9GTE9PUlxuICAgICAgICAgIGlmICh0aWxlVmFsdWUgPT09IFRJTEVfUk9PTV9GTE9PUikge1xuICAgICAgICAgICAgY29uc3Qgc2NyZWVuWCA9IE1hdGguZmxvb3IoYyAqIHRoaXMudGlsZVNpemUgKyBvZmZzZXRYKTtcbiAgICAgICAgICAgIGNvbnN0IHNjcmVlblkgPSBNYXRoLmZsb29yKHIgKiB0aGlzLnRpbGVTaXplICsgb2Zmc2V0WSk7XG5cbiAgICAgICAgICAgIC8vIC0tLSBTdWJ0bGUgUGVyLVRpbGUgVmFyaWF0aW9uIFdJVEhJTiBSb29tIEZsb29yIChLZXB0IGZvciB0ZXh0dXJlKSAtLS1cbiAgICAgICAgICAgIGNvbnN0IHRpbGVIYXNoID0gc2ltcGxlSGFzaChyICogNTAwMCArIGMgKiAzICsgcm9vbVNlZWQpOyAvLyBJbmNsdWRlIHJvb21TZWVkXG4gICAgICAgICAgICBjb25zdCB2YXJpYXRpb24gPSAoKHRpbGVIYXNoICUgMTEpIC0gNSkgLyAxMDA7IC8vIFZhcmlhdGlvbiAtMC4wNSB0byArMC4wNVxuICAgICAgICAgICAgY29uc3QgYnJpZ2h0bmVzc0ZhY3RvciA9IDAuOTggKyB2YXJpYXRpb247XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYWRqdXN0Q29sb3JCcmlnaHRuZXNzKGZsb29yQ29sb3IsIGJyaWdodG5lc3NGYWN0b3IpO1xuICAgICAgICAgICAgLy8gLS0tIEVuZCBQZXItVGlsZSBWYXJpYXRpb24gLS0tXG5cbiAgICAgICAgICAgIGN0eC5maWxsUmVjdChzY3JlZW5YLCBzY3JlZW5ZLCB0aGlzLnRpbGVTaXplLCB0aGlzLnRpbGVTaXplKTtcblxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgZmxvb3IgdGV4dHVyZSAocmVtYWlucyB0aGUgc2FtZSlcbiAgICAgICAgICAgIGlmIChyb29tLnR5cGUgPT09ICdsYWInKSB7XG4gICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDAsMCwwLDAuMDgpJztcbiAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KHNjcmVlblggKyAwLjUsIHNjcmVlblkgKyAwLjUsIHRoaXMudGlsZVNpemUgLSAxLCB0aGlzLnRpbGVTaXplIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIC0tLSBEcmF3IERlY29yYXRpb25zIChyZW1haW5zIHRoZSBzYW1lKSAtLS1cbiAgICAgIHRoaXMuZHJhd1Jvb21EZWNvcmF0aW9ucyhjdHgsIHJvb20sIHJvb21TY3JlZW5YLCByb29tU2NyZWVuWSwgcm9vbVNjcmVlblcsIHJvb21TY3JlZW5IKTtcbiAgICB9XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIC8vIC0tLSBkcmF3TGlmdERldGFpbHMsIGRyYXdSb29tRGVjb3JhdGlvbnMsIGRyYXdCb29rcyByZW1haW4gdW5jaGFuZ2VkIC0tLVxuICAvLyAuLi4gKGtlZXAgdGhlIGV4aXN0aW5nIGNvZGUgZm9yIHRoZXNlIG1ldGhvZHMpIC4uLlxuICAvKiogTmFyeXN1aiBkZXRhbGUgd2luZHkgKHByenljaXNrLCBrb250dXIpICovXG4gIGRyYXdMaWZ0RGV0YWlscyhjdHgsIGxpZnRQb3NpdGlvbiwgb2Zmc2V0WCwgb2Zmc2V0WSkge1xuICAgIGlmICghbGlmdFBvc2l0aW9uKSByZXR1cm47XG5cbiAgICBjb25zdCBzY3JlZW5YID0gTWF0aC5mbG9vcihsaWZ0UG9zaXRpb24udGlsZVggKiB0aGlzLnRpbGVTaXplICsgb2Zmc2V0WCk7XG4gICAgY29uc3Qgc2NyZWVuWSA9IE1hdGguZmxvb3IobGlmdFBvc2l0aW9uLnRpbGVZICogdGhpcy50aWxlU2l6ZSArIG9mZnNldFkpO1xuXG4gICAgLy8gU3ByYXdkxbosIGN6eSB3aW5kYSBqZXN0IHdpZG9jem5hIHByemVkIHJ5c293YW5pZW0gZGV0YWxpXG4gICAgaWYgKFxuICAgICAgc2NyZWVuWCArIHRoaXMudGlsZVNpemUgPCAwIHx8XG4gICAgICBzY3JlZW5YID4gY3R4LmNhbnZhcy53aWR0aCB8fFxuICAgICAgc2NyZWVuWSArIHRoaXMudGlsZVNpemUgPCAwIHx8XG4gICAgICBzY3JlZW5ZID4gY3R4LmNhbnZhcy5oZWlnaHRcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5zaGFkb3dDb2xvciA9ICd0cmFuc3BhcmVudCc7IC8vIEJyYWsgY2llbmlhIGRsYSBkZXRhbGkgd2luZHlcblxuICAgIC8vIFd5cmHFum5pZWpzemEgcmFta2Egd2luZHlcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2QwZDBkMCc7IC8vIEphc25hIHJhbWthXG4gICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgY3R4LnN0cm9rZVJlY3Qoc2NyZWVuWCArIDAuNSwgc2NyZWVuWSArIDAuNSwgdGhpcy50aWxlU2l6ZSAtIDEsIHRoaXMudGlsZVNpemUgLSAxKTtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzQwNDA0MCc7IC8vIENpZW1ueSB3ZXduxJl0cnpueSBjaWXFhFxuICAgIGN0eC5zdHJva2VSZWN0KHNjcmVlblggKyAxLjUsIHNjcmVlblkgKyAxLjUsIHRoaXMudGlsZVNpemUgLSAzLCB0aGlzLnRpbGVTaXplIC0gMyk7XG5cbiAgICAvLyBVbGVwc3pvbnkgcHJ6eWNpc2tcbiAgICBjb25zdCBidXR0b25SYWRpdXMgPSB0aGlzLnRpbGVTaXplICogMC4xNTsgLy8gVHJvY2jEmSB3acSZa3N6eVxuICAgIGNvbnN0IGJ1dHRvblggPSBzY3JlZW5YICsgdGhpcy50aWxlU2l6ZSAqIDAuODtcbiAgICBjb25zdCBidXR0b25ZID0gc2NyZWVuWSArIHRoaXMudGlsZVNpemUgKiAwLjU7XG5cbiAgICAvLyBQb2RzdGF3YSBwcnp5Y2lza3UgKGNpZW1uaWVqc3phKVxuICAgIGN0eC5maWxsU3R5bGUgPSAnIzQ0NCc7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5hcmMoYnV0dG9uWCwgYnV0dG9uWSwgYnV0dG9uUmFkaXVzLCAwLCBNYXRoLlBJICogMik7XG4gICAgY3R4LmZpbGwoKTtcblxuICAgIC8vIFNhbSBwcnp5Y2lzayAoY3plcndvbnkpXG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjZmY0NDQ0JztcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LmFyYyhidXR0b25YLCBidXR0b25ZLCBidXR0b25SYWRpdXMgKiAwLjgsIDAsIE1hdGguUEkgKiAyKTtcbiAgICBjdHguZmlsbCgpO1xuXG4gICAgLy8gT2RibGFzayBuYSBwcnp5Y2lza3VcbiAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC41KSc7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5hcmMoXG4gICAgICBidXR0b25YIC0gYnV0dG9uUmFkaXVzICogMC4yLFxuICAgICAgYnV0dG9uWSAtIGJ1dHRvblJhZGl1cyAqIDAuMixcbiAgICAgIGJ1dHRvblJhZGl1cyAqIDAuMyxcbiAgICAgIDAsXG4gICAgICBNYXRoLlBJICogMlxuICAgICk7XG4gICAgY3R4LmZpbGwoKTtcblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICAvKiogTmFyeXN1aiBkZWtvcmFjamUgZGxhIGtvbmtyZXRuZWdvIHBva29qdSAqL1xuICBkcmF3Um9vbURlY29yYXRpb25zKGN0eCwgcm9vbSwgeCwgeSwgdywgaCkge1xuICAgIC8vIHgsIHkgdG8gbGV3eSBnw7NybnkgcsOzZyBwb2tvanUgbmEgZWtyYW5pZVxuICAgIC8vIHcsIGggdG8gc3plcm9rb8WbxIcgaSB3eXNva2/Fm8SHIHBva29qdSBuYSBla3JhbmllXG4gICAgY29uc3QgdHMgPSB0aGlzLnRpbGVTaXplO1xuICAgIGNvbnN0IG1hcmdpbiA9IHRzICogMC4yOyAvLyBNbmllanN6eSBtYXJnaW5lc1xuICAgIGNvbnN0IG9iak1hcmdpbiA9IHRzICogMC4xOyAvLyBPZHN0xJlwIG1pxJlkenkgb2JpZWt0YW1pXG4gICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgY3R4LnN0cm9rZVN0eWxlID0gJyM0NDQnOyAvLyBDaWVtbmllanN6YSBkb215xZtsbmEgb2J3w7Nka2FcblxuICAgIC8vID09PSBGVU5LQ0pFIFBPTU9DTklDWkUgRE8gUllTT1dBTklBID09PVxuICAgIGNvbnN0IGRyYXdSZWN0ID0gKHJ4LCByeSwgcncsIHJoLCBjb2xvciwgb3V0bGluZSA9IHRydWUpID0+IHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgIGNvbnN0IHNjcmVlblggPSBNYXRoLmZsb29yKHggKyByeCk7XG4gICAgICBjb25zdCBzY3JlZW5ZID0gTWF0aC5mbG9vcih5ICsgcnkpO1xuICAgICAgY29uc3Qgc2NyZWVuVyA9IE1hdGguZmxvb3IocncpO1xuICAgICAgY29uc3Qgc2NyZWVuSCA9IE1hdGguZmxvb3IocmgpO1xuICAgICAgY3R4LmZpbGxSZWN0KHNjcmVlblgsIHNjcmVlblksIHNjcmVlblcsIHNjcmVlbkgpO1xuICAgICAgaWYgKG91dGxpbmUpIHtcbiAgICAgICAgY3R4LnN0cm9rZVJlY3Qoc2NyZWVuWCArIDAuNSwgc2NyZWVuWSArIDAuNSwgc2NyZWVuVyAtIDEsIHNjcmVlbkggLSAxKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGRyYXdDaXJjbGUgPSAoY3gsIGN5LCByYWRpdXMsIGNvbG9yLCBvdXRsaW5lID0gdHJ1ZSkgPT4ge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgY29uc3Qgc2NyZWVuWCA9IE1hdGguZmxvb3IoeCArIGN4KTtcbiAgICAgIGNvbnN0IHNjcmVlblkgPSBNYXRoLmZsb29yKHkgKyBjeSk7XG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHguYXJjKHNjcmVlblgsIHNjcmVlblksIE1hdGguZmxvb3IocmFkaXVzKSwgMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgY3R4LmZpbGwoKTtcbiAgICAgIGlmIChvdXRsaW5lKSB7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgc3dpdGNoIChyb29tLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NsYXNzcm9vbSc6IC8vIFNhbGEgbGVrY3lqbmFcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM1ZDQwMzcnOyAvLyBCcsSFem93YSBvYnfDs2RrYSBkbGEgbWVibGlcbiAgICAgICAgY29uc3QgZGVza1cgPSB0cyAqIDAuNixcbiAgICAgICAgICBkZXNrSCA9IHRzICogMC40LFxuICAgICAgICAgIGNoYWlySCA9IHRzICogMC4yNTtcbiAgICAgICAgY29uc3Qgc3BhY2VYID0gdHMgKiAxLjAsXG4gICAgICAgICAgc3BhY2VZID0gdHMgKiAwLjk7XG4gICAgICAgIC8vIFRhYmxpY2EgbmEgZ8Ozcm5laiDFm2NpYW5pZVxuICAgICAgICBkcmF3UmVjdCh3ICogMC4yNSwgbWFyZ2luLCB3ICogMC41LCB0cyAqIDAuMiwgJyMzMzMnLCB0cnVlKTtcbiAgICAgICAgZHJhd1JlY3QodyAqIDAuMjUgKyAyLCBtYXJnaW4gKyAyLCB3ICogMC41IC0gNCwgdHMgKiAwLjIgLSA0LCAnIzRDQUY1MCcsIGZhbHNlKTsgLy8gWmllbG9uYSBwb3dpZXJ6Y2huaWFcblxuICAgICAgICAvLyDFgWF3a2kgaSBrcnplc8WCYSB3IHJ6xJlkYWNoXG4gICAgICAgIGZvciAobGV0IHIgPSAwOyA7IHIrKykge1xuICAgICAgICAgIGNvbnN0IHJvd1kgPSBtYXJnaW4gKyB0cyAqIDAuNSArIHIgKiBzcGFjZVk7XG4gICAgICAgICAgaWYgKHJvd1kgKyBkZXNrSCArIGNoYWlySCA+IGggLSBtYXJnaW4pIGJyZWFrOyAvLyBTcHJhd2R6ZW5pZSBjenkgem1pZcWbY2kgc2nEmSByesSFZFxuICAgICAgICAgIGZvciAobGV0IGMgPSAwOyA7IGMrKykge1xuICAgICAgICAgICAgY29uc3QgY29sWCA9IG1hcmdpbiArIGMgKiBzcGFjZVg7XG4gICAgICAgICAgICBpZiAoY29sWCArIGRlc2tXID4gdyAtIG1hcmdpbikgYnJlYWs7IC8vIFNwcmF3ZHplbmllIGN6eSB6bWllxZtjaSBzacSZIGtvbHVtbmFcbiAgICAgICAgICAgIC8vIMWBYXdrYVxuICAgICAgICAgICAgZHJhd1JlY3QoY29sWCwgcm93WSwgZGVza1csIGRlc2tILCAnIzhCNDUxMycpO1xuICAgICAgICAgICAgLy8gS3J6ZXPFgm8gcG9uacW8ZWpcbiAgICAgICAgICAgIGRyYXdSZWN0KGNvbFggKyBkZXNrVyAqIDAuMSwgcm93WSArIGRlc2tIICsgb2JqTWFyZ2luLCBkZXNrVyAqIDAuOCwgY2hhaXJILCAnIzZhNGEzYScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnb2ZmaWNlJzogLy8gQml1cm9cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM1ZDQwMzcnO1xuICAgICAgICAvLyBCaXVya29cbiAgICAgICAgY29uc3QgdGFibGVXID0gTWF0aC5taW4odyAqIDAuNiwgdHMgKiAyLjUpO1xuICAgICAgICBjb25zdCB0YWJsZUggPSBNYXRoLm1pbihoICogMC40LCB0cyAqIDEuMik7XG4gICAgICAgIGRyYXdSZWN0KG1hcmdpbiwgbWFyZ2luLCB0YWJsZVcsIHRhYmxlSCwgJyNhMDUyMmQnKTtcbiAgICAgICAgLy8gS3J6ZXPFgm8gYml1cm93ZVxuICAgICAgICBkcmF3UmVjdChtYXJnaW4gKyB0YWJsZVcgKyBvYmpNYXJnaW4sIG1hcmdpbiArIHRhYmxlSCAqIDAuMSwgdHMgKiAwLjYsIHRzICogMC42LCAnIzQ0NCcpO1xuICAgICAgICAvLyBTemFmYSBuYSBha3RhXG4gICAgICAgIGNvbnN0IGNhYmluZXRXID0gdHMgKiAwLjg7XG4gICAgICAgIGRyYXdSZWN0KHcgLSBtYXJnaW4gLSBjYWJpbmV0VywgbWFyZ2luLCBjYWJpbmV0VywgaCAtIG1hcmdpbiAqIDIsICcjNkI0RjQxJyk7XG4gICAgICAgIC8vIEtvbXB1dGVyIG5hIGJpdXJrdSAoc3ltYm9saWN6bmllKVxuICAgICAgICBkcmF3UmVjdChtYXJnaW4gKyBvYmpNYXJnaW4sIG1hcmdpbiArIG9iak1hcmdpbiwgdHMgKiAwLjUsIHRzICogMC40LCAnIzMzMycpOyAvLyBNb25pdG9yXG4gICAgICAgIGRyYXdSZWN0KFxuICAgICAgICAgIG1hcmdpbiArIG9iak1hcmdpbiArIHRzICogMC4xLFxuICAgICAgICAgIG1hcmdpbiArIG9iak1hcmdpbiArIHRzICogMC40ICsgMixcbiAgICAgICAgICB0cyAqIDAuMyxcbiAgICAgICAgICB0cyAqIDAuMSxcbiAgICAgICAgICAnIzU1NSdcbiAgICAgICAgKTsgLy8gS2xhd2lhdHVyYVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnbGlicmFyeSc6IC8vIEJpYmxpb3Rla2FcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM0MDJhMTAnOyAvLyBDaWVtbmllanN6YSBvYnfDs2RrYSBkbGEgcmVnYcWCw7N3XG4gICAgICAgIGNvbnN0IHNoZWxmVyA9IHRzICogMC42O1xuICAgICAgICBjb25zdCBzaGVsZlNwYWNpbmcgPSB0cyAqIDEuNTtcbiAgICAgICAgLy8gUmVnYcWCeSB3IHBpb25pZVxuICAgICAgICBmb3IgKGxldCBzeCA9IG1hcmdpbjsgc3ggPCB3IC0gbWFyZ2luIC0gc2hlbGZXOyBzeCArPSBzaGVsZlNwYWNpbmcpIHtcbiAgICAgICAgICBkcmF3UmVjdChzeCwgbWFyZ2luLCBzaGVsZlcsIGggLSBtYXJnaW4gKiAyLCAnIzY1NDMyMScpO1xuICAgICAgICAgIC8vIExpbmllIHDDs8WCZWtcbiAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgwLDAsMCwwLjMpJztcbiAgICAgICAgICBmb3IgKGxldCBzaGVsZlkgPSBtYXJnaW4gKyB0cyAqIDAuNTsgc2hlbGZZIDwgaCAtIG1hcmdpbjsgc2hlbGZZICs9IHRzICogMC43KSB7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjdHgubW92ZVRvKHggKyBzeCwgeSArIHNoZWxmWSk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHggKyBzeCArIHNoZWxmVywgeSArIHNoZWxmWSk7XG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNDAyYTEwJzsgLy8gUHJ6eXdyw7PEhyBnxYLDs3dueSBrb2xvciBvYnfDs2RraVxuICAgICAgICB9XG4gICAgICAgIC8vIFN0w7PFgiBkbyBjenl0YW5pYSAoamXFm2xpIGplc3QgbWllanNjZSlcbiAgICAgICAgaWYgKHcgPiBzaGVsZlNwYWNpbmcgKiAxLjUpIHtcbiAgICAgICAgICBjb25zdCB0YWJsZUxpYlggPSBzaGVsZlcgKyBtYXJnaW4gKyAodyAtIHNoZWxmVyAqIDIgLSBtYXJnaW4gKiAyIC0gdHMgKiAxLjUpIC8gMjsgLy8gV3nFm3JvZGt1aiBzdMOzxYIgbWnEmWR6eSByZWdhxYJhbWlcbiAgICAgICAgICBpZiAodGFibGVMaWJYID4gc2hlbGZXICsgbWFyZ2luKSB7XG4gICAgICAgICAgICAvLyBVcGV3bmlqIHNpxJksIMW8ZSBqZXN0IG1pZWpzY2VcbiAgICAgICAgICAgIGRyYXdSZWN0KHRhYmxlTGliWCwgaCAqIDAuMywgdHMgKiAxLjUsIGggKiAwLjQsICcjOTY2RjMzJyk7XG4gICAgICAgICAgICAvLyBLcnplc8WCYSBwcnp5IHN0b2xlXG4gICAgICAgICAgICBkcmF3UmVjdCh0YWJsZUxpYlggKyB0cyAqIDAuMiwgaCAqIDAuMyAtIHRzICogMC4zLCB0cyAqIDAuNSwgdHMgKiAwLjI1LCAnIzZhNGEzYScpO1xuICAgICAgICAgICAgZHJhd1JlY3QoXG4gICAgICAgICAgICAgIHRhYmxlTGliWCArIHRzICogMC4yLFxuICAgICAgICAgICAgICBoICogMC4zICsgaCAqIDAuNCArIG9iak1hcmdpbixcbiAgICAgICAgICAgICAgdHMgKiAwLjUsXG4gICAgICAgICAgICAgIHRzICogMC4yNSxcbiAgICAgICAgICAgICAgJyM2YTRhM2EnXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnZ3ltJzogLy8gU2nFgm93bmlhXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNTU1JztcbiAgICAgICAgLy8gTWF0eSBkbyDEh3dpY3plxYRcbiAgICAgICAgZHJhd1JlY3QobWFyZ2luLCBtYXJnaW4sIHcgKiAwLjQsIGggKiAwLjMsICcjNzc4ODk5Jyk7XG4gICAgICAgIGRyYXdSZWN0KHcgLSBtYXJnaW4gLSB3ICogMC4zLCBoIC0gbWFyZ2luIC0gaCAqIDAuNCwgdyAqIDAuMywgaCAqIDAuNCwgJyM3Nzg4OTknKTtcbiAgICAgICAgLy8gQmllxbxuaWEgKHN5bWJvbGljem5pZSlcbiAgICAgICAgZHJhd1JlY3QodyAqIDAuNiwgbWFyZ2luLCB0cyAqIDAuOCwgdHMgKiAxLjgsICcjMzMzJyk7XG4gICAgICAgIGRyYXdSZWN0KHcgKiAwLjYgKyB0cyAqIDAuMSwgbWFyZ2luICsgdHMgKiAwLjEsIHRzICogMC42LCB0cyAqIDEuNiwgJyM1NTUnLCBmYWxzZSk7XG4gICAgICAgIC8vIMWBYXdlY3prYVxuICAgICAgICBkcmF3UmVjdChtYXJnaW4sIGggKiAwLjUsIHRzICogMS41LCB0cyAqIDAuNCwgJyM4QjQ1MTMnKTtcbiAgICAgICAgLy8gU3RvamFrIHogY2nEmcW8YXJrYW1pXG4gICAgICAgIGRyYXdSZWN0KHcgLSBtYXJnaW4gLSB0cyAqIDAuNSwgbWFyZ2luLCB0cyAqIDAuNSwgdHMgKiAxLjUsICcjNDQ0Jyk7XG4gICAgICAgIGRyYXdDaXJjbGUodyAtIG1hcmdpbiAtIHRzICogMC4yNSwgbWFyZ2luICsgdHMgKiAwLjMsIHRzICogMC4xNSwgJyM2NjYnKTtcbiAgICAgICAgZHJhd0NpcmNsZSh3IC0gbWFyZ2luIC0gdHMgKiAwLjI1LCBtYXJnaW4gKyB0cyAqIDAuNywgdHMgKiAwLjE1LCAnIzY2NicpO1xuICAgICAgICBkcmF3Q2lyY2xlKHcgLSBtYXJnaW4gLSB0cyAqIDAuMjUsIG1hcmdpbiArIHRzICogMS4xLCB0cyAqIDAuMTUsICcjNjY2Jyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdsYWInOiAvLyBMYWJvcmF0b3JpdW1cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM2NjgnO1xuICAgICAgICAvLyBTdG/FgnkgbGFib3JhdG9yeWpuZSAoZMWCdWdpZSlcbiAgICAgICAgY29uc3QgbGFiVGFibGVIID0gdHMgKiAwLjg7XG4gICAgICAgIGRyYXdSZWN0KG1hcmdpbiwgbWFyZ2luLCB3IC0gbWFyZ2luICogMiwgbGFiVGFibGVILCAnI2QwZDBkOCcpOyAvLyBKYXNub3N6YXJ5IHN0w7PFglxuICAgICAgICBkcmF3UmVjdChtYXJnaW4sIGggLSBtYXJnaW4gLSBsYWJUYWJsZUgsIHcgLSBtYXJnaW4gKiAyLCBsYWJUYWJsZUgsICcjZDBkMGQ4Jyk7XG4gICAgICAgIC8vIFNwcnrEmXQgbmEgc3RvxYJhY2hcbiAgICAgICAgZHJhd1JlY3QobWFyZ2luICsgdHMgKiAwLjIsIG1hcmdpbiArIHRzICogMC4xLCB0cyAqIDAuNSwgdHMgKiAwLjUsICcjNGE5MGUyJyk7IC8vIENvxZsgbmllYmllc2tpZWdvXG4gICAgICAgIGRyYXdSZWN0KG1hcmdpbiArIHRzICogMS4wLCBtYXJnaW4gKyB0cyAqIDAuMSwgdHMgKiAwLjMsIHRzICogMC42LCAnI2Y1YTYyMycpOyAvLyBDb8WbIHBvbWFyYcWEY3pvd2Vnb1xuICAgICAgICBkcmF3Q2lyY2xlKHcgLSBtYXJnaW4gKiAyIC0gdHMgKiAwLjQsIG1hcmdpbiArIGxhYlRhYmxlSCAqIDAuNSwgdHMgKiAwLjIsICcjZTA0MDQwJywgdHJ1ZSk7IC8vIENvxZsgY3plcndvbmVnbyBva3LEhWfFgmVnb1xuICAgICAgICAvLyBTemFma2EgeiBvZGN6eW5uaWthbWlcbiAgICAgICAgZHJhd1JlY3QoXG4gICAgICAgICAgdyAqIDAuNCxcbiAgICAgICAgICBtYXJnaW4gKyBsYWJUYWJsZUggKyBvYmpNYXJnaW4sXG4gICAgICAgICAgdHMsXG4gICAgICAgICAgaCAtIG1hcmdpbiAqIDIgLSBsYWJUYWJsZUggKiAyIC0gb2JqTWFyZ2luICogMixcbiAgICAgICAgICAnI2EwYTBiMCdcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3N0b3JhZ2UnOiAvLyBNYWdhenluXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNGQ0MDMwJztcbiAgICAgICAgLy8gUMOzxYJraS9yZWdhxYJ5IG1ldGFsb3dlXG4gICAgICAgIGNvbnN0IG1ldGFsU2hlbGZXID0gdyAtIG1hcmdpbiAqIDI7XG4gICAgICAgIGNvbnN0IG1ldGFsU2hlbGZIID0gdHMgKiAwLjU7XG4gICAgICAgIGRyYXdSZWN0KG1hcmdpbiwgbWFyZ2luLCBtZXRhbFNoZWxmVywgbWV0YWxTaGVsZkgsICcjOWU5ZTllJyk7XG4gICAgICAgIGRyYXdSZWN0KG1hcmdpbiwgaCAtIG1hcmdpbiAtIG1ldGFsU2hlbGZILCBtZXRhbFNoZWxmVywgbWV0YWxTaGVsZkgsICcjOWU5ZTllJyk7XG4gICAgICAgIC8vIFB1ZMWCYVxuICAgICAgICBjb25zdCBib3hTaXplID0gdHMgKiAwLjY7XG4gICAgICAgIGRyYXdSZWN0KG1hcmdpbiArIHRzICogMC4yLCBtYXJnaW4gKyBtZXRhbFNoZWxmSCArIG9iak1hcmdpbiwgYm94U2l6ZSwgYm94U2l6ZSwgJyNiZjhmNmYnKTtcbiAgICAgICAgZHJhd1JlY3QobWFyZ2luICsgdHMgKiAxLjAsIG1hcmdpbiArIG1ldGFsU2hlbGZIICsgb2JqTWFyZ2luLCBib3hTaXplLCBib3hTaXplLCAnI2JmOGY2ZicpO1xuICAgICAgICBkcmF3UmVjdChcbiAgICAgICAgICB3IC0gbWFyZ2luIC0gYm94U2l6ZSAqIDEuNSxcbiAgICAgICAgICBtYXJnaW4gKyBtZXRhbFNoZWxmSCArIG9iak1hcmdpbiAqIDMsXG4gICAgICAgICAgYm94U2l6ZSAqIDEuMixcbiAgICAgICAgICBib3hTaXplICogMC44LFxuICAgICAgICAgICcjYmY4ZjZmJ1xuICAgICAgICApO1xuICAgICAgICAvLyBTdGFyZSBiaXVya28gdyByb2d1XG4gICAgICAgIGRyYXdSZWN0KHcgLSBtYXJnaW4gLSB0cywgaCAtIG1hcmdpbiAtIHRzLCB0cyAqIDAuOCwgdHMgKiAwLjgsICcjNmE0YTNhJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd1dGlsaXR5JzogLy8gUG9taWVzemN6ZW5pZSBnb3Nwb2RhcmN6ZVxuICAgICAgZGVmYXVsdDogLy8gRG9tecWbbG5lLCBqZcWbbGkgdHlwIG5pZXpuYW55XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNWQ0MDM3JztcbiAgICAgICAgLy8gU2tyenlua2kvdXJ6xIVkemVuaWFcbiAgICAgICAgZHJhd1JlY3QodyAqIDAuMSwgaCAqIDAuMTUsIHcgKiAwLjMsIGggKiAwLjI1LCAnI0EwNTIyRCcpO1xuICAgICAgICBkcmF3UmVjdCh3ICogMC42LCBoICogMC41LCB3ICogMC4zLCBoICogMC40LCAnI0EwNTIyRCcpO1xuICAgICAgICAvLyBTemFmYSBtZXRhbG93YVxuICAgICAgICBkcmF3UmVjdCh3IC0gbWFyZ2luIC0gdHMgKiAwLjUsIG1hcmdpbiwgdHMgKiAwLjUsIGggLSBtYXJnaW4gKiAyLCAnIzc3NycpO1xuICAgICAgICAvLyBSdXJ5L2thYmxlIChzeW1ib2xpY3puaWUpXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNTU1JztcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDM7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbyh4ICsgbWFyZ2luLCB5ICsgaCAqIDAuOCk7XG4gICAgICAgIGN0eC5saW5lVG8oeCArIHcgLSBtYXJnaW4sIHkgKyBoICogMC44KTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oeCArIHcgKiAwLjcsIHkgKyBtYXJnaW4pO1xuICAgICAgICBjdHgubGluZVRvKHggKyB3ICogMC43LCB5ICsgaCAtIG1hcmdpbik7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7IC8vIFByenl3csOzxIcgZ3J1Ym/Fm8SHIGxpbmlpXG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBOYXJ5c3VqIGtzacSFxbxraSAqL1xuICBkcmF3Qm9va3MoY3R4LCBib29rcywgb2Zmc2V0WCwgb2Zmc2V0WSwgYm9va0ltYWdlKSB7XG4gICAgaWYgKCFib29rcyB8fCBib29rcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBjb25zdCBkZWZhdWx0Qm9va1NpemUgPSB0aGlzLnRpbGVTaXplICogMC42O1xuXG4gICAgZm9yIChjb25zdCBib29rIG9mIGJvb2tzKSB7XG4gICAgICBjb25zdCBpc0NvbGxlY3RlZCA9IGJvb2suaXNDb2xsZWN0ZWQgfHwgYm9vay5jb2xsZWN0ZWQ7IC8vIEhhbmRsZSBib3RoIHBvdGVudGlhbCBwcm9wZXJ0aWVzXG4gICAgICBpZiAoIWlzQ29sbGVjdGVkKSB7XG4gICAgICAgIGNvbnN0IGJvb2tTaXplID0gYm9vay5zaXplIHx8IGRlZmF1bHRCb29rU2l6ZTtcbiAgICAgICAgLy8gUm91bmQgZHJhd2luZyBjb29yZGluYXRlc1xuICAgICAgICBjb25zdCBzY3JlZW5YID0gTWF0aC5mbG9vcihib29rLnggKyBvZmZzZXRYIC0gYm9va1NpemUgLyAyKTtcbiAgICAgICAgY29uc3Qgc2NyZWVuWSA9IE1hdGguZmxvb3IoYm9vay55ICsgb2Zmc2V0WSAtIGJvb2tTaXplIC8gMik7XG5cbiAgICAgICAgLy8gQmFzaWMgdmlzaWJpbGl0eSBjaGVja1xuICAgICAgICBpZiAoXG4gICAgICAgICAgc2NyZWVuWCArIGJvb2tTaXplID4gMCAmJlxuICAgICAgICAgIHNjcmVlblggPCBjdHguY2FudmFzLndpZHRoICYmXG4gICAgICAgICAgc2NyZWVuWSArIGJvb2tTaXplID4gMCAmJlxuICAgICAgICAgIHNjcmVlblkgPCBjdHguY2FudmFzLmhlaWdodFxuICAgICAgICApIHtcbiAgICAgICAgICAvLyBQcmVmZXIgYm9vaydzIG93biBkcmF3IG1ldGhvZCBpZiBhdmFpbGFibGVcbiAgICAgICAgICBpZiAodHlwZW9mIGJvb2suZHJhdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gUGFzcyByb3VuZGVkIGNvb3JkaW5hdGVzIGFuZCBzaXplXG4gICAgICAgICAgICBib29rLmRyYXcoY3R4LCBvZmZzZXRYLCBvZmZzZXRZLCBib29rSW1hZ2UpOyAvLyBib29rLmRyYXcgc2hvdWxkIGhhbmRsZSBpdHMgb3duIHJvdW5kaW5nIGlmIG5lZWRlZCBpbnRlcm5hbGx5XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIGRyYXdpbmdcbiAgICAgICAgICAgIGlmIChib29rSW1hZ2UpIHtcbiAgICAgICAgICAgICAgLy8gRHJhdyB3aXRoIHJvdW5kZWQgY29vcmRpbmF0ZXNcbiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShib29rSW1hZ2UsIHNjcmVlblgsIHNjcmVlblksIGJvb2tTaXplLCBib29rU2l6ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM4ZDZlNjMnOyAvLyBCcm93biBib29rIGNvbG9yXG4gICAgICAgICAgICAgIGN0eC5maWxsUmVjdChzY3JlZW5YLCBzY3JlZW5ZLCBib29rU2l6ZSwgYm9va1NpemUpO1xuICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzVkNDAzNyc7IC8vIERhcmtlciBvdXRsaW5lXG4gICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdChzY3JlZW5YICsgMC41LCBzY3JlZW5ZICsgMC41LCBib29rU2l6ZSAtIDEsIGJvb2tTaXplIC0gMSk7IC8vIERyYXcgYm9yZGVyIG1vcmUgY2xlYXJseVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufSAvLyBFbmQgY2xhc3MgTWFwUmVuZGVyZXJcbiIsIi8vIHNyYy9tYXAvbWFwR2VuZXJhdG9yLmpzXG5cbmltcG9ydCB7XG4gIFRJTEVfV0FMTCxcbiAgVElMRV9DT1JSSURPUixcbiAgVElMRV9ST09NX0ZMT09SLFxuICBUSUxFX0xJRlQsXG4gIEdZTV9DSEFOQ0VfT05fRklSU1RfRkxPT1IsIC8vIFVwZXduaWogc2nEmSwgxbxlIHRvIGplc3QgemRlZmluaW93YW5lIHcgY29uc3RhbnRzLmpzIGpha28gbnAuIDAuMlxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgcmFuZG9tSW50LCBwZXJmb3JtQkZTIH0gZnJvbSAnLi4vdXRpbHMvbWFwLmpzJztcblxubGV0IGNvbnNpc3RlbnRMaWZ0Q29vcmRzID0gbnVsbDtcblxuY29uc3QgREVGQVVMVF9HRU5fUEFSQU1TID0ge1xuICBtaW5Sb29tU2l6ZTogNSxcbiAgbWF4Um9vbVNpemU6IDEwLFxuICBjb3JyaWRvclRoaWNrbmVzczogMSxcbiAgbnVtUm9vbXM6IDEyLFxuICBtYXhSb29tQXR0ZW1wdHM6IDIwMCxcbiAgcm9vbVR5cGVXZWlnaHRzOiB7XG4gICAgY2xhc3Nyb29tOiA1MCxcbiAgICBvZmZpY2U6IDI1LFxuICAgIGxpYnJhcnk6IDE1LFxuICAgIGd5bTogMCxcbiAgICB1dGlsaXR5OiAxMCxcbiAgICBsYWI6IDEwLFxuICAgIHN0b3JhZ2U6IDUsXG4gIH0sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVMZXZlbERhdGEoY29uZmlnKSB7XG4gIGNvbnN0IHsgY29scywgcm93cywgZmxvb3JOdW1iZXIsIG1pbkZsb29yLCB0aWxlU2l6ZSwgZ2VuZXJhdGlvblBhcmFtczogdXNlclBhcmFtcyB9ID0gY29uZmlnO1xuICBjb25zdCBnZW5QYXJhbXMgPSB7IC4uLkRFRkFVTFRfR0VOX1BBUkFNUywgLi4udXNlclBhcmFtcyB9O1xuICBnZW5QYXJhbXMuZmxvb3JOdW1iZXIgPSBmbG9vck51bWJlcjsgLy8gRG9kYWplbXkgbnVtZXIgcGnEmXRyYSBkbyBnZW5QYXJhbXNcblxuICBnZW5QYXJhbXMucm9vbVR5cGVXZWlnaHRzLmd5bSA9XG4gICAgZmxvb3JOdW1iZXIgPT09IG1pbkZsb29yID8gKEdZTV9DSEFOQ0VfT05fRklSU1RfRkxPT1IgfHwgMCkgKiAxMDAgOiAwO1xuXG4gIGlmIChmbG9vck51bWJlciA9PT0gbWluRmxvb3IpIHtcbiAgICBjb25zaXN0ZW50TGlmdENvb3JkcyA9IG51bGw7XG4gICAgY29uc29sZS5sb2coYFtNYXBHZW4gRmxvb3IgJHtmbG9vck51bWJlcn1dIFJlc2V0IGNvbnNpc3RlbnQgbGlmdCBjb29yZHMgZm9yIHRoZSBmaXJzdCBmbG9vci5gKTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKGBbTWFwR2VuIEZsb29yICR7Zmxvb3JOdW1iZXJ9XSBTdGFydGluZyBtYXAgZ2VuZXJhdGlvbiAoJHtjb2xzfXgke3Jvd3N9KS4uLmApO1xuICBjb25zdCBtYXAgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0sICgpID0+IEFycmF5KGNvbHMpLmZpbGwoVElMRV9XQUxMKSk7XG4gIGNvbnN0IHJvb21zID0gW107XG4gIGxldCBsaWZ0UG9zaXRpb24gPSBudWxsO1xuXG4gIF9wbGFjZVJvb21zKG1hcCwgcm9vbXMsIGNvbHMsIHJvd3MsIGdlblBhcmFtcyk7XG5cbiAgaWYgKHJvb21zLmxlbmd0aCA8IDEpIHtcbiAgICBjb25zdCBlcnJvck1zZyA9IGBbTWFwR2VuIEZsb29yICR7Zmxvb3JOdW1iZXJ9XSBDUklUSUNBTDogTm8gcm9vbXMgZ2VuZXJhdGVkLiBDYW5ub3QgcGxhY2UgbGlmdC5gO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNc2cpO1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gIH0gZWxzZSBpZiAocm9vbXMubGVuZ3RoID49IDIpIHtcbiAgICBfY29ubmVjdFJvb21zQmV0dGVyKG1hcCwgcm9vbXMsIGNvbHMsIHJvd3MpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGBbTWFwR2VuIEZsb29yICR7Zmxvb3JOdW1iZXJ9XSBPbmx5IDEgcm9vbSBnZW5lcmF0ZWQuIE5vIGNvcnJpZG9ycyBuZWVkZWQgYmV0d2VlbiByb29tcy5gXG4gICAgKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcGxhY2VkTGlmdERhdGEgPSBfcGxhY2VMaWZ0KFxuICAgICAgbWFwLFxuICAgICAgY29scyxcbiAgICAgIHJvd3MsXG4gICAgICBmbG9vck51bWJlcixcbiAgICAgIG1pbkZsb29yLFxuICAgICAgdGlsZVNpemUsXG4gICAgICBjb25zaXN0ZW50TGlmdENvb3JkcyxcbiAgICAgIHJvb21zXG4gICAgKTtcbiAgICBsaWZ0UG9zaXRpb24gPSBwbGFjZWRMaWZ0RGF0YS5wb3NpdGlvbjtcbiAgICBpZiAocGxhY2VkTGlmdERhdGEuY29vcmRzKSB7XG4gICAgICBjb25zaXN0ZW50TGlmdENvb3JkcyA9IHBsYWNlZExpZnREYXRhLmNvb3JkcztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgW01hcEdlbiBGbG9vciAke2Zsb29yTnVtYmVyfV0gQ1JJVElDQUw6IExpZnQgcGxhY2VtZW50IGZhaWxlZDpgLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBMaWZ0IHBsYWNlbWVudCBmYWlsZWQgb24gZmxvb3IgJHtmbG9vck51bWJlcn06ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxuXG4gIF9lbnN1cmVNYXBCb3JkZXJzKG1hcCwgY29scywgcm93cyk7XG5cbiAgaWYgKGxpZnRQb3NpdGlvbiAmJiAhX2lzTGlmdFJlYWNoYWJsZShtYXAsIGxpZnRQb3NpdGlvbiwgY29scywgcm93cykpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgW01hcFZhbGlkYXRpb24gRmxvb3IgJHtmbG9vck51bWJlcn1dIExpZnQgYXQgdGlsZSgke2xpZnRQb3NpdGlvbi50aWxlWH0sICR7bGlmdFBvc2l0aW9uLnRpbGVZfSkgaW5pdGlhbGx5IHVucmVhY2hhYmxlLiBBdHRlbXB0aW5nIGZpbmFsIGZvcmNlIGNvbm5lY3Rpb24uYFxuICAgICk7XG4gICAgY29uc3QgY29ubmVjdGVkID0gX2ZvcmNlQ29ubmVjdGlvblRvUG9pbnQoXG4gICAgICBtYXAsXG4gICAgICBsaWZ0UG9zaXRpb24udGlsZVgsXG4gICAgICBsaWZ0UG9zaXRpb24udGlsZVksXG4gICAgICBjb2xzLFxuICAgICAgcm93c1xuICAgICk7XG4gICAgaWYgKCFjb25uZWN0ZWQgfHwgIV9pc0xpZnRSZWFjaGFibGUobWFwLCBsaWZ0UG9zaXRpb24sIGNvbHMsIHJvd3MpKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBDUklUSUNBTDogUGxhY2VkIGxpZnQgYXQgdGlsZSgke2xpZnRQb3NpdGlvbi50aWxlWH0sICR7bGlmdFBvc2l0aW9uLnRpbGVZfSkgaXMgVU5SRUFDSEFCTEUgZXZlbiBhZnRlciBmb3JjZSBjb25uZWN0ISBHZW5lcmF0aW9uIGZhaWxlZC5gO1xuICAgICAgY29uc29sZS5lcnJvcihgW01hcEdlbiBGbG9vciAke2Zsb29yTnVtYmVyfV0gJHtlcnJvck1zZ31gKTtcbiAgICAgIGxvZ01hcEdyaWRGb3JEZWJ1ZyhtYXAsIGNvbHMsIHJvd3MpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBMaWZ0IGlzIHVucmVhY2hhYmxlIG9uIGZsb29yICR7Zmxvb3JOdW1iZXJ9LiBDYW5ub3QgcHJvY2VlZC5gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGBbTWFwVmFsaWRhdGlvbiBGbG9vciAke2Zsb29yTnVtYmVyfV0gTGlmdCBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwgYWZ0ZXIgc2Vjb25kIGF0dGVtcHQuYFxuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAobGlmdFBvc2l0aW9uKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBgW01hcFZhbGlkYXRpb24gRmxvb3IgJHtmbG9vck51bWJlcn1dIExpZnQgYXQgdGlsZSgke2xpZnRQb3NpdGlvbi50aWxlWH0sICR7bGlmdFBvc2l0aW9uLnRpbGVZfSkgaXMgcmVhY2hhYmxlLmBcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWFwIGdlbmVyYXRlZCB3aXRob3V0IGEgdmFsaWQgbGlmdCBwb3NpdGlvbiBvbiBmbG9vciAke2Zsb29yTnVtYmVyfS5gKTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKGBbTWFwR2VuIEZsb29yICR7Zmxvb3JOdW1iZXJ9XSBNYXAgZ2VuZXJhdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LmApO1xuICByZXR1cm4geyBtYXAsIHJvb21zLCBsaWZ0UG9zaXRpb24gfTtcbn1cblxuZnVuY3Rpb24gX3BsYWNlUm9vbXMobWFwLCByb29tcywgY29scywgcm93cywgZ2VuUGFyYW1zKSB7XG4gIGNvbnN0IHsgbWluUm9vbVNpemUsIG1heFJvb21TaXplLCBudW1Sb29tcywgbWF4Um9vbUF0dGVtcHRzLCByb29tVHlwZVdlaWdodHMgfSA9IGdlblBhcmFtcztcbiAgbGV0IHJvb21BdHRlbXB0cyA9IDA7XG4gIGNvbnN0IHdlaWdodGVkVHlwZXMgPSBbXTtcblxuICBmb3IgKGNvbnN0IHR5cGUgaW4gcm9vbVR5cGVXZWlnaHRzKSB7XG4gICAgY29uc3Qgd2VpZ2h0ID0gcm9vbVR5cGVXZWlnaHRzW3R5cGVdO1xuICAgIGlmICh3ZWlnaHQgPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlaWdodDsgaSsrKSB3ZWlnaHRlZFR5cGVzLnB1c2godHlwZSk7XG4gICAgfVxuICB9XG4gIGlmICh3ZWlnaHRlZFR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHdlaWdodGVkVHlwZXMucHVzaCgndXRpbGl0eScpO1xuICAgIGNvbnNvbGUud2FybihcIltNYXBHZW4gUm9vbXNdIE5vIHJvb20gdHlwZXMuIERlZmF1bHRpbmcgdG8gJ3V0aWxpdHknLlwiKTtcbiAgfVxuXG4gIHdoaWxlIChyb29tcy5sZW5ndGggPCBudW1Sb29tcyAmJiByb29tQXR0ZW1wdHMgPCBtYXhSb29tQXR0ZW1wdHMpIHtcbiAgICByb29tQXR0ZW1wdHMrKztcbiAgICBjb25zdCByb29tV2lkdGggPSByYW5kb21JbnQobWluUm9vbVNpemUsIG1heFJvb21TaXplKTtcbiAgICBjb25zdCByb29tSGVpZ2h0ID0gcmFuZG9tSW50KG1pblJvb21TaXplLCBtYXhSb29tU2l6ZSk7XG4gICAgY29uc3Qgcm9vbUNvbCA9IHJhbmRvbUludCgxLCBjb2xzIC0gcm9vbVdpZHRoIC0gMik7IC8vIC0yIHRvIGxlYXZlIGJvcmRlclxuICAgIGNvbnN0IHJvb21Sb3cgPSByYW5kb21JbnQoMSwgcm93cyAtIHJvb21IZWlnaHQgLSAyKTsgLy8gLTIgdG8gbGVhdmUgYm9yZGVyXG5cbiAgICBjb25zdCByb29tVHlwZSA9IHdlaWdodGVkVHlwZXNbcmFuZG9tSW50KDAsIHdlaWdodGVkVHlwZXMubGVuZ3RoIC0gMSldO1xuICAgIGNvbnN0IG5ld1Jvb20gPSB7XG4gICAgICBjb2w6IHJvb21Db2wsXG4gICAgICByb3c6IHJvb21Sb3csXG4gICAgICB3aWR0aDogcm9vbVdpZHRoLFxuICAgICAgaGVpZ2h0OiByb29tSGVpZ2h0LFxuICAgICAgdHlwZTogcm9vbVR5cGUsXG4gICAgICBpZDogYHJvb21fZiR7Z2VuUGFyYW1zLmZsb29yTnVtYmVyfV8ke3Jvb21zLmxlbmd0aCArIDF9YCxcbiAgICAgIGNlbnRlclRpbGVYOiBNYXRoLmZsb29yKHJvb21Db2wgKyByb29tV2lkdGggLyAyKSxcbiAgICAgIGNlbnRlclRpbGVZOiBNYXRoLmZsb29yKHJvb21Sb3cgKyByb29tSGVpZ2h0IC8gMiksXG4gICAgICBjb25uZWN0ZWQ6IGZhbHNlLFxuICAgICAgeDogcm9vbUNvbCxcbiAgICAgIHk6IHJvb21Sb3csXG4gICAgfTtcblxuICAgIGxldCBvdmVybGFwcyA9IGZhbHNlO1xuICAgIGNvbnN0IGJ1ZmZlciA9IDI7XG4gICAgZm9yIChjb25zdCBleGlzdGluZ1Jvb20gb2Ygcm9vbXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgbmV3Um9vbS5jb2wgPCBleGlzdGluZ1Jvb20uY29sICsgZXhpc3RpbmdSb29tLndpZHRoICsgYnVmZmVyICYmXG4gICAgICAgIG5ld1Jvb20uY29sICsgbmV3Um9vbS53aWR0aCArIGJ1ZmZlciA+IGV4aXN0aW5nUm9vbS5jb2wgJiZcbiAgICAgICAgbmV3Um9vbS5yb3cgPCBleGlzdGluZ1Jvb20ucm93ICsgZXhpc3RpbmdSb29tLmhlaWdodCArIGJ1ZmZlciAmJlxuICAgICAgICBuZXdSb29tLnJvdyArIG5ld1Jvb20uaGVpZ2h0ICsgYnVmZmVyID4gZXhpc3RpbmdSb29tLnJvd1xuICAgICAgKSB7XG4gICAgICAgIG92ZXJsYXBzID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFvdmVybGFwcykge1xuICAgICAgcm9vbXMucHVzaChuZXdSb29tKTtcbiAgICAgIGZvciAobGV0IHIgPSBuZXdSb29tLnJvdzsgciA8IG5ld1Jvb20ucm93ICsgbmV3Um9vbS5oZWlnaHQ7IHIrKykge1xuICAgICAgICBmb3IgKGxldCBjID0gbmV3Um9vbS5jb2w7IGMgPCBuZXdSb29tLmNvbCArIG5ld1Jvb20ud2lkdGg7IGMrKykge1xuICAgICAgICAgIGlmIChyID49IDAgJiYgciA8IHJvd3MgJiYgYyA+PSAwICYmIGMgPCBjb2xzKSBtYXBbcl1bY10gPSBUSUxFX1JPT01fRkxPT1I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKHJvb21zLmxlbmd0aCA8IG51bVJvb21zKVxuICAgIGNvbnNvbGUud2FybihgW01hcEdlbiBSb29tc10gUGxhY2VkICR7cm9vbXMubGVuZ3RofS8ke251bVJvb21zfSByb29tcy5gKTtcbiAgZWxzZSBjb25zb2xlLmxvZyhgW01hcEdlbiBSb29tc10gUGxhY2VkICR7cm9vbXMubGVuZ3RofSByb29tcy5gKTtcbn1cblxuZnVuY3Rpb24gX2Nvbm5lY3RSb29tc0JldHRlcihtYXAsIHJvb21zLCBjb2xzLCByb3dzKSB7XG4gIGlmIChyb29tcy5sZW5ndGggPCAyKSByZXR1cm47XG4gIGNvbnNvbGUubG9nKGBbTWFwR2VuIENvbm5lY3RdIENvbm5lY3RpbmcgJHtyb29tcy5sZW5ndGh9IHJvb21zLi4uYCk7XG4gIGNvbnN0IGNvbm5lY3RlZFNldCA9IG5ldyBTZXQoW3Jvb21zWzBdLmlkXSk7XG4gIGxldCB1bmNvbm5lY3RlZFJvb21zID0gcm9vbXMuc2xpY2UoMSk7XG5cbiAgd2hpbGUgKHVuY29ubmVjdGVkUm9vbXMubGVuZ3RoID4gMCkge1xuICAgIGxldCBiZXN0RGlzdFNxID0gSW5maW5pdHksXG4gICAgICBiZXN0VW5jUm9vbSA9IG51bGwsXG4gICAgICBiZXN0Q29uUm9vbUlkID0gbnVsbCxcbiAgICAgIGJlc3RVbmNJZHggPSAtMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVuY29ubmVjdGVkUm9vbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJvb21VID0gdW5jb25uZWN0ZWRSb29tc1tpXTtcbiAgICAgIGZvciAoY29uc3Qgcm9vbUMgb2Ygcm9vbXMpIHtcbiAgICAgICAgaWYgKGNvbm5lY3RlZFNldC5oYXMocm9vbUMuaWQpKSB7XG4gICAgICAgICAgY29uc3QgZHggPSByb29tVS5jZW50ZXJUaWxlWCAtIHJvb21DLmNlbnRlclRpbGVYO1xuICAgICAgICAgIGNvbnN0IGR5ID0gcm9vbVUuY2VudGVyVGlsZVkgLSByb29tQy5jZW50ZXJUaWxlWTtcbiAgICAgICAgICBjb25zdCBkaXN0U3EgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICBpZiAoZGlzdFNxIDwgYmVzdERpc3RTcSkge1xuICAgICAgICAgICAgYmVzdERpc3RTcSA9IGRpc3RTcTtcbiAgICAgICAgICAgIGJlc3RVbmNSb29tID0gcm9vbVU7XG4gICAgICAgICAgICBiZXN0Q29uUm9vbUlkID0gcm9vbUMuaWQ7XG4gICAgICAgICAgICBiZXN0VW5jSWR4ID0gaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJlc3RVbmNSb29tICYmIGJlc3RDb25Sb29tSWQgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGJlc3RDb25Sb29tID0gcm9vbXMuZmluZCgocikgPT4gci5pZCA9PT0gYmVzdENvblJvb21JZCk7XG4gICAgICBpZiAoIWJlc3RDb25Sb29tKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtNYXBHZW4gQ29ubmVjdF0gRXJyb3IgZmluZGluZyBjb25uZWN0ZWQgcm9vbSAke2Jlc3RDb25Sb29tSWR9LmApO1xuICAgICAgICB1bmNvbm5lY3RlZFJvb21zLnNwbGljZShiZXN0VW5jSWR4LCAxKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBfY2FydmVDb3JyaWRvckJldHdlZW4obWFwLCBiZXN0Q29uUm9vbSwgYmVzdFVuY1Jvb20sIGNvbHMsIHJvd3MpO1xuICAgICAgY29ubmVjdGVkU2V0LmFkZChiZXN0VW5jUm9vbS5pZCk7XG4gICAgICB1bmNvbm5lY3RlZFJvb21zLnNwbGljZShiZXN0VW5jSWR4LCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ1tNYXBHZW4gQ29ubmVjdF0gQ291bGQgbm90IGZpbmQgbmV4dCBwYWlyLiBSZW1haW5pbmc6JyxcbiAgICAgICAgdW5jb25uZWN0ZWRSb29tcy5tYXAoKHIpID0+IHIuaWQpXG4gICAgICApO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGNvbnNvbGUubG9nKGBbTWFwR2VuIENvbm5lY3RdIEZpbmlzaGVkLiBDb25uZWN0ZWQ6ICR7Y29ubmVjdGVkU2V0LnNpemV9YCk7XG59XG5cbmZ1bmN0aW9uIF9jYXJ2ZUNvcnJpZG9yQmV0d2VlbihtYXAsIHJvb21BLCByb29tQiwgY29scywgcm93cykge1xuICBjb25zdCB7IGNlbnRlclRpbGVYOiBheCwgY2VudGVyVGlsZVk6IGF5IH0gPSByb29tQTtcbiAgY29uc3QgeyBjZW50ZXJUaWxlWDogYngsIGNlbnRlclRpbGVZOiBieSB9ID0gcm9vbUI7XG4gIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG4gICAgX2NhcnZlSG9yaXpvbnRhbENvcnJpZG9yKG1hcCwgYXksIGF4LCBieCwgY29scywgcm93cyk7XG4gICAgX2NhcnZlVmVydGljYWxDb3JyaWRvcihtYXAsIGJ4LCBheSwgYnksIGNvbHMsIHJvd3MpO1xuICB9IGVsc2Uge1xuICAgIF9jYXJ2ZVZlcnRpY2FsQ29ycmlkb3IobWFwLCBheCwgYXksIGJ5LCBjb2xzLCByb3dzKTtcbiAgICBfY2FydmVIb3Jpem9udGFsQ29ycmlkb3IobWFwLCBieSwgYXgsIGJ4LCBjb2xzLCByb3dzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY2FydmVIb3Jpem9udGFsQ29ycmlkb3IobWFwLCByLCBjMSwgYzIsIGNvbHMsIHJvd3MpIHtcbiAgaWYgKHIgPCAwIHx8IHIgPj0gcm93cykgcmV0dXJuO1xuICBjb25zdCBzdGFydEMgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjMSwgYzIpKSxcbiAgICBlbmRDID0gTWF0aC5taW4oY29scyAtIDEsIE1hdGgubWF4KGMxLCBjMikpO1xuICBmb3IgKGxldCBjID0gc3RhcnRDOyBjIDw9IGVuZEM7IGMrKykgaWYgKG1hcFtyXT8uW2NdID09PSBUSUxFX1dBTEwpIG1hcFtyXVtjXSA9IFRJTEVfQ09SUklET1I7XG59XG5mdW5jdGlvbiBfY2FydmVWZXJ0aWNhbENvcnJpZG9yKG1hcCwgYywgcjEsIHIyLCBjb2xzLCByb3dzKSB7XG4gIGlmIChjIDwgMCB8fCBjID49IGNvbHMpIHJldHVybjtcbiAgY29uc3Qgc3RhcnRSID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocjEsIHIyKSksXG4gICAgZW5kUiA9IE1hdGgubWluKHJvd3MgLSAxLCBNYXRoLm1heChyMSwgcjIpKTtcbiAgZm9yIChsZXQgciA9IHN0YXJ0UjsgciA8PSBlbmRSOyByKyspIGlmIChtYXBbcl0/LltjXSA9PT0gVElMRV9XQUxMKSBtYXBbcl1bY10gPSBUSUxFX0NPUlJJRE9SO1xufVxuXG5mdW5jdGlvbiBfZ2V0VGlsZU9wZW5uZXNzRGV0YWlscyh0aWxlWCwgdGlsZVksIG1hcCwgY29scywgcm93cykge1xuICBjb25zdCBpc1dhbGthYmxlID0gKHgsIHkpID0+IHtcbiAgICBpZiAoeCA8IDAgfHwgeCA+PSBjb2xzIHx8IHkgPCAwIHx8IHkgPj0gcm93cykgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHZhbCA9IG1hcFt5XT8uW3hdO1xuICAgIHJldHVybiB2YWwgPT09IFRJTEVfQ09SUklET1IgfHwgdmFsID09PSBUSUxFX1JPT01fRkxPT1IgfHwgdmFsID09PSBUSUxFX0xJRlQ7XG4gIH07XG4gIGxldCBvcGVuU2lkZXMgPSAwO1xuICBjb25zdCBkZWx0YXMgPSBbXG4gICAgeyBkeDogMCwgZHk6IC0xIH0sXG4gICAgeyBkeDogMCwgZHk6IDEgfSxcbiAgICB7IGR4OiAtMSwgZHk6IDAgfSxcbiAgICB7IGR4OiAxLCBkeTogMCB9LFxuICBdO1xuICBsZXQgZmxhZ3MgPSBbZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2VdOyAvLyBOLFMsVyxFXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGVsdGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGlzV2Fsa2FibGUodGlsZVggKyBkZWx0YXNbaV0uZHgsIHRpbGVZICsgZGVsdGFzW2ldLmR5KSkge1xuICAgICAgb3BlblNpZGVzKys7XG4gICAgICBmbGFnc1tpXSA9IHRydWU7XG4gICAgfVxuICB9XG4gIGxldCBpc0Nob2tlcG9pbnQgPVxuICAgIG9wZW5TaWRlcyA9PT0gMiAmJlxuICAgICgoZmxhZ3NbMF0gJiYgZmxhZ3NbMV0gJiYgIWZsYWdzWzJdICYmICFmbGFnc1szXSkgfHxcbiAgICAgIChmbGFnc1syXSAmJiBmbGFnc1szXSAmJiAhZmxhZ3NbMF0gJiYgIWZsYWdzWzFdKSk7XG4gIHJldHVybiB7IG9wZW5TaWRlcywgaXNDaG9rZXBvaW50IH07XG59XG5cbmZ1bmN0aW9uIF9maW5kTGlmdFBsYWNlbWVudExvY2F0aW9uKG1hcCwgY29scywgcm93cywgcm9vbXNMaXN0KSB7XG4gIGNvbnNvbGUubG9nKGAgIFtNYXBHZW4gRmluZExpZnQgVjZdIFNlYXJjaGluZyBmb3IgbGlmdCBzcG90IElOU0lERSBhIHJvb20uLi5gKTtcbiAgaWYgKCFyb29tc0xpc3QgfHwgcm9vbXNMaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnNvbGUud2FybihgICBbTWFwR2VuIEZpbmRMaWZ0IFY2XSBObyByb29tcy4gUGxhY2VtZW50IHdpbGwgZmFpbC5gKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBjYW5kaWRhdGVzID0gW107XG4gIGZvciAoY29uc3Qgcm9vbSBvZiByb29tc0xpc3QpIHtcbiAgICBjb25zdCBzdGFydElDID0gcm9vbS5jb2wgKyAxLFxuICAgICAgZW5kSUMgPSByb29tLmNvbCArIHJvb20ud2lkdGggLSAyO1xuICAgIGNvbnN0IHN0YXJ0SVIgPSByb29tLnJvdyArIDEsXG4gICAgICBlbmRJUiA9IHJvb20ucm93ICsgcm9vbS5oZWlnaHQgLSAyO1xuICAgIGlmIChzdGFydElDIDw9IGVuZElDICYmIHN0YXJ0SVIgPD0gZW5kSVIpIHtcbiAgICAgIGZvciAobGV0IHIgPSBzdGFydElSOyByIDw9IGVuZElSOyByKyspIHtcbiAgICAgICAgZm9yIChsZXQgYyA9IHN0YXJ0SUM7IGMgPD0gZW5kSUM7IGMrKykge1xuICAgICAgICAgIGlmIChtYXBbcl0/LltjXSA9PT0gVElMRV9ST09NX0ZMT09SKSB7XG4gICAgICAgICAgICBjb25zdCBkID0gX2dldFRpbGVPcGVubmVzc0RldGFpbHMoYywgciwgbWFwLCBjb2xzLCByb3dzKTtcbiAgICAgICAgICAgIGlmICghZC5pc0Nob2tlcG9pbnQgJiYgZC5vcGVuU2lkZXMgPj0gMikgY2FuZGlkYXRlcy5wdXNoKHsgdGlsZVg6IGMsIHRpbGVZOiByLCByb29tIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjID0gcm9vbS5jZW50ZXJUaWxlWCxcbiAgICAgICAgciA9IHJvb20uY2VudGVyVGlsZVk7XG4gICAgICBpZiAoXG4gICAgICAgIGMgPj0gcm9vbS5jb2wgJiZcbiAgICAgICAgYyA8IHJvb20uY29sICsgcm9vbS53aWR0aCAmJlxuICAgICAgICByID49IHJvb20ucm93ICYmXG4gICAgICAgIHIgPCByb29tLnJvdyArIHJvb20uaGVpZ2h0ICYmXG4gICAgICAgIG1hcFtyXT8uW2NdID09PSBUSUxFX1JPT01fRkxPT1JcbiAgICAgICkge1xuICAgICAgICBjb25zdCBkID0gX2dldFRpbGVPcGVubmVzc0RldGFpbHMoYywgciwgbWFwLCBjb2xzLCByb3dzKTtcbiAgICAgICAgaWYgKCFkLmlzQ2hva2Vwb2ludCAmJiBkLm9wZW5TaWRlcyA+PSAxKSBjYW5kaWRhdGVzLnB1c2goeyB0aWxlWDogYywgdGlsZVk6IHIsIHJvb20gfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBjWCA9IE1hdGguZmxvb3IoY29scyAvIDIpLFxuICAgICAgY1kgPSBNYXRoLmZsb29yKHJvd3MgLyAyKTtcbiAgICBjYW5kaWRhdGVzLnNvcnQoXG4gICAgICAoYSwgYikgPT5cbiAgICAgICAgKGEudGlsZVggLSBjWCkgKiogMiArIChhLnRpbGVZIC0gY1kpICoqIDIgLSAoKGIudGlsZVggLSBjWCkgKiogMiArIChiLnRpbGVZIC0gY1kpICoqIDIpXG4gICAgKTtcbiAgICBjb25zdCBiZXN0ID0gY2FuZGlkYXRlc1swXTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGAgIFtNYXBHZW4gRmluZExpZnQgVjZdIFNlbGVjdGVkIElOIFJPT00gKCR7YmVzdC5yb29tLmlkfSkgQCgke2Jlc3QudGlsZVh9LCR7YmVzdC50aWxlWX0pLmBcbiAgICApO1xuICAgIHJldHVybiB7IHRpbGVYOiBiZXN0LnRpbGVYLCB0aWxlWTogYmVzdC50aWxlWSB9O1xuICB9XG4gIGNvbnNvbGUud2FybignW01hcEdlbiBGaW5kTGlmdCBWNl0gTm8gc3VpdGFibGUgSU4tUk9PTSBsb2NhdGlvbi4gV2lsbCBmYWlsLicpO1xuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gX3BsYWNlTGlmdChcbiAgbWFwLFxuICBjb2xzLFxuICByb3dzLFxuICBmbG9vck51bWJlcixcbiAgbWluRmxvb3IsXG4gIHRpbGVTaXplLFxuICBjdXJyZW50Q29uc2lzdGVudENvb3JkcyxcbiAgcm9vbXNMaXN0XG4pIHtcbiAgbGV0IGNvb3Jkc1RvVXNlID0gY3VycmVudENvbnNpc3RlbnRDb29yZHMsXG4gICAgbmV3bHlGb3VuZENvb3JkcyA9IG51bGw7XG5cbiAgaWYgKGZsb29yTnVtYmVyID09PSBtaW5GbG9vcikge1xuICAgIGNvbnNvbGUubG9nKGBbTWFwR2VuIEYke2Zsb29yTnVtYmVyfV0gRmluZGluZyBpbml0aWFsIElOLVJPT00gbGlmdCBsb2MuLi5gKTtcbiAgICBjb29yZHNUb1VzZSA9IF9maW5kTGlmdFBsYWNlbWVudExvY2F0aW9uKG1hcCwgY29scywgcm93cywgcm9vbXNMaXN0KTtcbiAgICBpZiAoIWNvb3Jkc1RvVXNlKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBbTWFwR2VuIEYke2Zsb29yTnVtYmVyfV0gQ1JJVDogTm8gdmFsaWQgSU4tUk9PTSBsaWZ0IGxvYyBvbiBtaW5GbG9vci5gKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBbTWFwR2VuIEYke2Zsb29yTnVtYmVyfV0gRXN0YWJsaXNoZWQgY29uc2lzdGVudCBJTi1ST09NIGxpZnQgQCgke2Nvb3Jkc1RvVXNlLnRpbGVYfSwke2Nvb3Jkc1RvVXNlLnRpbGVZfSlgXG4gICAgKTtcbiAgICBuZXdseUZvdW5kQ29vcmRzID0gY29vcmRzVG9Vc2U7XG4gIH0gZWxzZSBpZiAoIWNvb3Jkc1RvVXNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBbTWFwR2VuIExpZnRdIENSSVQ6IE1pc3NpbmcgY29uc2lzdGVudCBsaWZ0IGNvb3JkcyBmb3IgRiR7Zmxvb3JOdW1iZXJ9LmApO1xuICB9XG5cbiAgY29uc3QgeyB0aWxlWCwgdGlsZVkgfSA9IGNvb3Jkc1RvVXNlO1xuICBpZiAodGlsZVkgPCAwIHx8IHRpbGVZID49IHJvd3MgfHwgdGlsZVggPCAwIHx8IHRpbGVYID49IGNvbHMpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBbTWFwR2VuIExpZnRdIENvb3JkcyAoJHt0aWxlWH0sJHt0aWxlWX0pIG91dCBvZiBib3VuZHMgRiR7Zmxvb3JOdW1iZXJ9LmApO1xuXG4gIGNvbnN0IHRpbGVWYWx1ZUJlZm9yZUxpZnQgPSBtYXBbdGlsZVldPy5bdGlsZVhdO1xuXG4gIGlmIChtYXBbdGlsZVldW3RpbGVYXSA9PT0gVElMRV9XQUxMKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgYFtNYXBHZW4gRiR7Zmxvb3JOdW1iZXJ9XSBMaWZ0IGxvYyAoJHt0aWxlWH0sJHt0aWxlWX0pIGlzIFdBTEwuIEZvcmNpbmcgY29ubmVjdGlvbi4uLmBcbiAgICApO1xuICAgIGNvbnN0IGNvbm5lY3RlZCA9IF9mb3JjZUNvbm5lY3Rpb25Ub1BvaW50KG1hcCwgdGlsZVgsIHRpbGVZLCBjb2xzLCByb3dzKTtcbiAgICBpZiAoIWNvbm5lY3RlZCAmJiBtYXBbdGlsZVldW3RpbGVYXSA9PT0gVElMRV9XQUxMKVxuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFtNYXBHZW4gTGlmdENvbm5lY3RdIEZBSUxFRCB0byBjb25uZWN0IHdhbGwgQCgke3RpbGVYfSwke3RpbGVZfSkgJiBpdCBSRU1BSU5FRCBXQUxMLmBcbiAgICAgICk7XG4gIH1cblxuICBtYXBbdGlsZVldW3RpbGVYXSA9IFRJTEVfTElGVDsgLy8gUGxhY2UgbGlmdCB0aWxlIEZJUlNUXG4gIGxldCBsaWZ0Um9vbU9iamVjdCA9IG51bGw7XG5cbiAgZm9yIChjb25zdCByb29tIG9mIHJvb21zTGlzdCkge1xuICAgIGlmIChcbiAgICAgIHRpbGVYID49IHJvb20uY29sICYmXG4gICAgICB0aWxlWCA8IHJvb20uY29sICsgcm9vbS53aWR0aCAmJlxuICAgICAgdGlsZVkgPj0gcm9vbS5yb3cgJiZcbiAgICAgIHRpbGVZIDwgcm9vbS5yb3cgKyByb29tLmhlaWdodFxuICAgICkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRpbGUgKmJlZm9yZSogcGxhY2luZyB0aGUgbGlmdCB3YXMgcGFydCBvZiB0aGlzIHJvb20ncyBmbG9vclxuICAgICAgaWYgKHRpbGVWYWx1ZUJlZm9yZUxpZnQgPT09IFRJTEVfUk9PTV9GTE9PUikge1xuICAgICAgICBsaWZ0Um9vbU9iamVjdCA9IHJvb207XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGAgIFtNYXBHZW4gTGlmdCBGJHtmbG9vck51bWJlcn1dIExpZnQgQCgke3RpbGVYfSwke3RpbGVZfSkgaXMgb24gVElMRV9ST09NX0ZMT09SIHdpdGhpbiBleGlzdGluZyByb29tICR7cm9vbS5pZH0uYFxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoIWxpZnRSb29tT2JqZWN0KSB7XG4gICAgLy8gVGhpcyBibG9jayB3aWxsIGV4ZWN1dGUgaWY6XG4gICAgLy8gMS4gT24gbWluRmxvb3I6IF9maW5kTGlmdFBsYWNlbWVudExvY2F0aW9uIHBpY2tlZCBhIHRpbGUgdGhhdCB3YXNuJ3QgVElMRV9ST09NX0ZMT09SIChiYWQsIHNob3VsZCBlcnJvciBlYXJsaWVyKVxuICAgIC8vIDIuIE9uIE4gPiBtaW5GbG9vcjogVGhlIGNvbnNpc3RlbnRMaWZ0Q29vcmRzIGxhbmRlZCBvbiBzb21ldGhpbmcgb3RoZXIgdGhhbiBhbiBleGlzdGluZyByb29tJ3MgZmxvb3IgKGUuZy4sIGNvcnJpZG9yLCBvciBuZXdseSBjYXJ2ZWQgd2FsbCBpZiBtYXAgc3RydWN0dXJlIGNoYW5nZWQgYSBsb3QpXG4gICAgY29uc3QgbWVzc2FnZVJlYXNvbiA9ICFsaWZ0Um9vbU9iamVjdFxuICAgICAgPyAnTm90IGluIGV4aXN0aW5nIHJvb20gcmVnaW9uJ1xuICAgICAgOiBgT3JpZ2luYWwgdGlsZSB3YXMgJHt0aWxlVmFsdWVCZWZvcmVMaWZ0fSwgbm90IFRJTEVfUk9PTV9GTE9PUi5gO1xuXG4gICAgY29uc29sZS53YXJuKFxuICAgICAgYFtNYXBHZW4gRiR7Zmxvb3JOdW1iZXJ9XSBMaWZ0IEAoJHt0aWxlWH0sJHt0aWxlWX0pIHdpbGwgdXNlIGNhcnZlZCBhbGNvdmUuIFJlYXNvbjogJHttZXNzYWdlUmVhc29ufWBcbiAgICApO1xuXG4gICAgaWYgKGZsb29yTnVtYmVyID09PSBtaW5GbG9vciAmJiB0aWxlVmFsdWVCZWZvcmVMaWZ0ICE9PSBUSUxFX1JPT01fRkxPT1IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBbTWFwR2VuIEYke2Zsb29yTnVtYmVyfV0gQ1JJVElDQUwgTUlTTUFUQ0ggb24gbWluRmxvb3IhIF9maW5kTGlmdFBsYWNlbWVudExvY2F0aW9uIHNlbGVjdGVkICgke3RpbGVYfSwke3RpbGVZfSkgd2hpY2ggd2FzIHR5cGUgJHt0aWxlVmFsdWVCZWZvcmVMaWZ0fSwgbm90IFRJTEVfUk9PTV9GTE9PUi4gVGhpcyBpbmRpY2F0ZXMgYSBmbGF3IGluIF9maW5kTGlmdFBsYWNlbWVudExvY2F0aW9uLmBcbiAgICAgICk7XG4gICAgICAvLyBGb3JjaW5nIGFsY292ZSBjcmVhdGlvbiwgYnV0IHRoaXMgaXMgYSBzeW1wdG9tIG9mIGEgZGVlcGVyIGlzc3VlIGZvciBtaW5GbG9vci5cbiAgICB9XG5cbiAgICBjb25zdCBhbGNvdmVTaXplID0gMztcbiAgICBjb25zdCBhbGNvdmVDb2wgPSBNYXRoLm1heCgxLCB0aWxlWCAtIE1hdGguZmxvb3IoYWxjb3ZlU2l6ZSAvIDIpKTsgLy8gRW5zdXJlIGFsY292ZSBkb2Vzbid0IHN0YXJ0IGF0IGNvbCAwXG4gICAgY29uc3QgYWxjb3ZlUm93ID0gTWF0aC5tYXgoMSwgdGlsZVkgLSBNYXRoLmZsb29yKGFsY292ZVNpemUgLyAyKSk7IC8vIEVuc3VyZSBhbGNvdmUgZG9lc24ndCBzdGFydCBhdCByb3cgMFxuICAgIC8vIEVuc3VyZSBhbGNvdmUgZG9lcyBub3QgZ28gb3V0IG9mIGJvdW5kcyBhbmQgcmVzcGVjdHMgbWFwIGJvcmRlcnNcbiAgICBjb25zdCBhbGNvdmVXaWR0aCA9IE1hdGgubWluKGFsY292ZVNpemUsIGNvbHMgLSAxIC0gYWxjb3ZlQ29sKTtcbiAgICBjb25zdCBhbGNvdmVIZWlnaHQgPSBNYXRoLm1pbihhbGNvdmVTaXplLCByb3dzIC0gMSAtIGFsY292ZVJvdyk7XG5cbiAgICBjb25zdCBuZXdMaWZ0Um9vbURhdGEgPSB7XG4gICAgICBjb2w6IGFsY292ZUNvbCxcbiAgICAgIHJvdzogYWxjb3ZlUm93LFxuICAgICAgd2lkdGg6IGFsY292ZVdpZHRoLFxuICAgICAgaGVpZ2h0OiBhbGNvdmVIZWlnaHQsXG4gICAgICB0eXBlOiAnbGlmdF9hbGNvdmUnLFxuICAgICAgaWQ6IGByb29tX2Yke2Zsb29yTnVtYmVyfV9saWZ0YWxjb3ZlXyR7dGlsZVh9XyR7dGlsZVl9YCxcbiAgICAgIGNlbnRlclRpbGVYOiB0aWxlWCxcbiAgICAgIGNlbnRlclRpbGVZOiB0aWxlWSxcbiAgICAgIGNvbm5lY3RlZDogdHJ1ZSxcbiAgICAgIHg6IGFsY292ZUNvbCxcbiAgICAgIHk6IGFsY292ZVJvdyxcbiAgICB9O1xuXG4gICAgZm9yIChsZXQgciA9IG5ld0xpZnRSb29tRGF0YS5yb3c7IHIgPCBuZXdMaWZ0Um9vbURhdGEucm93ICsgbmV3TGlmdFJvb21EYXRhLmhlaWdodDsgcisrKSB7XG4gICAgICBmb3IgKGxldCBjID0gbmV3TGlmdFJvb21EYXRhLmNvbDsgYyA8IG5ld0xpZnRSb29tRGF0YS5jb2wgKyBuZXdMaWZ0Um9vbURhdGEud2lkdGg7IGMrKykge1xuICAgICAgICBpZiAobWFwW3JdPy5bY10gIT09IFRJTEVfTElGVCkge1xuICAgICAgICAgIC8vIERvbid0IG92ZXJ3cml0ZSB0aGUgbGlmdCBpdHNlbGZcbiAgICAgICAgICBpZiAociA+IDAgJiYgciA8IHJvd3MgLSAxICYmIGMgPiAwICYmIGMgPCBjb2xzIC0gMSkgbWFwW3JdW2NdID0gVElMRV9ST09NX0ZMT09SOyAvLyBDYXJ2ZSwgYXZvaWQgbWFwIGVkZ2VzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcm9vbXNMaXN0LnB1c2gobmV3TGlmdFJvb21EYXRhKTtcbiAgICBsaWZ0Um9vbU9iamVjdCA9IG5ld0xpZnRSb29tRGF0YTtcbiAgfVxuXG4gIGlmICghbGlmdFJvb21PYmplY3QpIHtcbiAgICBjb25zdCBlcnJvck1zZyA9IGBbTWFwR2VuIExpZnQgRiR7Zmxvb3JOdW1iZXJ9XSBDUklUOiBDb3VsZCBOT1QgYXNzb2NpYXRlIGxpZnQgQCgke3RpbGVYfSwke3RpbGVZfSkgd2l0aCBhbnkgcm9vbSBvYmplY3QgZXZlbiBhZnRlciBhbGNvdmUgYXR0ZW1wdC5gO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNc2cpO1xuICAgIGxvZ01hcEdyaWRGb3JEZWJ1ZyhtYXAsIGNvbHMsIHJvd3MpO1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gIH1cblxuICBjb25zdCBsaWZ0V29ybGRQb3MgPSB7XG4gICAgeDogKHRpbGVYICsgMC41KSAqIHRpbGVTaXplLFxuICAgIHk6ICh0aWxlWSArIDAuNSkgKiB0aWxlU2l6ZSxcbiAgICB0aWxlWCxcbiAgICB0aWxlWSxcbiAgICByb29tSWQ6IGxpZnRSb29tT2JqZWN0LmlkLFxuICB9O1xuICBjb25zb2xlLmxvZyhcbiAgICBgW01hcEdlbiBGJHtmbG9vck51bWJlcn1dIFBsYWNlZCBsaWZ0IEAoJHt0aWxlWH0sJHt0aWxlWX0pIGluIHJvb20gJHtcbiAgICAgIGxpZnRSb29tT2JqZWN0LmlkXG4gICAgfS4gV29ybGQ6KCR7bGlmdFdvcmxkUG9zLngudG9GaXhlZCgxKX0sJHtsaWZ0V29ybGRQb3MueS50b0ZpeGVkKDEpfSlgXG4gICk7XG4gIHJldHVybiB7IHBvc2l0aW9uOiBsaWZ0V29ybGRQb3MsIGNvb3JkczogbmV3bHlGb3VuZENvb3JkcyB8fCBjb29yZHNUb1VzZSB9O1xufVxuXG5mdW5jdGlvbiBfZm9yY2VDb25uZWN0aW9uVG9Qb2ludChtYXAsIHRhcmdldFgsIHRhcmdldFksIGNvbHMsIHJvd3MpIHtcbiAgY29uc29sZS5sb2coYCAgW01hcEdlbiBDb25uZWN0XSBGb3JjaW5nIGNvbm5lY3Rpb24gdG8gKCR7dGFyZ2V0WH0sJHt0YXJnZXRZfSkuLi5gKTtcbiAgY29uc3QgZGlycyA9IFtcbiAgICBbMCwgLTFdLFxuICAgIFswLCAxXSxcbiAgICBbLTEsIDBdLFxuICAgIFsxLCAwXSxcbiAgXTtcbiAgZm9yIChjb25zdCBbZHgsIGR5XSBvZiBkaXJzKSB7XG4gICAgY29uc3QgbnQgPSBtYXBbdGFyZ2V0WSArIGR5XT8uW3RhcmdldFggKyBkeF07XG4gICAgaWYgKG50ID09PSBUSUxFX0NPUlJJRE9SIHx8IG50ID09PSBUSUxFX1JPT01fRkxPT1IgfHwgbnQgPT09IFRJTEVfTElGVCkge1xuICAgICAgaWYgKG1hcFt0YXJnZXRZXVt0YXJnZXRYXSA9PT0gVElMRV9XQUxMKSBtYXBbdGFyZ2V0WV1bdGFyZ2V0WF0gPSBUSUxFX0NPUlJJRE9SO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIGNvbnN0IHEgPSBbW3RhcmdldFgsIHRhcmdldFksIDBdXSxcbiAgICB2aXNpdGVkID0gbmV3IFNldChbYCR7dGFyZ2V0WH0sJHt0YXJnZXRZfWBdKTtcbiAgY29uc3QgcGF0aGFibGUgPSBbVElMRV9XQUxMLCBUSUxFX0NPUlJJRE9SLCBUSUxFX1JPT01fRkxPT1IsIFRJTEVfTElGVF0sXG4gICAgdGFyZ2V0cyA9IFtUSUxFX0NPUlJJRE9SLCBUSUxFX1JPT01fRkxPT1JdO1xuICBsZXQgY2xvc2VzdCA9IG51bGwsXG4gICAgbWluRGlzdCA9IEluZmluaXR5O1xuICB3aGlsZSAocS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgW2NYLCBjWSwgZF0gPSBxLnNoaWZ0KCk7XG4gICAgaWYgKGQgPj0gbWluRGlzdCAmJiBjbG9zZXN0KSBjb250aW51ZTtcbiAgICBmb3IgKGNvbnN0IFtkeCwgZHldIG9mIGRpcnMpIHtcbiAgICAgIGNvbnN0IG5YID0gY1ggKyBkeCxcbiAgICAgICAgblkgPSBjWSArIGR5LFxuICAgICAgICBrZXkgPSBgJHtuWH0sJHtuWX1gO1xuICAgICAgaWYgKG5YID49IDAgJiYgblggPCBjb2xzICYmIG5ZID49IDAgJiYgblkgPCByb3dzICYmICF2aXNpdGVkLmhhcyhrZXkpKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IG1hcFtuWV0/LltuWF07XG4gICAgICAgIHZpc2l0ZWQuYWRkKGtleSk7XG4gICAgICAgIGlmICh0YXJnZXRzLmluY2x1ZGVzKHZhbCkpIHtcbiAgICAgICAgICBpZiAoZCArIDEgPD0gbWluRGlzdCkge1xuICAgICAgICAgICAgbWluRGlzdCA9IGQgKyAxO1xuICAgICAgICAgICAgY2xvc2VzdCA9IHsgeDogblgsIHk6IG5ZLCBkaXN0OiBtaW5EaXN0IH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHBhdGhhYmxlLmluY2x1ZGVzKHZhbCkpIHtcbiAgICAgICAgICBpZiAoZCArIDEgPCBtaW5EaXN0IHx8ICFjbG9zZXN0KSBxLnB1c2goW25YLCBuWSwgZCArIDFdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoY2xvc2VzdCkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYCAgW01hcEdlbiBDb25uZWN0XSBDbG9zZXN0IHdhbGthYmxlIEAoJHtjbG9zZXN0Lnh9LCR7Y2xvc2VzdC55fSksIGRpc3QgJHtjbG9zZXN0LmRpc3R9LiBDYXJ2aW5nLi4uYFxuICAgICk7XG4gICAgX2NhcnZlSG9yaXpvbnRhbENvcnJpZG9yKG1hcCwgdGFyZ2V0WSwgdGFyZ2V0WCwgY2xvc2VzdC54LCBjb2xzLCByb3dzKTtcbiAgICBfY2FydmVWZXJ0aWNhbENvcnJpZG9yKG1hcCwgY2xvc2VzdC54LCB0YXJnZXRZLCBjbG9zZXN0LnksIGNvbHMsIHJvd3MpO1xuICAgIGlmIChtYXBbdGFyZ2V0WV1bdGFyZ2V0WF0gPT09IFRJTEVfQ09SUklET1IgfHwgbWFwW3RhcmdldFldW3RhcmdldFhdID09PSBUSUxFX1JPT01fRkxPT1IpXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgICBbTWFwR2VuIENvbm5lY3RdIENhcnZlZCwgYnV0IHRhcmdldCAoJHt0YXJnZXRYfSwke3RhcmdldFl9KSBub3QgQ29ycmlkb3IvRmxvb3IgKGlzICR7bWFwW3RhcmdldFldW3RhcmdldFhdfSkuYFxuICAgICk7XG4gICAgcmV0dXJuIG1hcFt0YXJnZXRZXVt0YXJnZXRYXSAhPT0gVElMRV9XQUxMO1xuICB9XG4gIGNvbnNvbGUuZXJyb3IoYCAgW01hcEdlbiBDb25uZWN0XSBGQUlMRUQgdG8gZmluZCBBTlkgd2Fsa2FibGUgZnJvbSAoJHt0YXJnZXRYfSwke3RhcmdldFl9KS5gKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBfaXNMaWZ0UmVhY2hhYmxlKG1hcCwgbGlmdFBvcywgY29scywgcm93cykge1xuICBpZiAoIWxpZnRQb3MpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgeyB0aWxlWCwgdGlsZVkgfSA9IGxpZnRQb3M7XG4gIGlmIChcbiAgICB0aWxlWSA8IDAgfHxcbiAgICB0aWxlWSA+PSByb3dzIHx8XG4gICAgdGlsZVggPCAwIHx8XG4gICAgdGlsZVggPj0gY29scyB8fFxuICAgIG1hcFt0aWxlWV0/Llt0aWxlWF0gIT09IFRJTEVfTElGVFxuICApIHtcbiAgICBjb25zb2xlLmVycm9yKGBbTWFwVmFsIFJlYWNoXSBJbnZhbGlkIGxpZnQgQCgke3RpbGVYfSwke3RpbGVZfSkgb3Igbm90IExJRlQuYCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHdhbGthYmxlID0gW1RJTEVfQ09SUklET1IsIFRJTEVfUk9PTV9GTE9PUiwgVElMRV9MSUZUXSxcbiAgICB0YXJnZXRzID0gW1RJTEVfQ09SUklET1IsIFRJTEVfUk9PTV9GTE9PUl07XG4gIGNvbnN0IHsgcmVhY2hhYmxlIH0gPSBwZXJmb3JtQkZTKFxuICAgIG1hcCxcbiAgICB0aWxlWCxcbiAgICB0aWxlWSxcbiAgICBjb2xzLFxuICAgIHJvd3MsXG4gICAgd2Fsa2FibGUsXG4gICAgdGFyZ2V0cyxcbiAgICAodHgsIHR5KSA9PiBtYXBbdHldPy5bdHhdXG4gICk7XG4gIGlmICghcmVhY2hhYmxlKSBjb25zb2xlLmVycm9yKGBbTWFwVmFsIFJlYWNoXSBGQUlMRUQuIExpZnQgQCgke3RpbGVYfSwke3RpbGVZfSkgaXNvbGF0ZWQuYCk7XG4gIHJldHVybiByZWFjaGFibGU7XG59XG5cbmZ1bmN0aW9uIF9lbnN1cmVNYXBCb3JkZXJzKG1hcCwgY29scywgcm93cykge1xuICBmb3IgKGxldCBjID0gMDsgYyA8IGNvbHM7IGMrKykge1xuICAgIG1hcFswXVtjXSA9IFRJTEVfV0FMTDtcbiAgICBtYXBbcm93cyAtIDFdW2NdID0gVElMRV9XQUxMO1xuICB9XG4gIGZvciAobGV0IHIgPSAwOyByIDwgcm93czsgcisrKSB7XG4gICAgbWFwW3JdWzBdID0gVElMRV9XQUxMO1xuICAgIG1hcFtyXVtjb2xzIC0gMV0gPSBUSUxFX1dBTEw7XG4gIH1cbn1cblxuZnVuY3Rpb24gbG9nTWFwR3JpZEZvckRlYnVnKG1hcCwgY29scywgcm93cykge1xuICBpZiAoIW1hcCkge1xuICAgIGNvbnNvbGUubG9nKCdbREVCVUcgTUFQXSBudWxsIG1hcC4nKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc29sZS5sb2coJy0tLSBERUJVRyBNQVAgR1JJRCAtLS0nKTtcbiAgbGV0IGggPSAnICAgJztcbiAgZm9yIChsZXQgYyA9IDA7IGMgPCBjb2xzOyBjKyspIGggKz0gYyAlIDEwID09PSAwID8gTWF0aC5mbG9vcihjIC8gMTApIDogJyAnO1xuICBjb25zb2xlLmxvZyhoKTtcbiAgaCA9ICcgICAnO1xuICBmb3IgKGxldCBjID0gMDsgYyA8IGNvbHM7IGMrKykgaCArPSBjICUgMTA7XG4gIGNvbnNvbGUubG9nKGgpO1xuICBmb3IgKGxldCB5ID0gMDsgeSA8IHJvd3M7IHkrKykge1xuICAgIGlmICghbWFwW3ldKSB7XG4gICAgICBjb25zb2xlLmxvZyhgJHt5LnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJyAnKX0gW1JPVyBVTkRFRl1gKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCByUyA9IG1hcFt5XVxuICAgICAgLm1hcCgodCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFRJTEVfV0FMTDpcbiAgICAgICAgICAgIHJldHVybiAnIyc7XG4gICAgICAgICAgY2FzZSBUSUxFX0NPUlJJRE9SOlxuICAgICAgICAgICAgcmV0dXJuICcuJztcbiAgICAgICAgICBjYXNlIFRJTEVfUk9PTV9GTE9PUjpcbiAgICAgICAgICAgIHJldHVybiAnICc7XG4gICAgICAgICAgY2FzZSBUSUxFX0xJRlQ6XG4gICAgICAgICAgICByZXR1cm4gJ0wnO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJz8nO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmpvaW4oJycpO1xuICAgIGNvbnNvbGUubG9nKGAke3kudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnICcpfSAke3JTfWApO1xuICB9XG4gIGNvbnNvbGUubG9nKCctLS0gRU5EIERFQlVHIE1BUCBHUklEIC0tLScpO1xufVxuIiwiLy8gc3JjL21hcC9Qcm9jZWR1cmFsTWFwLmpzXG5pbXBvcnQgeyBCb29rIH0gZnJvbSAnLi9Cb29rLmpzJztcbmltcG9ydCB7IE1hcFJlbmRlcmVyIH0gZnJvbSAnLi9NYXBSZW5kZXJlci5qcyc7XG5pbXBvcnQgeyByYW5kb21JbnQgfSBmcm9tICcuLi91dGlscy9tYXAuanMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVMZXZlbERhdGEgfSBmcm9tICcuL01hcEdlbi5qcyc7IC8vIFXFvHl3YW15IHBvcHJhd25laiBuYXp3eVxuaW1wb3J0IHtcbiAgVElMRV9XQUxMLFxuICBUSUxFX0NPUlJJRE9SLFxuICBUSUxFX1JPT01fRkxPT1IsXG4gIFRJTEVfTElGVCxcbiAgTElGVF9JTlRFUkFDVElPTl9SQURJVVNfTVVMVElQTElFUixcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuY29uc3QgREVCVUdfUFJPQ19NQVBfRkxPT1IgPSBudWxsOyAvLyBabWllxYQgbmEgbnVtZXIgcGnEmXRyYSBkbyBkZWJ1Z293YW5pYVxuXG5leHBvcnQgY2xhc3MgUHJvY2VkdXJhbE1hcCB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQsIGZsb29yTnVtYmVyLCBtaW5GbG9vciwgbWF4Rmxvb3IpIHtcbiAgICB0aGlzLnRpbGVTaXplID0gMzI7XG4gICAgdGhpcy5jb2xzID0gNDA7XG4gICAgdGhpcy5yb3dzID0gMzA7XG4gICAgdGhpcy53aWR0aCA9IHRoaXMuY29scyAqIHRoaXMudGlsZVNpemU7XG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLnJvd3MgKiB0aGlzLnRpbGVTaXplO1xuICAgIHRoaXMub2Zmc2V0WCA9IDA7XG4gICAgdGhpcy5vZmZzZXRZID0gMDtcblxuICAgIHRoaXMuZmxvb3JOdW1iZXIgPSBmbG9vck51bWJlcjtcbiAgICB0aGlzLm1pbkZsb29yID0gbWluRmxvb3I7XG4gICAgdGhpcy5tYXhGbG9vciA9IG1heEZsb29yO1xuXG4gICAgdGhpcy5tYXAgPSBudWxsO1xuICAgIHRoaXMucm9vbXMgPSBbXTtcbiAgICB0aGlzLmJvb2tzID0gW107XG4gICAgdGhpcy5saWZ0UG9zaXRpb24gPSBudWxsO1xuXG4gICAgdGhpcy5yZW5kZXJlciA9IG5ldyBNYXBSZW5kZXJlcih0aGlzLnRpbGVTaXplKTtcbiAgICB0aGlzLnJlbmRlcmVyLmZsb29yTnVtYmVyID0gdGhpcy5mbG9vck51bWJlcjsgLy8gRGxhIE1hcFJlbmRlcmVyLCBqZcWbbGkgcG90cnplYnVqZVxuXG4gICAgY29uc3QgZ2VuZXJhdGlvblBhcmFtcyA9IHtcbiAgICAgIC8vIFRlIHBhcmFtZXRyeSBzxIUgdcW8eXdhbmUgcHJ6ZXogZ2VuZXJhdGVMZXZlbERhdGFcbiAgICAgIG1pblJvb21TaXplOiA1LFxuICAgICAgbWF4Um9vbVNpemU6IDEwLFxuICAgICAgY29ycmlkb3JUaGlja25lc3M6IDEsXG4gICAgICBudW1Sb29tczogMTIsXG4gICAgICBtYXhSb29tQXR0ZW1wdHM6IDIwMCxcbiAgICAgIGJvb2tzUGVyTWFwOiA1LFxuICAgICAgcm9vbVR5cGVXZWlnaHRzOiB7XG4gICAgICAgIGNsYXNzcm9vbTogNTAsXG4gICAgICAgIG9mZmljZTogMjUsXG4gICAgICAgIGxpYnJhcnk6IDE1LFxuICAgICAgICBsYWI6IDEwLFxuICAgICAgICBzdG9yYWdlOiA1LFxuICAgICAgICB1dGlsaXR5OiAxMCxcbiAgICAgICAgZ3ltOiAwLCAvLyBneW0gamVzdCBtb2R5Zmlrb3dhbmUgdyBtYXBHZW5lcmF0b3JcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBnZW5lcmF0aW9uQ29uZmlnID0ge1xuICAgICAgICBjb2xzOiB0aGlzLmNvbHMsXG4gICAgICAgIHJvd3M6IHRoaXMucm93cyxcbiAgICAgICAgZmxvb3JOdW1iZXI6IHRoaXMuZmxvb3JOdW1iZXIsXG4gICAgICAgIG1pbkZsb29yOiB0aGlzLm1pbkZsb29yLFxuICAgICAgICBtYXhGbG9vcjogdGhpcy5tYXhGbG9vcixcbiAgICAgICAgdGlsZVNpemU6IHRoaXMudGlsZVNpemUsXG4gICAgICAgIGdlbmVyYXRpb25QYXJhbXM6IGdlbmVyYXRpb25QYXJhbXMsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IG1hcCwgcm9vbXMsIGxpZnRQb3NpdGlvbiB9ID0gZ2VuZXJhdGVMZXZlbERhdGEoZ2VuZXJhdGlvbkNvbmZpZyk7XG5cbiAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgICAgdGhpcy5yb29tcyA9IHJvb21zOyAvLyByb29tcyB0byBsaXN0YSBvYmlla3TDs3cgeiBtYXBHZW5lcmF0b3JcbiAgICAgIHRoaXMubGlmdFBvc2l0aW9uID0gbGlmdFBvc2l0aW9uO1xuXG4gICAgICB0aGlzLnJlbmRlcmVyLnJlc2V0Q29sb3JDYWNoZSgpO1xuICAgICAgdGhpcy5wbGFjZUJvb2tzUmVsaWFibHkoZ2VuZXJhdGlvblBhcmFtcy5ib29rc1Blck1hcCk7XG5cbiAgICAgIGlmICh0aGlzLmZsb29yTnVtYmVyID09PSBERUJVR19QUk9DX01BUF9GTE9PUikge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgW1Byb2NNYXAgRiR7dGhpcy5mbG9vck51bWJlcn1dIEluaXQgY29tcGxldGUuIExpZnRAKCR7bGlmdFBvc2l0aW9uPy50aWxlWH0sJHtsaWZ0UG9zaXRpb24/LnRpbGVZfSkuIFJvb21zOiAke3RoaXMucm9vbXMubGVuZ3RofWBcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5sb2dNYXBHcmlkKCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtQcm9jTWFwIEYke3RoaXMuZmxvb3JOdW1iZXJ9XSBDUklUIEVSUiBkdXJpbmcgbWFwIGdlbi9zZXR1cDpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwbGFjZUJvb2tzUmVsaWFibHkoYm9va3NQZXJNYXApIHtcbiAgICB0aGlzLmJvb2tzID0gW107XG4gICAgY29uc3QgcG90ZW50aWFsTG9jcyA9IFtdO1xuICAgIGNvbnN0IHBsYWNlZENvb3JkcyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGxldCByID0gMDsgciA8IHRoaXMucm93czsgcisrKSB7XG4gICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuY29sczsgYysrKSB7XG4gICAgICAgIGNvbnN0IHRpbGVWYWwgPSB0aGlzLm1hcFtyXT8uW2NdO1xuICAgICAgICBjb25zdCBpc0xpZnQgPVxuICAgICAgICAgIHRoaXMubGlmdFBvc2l0aW9uICYmIHIgPT09IHRoaXMubGlmdFBvc2l0aW9uLnRpbGVZICYmIGMgPT09IHRoaXMubGlmdFBvc2l0aW9uLnRpbGVYO1xuICAgICAgICBpZiAoKHRpbGVWYWwgPT09IFRJTEVfQ09SUklET1IgfHwgdGlsZVZhbCA9PT0gVElMRV9ST09NX0ZMT09SKSAmJiAhaXNMaWZ0KSB7XG4gICAgICAgICAgcG90ZW50aWFsTG9jcy5wdXNoKHsgciwgYyB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgcGxhY2VkID0gMDtcbiAgICB3aGlsZSAocGxhY2VkIDwgYm9va3NQZXJNYXAgJiYgcG90ZW50aWFsTG9jcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByYW5kSWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG90ZW50aWFsTG9jcy5sZW5ndGgpO1xuICAgICAgY29uc3QgeyByLCBjIH0gPSBwb3RlbnRpYWxMb2NzLnNwbGljZShyYW5kSWR4LCAxKVswXTtcbiAgICAgIGNvbnN0IGtleSA9IGAke2N9LCR7cn1gO1xuICAgICAgaWYgKFxuICAgICAgICAodGhpcy5tYXBbcl0/LltjXSA9PT0gVElMRV9DT1JSSURPUiB8fCB0aGlzLm1hcFtyXT8uW2NdID09PSBUSUxFX1JPT01fRkxPT1IpICYmXG4gICAgICAgICFwbGFjZWRDb29yZHMuaGFzKGtleSlcbiAgICAgICkge1xuICAgICAgICBjb25zdCBib29rSWQgPSBgYm9va19mJHt0aGlzLmZsb29yTnVtYmVyfV8ke3BsYWNlZCArIDF9YDtcbiAgICAgICAgdGhpcy5ib29rcy5wdXNoKFxuICAgICAgICAgIG5ldyBCb29rKChjICsgMC41KSAqIHRoaXMudGlsZVNpemUsIChyICsgMC41KSAqIHRoaXMudGlsZVNpemUsIGJvb2tJZCwgdGhpcy50aWxlU2l6ZSlcbiAgICAgICAgKTtcbiAgICAgICAgcGxhY2VkQ29vcmRzLmFkZChrZXkpO1xuICAgICAgICBwbGFjZWQrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpc1dhbGthYmxlKHdvcmxkWCwgd29ybGRZKSB7XG4gICAgaWYgKCF0aGlzLm1hcCkgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHRpbGVYID0gTWF0aC5mbG9vcih3b3JsZFggLyB0aGlzLnRpbGVTaXplKSxcbiAgICAgIHRpbGVZID0gTWF0aC5mbG9vcih3b3JsZFkgLyB0aGlzLnRpbGVTaXplKTtcbiAgICBpZiAodGlsZVggPCAwIHx8IHRpbGVYID49IHRoaXMuY29scyB8fCB0aWxlWSA8IDAgfHwgdGlsZVkgPj0gdGhpcy5yb3dzKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgdGlsZVZhbCA9IHRoaXMubWFwW3RpbGVZXT8uW3RpbGVYXTtcbiAgICByZXR1cm4gdGlsZVZhbCA9PT0gVElMRV9DT1JSSURPUiB8fCB0aWxlVmFsID09PSBUSUxFX1JPT01fRkxPT1IgfHwgdGlsZVZhbCA9PT0gVElMRV9MSUZUO1xuICB9XG5cbiAgZmluZFJhbmRvbUluaXRpYWxTcGF3blBvc2l0aW9uKGNoYXJhY3RlckZvckNvbGxpc2lvbkNoZWNrID0gbnVsbCkge1xuICAgIC8vIERvZGFqZW15IG9wY2pvbmFsbnkgYXJndW1lbnRcbiAgICBpZiAoIXRoaXMubWFwKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHN1aXRhYmxlVGlsZXMgPSBbXTtcbiAgICBjb25zdCB0ZW1wQ2hhckNvbGxpc2lvbkJveCA9IGNoYXJhY3RlckZvckNvbGxpc2lvbkNoZWNrXG4gICAgICA/IHtcbiAgICAgICAgICB3aWR0aDogY2hhcmFjdGVyRm9yQ29sbGlzaW9uQ2hlY2suY29sbGlzaW9uQm94V2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBjaGFyYWN0ZXJGb3JDb2xsaXNpb25DaGVjay5jb2xsaXNpb25Cb3hIZWlnaHQsXG4gICAgICAgIH1cbiAgICAgIDogeyB3aWR0aDogdGhpcy50aWxlU2l6ZSAqIDAuNiwgaGVpZ2h0OiB0aGlzLnRpbGVTaXplICogMC44IH07IC8vIERvbXnFm2xueSBwcnp5Ymxpxbxvbnkgcm96bWlhclxuXG4gICAgY29uc3QgY2hlY2tDYW5kaWRhdGUgPSAoYywgcikgPT4ge1xuICAgICAgY29uc3Qgd29ybGRYID0gKGMgKyAwLjUpICogdGhpcy50aWxlU2l6ZTtcbiAgICAgIGNvbnN0IHdvcmxkWSA9IChyICsgMC41KSAqIHRoaXMudGlsZVNpemU7XG5cbiAgICAgIC8vIFNwcmF3ZHplbmllIDE6IEN6eSBzYW0ga2FmZWxlayBqZXN0IG9kcG93aWVkbmkgKG5pZSB3aW5kYSwgcG9kxYJvZ2Eva29yeXRhcnopXG4gICAgICBjb25zdCB0aWxlVmFsdWUgPSB0aGlzLm1hcFtyXT8uW2NdO1xuICAgICAgY29uc3QgaXNMaWZ0ID1cbiAgICAgICAgdGhpcy5saWZ0UG9zaXRpb24gJiYgciA9PT0gdGhpcy5saWZ0UG9zaXRpb24udGlsZVkgJiYgYyA9PT0gdGhpcy5saWZ0UG9zaXRpb24udGlsZVg7XG4gICAgICBpZiAoISgodGlsZVZhbHVlID09PSBUSUxFX0NPUlJJRE9SIHx8IHRpbGVWYWx1ZSA9PT0gVElMRV9ST09NX0ZMT09SKSAmJiAhaXNMaWZ0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIFNwcmF3ZHplbmllIDI6IEN6eSBqZXN0IHd5c3RhcmN6YWrEhWNvIG90d2FydHkgKG9wY2pvbmFsbmUsIGFsZSBkb2JyZSBkbGEgamFrb8WbY2kpXG4gICAgICAvLyBpZiAoIXRoaXMuaXNUaWxlT3BlbkVub3VnaChjLCByLCAyLCB0cnVlKSkgeyAvLyBXeW1hZ2FqbXkgcHJ6eW5ham1uaWVqIDIgb3R3YXJ0eWNoIHN0cm9uLCB1bmlrYWogd8SFc2tpY2hcbiAgICAgIC8vICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAvLyB9XG5cbiAgICAgIC8vIFNwcmF3ZHplbmllIDM6IFN5bXVsYWNqYSBrb2xpemppIHBvc3RhY2kgbmEgdHltIGthZmVsa3VcbiAgICAgIC8vIE11c2lteSBzcHJhd2R6acSHLCBjenkgcHJvc3Rva8SFdCBrb2xpenlqbnkgcG9zdGFjaSBuaWUgemFjaG9kemkgbmEgxZtjaWFueVxuICAgICAgY29uc3QgaGFsZkNoYXJXaWR0aCA9IHRlbXBDaGFyQ29sbGlzaW9uQm94LndpZHRoIC8gMjtcbiAgICAgIGNvbnN0IGhhbGZDaGFySGVpZ2h0ID0gdGVtcENoYXJDb2xsaXNpb25Cb3guaGVpZ2h0IC8gMjsgLy8gTHViIHXFvHlqIGNvbGxpc2lvbkJveEZlZXRPZmZzZXRSYXRpbyBkbGEgWVxuXG4gICAgICBjb25zdCBwb2ludHNUb1ZlcmlmeSA9IFtcbiAgICAgICAgeyB4OiB3b3JsZFggLSBoYWxmQ2hhcldpZHRoLCB5OiB3b3JsZFkgLSBoYWxmQ2hhckhlaWdodCB9LCAvLyBMZXd5LWfDs3JueSBuYXJvxbxuaWsgcG9zdGFjaVxuICAgICAgICB7IHg6IHdvcmxkWCArIGhhbGZDaGFyV2lkdGgsIHk6IHdvcmxkWSAtIGhhbGZDaGFySGVpZ2h0IH0sIC8vIFByYXd5LWfDs3JueVxuICAgICAgICB7IHg6IHdvcmxkWCAtIGhhbGZDaGFyV2lkdGgsIHk6IHdvcmxkWSArIGhhbGZDaGFySGVpZ2h0IH0sIC8vIExld3ktZG9sbnlcbiAgICAgICAgeyB4OiB3b3JsZFggKyBoYWxmQ2hhcldpZHRoLCB5OiB3b3JsZFkgKyBoYWxmQ2hhckhlaWdodCB9LCAvLyBQcmF3eS1kb2xueVxuICAgICAgICAvLyBNb8W8bmEgZG9kYcSHIMWbcm9ka2kga3Jhd8SZZHppLCBqZcWbbGkga29uaWVjem5lXG4gICAgICAgIHsgeDogd29ybGRYLCB5OiB3b3JsZFkgLSBoYWxmQ2hhckhlaWdodCB9LCAvLyDFmnJvZGVrLWfDs3JhXG4gICAgICAgIHsgeDogd29ybGRYLCB5OiB3b3JsZFkgKyBoYWxmQ2hhckhlaWdodCB9LCAvLyDFmnJvZGVrLWTDs8WCXG4gICAgICAgIHsgeDogd29ybGRYIC0gaGFsZkNoYXJXaWR0aCwgeTogd29ybGRZIH0sIC8vIMWacm9kZWstbGV3b1xuICAgICAgICB7IHg6IHdvcmxkWCArIGhhbGZDaGFyV2lkdGgsIHk6IHdvcmxkWSB9LCAvLyDFmnJvZGVrLXByYXdvXG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IHBvaW50IG9mIHBvaW50c1RvVmVyaWZ5KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1dhbGthYmxlKHBvaW50LngsIHBvaW50LnkpKSB7XG4gICAgICAgICAgLy8gaXNXYWxrYWJsZSBzcHJhd2R6YSB0eXAga2FmZWxrYVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGAgIFtTcGF3biBDYW5kaWRhdGUgRmFpbF0gVGlsZSAoJHtjfSwke3J9KSAtPiBwb2ludCAke0pTT04uc3RyaW5naWZ5KHBvaW50KX0gaXMgbm90IHdhbGthYmxlLmApO1xuICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gSmVkZW4geiBwdW5rdMOzdyBrb2xpenlqbnljaCBqZXN0IG5hIG5pZXByemVjaG9kbmltIGthZmVsa3VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7IC8vIFdzenlzdGtpZSBwdW5rdHkgc8SFIG5hIFwid2Fsa2FibGVcIlxuICAgIH07XG5cbiAgICAvLyBQcmVmZXJ1aiBtaWVqc2NhIGRhbGVqIG9kIGtyYXfEmWR6aVxuICAgIGZvciAobGV0IHIgPSAxOyByIDwgdGhpcy5yb3dzIC0gMTsgcisrKSB7XG4gICAgICBmb3IgKGxldCBjID0gMTsgYyA8IHRoaXMuY29scyAtIDE7IGMrKykge1xuICAgICAgICBpZiAoY2hlY2tDYW5kaWRhdGUoYywgcikpIHtcbiAgICAgICAgICBpZiAodGhpcy5pc1RpbGVPcGVuRW5vdWdoKGMsIHIsIDIsIHRydWUpKVxuICAgICAgICAgICAgLy8gRG9kYXRrb3dlIGtyeXRlcml1bSBqYWtvxZtjaVxuICAgICAgICAgICAgc3VpdGFibGVUaWxlcy5wdXNoKHsgciwgYyB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEplxZtsaSBuaWUgbWEgaWRlYWxueWNoLCBzenVrYWogd3N6xJlkemllXG4gICAgaWYgKHN1aXRhYmxlVGlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBbUHJvY01hcCBGJHt0aGlzLmZsb29yTnVtYmVyfSBTcGF3bl0gTm8gaWRlYWwgb3BlbiBzcG90cyBmb3VuZCwgY2hlY2tpbmcgYWxsIHZhbGlkIHRpbGVzLmBcbiAgICAgICk7XG4gICAgICBmb3IgKGxldCByID0gMDsgciA8IHRoaXMucm93czsgcisrKSB7XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5jb2xzOyBjKyspIHtcbiAgICAgICAgICBpZiAoY2hlY2tDYW5kaWRhdGUoYywgcikpIHtcbiAgICAgICAgICAgIHN1aXRhYmxlVGlsZXMucHVzaCh7IHIsIGMgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1aXRhYmxlVGlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgW1Byb2NNYXAgRiR7dGhpcy5mbG9vck51bWJlcn0gU3Bhd25dIENSSVRJQ0FMOiBObyBzdWl0YWJsZSBzcGF3biB0aWxlcyBmb3VuZCBhZnRlciB0aG9yb3VnaCBjaGVjayFgXG4gICAgICApO1xuICAgICAgLy8gT3N0YXRlY3pueSBmYWxsYmFjazogxZtyb2RlayBwaWVyd3N6ZWogem5hbGV6aW9uZWogcG9kxYJvZ2kgcG9rb2p1IChiYXJkem8gYXdhcnlqbmUpXG4gICAgICBmb3IgKGNvbnN0IHJvb20gb2YgdGhpcy5yb29tcykge1xuICAgICAgICBmb3IgKGxldCByT2Zmc2V0ID0gMDsgck9mZnNldCA8IHJvb20uaGVpZ2h0OyByT2Zmc2V0KyspIHtcbiAgICAgICAgICBmb3IgKGxldCBjT2Zmc2V0ID0gMDsgY09mZnNldCA8IHJvb20ud2lkdGg7IGNPZmZzZXQrKykge1xuICAgICAgICAgICAgY29uc3QgclRlc3QgPSByb29tLnkgKyByT2Zmc2V0O1xuICAgICAgICAgICAgY29uc3QgY1Rlc3QgPSByb29tLnggKyBjT2Zmc2V0O1xuICAgICAgICAgICAgaWYgKHRoaXMubWFwW3JUZXN0XT8uW2NUZXN0XSA9PT0gVElMRV9ST09NX0ZMT09SKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICBgW1Byb2NNYXAgRiR7dGhpcy5mbG9vck51bWJlcn0gU3Bhd25dIEVNRVJHRU5DWSBGQUxMQkFDSyB0byBmaXJzdCByb29tIGZsb29yIHRpbGU6ICgke2NUZXN0fSwke3JUZXN0fSlgXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHJldHVybiB7IHg6IChjVGVzdCArIDAuNSkgKiB0aGlzLnRpbGVTaXplLCB5OiAoclRlc3QgKyAwLjUpICogdGhpcy50aWxlU2l6ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgLy8gTmFwcmF3ZMSZIG5pZSBtYSBnZHppZVxuICAgIH1cblxuICAgIGNvbnN0IHsgciwgYyB9ID0gc3VpdGFibGVUaWxlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzdWl0YWJsZVRpbGVzLmxlbmd0aCldO1xuICAgIGNvbnNvbGUubG9nKGBbUHJvY01hcCBGJHt0aGlzLmZsb29yTnVtYmVyfSBTcGF3bl0gU2VsZWN0ZWQgc3Bhd24gdGlsZTogKCR7Y30sJHtyfSlgKTtcbiAgICByZXR1cm4geyB4OiAoYyArIDAuNSkgKiB0aGlzLnRpbGVTaXplLCB5OiAociArIDAuNSkgKiB0aGlzLnRpbGVTaXplIH07XG4gIH1cblxuICBpc1RpbGVPcGVuRW5vdWdoKHRpbGVYLCB0aWxlWSwgbWluT3BlblNpZGVzID0gMiwgYXZvaWROYXJyb3cgPSBmYWxzZSkge1xuICAgIGlmICghdGhpcy5tYXApIHJldHVybiBmYWxzZTtcbiAgICBsZXQgb3BlbkNvdW50ID0gMDtcbiAgICBjb25zdCBkaXJzID0gW1xuICAgICAgWzAsIC0xXSxcbiAgICAgIFswLCAxXSxcbiAgICAgIFstMSwgMF0sXG4gICAgICBbMSwgMF0sXG4gICAgXTsgLy8gTixTLFcsRVxuICAgIGNvbnN0IGlzT3BlbiA9IFtmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBuWCA9IHRpbGVYICsgZGlyc1tpXVswXSxcbiAgICAgICAgblkgPSB0aWxlWSArIGRpcnNbaV1bMV07XG4gICAgICBpZiAoblggPj0gMCAmJiBuWCA8IHRoaXMuY29scyAmJiBuWSA+PSAwICYmIG5ZIDwgdGhpcy5yb3dzKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMubWFwW25ZXT8uW25YXTtcbiAgICAgICAgaWYgKHZhbCA9PT0gVElMRV9DT1JSSURPUiB8fCB2YWwgPT09IFRJTEVfUk9PTV9GTE9PUiB8fCB2YWwgPT09IFRJTEVfTElGVCkge1xuICAgICAgICAgIG9wZW5Db3VudCsrO1xuICAgICAgICAgIGlzT3BlbltpXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wZW5Db3VudCA8IG1pbk9wZW5TaWRlcykgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhdm9pZE5hcnJvdyAmJiBvcGVuQ291bnQgPT09IDIpIHtcbiAgICAgIC8vIENoZWNrIGZvciAxLXRpbGUgd2lkZSBwYXNzYWdlXG4gICAgICBpZiAoXG4gICAgICAgIChpc09wZW5bMF0gJiYgaXNPcGVuWzFdICYmICFpc09wZW5bMl0gJiYgIWlzT3BlblszXSkgfHxcbiAgICAgICAgKGlzT3BlblsyXSAmJiBpc09wZW5bM10gJiYgIWlzT3BlblswXSAmJiAhaXNPcGVuWzFdKVxuICAgICAgKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZmluZE5lYXJlc3RXYWxrYWJsZVRpbGUod29ybGRYLCB3b3JsZFksIG1heFIgPSA4LCBleGNsdWRlTGlmdCA9IGZhbHNlLCBhdm9pZE5hcnJvdyA9IGZhbHNlKSB7XG4gICAgaWYgKCF0aGlzLm1hcCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgdFggPSBNYXRoLmZsb29yKHdvcmxkWCAvIHRoaXMudGlsZVNpemUpLFxuICAgICAgdFkgPSBNYXRoLmZsb29yKHdvcmxkWSAvIHRoaXMudGlsZVNpemUpO1xuICAgIGNvbnN0IHRhcmdldHMgPSBbVElMRV9DT1JSSURPUiwgVElMRV9ST09NX0ZMT09SXTtcblxuICAgIGlmICh0WCA+PSAwICYmIHRYIDwgdGhpcy5jb2xzICYmIHRZID49IDAgJiYgdFkgPCB0aGlzLnJvd3MpIHtcbiAgICAgIGNvbnN0IHZhbCA9IHRoaXMubWFwW3RZXVt0WF07XG4gICAgICBpZiAoXG4gICAgICAgIHRhcmdldHMuaW5jbHVkZXModmFsKSAmJlxuICAgICAgICAoIWV4Y2x1ZGVMaWZ0IHx8IHZhbCAhPT0gVElMRV9MSUZUKSAmJlxuICAgICAgICB0aGlzLmlzVGlsZU9wZW5Fbm91Z2godFgsIHRZLCAyLCBhdm9pZE5hcnJvdylcbiAgICAgICkge1xuICAgICAgICByZXR1cm4geyB4OiAodFggKyAwLjUpICogdGhpcy50aWxlU2l6ZSwgeTogKHRZICsgMC41KSAqIHRoaXMudGlsZVNpemUgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgciA9IDE7IHIgPD0gbWF4UjsgcisrKSB7XG4gICAgICBmb3IgKGxldCBkeSA9IC1yOyBkeSA8PSByOyBkeSsrKSB7XG4gICAgICAgIGZvciAobGV0IGR4ID0gLXI7IGR4IDw9IHI7IGR4KyspIHtcbiAgICAgICAgICBpZiAoTWF0aC5hYnMoZHgpIDwgciAmJiBNYXRoLmFicyhkeSkgPCByKSBjb250aW51ZTsgLy8gT25seSBvdXRlciByaW5nXG4gICAgICAgICAgY29uc3QgY1ggPSB0WCArIGR4LFxuICAgICAgICAgICAgY1kgPSB0WSArIGR5O1xuICAgICAgICAgIGlmIChjWCA8IDAgfHwgY1ggPj0gdGhpcy5jb2xzIHx8IGNZIDwgMCB8fCBjWSA+PSB0aGlzLnJvd3MpIGNvbnRpbnVlO1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMubWFwW2NZXT8uW2NYXTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0YXJnZXRzLmluY2x1ZGVzKHZhbCkgJiZcbiAgICAgICAgICAgICghZXhjbHVkZUxpZnQgfHwgdmFsICE9PSBUSUxFX0xJRlQpICYmXG4gICAgICAgICAgICB0aGlzLmlzVGlsZU9wZW5Fbm91Z2goY1gsIGNZLCAyLCBhdm9pZE5hcnJvdylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB7IHg6IChjWCArIDAuNSkgKiB0aGlzLnRpbGVTaXplLCB5OiAoY1kgKyAwLjUpICogdGhpcy50aWxlU2l6ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBCRlMgZmFsbGJhY2sgKHNpbXBsaWZpZWQsIGNvdWxkIGJlIG1vcmUgcm9idXN0KVxuICAgIGNvbnN0IHEgPSBbW3RYLCB0WV1dLFxuICAgICAgdmlzaXRlZCA9IG5ldyBTZXQoW2Ake3RYfSwke3RZfWBdKTtcbiAgICBjb25zdCBwYXRoYWJsZUJGUyA9IFtUSUxFX0NPUlJJRE9SLCBUSUxFX1JPT01fRkxPT1IsIFRJTEVfTElGVF07XG4gICAgd2hpbGUgKHEubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgW2NYLCBjWV0gPSBxLnNoaWZ0KCk7XG4gICAgICBmb3IgKGNvbnN0IFtkeCwgZHldIG9mIFtcbiAgICAgICAgWzAsIC0xXSxcbiAgICAgICAgWzAsIDFdLFxuICAgICAgICBbLTEsIDBdLFxuICAgICAgICBbMSwgMF0sXG4gICAgICBdKSB7XG4gICAgICAgIGNvbnN0IG5YID0gY1ggKyBkeCxcbiAgICAgICAgICBuWSA9IGNZICsgZHksXG4gICAgICAgICAga2V5ID0gYCR7blh9LCR7bll9YDtcbiAgICAgICAgaWYgKG5YID49IDAgJiYgblggPCB0aGlzLmNvbHMgJiYgblkgPj0gMCAmJiBuWSA8IHRoaXMucm93cyAmJiAhdmlzaXRlZC5oYXMoa2V5KSkge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMubWFwW25ZXT8uW25YXTtcbiAgICAgICAgICB2aXNpdGVkLmFkZChrZXkpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRhcmdldHMuaW5jbHVkZXModmFsKSAmJlxuICAgICAgICAgICAgKCFleGNsdWRlTGlmdCB8fCB2YWwgIT09IFRJTEVfTElGVCkgJiZcbiAgICAgICAgICAgIHRoaXMuaXNUaWxlT3BlbkVub3VnaChuWCwgblksIDIsIGF2b2lkTmFycm93KVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIHsgeDogKG5YICsgMC41KSAqIHRoaXMudGlsZVNpemUsIHk6IChuWSArIDAuNSkgKiB0aGlzLnRpbGVTaXplIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwYXRoYWJsZUJGUy5pbmNsdWRlcyh2YWwpKSBxLnB1c2goW25YLCBuWV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZ2V0Um9vbUNvbnRhaW5pbmdUaWxlKHRpbGVYLCB0aWxlWSkge1xuICAgIGlmICghdGhpcy5yb29tcyB8fCB0aGlzLnJvb21zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgZm9yIChjb25zdCByb29tIG9mIHRoaXMucm9vbXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGlsZVggPj0gcm9vbS5jb2wgJiZcbiAgICAgICAgdGlsZVggPCByb29tLmNvbCArIHJvb20ud2lkdGggJiZcbiAgICAgICAgdGlsZVkgPj0gcm9vbS5yb3cgJiZcbiAgICAgICAgdGlsZVkgPCByb29tLnJvdyArIHJvb20uaGVpZ2h0XG4gICAgICApIHtcbiAgICAgICAgY29uc3QgYWN0dWFsVGlsZSA9IHRoaXMubWFwW3RpbGVZXT8uW3RpbGVYXTtcbiAgICAgICAgLy8gTGlmdCBpcyBjb25zaWRlcmVkIFwiaW5cIiBhIHJvb20gaWYgaXQncyBhdCB0aGUgcm9vbSdzIGNvb3JkcyBhbmQgaXMgVElMRV9MSUZULFxuICAgICAgICAvLyBvciBpZiB0aGUgdGlsZSBpcyBUSUxFX1JPT01fRkxPT1IgKGZvciBjaGVja2luZyBnZW5lcmFsIHJvb20gdGlsZXMpLlxuICAgICAgICAvLyBGb3IgbGlmdCBzcGVjaWZpY2FsbHksIHdlIGNoZWNrIGlmIGl0J3Mgd2l0aGluIHRoZSByb29tJ3MgcmVjdGFuZ3VsYXIgYm91bmRzLlxuICAgICAgICAvLyBUaGUgYG1hcEdlbmVyYXRvcmAgZW5zdXJlcyB0aGUgYGxpZnRfYWxjb3ZlYCB0eXBlIHJvb20gaXMgY3JlYXRlZCBjb3JyZWN0bHkuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBhY3R1YWxUaWxlID09PSBUSUxFX0xJRlQgfHxcbiAgICAgICAgICAoYWN0dWFsVGlsZSA9PT0gVElMRV9ST09NX0ZMT09SICYmIHJvb20udHlwZSAhPT0gJ2xpZnRfYWxjb3ZlJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHJvb207XG4gICAgICAgIH0gZWxzZSBpZiAocm9vbS50eXBlID09PSAnbGlmdF9hbGNvdmUnICYmIGFjdHVhbFRpbGUgPT09IFRJTEVfTElGVCkge1xuICAgICAgICAgIC8vIEV4cGxpY2l0bHkgZm9yIGxpZnRfYWxjb3ZlXG4gICAgICAgICAgcmV0dXJuIHJvb207XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gY29uc29sZS53YXJuKGBbUHJvY01hcCBGJHt0aGlzLmZsb29yTnVtYmVyfV0gVGlsZSAoJHt0aWxlWH0sJHt0aWxlWX0pIG5vdCBpbiBhbnkgcm9vbSBvciBub3Qgcm9vbSBmbG9vci9saWZ0LmApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZ2V0Um9vbUNlbnRlcihyb29tKSB7XG4gICAgaWYgKCFyb29tKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgeDogKHJvb20uY29sICsgcm9vbS53aWR0aCAvIDIpICogdGhpcy50aWxlU2l6ZSxcbiAgICAgIHk6IChyb29tLnJvdyArIHJvb20uaGVpZ2h0IC8gMikgKiB0aGlzLnRpbGVTaXplLFxuICAgIH07XG4gIH1cblxuICBnZXRTcGF3blBvaW50SW5Sb29tT2ZMaWZ0KGxpZnRUaWxlWCwgbGlmdFRpbGVZLCBwcmVmZXJyZWREaXN0YW5jZSA9IDEpIHtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBzaW1wbGlmaWVkIG9yIHVzZWQgYXMgYSBtb3JlIGZpbmUtZ3JhaW5lZCBzcGF3biBhZGp1c3RlclxuICAgIC8vIGlmIGdldFJvb21DZW50ZXIgKyBlbnN1cmVDaGFyYWN0ZXJJc09uV2Fsa2FibGVUaWxlIGlzbid0IHBlcmZlY3QuXG4gICAgLy8gRm9yIG5vdywgZmluZCBhIHRpbGUgYWRqYWNlbnQgdG8gdGhlIGxpZnQgdGhhdCBpcyByb29tIGZsb29yLlxuICAgIGNvbnN0IHJvb20gPSB0aGlzLmdldFJvb21Db250YWluaW5nVGlsZShsaWZ0VGlsZVgsIGxpZnRUaWxlWSk7XG4gICAgaWYgKCFyb29tKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IGRpcnMgPSBbXG4gICAgICB7IGR4OiAwLCBkeTogLTEgfSxcbiAgICAgIHsgZHg6IDAsIGR5OiAxIH0sXG4gICAgICB7IGR4OiAtMSwgZHk6IDAgfSxcbiAgICAgIHsgZHg6IDEsIGR5OiAwIH0sXG4gICAgXTsgLy8gTiwgUywgVywgRVxuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbXTtcblxuICAgIGZvciAoY29uc3QgZGlyIG9mIGRpcnMpIHtcbiAgICAgIGNvbnN0IGNoZWNrWCA9IGxpZnRUaWxlWCArIGRpci5keDtcbiAgICAgIGNvbnN0IGNoZWNrWSA9IGxpZnRUaWxlWSArIGRpci5keTtcbiAgICAgIC8vIENoZWNrIGlmIGFkamFjZW50IHRpbGUgaXMgd2l0aGluIHRoZSBzYW1lIHJvb20gYW5kIGlzIGEgZmxvb3IgdGlsZVxuICAgICAgaWYgKFxuICAgICAgICBjaGVja1ggPj0gcm9vbS5jb2wgJiZcbiAgICAgICAgY2hlY2tYIDwgcm9vbS5jb2wgKyByb29tLndpZHRoICYmXG4gICAgICAgIGNoZWNrWSA+PSByb29tLnJvdyAmJlxuICAgICAgICBjaGVja1kgPCByb29tLnJvdyArIHJvb20uaGVpZ2h0ICYmXG4gICAgICAgIHRoaXMubWFwW2NoZWNrWV0/LltjaGVja1hdID09PSBUSUxFX1JPT01fRkxPT1JcbiAgICAgICkge1xuICAgICAgICBpZiAodGhpcy5pc1RpbGVPcGVuRW5vdWdoKGNoZWNrWCwgY2hlY2tZLCAyLCB0cnVlKSkge1xuICAgICAgICAgIC8vIFByZWZlciBvcGVuIHNwb3RzXG4gICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHsgeDogKGNoZWNrWCArIDAuNSkgKiB0aGlzLnRpbGVTaXplLCB5OiAoY2hlY2tZICsgMC41KSAqIHRoaXMudGlsZVNpemUgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoID4gMCkgcmV0dXJuIGNhbmRpZGF0ZXNbMF07IC8vIFJldHVybiBmaXJzdCBnb29kIGNhbmRpZGF0ZVxuXG4gICAgLy8gRmFsbGJhY2s6IGlmIG5vIFwiZ29vZFwiIGFkamFjZW50IHNwb3QsIGp1c3QgdXNlIHJvb20gY2VudGVyICh3aGljaCBtaWdodCBiZSB0aGUgbGlmdCBpdHNlbGYpXG4gICAgLy8gR2FtZXBsYXlNYW5hZ2VyJ3MgZW5zdXJlQ2hhcmFjdGVySXNPbldhbGthYmxlVGlsZSB3aWxsIGhhbmRsZSBudWRnaW5nIG9mZiB0aGUgbGlmdC5cbiAgICAvLyBjb25zb2xlLndhcm4oYFtQcm9jTWFwIEYke3RoaXMuZmxvb3JOdW1iZXJ9XSBnZXRTcGF3blBvaW50SW5Sb29tT2ZMaWZ0OiBObyBpZGVhbCBhZGphY2VudCBzcG90LCB1c2luZyByb29tIGNlbnRlciBmb3IgbGlmdCBpbiAke3Jvb20uaWR9YCk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Um9vbUNlbnRlcihyb29tKTtcbiAgfVxuXG4gIGZpbmROZWFyYnlVbmFuc3dlcmVkQm9vayh3b3JsZFgsIHdvcmxkWSwgcmFkaXVzID0gdGhpcy50aWxlU2l6ZSAqIDAuOCkge1xuICAgIGlmICghdGhpcy5ib29rcyB8fCB0aGlzLmJvb2tzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgbGV0IGNsb3Nlc3RCb29rID0gbnVsbCxcbiAgICAgIG1pbkRpc3RTcSA9IHJhZGl1cyAqIHJhZGl1cztcbiAgICBmb3IgKGNvbnN0IGJvb2sgb2YgdGhpcy5ib29rcykge1xuICAgICAgaWYgKCFib29rLmlzQ29sbGVjdGVkKSB7XG4gICAgICAgIGNvbnN0IGRYID0gYm9vay54IC0gd29ybGRYLFxuICAgICAgICAgIGRZID0gYm9vay55IC0gd29ybGRZLFxuICAgICAgICAgIGRpc3RTcSA9IGRYICogZFggKyBkWSAqIGRZO1xuICAgICAgICBpZiAoZGlzdFNxIDwgbWluRGlzdFNxKSB7XG4gICAgICAgICAgbWluRGlzdFNxID0gZGlzdFNxO1xuICAgICAgICAgIGNsb3Nlc3RCb29rID0gYm9vaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvc2VzdEJvb2s7XG4gIH1cblxuICBtYXJrQm9va0FzQ29sbGVjdGVkKGJvb2tUb0NvbGxlY3QpIHtcbiAgICBpZiAoIWJvb2tUb0NvbGxlY3QgfHwgIXRoaXMuYm9va3MpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5maW5kKChiKSA9PiBiLmlkID09PSBib29rVG9Db2xsZWN0LmlkKTtcbiAgICBpZiAoYm9vayAmJiAhYm9vay5pc0NvbGxlY3RlZCkge1xuICAgICAgYm9vay5pc0NvbGxlY3RlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZmluZE5lYXJieUxpZnQod29ybGRYLCB3b3JsZFksIHJhZGl1cyA9IHRoaXMudGlsZVNpemUgKiBMSUZUX0lOVEVSQUNUSU9OX1JBRElVU19NVUxUSVBMSUVSKSB7XG4gICAgaWYgKCF0aGlzLmxpZnRQb3NpdGlvbikgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgZFggPSB3b3JsZFggLSB0aGlzLmxpZnRQb3NpdGlvbi54LFxuICAgICAgZFkgPSB3b3JsZFkgLSB0aGlzLmxpZnRQb3NpdGlvbi55O1xuICAgIHJldHVybiBkWCAqIGRYICsgZFkgKiBkWSA8IHJhZGl1cyAqIHJhZGl1cyA/IHRoaXMubGlmdFBvc2l0aW9uIDogbnVsbDtcbiAgfVxuXG4gIGdldExpZnRQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0UG9zaXRpb247XG4gIH1cblxuICBkcmF3KGN0eCwgYm9va0ltYWdlID0gbnVsbCkge1xuICAgIGlmICghdGhpcy5tYXAgfHwgIXRoaXMucmVuZGVyZXIpIHJldHVybjtcbiAgICB0aGlzLnJlbmRlcmVyLmRyYXcoXG4gICAgICBjdHgsXG4gICAgICB7XG4gICAgICAgIG1hcDogdGhpcy5tYXAsXG4gICAgICAgIHJvb21zOiB0aGlzLnJvb21zLFxuICAgICAgICBib29rczogdGhpcy5ib29rcyxcbiAgICAgICAgbGlmdFBvc2l0aW9uOiB0aGlzLmxpZnRQb3NpdGlvbixcbiAgICAgICAgb2Zmc2V0WDogdGhpcy5vZmZzZXRYLFxuICAgICAgICBvZmZzZXRZOiB0aGlzLm9mZnNldFksXG4gICAgICAgIGNvbHM6IHRoaXMuY29scyxcbiAgICAgICAgcm93czogdGhpcy5yb3dzLFxuICAgICAgICB0aWxlU2l6ZTogdGhpcy50aWxlU2l6ZSxcbiAgICAgIH0sXG4gICAgICBib29rSW1hZ2VcbiAgICApO1xuICB9XG5cbiAgbG9nTWFwR3JpZCgpIHtcbiAgICBpZiAoIXRoaXMubWFwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1Byb2NNYXAgRiR7dGhpcy5mbG9vck51bWJlcn1dIE1hcCBncmlkIE4vQS5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coYC0tLSBNYXAgR3JpZCBGJHt0aGlzLmZsb29yTnVtYmVyfSAoJHt0aGlzLmNvbHN9eCR7dGhpcy5yb3dzfSkgLS0tYCk7XG4gICAgbGV0IGggPSAnICAgJztcbiAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuY29sczsgYysrKSBoICs9IGMgJSAxMCA9PT0gMCA/IE1hdGguZmxvb3IoYyAvIDEwKSA6ICcgJztcbiAgICBjb25zb2xlLmxvZyhoKTtcbiAgICBoID0gJyAgICc7XG4gICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmNvbHM7IGMrKykgaCArPSBjICUgMTA7XG4gICAgY29uc29sZS5sb2coaCk7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnJvd3M7IHkrKykge1xuICAgICAgY29uc3Qgck4gPSB5LnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJyAnKTtcbiAgICAgIGNvbnN0IHJTID0gdGhpcy5tYXBbeV1cbiAgICAgICAgLm1hcCgodCkgPT4ge1xuICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgY2FzZSBUSUxFX1dBTEw6XG4gICAgICAgICAgICAgIHJldHVybiAnIyc7XG4gICAgICAgICAgICBjYXNlIFRJTEVfQ09SUklET1I6XG4gICAgICAgICAgICAgIHJldHVybiAnLic7XG4gICAgICAgICAgICBjYXNlIFRJTEVfUk9PTV9GTE9PUjpcbiAgICAgICAgICAgICAgcmV0dXJuICcgJztcbiAgICAgICAgICAgIGNhc2UgVElMRV9MSUZUOlxuICAgICAgICAgICAgICByZXR1cm4gJ0wnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgcmV0dXJuICc/JztcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKCcnKTtcbiAgICAgIGNvbnNvbGUubG9nKGAke3JOfSAke3JTfWApO1xuICAgIH1cbiAgICBpZiAodGhpcy5saWZ0UG9zaXRpb24pXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYExpZnQgdGlsZSBtYXBbJHt0aGlzLmxpZnRQb3NpdGlvbi50aWxlWX1dWyR7dGhpcy5saWZ0UG9zaXRpb24udGlsZVh9XTogJHtcbiAgICAgICAgICB0aGlzLm1hcFt0aGlzLmxpZnRQb3NpdGlvbi50aWxlWV0/Llt0aGlzLmxpZnRQb3NpdGlvbi50aWxlWF1cbiAgICAgICAgfS4gUmVwb3J0ZWQgQCgke3RoaXMubGlmdFBvc2l0aW9uLnRpbGVYfSwke3RoaXMubGlmdFBvc2l0aW9uLnRpbGVZfSlgXG4gICAgICApO1xuICAgIGVsc2UgY29uc29sZS5sb2coJ0xpZnQgTi9BLicpO1xuICAgIGNvbnNvbGUubG9nKGAtLS0gRW5kIE1hcCBHcmlkIEYke3RoaXMuZmxvb3JOdW1iZXJ9IC0tLWApO1xuICB9XG59XG4iLCIvLyBzcmMvY29yZS9MZXZlbC5qc1xuaW1wb3J0IHsgUHJvY2VkdXJhbE1hcCB9IGZyb20gJy4uL21hcC9Qcm9jZWR1cmFsTWFwLmpzJztcbi8vIFJlbW92ZWQgVFJBTlNJVElPTl9aT05FX1JBRElVU19NVUxUSVBMSUVSIGltcG9ydFxuXG4vKipcbiAqINCa0LvQsNGB0YEgTGV2ZWwg0YPQv9GA0LDQstC70Y/QtdGCINGC0LXQutGD0YnQuNC8INGN0YLQsNC20L7QvCDQuCDQt9Cw0LPRgNGD0LfQutC+0Lkg0LrQsNGA0YIuXG4gKiDQm9C+0LPQuNC60LAg0LfQvtC9INC/0LXRgNC10YXQvtC00LAgKHRyYW5zaXRpb24gem9uZXMpINGD0LTQsNC70LXQvdCwLCDRgi7Qui4g0LvQuNGE0YIg0YDQsNCx0L7RgtCw0LXRgiDQuNC90LDRh9C1LlxuICovXG5leHBvcnQgY2xhc3MgTGV2ZWwge1xuICAvKipcbiAgICog0KHQvtC30LTQsNC10YIg0Y3QutC30LXQvNC/0LvRj9GAIExldmVsLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbkZsb29yPTFdIC0g0J3QvtC80LXRgCDRgdCw0LzQvtCz0L4g0L3QuNC20L3QtdCz0L4g0Y3RgtCw0LbQsC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFttYXhGbG9vcj0zXSAtINCd0L7QvNC10YAg0YHQsNC80L7Qs9C+INCy0LXRgNGF0L3QtdCz0L4g0Y3RgtCw0LbQsC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG1pbkZsb29yID0gMSwgbWF4Rmxvb3IgPSAzKSB7XG4gICAgaWYgKG1pbkZsb29yID49IG1heEZsb29yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBMZXZlbCBjb25zdHJ1Y3RvcjogbWluRmxvb3IgKCR7bWluRmxvb3J9KSBtdXN0IGJlIGxlc3MgdGhhbiBtYXhGbG9vciAoJHttYXhGbG9vcn0pLiBVc2luZyBkZWZhdWx0cyAxIGFuZCAzLmBcbiAgICAgICk7XG4gICAgICB0aGlzLm1pbkZsb29yID0gMTtcbiAgICAgIHRoaXMubWF4Rmxvb3IgPSAzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1pbkZsb29yID0gbWluRmxvb3I7XG4gICAgICB0aGlzLm1heEZsb29yID0gbWF4Rmxvb3I7XG4gICAgfVxuXG4gICAgdGhpcy5jdXJyZW50Rmxvb3IgPSB0aGlzLm1pbkZsb29yO1xuICAgIHRoaXMuY3VycmVudE1hcCA9IG51bGw7IC8vIEluc3RhbmNlIG9mIFByb2NlZHVyYWxNYXBcbiAgICAvLyB0aGlzLnRyYW5zaXRpb25ab25lcyA9IFtdOyAvLyBSRU1PVkVEIC0gTm8gbG9uZ2VyIG5lZWRlZCBmb3IgbGlmdHNcbiAgICB0aGlzLnRpbGVTaXplID0gMzI7IC8vIERlZmF1bHQsIHdpbGwgYmUgdXBkYXRlZCBmcm9tIG1hcFxuICB9XG5cbiAgLyoqXG4gICAqINCQ0YHQuNC90YXRgNC+0L3QvdC+INC30LDQs9GA0YPQttCw0LXRgiAo0LPQtdC90LXRgNC40YDRg9C10YIpINC60LDRgNGC0YMg0LTQu9GPINGD0LrQsNC30LDQvdC90L7Qs9C+INGN0YLQsNC20LAuXG4gICAqIEFzc3VtZXMgUHJvY2VkdXJhbE1hcCBjb25zdHJ1Y3RvciBoYW5kbGVzIGdlbmVyYXRpb24sIGxpZnQgcGxhY2VtZW50LFxuICAgKiBhbmQgdGhyb3dzIG9uIGNyaXRpY2FsIGZhaWx1cmUgKGUuZy4sIHVucmVhY2hhYmxlIGxpZnQpLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZmxvb3JOdW1iZXIgLSDQndC+0LzQtdGAINGN0YLQsNC20LAg0LTQu9GPINC30LDQs9GA0YPQt9C60LguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjYW52YXNXaWR0aCAtINCo0LjRgNC40L3QsCDQutCw0L3QstCw0YHQsC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNhbnZhc0hlaWdodCAtINCS0YvRgdC+0YLQsCDQutCw0L3QstCw0YHQsC5cbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59INCf0YDQvtC80LjRgSwg0LrQvtGC0L7RgNGL0Lkg0YDQsNC30YDQtdGI0LDQtdGC0YHRjyDQv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0Y3RgtCw0LbQsC5cbiAgICogQHRocm93cyB7RXJyb3J9IElmIFByb2NlZHVyYWxNYXAgZ2VuZXJhdGlvbiBvciB2YWxpZGF0aW9uIGZhaWxzLlxuICAgKi9cbiAgYXN5bmMgbG9hZEZsb29yKGZsb29yTnVtYmVyLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KSB7XG4gICAgaWYgKGZsb29yTnVtYmVyIDwgdGhpcy5taW5GbG9vciB8fCBmbG9vck51bWJlciA+IHRoaXMubWF4Rmxvb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEF0dGVtcHRlZCB0byBsb2FkIGludmFsaWQgZmxvb3I6ICR7Zmxvb3JOdW1iZXJ9LiBBbGxvd2VkIHJhbmdlOiBbJHt0aGlzLm1pbkZsb29yfS0ke3RoaXMubWF4Rmxvb3J9XWA7XG4gICAgICBjb25zb2xlLmVycm9yKGBbTGV2ZWxdICR7ZXJyb3JNc2d9YCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbTGV2ZWxdIExvYWRpbmcgZmxvb3IgJHtmbG9vck51bWJlcn0uLi5gKTtcbiAgICB0aGlzLmN1cnJlbnRGbG9vciA9IGZsb29yTnVtYmVyO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFByb2NlZHVyYWxNYXAgY29uc3RydWN0b3Igbm93IGhhbmRsZXMgZ2VuZXJhdGlvbiBBTkQgdmFsaWRhdGlvbiAobGlrZSBsaWZ0IHJlYWNoYWJpbGl0eSkuXG4gICAgICAvLyBJdCB3aWxsIHRocm93IGFuIGVycm9yIGlmIGdlbmVyYXRpb24gZmFpbHMgY3JpdGljYWxseS5cbiAgICAgIHRoaXMuY3VycmVudE1hcCA9IG5ldyBQcm9jZWR1cmFsTWFwKFxuICAgICAgICBjYW52YXNXaWR0aCxcbiAgICAgICAgY2FudmFzSGVpZ2h0LFxuICAgICAgICB0aGlzLmN1cnJlbnRGbG9vcixcbiAgICAgICAgdGhpcy5taW5GbG9vcixcbiAgICAgICAgdGhpcy5tYXhGbG9vclxuICAgICAgKTtcblxuICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbiBhZnRlciBjcmVhdGlvbiAoZW5zdXJlIG1hcCBvYmplY3QgbG9va3MgcmVhc29uYWJsZSlcbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMuY3VycmVudE1hcC50aWxlU2l6ZSB8fFxuICAgICAgICAhdGhpcy5jdXJyZW50TWFwLm1hcCB8fFxuICAgICAgICAhdGhpcy5jdXJyZW50TWFwLmJvb2tzIHx8IC8vIGJvb2tzIHNob3VsZCBleGlzdCAoZXZlbiBpZiBlbXB0eSlcbiAgICAgICAgIXRoaXMuY3VycmVudE1hcC5nZXRMaWZ0UG9zaXRpb24oKSAvLyBMaWZ0IHBvc2l0aW9uIE1VU1QgZXhpc3QgYWZ0ZXIgc3VjY2Vzc2Z1bCBnZW5lcmF0aW9uXG4gICAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdbTGV2ZWxdIFByb2NlZHVyYWxNYXAgaW5zdGFuY2UgaXMgbWlzc2luZyBlc3NlbnRpYWwgcHJvcGVydGllcyBhZnRlciBjcmVhdGlvbiAodGlsZVNpemUsIG1hcCwgYm9va3MsIG9yIGxpZnRQb3NpdGlvbikuJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRpbGVTaXplID0gdGhpcy5jdXJyZW50TWFwLnRpbGVTaXplO1xuICAgICAgY29uc3QgbGlmdFBvcyA9IHRoaXMuY3VycmVudE1hcC5nZXRMaWZ0UG9zaXRpb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgICBbTGV2ZWxdIE1hcCBnZW5lcmF0ZWQgZm9yIGZsb29yICR7dGhpcy5jdXJyZW50Rmxvb3J9LiBUaWxlU2l6ZTogJHt0aGlzLnRpbGVTaXplfS4gTGlmdCBhdCB0aWxlKCR7bGlmdFBvcy50aWxlWH0sICR7bGlmdFBvcy50aWxlWX0pLmBcbiAgICAgICk7XG5cbiAgICAgIC8vIFJFTU9WRUQ6IGNyZWF0ZVRyYW5zaXRpb25ab25lcygpIGNhbGwgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cblxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGBbTGV2ZWxdIEZsb29yICR7Zmxvb3JOdW1iZXJ9IGxvYWRlZCBzdWNjZXNzZnVsbHkuIE1hcCBzaXplOiAke3RoaXMuY3VycmVudE1hcC5jb2xzfXgke3RoaXMuY3VycmVudE1hcC5yb3dzfS4gJHt0aGlzLmN1cnJlbnRNYXAuYm9va3MubGVuZ3RofSBib29rcyBwbGFjZWQuYFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFtMZXZlbF0gQ1JJVElDQUwgRkFJTFVSRSBsb2FkaW5nIGZsb29yICR7Zmxvb3JOdW1iZXJ9OiBGYWlsZWQgdG8gY3JlYXRlIG9yIHZhbGlkYXRlIFByb2NlZHVyYWxNYXA6YCxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgICB0aGlzLmN1cnJlbnRNYXAgPSBudWxsOyAvLyBFbnN1cmUgc3RhdGUgaXMgY2xlYW4gb24gZmFpbHVyZVxuICAgICAgLy8gUmV0aHJvdyB0aGUgZXJyb3IgZm9yIEdhbWUuanMgdG8gaGFuZGxlIChsaWtlbHkgc2hvdyBlcnJvciBtZXNzYWdlIGFuZCBzdG9wKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgTWFwIGdlbmVyYXRpb24vdmFsaWRhdGlvbiBmYWlsZWQgZm9yIGZsb29yICR7Zmxvb3JOdW1iZXJ9LiAke2Vycm9yLm1lc3NhZ2UgfHwgZXJyb3J9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYSByZXNvbHZlZCBwcm9taXNlIChnZW5lcmF0aW9uIGl0c2VsZiBpcyBzeW5jaHJvbm91cyB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yKVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIC8vIFJFTU9WRUQ6IGNyZWF0ZVRyYW5zaXRpb25ab25lcygpIG1ldGhvZCBpcyBvYnNvbGV0ZS5cblxuICAvLyBSRU1PVkVEOiBnZXRDdXJyZW50VHJhbnNpdGlvblpvbmUoKSBtZXRob2QgaXMgb2Jzb2xldGUuIExpZnQgaW50ZXJhY3Rpb24gY2hlY2tlZCBkaWZmZXJlbnRseS5cblxuICAvKipcbiAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0LzQsNGB0YHQuNCyINC+0LHRitC10LrRgtC+0LIg0LrQvdC40LMg0L3QsCDRgtC10LrRg9GJ0LXQuSDQutCw0YDRgtC1LlxuICAgKiBAcmV0dXJucyB7QXJyYXk8b2JqZWN0Pn0g0JzQsNGB0YHQuNCyINC+0LHRitC10LrRgtC+0LIg0LrQvdC40LMuXG4gICAqL1xuICBnZXRDdXJyZW50Qm9va3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1hcCA/IHRoaXMuY3VycmVudE1hcC5ib29rcyA6IFtdO1xuICB9XG59XG4iLCIvLyBzcmMvY29yZS9HYW1lUmVuZGVyZXIuanNcbi8vIChObyBjaGFuZ2VzIG5lZWRlZCBmcm9tIHByZXZpb3VzIHByb3ZpZGVkIHZlcnNpb24sIGFzc3VtaW5nIGl0IHdhcyBjb3JyZWN0KVxuaW1wb3J0IHsgQ2hhcmFjdGVyIH0gZnJvbSAnLi9DaGFyYWN0ZXIuanMnOyAvLyBPcHRpb25hbCBmb3IgdHlwZSBjaGVja3NcblxuZXhwb3J0IGNsYXNzIEdhbWVSZW5kZXJlciB7XG4gIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgIHRoaXMuY2FudmFzID0gbnVsbDtcbiAgICB0aGlzLmN0eCA9IG51bGw7XG4gIH1cblxuICBpbml0aWFsaXplQ2FudmFzKCkge1xuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzJyk7XG4gICAgaWYgKCF0aGlzLmNhbnZhcykgdGhyb3cgbmV3IEVycm9yKFwiW1JlbmRlcmVyXSBDYW52YXMgJ2dhbWUtY2FudmFzJyBub3QgZm91bmQhXCIpO1xuICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBpZiAoIXRoaXMuY3R4KSB0aHJvdyBuZXcgRXJyb3IoJ1tSZW5kZXJlcl0gRmFpbGVkIHRvIGdldCAyRCBjb250ZXh0LicpO1xuICAgIHRoaXMuY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMucmVzaXplQ2FudmFzKCk7XG4gICAgY29uc29sZS5sb2coJ1tSZW5kZXJlcl0gQ2FudmFzIGluaXRpYWxpemVkLicpO1xuICAgIHJldHVybiB7IGNhbnZhczogdGhpcy5jYW52YXMsIGN0eDogdGhpcy5jdHggfTtcbiAgfVxuXG4gIHJlc2l6ZUNhbnZhcygpIHtcbiAgICBpZiAoIXRoaXMuY2FudmFzKSByZXR1cm47XG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgaWYgKHRoaXMuZ2FtZS5jaGFyYWN0ZXIgJiYgdGhpcy5nYW1lLmxldmVsPy5jdXJyZW50TWFwKSB7XG4gICAgICB0aGlzLmNlbnRlckNhbWVyYU9uQ2hhcmFjdGVyKCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGBbUmVuZGVyZXJdIENhbnZhcyByZXNpemVkIHRvICR7dGhpcy5jYW52YXMud2lkdGh9eCR7dGhpcy5jYW52YXMuaGVpZ2h0fWApO1xuICB9XG5cbiAgY2VudGVyQ2FtZXJhT25DaGFyYWN0ZXIoKSB7XG4gICAgY29uc3QgeyBjaGFyYWN0ZXIsIGxldmVsLCBjYW52YXMgfSA9IHRoaXMuZ2FtZTtcbiAgICBpZiAoY2hhcmFjdGVyICYmIGxldmVsPy5jdXJyZW50TWFwICYmIGNhbnZhcykge1xuICAgICAgbGV2ZWwuY3VycmVudE1hcC5vZmZzZXRYID0gTWF0aC5mbG9vcihjYW52YXMud2lkdGggLyAyIC0gY2hhcmFjdGVyLngpO1xuICAgICAgbGV2ZWwuY3VycmVudE1hcC5vZmZzZXRZID0gTWF0aC5mbG9vcihjYW52YXMuaGVpZ2h0IC8gMiAtIGNoYXJhY3Rlci55KTtcbiAgICB9XG4gIH1cblxuICBkcmF3RnJhbWUoKSB7XG4gICAgaWYgKCF0aGlzLmN0eCB8fCAhdGhpcy5jYW52YXMpIHJldHVybjtcbiAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nYW1lLmxldmVsPy5jdXJyZW50TWFwO1xuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdhbWUuY2hhcmFjdGVyO1xuICAgIGlmIChtYXApIHtcbiAgICAgIG1hcC5kcmF3KHRoaXMuY3R4LCB0aGlzLmdhbWUuYm9va0ltYWdlKTtcbiAgICB9XG4gICAgaWYgKGNoYXIgJiYgbWFwKSB7XG4gICAgICBjaGFyLmRyYXcobWFwLm9mZnNldFgsIG1hcC5vZmZzZXRZKTtcbiAgICB9XG4gICAgLy8gdGhpcy5kcmF3RGVidWdJbmZvKCk7IC8vIE9wdGlvbmFsXG4gIH1cblxuICBkcmF3V2luU2NyZWVuKCkge1xuICAgIGlmICghdGhpcy5jdHggfHwgIXRoaXMuY2FudmFzKSByZXR1cm47XG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgMC44KSc7XG4gICAgdGhpcy5jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgdGhpcy5jdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgdGhpcy5jdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ2xpbWUnO1xuICAgIC8vIENvbnNpZGVyIHVzaW5nIGEgZm9udCBhdmFpbGFibGUgb24gbW9zdCBzeXN0ZW1zIG9yIGluY2x1ZGUgb25lIHZpYSBDU1MgQGZvbnQtZmFjZVxuICAgIHRoaXMuY3R4LmZvbnQgPSAnY2xhbXAoMzJweCwgOHZ3LCA0OHB4KSBcIlByZXNzIFN0YXJ0IDJQXCIsIGN1cnNpdmUsIEFyaWFsLCBzYW5zLXNlcmlmJztcbiAgICB0aGlzLmN0eC5maWxsVGV4dCgnWldZQ0nEmFNUV08hJywgdGhpcy5jYW52YXMud2lkdGggLyAyLCB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyIC0gODApOyAvLyBUcmFuc2xhdGVkXG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICB0aGlzLmN0eC5mb250ID0gJ2NsYW1wKDI0cHgsIDV2dywgMzJweCkgQXJpYWwsIHNhbnMtc2VyaWYnO1xuICAgIHRoaXMuY3R4LmZpbGxUZXh0KFxuICAgICAgYFplYnJhbm8gd3N6eXN0a2llICR7dGhpcy5nYW1lLnRhcmdldEJvb2tzVG9XaW59IGtzacSFxbxraSFgLCAvLyBUcmFuc2xhdGVkXG4gICAgICB0aGlzLmNhbnZhcy53aWR0aCAvIDIsXG4gICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyXG4gICAgKTtcbiAgICB0aGlzLmN0eC5mb250ID0gJ2NsYW1wKDE4cHgsIDR2dywgMjRweCkgQXJpYWwsIHNhbnMtc2VyaWYnO1xuICAgIHRoaXMuY3R4LmZpbGxUZXh0KCdVbml3ZXJzeXRldCB1cmF0b3dhbnkhJywgdGhpcy5jYW52YXMud2lkdGggLyAyLCB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyICsgNjApOyAvLyBUcmFuc2xhdGVkXG4gICAgdGhpcy5jdHguZm9udCA9ICdjbGFtcCgxNHB4LCAzdncsIDE4cHgpIEFyaWFsLCBzYW5zLXNlcmlmJztcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAnI2NjYyc7XG4gICAgdGhpcy5jdHguZmlsbFRleHQoXG4gICAgICAnKE9kxZt3aWXFvCBzdHJvbsSZLCBhYnkgemFncmHEhyBwb25vd25pZSknLCAvLyBUcmFuc2xhdGVkXG4gICAgICB0aGlzLmNhbnZhcy53aWR0aCAvIDIsXG4gICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgLSA1MFxuICAgICk7XG4gIH1cbiAgLy8gZHJhd0RlYnVnSW5mbygpIHsgLi4uIH0gLy8gT3B0aW9uYWwgZGVidWcgZHJhd2luZ1xufVxuIiwiLy8gc3JjL2NvcmUvR2FtZXBsYXlNYW5hZ2VyLmpzXG5pbXBvcnQge1xuICBHYW1lU3RhdGUsXG4gIExJRlRfQ09PTERPV05fTVMsXG4gIFRJTEVfV0FMTCxcbiAgVElMRV9DT1JSSURPUixcbiAgVElMRV9ST09NX0ZMT09SLFxuICBUSUxFX0xJRlQsXG4gIHF1ZXN0aW9ucyxcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFVJTWFuYWdlciB9IGZyb20gJy4uL1VJL1VJTWFuYWdlci5qcyc7XG5pbXBvcnQgeyBDaGFyYWN0ZXIgfSBmcm9tICcuL0NoYXJhY3Rlci5qcyc7XG5cbmNvbnN0IERFQlVHX0dNX0ZMT09SID0gbnVsbDsgLy8gVXN0YXcgbmEgbnVtZXIgcGnEmXRyYSBkbGEgYmFyZHppZWogc3pjemVnw7PFgm93eWNoIGxvZ8Ozd1xuXG5leHBvcnQgY2xhc3MgR2FtZXBsYXlNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoZ2FtZSkge1xuICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgdGhpcy5oYW5kbGVBbnN3ZXIgPSB0aGlzLmhhbmRsZUFuc3dlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlRmxvb3JTZWxlY3Rpb24gPSB0aGlzLmhhbmRsZUZsb29yU2VsZWN0aW9uLmJpbmQodGhpcyk7XG4gIH1cblxuICB1cGRhdGUodGltZXN0YW1wKSB7XG4gICAgaWYgKHRoaXMuZ2FtZS5nYW1lU3RhdGUgPT09IEdhbWVTdGF0ZS5QTEFZSU5HKSB0aGlzLnVwZGF0ZVBsYXlpbmdTdGF0ZSh0aW1lc3RhbXApO1xuICB9XG5cbiAgdXBkYXRlUGxheWluZ1N0YXRlKHRpbWVzdGFtcCkge1xuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdhbWUuY2hhcmFjdGVyO1xuICAgIGlmICghdGhpcy5nYW1lLmxldmVsPy5jdXJyZW50TWFwIHx8ICFjaGFyIHx8ICF0aGlzLmdhbWUuaW5wdXRNYW5hZ2VyKSByZXR1cm47XG4gICAgY29uc3QgeyBtb3ZlZCB9ID0gdGhpcy5oYW5kbGVNb3ZlbWVudCgpO1xuICAgIGlmIChjaGFyPy51cGRhdGVBbmltYXRpb24pIGNoYXIudXBkYXRlQW5pbWF0aW9uKHRpbWVzdGFtcCk7XG4gICAgaWYgKCFtb3ZlZCAmJiB0aGlzLmdhbWUuZ2FtZVN0YXRlID09PSBHYW1lU3RhdGUuUExBWUlORykgdGhpcy5oYW5kbGVJbnRlcmFjdGlvbnMoKTtcbiAgfVxuXG4gIGhhbmRsZU1vdmVtZW50KCkge1xuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdhbWUuY2hhcmFjdGVyLFxuICAgICAgbWFwID0gdGhpcy5nYW1lLmxldmVsLmN1cnJlbnRNYXAsXG4gICAgICBpbnB1dCA9IHRoaXMuZ2FtZS5pbnB1dE1hbmFnZXI7XG4gICAgaWYgKCFjaGFyIHx8ICFtYXAgfHwgIWlucHV0KSByZXR1cm4geyBtb3ZlZDogZmFsc2UgfTtcbiAgICBjb25zdCBkaXIgPSBpbnB1dC5nZXRJbnB1dERpcmVjdGlvbigpO1xuICAgIGxldCBkeCA9IGRpci54ICogY2hhci5zcGVlZCxcbiAgICAgIGR5ID0gZGlyLnkgKiBjaGFyLnNwZWVkO1xuICAgIGxldCBhY3R1YWxYID0gMCxcbiAgICAgIGFjdHVhbFkgPSAwLFxuICAgICAgbW92ZWQgPSBmYWxzZTtcblxuICAgIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuICAgICAgY29uc3QgY2FuTW92ZVggPSBkeCAhPT0gMCAmJiAhdGhpcy5jaGVja0NvbGxpc2lvbihjaGFyLnggKyBkeCwgY2hhci55KTtcbiAgICAgIGNvbnN0IGNhbk1vdmVZID0gZHkgIT09IDAgJiYgIXRoaXMuY2hlY2tDb2xsaXNpb24oY2hhci54LCBjaGFyLnkgKyBkeSk7XG4gICAgICBpZiAoY2FuTW92ZVgpIGFjdHVhbFggPSBkeDtcbiAgICAgIGlmIChjYW5Nb3ZlWSkgYWN0dWFsWSA9IGR5O1xuXG4gICAgICBpZiAoZHggIT09IDAgJiYgZHkgIT09IDAgJiYgdGhpcy5jaGVja0NvbGxpc2lvbihjaGFyLnggKyBkeCwgY2hhci55ICsgZHkpKSB7XG4gICAgICAgIC8vIERpYWdvbmFsIGJsb2NrZWRcbiAgICAgICAgaWYgKGNhbk1vdmVYICYmICFjYW5Nb3ZlWSkgYWN0dWFsWSA9IDA7IC8vIFNsaWRlIFhcbiAgICAgICAgZWxzZSBpZiAoY2FuTW92ZVkgJiYgIWNhbk1vdmVYKSBhY3R1YWxYID0gMDsgLy8gU2xpZGUgWVxuICAgICAgICBlbHNlIGlmICghY2FuTW92ZVggJiYgIWNhbk1vdmVZKSB7XG4gICAgICAgICAgYWN0dWFsWCA9IDA7XG4gICAgICAgICAgYWN0dWFsWSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhY3R1YWxYICE9PSAwIHx8IGFjdHVhbFkgIT09IDApIHtcbiAgICAgICAgY2hhci54ICs9IGFjdHVhbFg7XG4gICAgICAgIGNoYXIueSArPSBhY3R1YWxZO1xuICAgICAgICBtb3ZlZCA9IHRydWU7XG4gICAgICAgIGlmIChNYXRoLmFicyhhY3R1YWxYKSA+PSBNYXRoLmFicyhhY3R1YWxZKSkge1xuICAgICAgICAgIGlmIChhY3R1YWxYICE9PSAwKVxuICAgICAgICAgICAgY2hhci5jdXJyZW50RGlyZWN0aW9uID1cbiAgICAgICAgICAgICAgYWN0dWFsWCA+IDAgPyBDaGFyYWN0ZXIuRGlyZWN0aW9uLlJJR0hUIDogQ2hhcmFjdGVyLkRpcmVjdGlvbi5MRUZUO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChhY3R1YWxZICE9PSAwKVxuICAgICAgICAgICAgY2hhci5jdXJyZW50RGlyZWN0aW9uID0gYWN0dWFsWSA+IDAgPyBDaGFyYWN0ZXIuRGlyZWN0aW9uLkRPV04gOiBDaGFyYWN0ZXIuRGlyZWN0aW9uLlVQO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNoYXIuaXNNb3ZpbmcgPSBtb3ZlZDtcbiAgICByZXR1cm4geyBtb3ZlZCB9O1xuICB9XG5cbiAgY2hlY2tDb2xsaXNpb24odGFyZ2V0WCwgdGFyZ2V0WSkge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2FtZS5sZXZlbD8uY3VycmVudE1hcCxcbiAgICAgIGNoYXIgPSB0aGlzLmdhbWUuY2hhcmFjdGVyO1xuICAgIGlmICghbWFwIHx8ICFjaGFyKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCBib3ggPSBjaGFyLmdldENvbGxpc2lvbkJveCh0YXJnZXRYLCB0YXJnZXRZKTtcbiAgICBjb25zdCBwb2ludHMgPSBbXG4gICAgICB7IHg6IGJveC5sZWZ0LCB5OiBib3gudG9wIH0sXG4gICAgICB7IHg6IGJveC5yaWdodCwgeTogYm94LnRvcCB9LFxuICAgICAgeyB4OiBib3gubGVmdCwgeTogYm94LmJvdHRvbSB9LFxuICAgICAgeyB4OiBib3gucmlnaHQsIHk6IGJveC5ib3R0b20gfSxcbiAgICAgIHsgeDogdGFyZ2V0WCwgeTogYm94LnRvcCB9LFxuICAgICAgeyB4OiB0YXJnZXRYLCB5OiBib3guYm90dG9tIH0sXG4gICAgICB7IHg6IGJveC5sZWZ0LCB5OiB0YXJnZXRZICsgY2hhci5yZW5kZXJTaXplICogY2hhci5jb2xsaXNpb25Cb3hGZWV0T2Zmc2V0UmF0aW8gfSxcbiAgICAgIHsgeDogYm94LnJpZ2h0LCB5OiB0YXJnZXRZICsgY2hhci5yZW5kZXJTaXplICogY2hhci5jb2xsaXNpb25Cb3hGZWV0T2Zmc2V0UmF0aW8gfSxcbiAgICBdO1xuICAgIGZvciAoY29uc3QgcCBvZiBwb2ludHMpIGlmICghbWFwLmlzV2Fsa2FibGUocC54LCBwLnkpKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBoYW5kbGVJbnRlcmFjdGlvbnMoKSB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nYW1lLmxldmVsPy5jdXJyZW50TWFwLFxuICAgICAgY2hhciA9IHRoaXMuZ2FtZS5jaGFyYWN0ZXI7XG4gICAgaWYgKCFtYXAgfHwgIWNoYXIgfHwgdGhpcy5nYW1lLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLlBMQVlJTkcpIHJldHVybjtcbiAgICBjb25zdCBib29rID0gbWFwLmZpbmROZWFyYnlVbmFuc3dlcmVkQm9vayhjaGFyLngsIGNoYXIueSk7XG4gICAgaWYgKGJvb2spIHtcbiAgICAgIHRoaXMuaW5pdGlhdGVRdWVzdGlvbihib29rKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmdhbWUubGlmdENvb2xkb3duQWN0aXZlKSB7XG4gICAgICBjb25zdCBsaWZ0ID0gbWFwLmZpbmROZWFyYnlMaWZ0KGNoYXIueCwgY2hhci55KTtcbiAgICAgIGlmIChsaWZ0KSB0aGlzLmluaXRpYXRlRmxvb3JTZWxlY3Rpb24oKTtcbiAgICB9XG4gIH1cblxuICBpbml0aWF0ZVF1ZXN0aW9uKGJvb2spIHtcbiAgICBpZiAodGhpcy5nYW1lLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLlBMQVlJTkcpIHJldHVybjtcbiAgICB0aGlzLmdhbWUuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5BU0tJTkdfUVVFU1RJT04pO1xuICAgIGlmICh0aGlzLmdhbWUuY2hhcmFjdGVyKSB0aGlzLmdhbWUuY2hhcmFjdGVyLmlzTW92aW5nID0gZmFsc2U7XG4gICAgdGhpcy5nYW1lLmN1cnJlbnRCb29rVGFyZ2V0ID0gYm9vaztcbiAgICBpZiAodGhpcy5nYW1lLmF2YWlsYWJsZVF1ZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuZ2FtZS5hdmFpbGFibGVRdWVzdGlvbnMgPSBbLi4ucXVlc3Rpb25zXTtcbiAgICAgIGlmICh0aGlzLmdhbWUuYXZhaWxhYmxlUXVlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBVSU1hbmFnZXIuZmxhc2hNZXNzYWdlKCdCcmFrIHB5dGHFhCEnLCAnZXJyb3InKTtcbiAgICAgICAgdGhpcy5nYW1lLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuUExBWUlORyk7XG4gICAgICAgIHRoaXMuZ2FtZS5jdXJyZW50Qm9va1RhcmdldCA9IG51bGw7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcUlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuZ2FtZS5hdmFpbGFibGVRdWVzdGlvbnMubGVuZ3RoKTtcbiAgICB0aGlzLmdhbWUuY3VycmVudFF1ZXN0aW9uRGF0YSA9IHRoaXMuZ2FtZS5hdmFpbGFibGVRdWVzdGlvbnMuc3BsaWNlKHFJZHgsIDEpWzBdO1xuICAgIFVJTWFuYWdlci5zaG93UXVlc3Rpb24odGhpcy5nYW1lLmN1cnJlbnRRdWVzdGlvbkRhdGEpO1xuICB9XG5cbiAgaGFuZGxlQW5zd2VyKHNlbE9wdElkeCkge1xuICAgIGNvbnN0IHsgZ2FtZVN0YXRlLCBjdXJyZW50UXVlc3Rpb25EYXRhLCBjdXJyZW50Qm9va1RhcmdldCwgbGV2ZWwgfSA9IHRoaXMuZ2FtZTtcbiAgICBpZiAoZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuQVNLSU5HX1FVRVNUSU9OIHx8ICFjdXJyZW50UXVlc3Rpb25EYXRhIHx8ICFjdXJyZW50Qm9va1RhcmdldCkge1xuICAgICAgVUlNYW5hZ2VyLmhpZGVRdWVzdGlvbigpO1xuICAgICAgdGhpcy5nYW1lLmN1cnJlbnRCb29rVGFyZ2V0ID0gbnVsbDtcbiAgICAgIHRoaXMuZ2FtZS5jdXJyZW50UXVlc3Rpb25EYXRhID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLmdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuR0FNRV9PVkVSKSB0aGlzLmdhbWUuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5QTEFZSU5HKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29ycmVjdCA9IHNlbE9wdElkeCA9PT0gY3VycmVudFF1ZXN0aW9uRGF0YS5jb3JyZWN0QW5zd2VyO1xuICAgIGlmIChjb3JyZWN0KSB7XG4gICAgICBVSU1hbmFnZXIuZmxhc2hNZXNzYWdlKCdQcmF3aWTFgm93byEnLCAnc3VjY2VzcycsIDE1MDApO1xuICAgICAgaWYgKGxldmVsPy5jdXJyZW50TWFwPy5tYXJrQm9va0FzQ29sbGVjdGVkKGN1cnJlbnRCb29rVGFyZ2V0KSkge1xuICAgICAgICB0aGlzLmdhbWUudG90YWxCb29rc0NvbGxlY3RlZEdsb2JhbGx5Kys7XG4gICAgICAgIFVJTWFuYWdlci51cGRhdGVTY29yZSh0aGlzLmdhbWUudG90YWxCb29rc0NvbGxlY3RlZEdsb2JhbGx5LCB0aGlzLmdhbWUudGFyZ2V0Qm9va3NUb1dpbik7XG4gICAgICAgIGlmICh0aGlzLmdhbWUudG90YWxCb29rc0NvbGxlY3RlZEdsb2JhbGx5ID49IHRoaXMuZ2FtZS50YXJnZXRCb29rc1RvV2luKSB7XG4gICAgICAgICAgVUlNYW5hZ2VyLmhpZGVRdWVzdGlvbigpO1xuICAgICAgICAgIHRoaXMuZ2FtZS5fc2V0R2FtZU92ZXIodHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZSgnQsWCxIVkIHpiaWVyYW5pYSEnLCAnZXJyb3InKTtcbiAgICB9IGVsc2Uge1xuICAgICAgVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZSgnTmllcHJhd2lkxYJvd2EhJywgJ2Vycm9yJyk7XG4gICAgICB0aGlzLmdhbWUuYXZhaWxhYmxlUXVlc3Rpb25zLnB1c2goY3VycmVudFF1ZXN0aW9uRGF0YSk7XG4gICAgfVxuICAgIFVJTWFuYWdlci5oaWRlUXVlc3Rpb24oKTtcbiAgICB0aGlzLmdhbWUuY3VycmVudEJvb2tUYXJnZXQgPSBudWxsO1xuICAgIHRoaXMuZ2FtZS5jdXJyZW50UXVlc3Rpb25EYXRhID0gbnVsbDtcbiAgICBpZiAodGhpcy5nYW1lLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLkdBTUVfT1ZFUikgdGhpcy5nYW1lLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuUExBWUlORyk7XG4gIH1cblxuICBpbml0aWF0ZUZsb29yU2VsZWN0aW9uKCkge1xuICAgIGlmICh0aGlzLmdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuUExBWUlORyB8fCB0aGlzLmdhbWUubGlmdENvb2xkb3duQWN0aXZlKSByZXR1cm47XG4gICAgdGhpcy5nYW1lLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuU0VMRUNUSU5HX0ZMT09SKTtcbiAgICBpZiAodGhpcy5nYW1lLmNoYXJhY3RlcikgdGhpcy5nYW1lLmNoYXJhY3Rlci5pc01vdmluZyA9IGZhbHNlO1xuICAgIFVJTWFuYWdlci5zaG93Rmxvb3JTZWxlY3Rpb25VSShcbiAgICAgIHRoaXMuZ2FtZS5sZXZlbC5taW5GbG9vcixcbiAgICAgIHRoaXMuZ2FtZS5sZXZlbC5tYXhGbG9vcixcbiAgICAgIHRoaXMuZ2FtZS5sZXZlbC5jdXJyZW50Rmxvb3JcbiAgICApO1xuICB9XG5cbiAgaGFuZGxlRmxvb3JTZWxlY3Rpb24oc2VsRmxvb3IpIHtcbiAgICBpZiAodGhpcy5nYW1lLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLlNFTEVDVElOR19GTE9PUikge1xuICAgICAgVUlNYW5hZ2VyLmhpZGVGbG9vclNlbGVjdGlvblVJKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFVJTWFuYWdlci5oaWRlRmxvb3JTZWxlY3Rpb25VSSgpO1xuICAgIGlmIChcbiAgICAgIHNlbEZsb29yID09PSB0aGlzLmdhbWUubGV2ZWwuY3VycmVudEZsb29yIHx8XG4gICAgICBzZWxGbG9vciA8IHRoaXMuZ2FtZS5sZXZlbC5taW5GbG9vciB8fFxuICAgICAgc2VsRmxvb3IgPiB0aGlzLmdhbWUubGV2ZWwubWF4Rmxvb3JcbiAgICApIHtcbiAgICAgIHRoaXMuZ2FtZS5zZXRHYW1lU3RhdGUoR2FtZVN0YXRlLlBMQVlJTkcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZUxpZnRUcmFuc2l0aW9uKHNlbEZsb29yKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICB0aGlzLmdhbWUuX2hhbmRsZUZhdGFsRXJyb3IoYELFgsSFZCBwcnplasWbY2lhOiAke2Vyci5tZXNzYWdlfWApO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgaGFuZGxlTGlmdFRyYW5zaXRpb24odGFyZ2V0Rmxvb3IpIHtcbiAgICBjb25zdCBnYW1lID0gdGhpcy5nYW1lO1xuICAgIGNvbnN0IGlzRGVidWcgPVxuICAgICAgdGhpcy5nYW1lLmxldmVsPy5jdXJyZW50Rmxvb3IgPT09IERFQlVHX0dNX0ZMT09SIHx8IHRhcmdldEZsb29yID09PSBERUJVR19HTV9GTE9PUjtcblxuICAgIGlmIChpc0RlYnVnKVxuICAgICAgY29uc29sZS5sb2coYFtHTSBGJHt0YXJnZXRGbG9vcn0gTGlmdFRyYW5zXSBTdGFydC4gQ29vbGRvd246JHtnYW1lLmxpZnRDb29sZG93bkFjdGl2ZX1gKTtcbiAgICBpZiAoZ2FtZS5saWZ0Q29vbGRvd25BY3RpdmUgJiYgZ2FtZS5nYW1lU3RhdGUgIT09IEdhbWVTdGF0ZS5TRUxFQ1RJTkdfRkxPT1IpIHtcbiAgICAgIGlmIChpc0RlYnVnKVxuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYFtHTSBGJHt0YXJnZXRGbG9vcn0gTGlmdFRyYW5zXSBBYm9ydGVkOiBDb29sZG93biBvciBpbnZhbGlkIHN0YXRlICgke2dhbWUuZ2FtZVN0YXRlfSlgXG4gICAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChnYW1lLmdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLlNFTEVDVElOR19GTE9PUikgZ2FtZS5zZXRHYW1lU3RhdGUoR2FtZVN0YXRlLlRSQU5TSVRJT05JTkcpO1xuICAgIGVsc2UgaWYgKGdhbWUuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuVFJBTlNJVElPTklORykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgW0dNIEYke3RhcmdldEZsb29yfSBMaWZ0VHJhbnNdIFVuZXhwZWN0ZWQgc3RhdGUgJHtnYW1lLmdhbWVTdGF0ZX0uIEZvcmNpbmcgVFJBTlNJVElPTklORy5gXG4gICAgICApO1xuICAgICAgZ2FtZS5zZXRHYW1lU3RhdGUoR2FtZVN0YXRlLlRSQU5TSVRJT05JTkcpO1xuICAgIH1cblxuICAgIGlmIChnYW1lLmNoYXJhY3RlcikgZ2FtZS5jaGFyYWN0ZXIuaXNNb3ZpbmcgPSBmYWxzZTtcbiAgICBVSU1hbmFnZXIuaGlkZVF1ZXN0aW9uKCk7XG4gICAgVUlNYW5hZ2VyLmhpZGVGbG9vclNlbGVjdGlvblVJKCk7XG4gICAgZ2FtZS5saWZ0Q29vbGRvd25BY3RpdmUgPSB0cnVlO1xuICAgIFVJTWFuYWdlci5mbGFzaE1lc3NhZ2UoYFByemVqxZtjaWUgbmEgcGnEmXRybyAke3RhcmdldEZsb29yfS4uLmAsICdpbmZvJywgTElGVF9DT09MRE9XTl9NUyAtIDIwMCk7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgZ2FtZS5sZXZlbC5sb2FkRmxvb3IodGFyZ2V0Rmxvb3IsIGdhbWUuY2FudmFzLndpZHRoLCBnYW1lLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgY29uc3QgbWFwSW5zdCA9IGdhbWUubGV2ZWwuY3VycmVudE1hcDtcbiAgICAgIGlmICghbWFwSW5zdCkgdGhyb3cgbmV3IEVycm9yKGBNYXAgaW5zdGFuY2UgbnVsbCBmb3IgRiR7dGFyZ2V0Rmxvb3J9LmApO1xuICAgICAgY29uc3QgbGlmdERhdGEgPSBtYXBJbnN0LmdldExpZnRQb3NpdGlvbigpO1xuICAgICAgaWYgKCFsaWZ0RGF0YSkgdGhyb3cgbmV3IEVycm9yKGBObyBsaWZ0IHBvcyBkYXRhIG9uIEYke3RhcmdldEZsb29yfSFgKTtcbiAgICAgIGlmIChpc0RlYnVnKVxuICAgICAgICBjb25zb2xlLmxvZyhgICBbR00gRiR7dGFyZ2V0Rmxvb3J9IExpZnRUcmFuc10gTGlmdCBAKCR7bGlmdERhdGEudGlsZVh9LCR7bGlmdERhdGEudGlsZVl9KWApO1xuXG4gICAgICBsZXQgZmluYWxTcGF3biA9IG51bGw7XG4gICAgICBjb25zdCBsaWZ0Um9vbSA9IG1hcEluc3QuZ2V0Um9vbUNvbnRhaW5pbmdUaWxlKGxpZnREYXRhLnRpbGVYLCBsaWZ0RGF0YS50aWxlWSk7XG5cbiAgICAgIGlmIChsaWZ0Um9vbSkge1xuICAgICAgICBpZiAoaXNEZWJ1ZylcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGAgIFtHTSBGJHt0YXJnZXRGbG9vcn0gTGlmdFRyYW5zXSBMaWZ0IGluIHJvb20gJHtcbiAgICAgICAgICAgICAgbGlmdFJvb20uaWQgfHwgJ04vQSdcbiAgICAgICAgICAgIH0uIFNwYXduaW5nIGNlbnRlci5gXG4gICAgICAgICAgKTtcbiAgICAgICAgZmluYWxTcGF3biA9IG1hcEluc3QuZ2V0Um9vbUNlbnRlcihsaWZ0Um9vbSk7XG4gICAgICAgIGlmICghZmluYWxTcGF3bikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBgICBbR00gRiR7dGFyZ2V0Rmxvb3J9IExpZnRUcmFuc10gQ1JJVDogZ2V0Um9vbUNlbnRlciBudWxsIGZvciByb29tICR7XG4gICAgICAgICAgICAgIGxpZnRSb29tLmlkIHx8ICdOL0EnXG4gICAgICAgICAgICB9LiBGYWxsYmFjay5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICBmaW5hbFNwYXduID0gbWFwSW5zdC5nZXRTcGF3blBvaW50SW5Sb29tT2ZMaWZ0KGxpZnREYXRhLnRpbGVYLCBsaWZ0RGF0YS50aWxlWSwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgYCAgW0dNIEYke3RhcmdldEZsb29yfSBMaWZ0VHJhbnNdIENSSVQ6IExpZnQgQCgke2xpZnREYXRhLnRpbGVYfSwke2xpZnREYXRhLnRpbGVZfSkgTk9UIGluIGFueSByb29tISBGYWxsYmFjayBuZWFyIGxpZnQuYFxuICAgICAgICApO1xuICAgICAgICBmaW5hbFNwYXduID1cbiAgICAgICAgICBtYXBJbnN0LmdldFNwYXduUG9pbnRJblJvb21PZkxpZnQobGlmdERhdGEudGlsZVgsIGxpZnREYXRhLnRpbGVZLCAxKSB8fFxuICAgICAgICAgIG1hcEluc3QuZmluZE5lYXJlc3RXYWxrYWJsZVRpbGUobGlmdERhdGEueCwgbGlmdERhdGEueSwgMywgdHJ1ZSwgZmFsc2UpO1xuICAgICAgfVxuICAgICAgaWYgKCFmaW5hbFNwYXduKSBmaW5hbFNwYXduID0geyB4OiBsaWZ0RGF0YS54LCB5OiBsaWZ0RGF0YS55IH07IC8vIExhc3QgcmVzb3J0OiBsaWZ0IHRpbGUgaXRzZWxmXG4gICAgICBpZiAoIWZpbmFsU3Bhd24pIHRocm93IG5ldyBFcnJvcihgUEFOSUM6IE5vIHNwYXduIHBvcyBmb3IgRiR7dGFyZ2V0Rmxvb3J9LmApO1xuXG4gICAgICBnYW1lLmNoYXJhY3Rlci54ID0gZmluYWxTcGF3bi54O1xuICAgICAgZ2FtZS5jaGFyYWN0ZXIueSA9IGZpbmFsU3Bhd24ueTtcbiAgICAgIGlmIChpc0RlYnVnKVxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgICBbR00gRiR7dGFyZ2V0Rmxvb3J9IExpZnRUcmFuc10gSW5pdGlhbCBsYW5kIChwcmUtbnVkZ2UpOigke2dhbWUuY2hhcmFjdGVyLngudG9GaXhlZChcbiAgICAgICAgICAgIDFcbiAgICAgICAgICApfSwke2dhbWUuY2hhcmFjdGVyLnkudG9GaXhlZCgxKX0pYFxuICAgICAgICApO1xuICAgICAgZ2FtZS5jaGFyYWN0ZXIuY3VycmVudERpcmVjdGlvbiA9IENoYXJhY3Rlci5EaXJlY3Rpb24uRE9XTjtcbiAgICAgIGdhbWUuY2hhcmFjdGVyLmlzTW92aW5nID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuZW5zdXJlQ2hhcmFjdGVySXNPbldhbGthYmxlVGlsZShmYWxzZSk7IC8vIGFsbG93U3RhbmRpbmdPbkxpZnQ9ZmFsc2VcbiAgICAgIGlmIChpc0RlYnVnKVxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgICBbR00gRiR7dGFyZ2V0Rmxvb3J9IExpZnRUcmFuc10gRmluYWwgcG9zIChwb3N0LW51ZGdlKTooJHtnYW1lLmNoYXJhY3Rlci54LnRvRml4ZWQoXG4gICAgICAgICAgICAxXG4gICAgICAgICAgKX0sJHtnYW1lLmNoYXJhY3Rlci55LnRvRml4ZWQoMSl9KWBcbiAgICAgICAgKTtcblxuICAgICAgZ2FtZS5yZW5kZXJlcj8uY2VudGVyQ2FtZXJhT25DaGFyYWN0ZXIoKTtcbiAgICAgIGdhbWUuc3RhcnRMaWZ0Q29vbGRvd25UaW1lcigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbR00gRiR7dGFyZ2V0Rmxvb3J9IExpZnRUcmFuc10gRXJyb3I6YCwgZXJyb3IpO1xuICAgICAgZ2FtZS5saWZ0Q29vbGRvd25BY3RpdmUgPSBmYWxzZTtcbiAgICAgIGlmIChcbiAgICAgICAgZ2FtZS5nYW1lU3RhdGUgPT09IEdhbWVTdGF0ZS5UUkFOU0lUSU9OSU5HIHx8XG4gICAgICAgIGdhbWUuZ2FtZVN0YXRlID09PSBHYW1lU3RhdGUuU0VMRUNUSU5HX0ZMT09SXG4gICAgICApXG4gICAgICAgIGdhbWUuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5QTEFZSU5HKTtcbiAgICAgIHRoaXMuZ2FtZS5faGFuZGxlRmF0YWxFcnJvcihgVHJhbnNpdGlvbiBlcnJvciB0byBGJHt0YXJnZXRGbG9vcn06ICR7ZXJyb3IubWVzc2FnZSB8fCBlcnJvcn1gKTtcbiAgICB9XG4gIH1cblxuICBlbnN1cmVDaGFyYWN0ZXJJc09uV2Fsa2FibGVUaWxlKGFsbG93U3RhbmRpbmdPbkxpZnQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdhbWUuY2hhcmFjdGVyLFxuICAgICAgbWFwID0gdGhpcy5nYW1lLmxldmVsPy5jdXJyZW50TWFwO1xuICAgIGlmICghY2hhciB8fCAhbWFwKSByZXR1cm47XG4gICAgY29uc3QgY1RYID0gTWF0aC5mbG9vcihjaGFyLnggLyBtYXAudGlsZVNpemUpLFxuICAgICAgY1RZID0gTWF0aC5mbG9vcihjaGFyLnkgLyBtYXAudGlsZVNpemUpO1xuICAgIGNvbnN0IGNUViA9XG4gICAgICBjVFggPj0gMCAmJiBjVFggPCBtYXAuY29scyAmJiBjVFkgPj0gMCAmJiBjVFkgPCBtYXAucm93cyA/IG1hcC5tYXBbY1RZXT8uW2NUWF0gOiBUSUxFX1dBTEw7XG4gICAgY29uc3QgY2VudGVyV2Fsa2FibGUgPSBtYXAuaXNXYWxrYWJsZShjaGFyLngsIGNoYXIueSksXG4gICAgICBpc0xpZnQgPSBjVFYgPT09IFRJTEVfTElGVDtcbiAgICBjb25zdCBzYWZlU3RhbmQgPSBjZW50ZXJXYWxrYWJsZSAmJiAoIWlzTGlmdCB8fCBhbGxvd1N0YW5kaW5nT25MaWZ0KTtcbiAgICBjb25zdCBjb2xsaWRpbmdXYWxsID0gdGhpcy5jaGVja0NvbGxpc2lvbihjaGFyLngsIGNoYXIueSk7XG4gICAgY29uc3QgbmVlZHNOdWRnZSA9IGNvbGxpZGluZ1dhbGwgfHwgIXNhZmVTdGFuZDtcbiAgICBjb25zdCBpc0RlYnVnID0gdGhpcy5nYW1lLmxldmVsPy5jdXJyZW50Rmxvb3IgPT09IERFQlVHX0dNX0ZMT09SO1xuXG4gICAgaWYgKG5lZWRzTnVkZ2UpIHtcbiAgICAgIGlmIChpc0RlYnVnKVxuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYFtHTSBGJHt0aGlzLmdhbWUubGV2ZWwuY3VycmVudEZsb29yfSBBbnRpU3R1Y2tdIENoYXJAKCR7Y2hhci54LnRvRml4ZWQoXG4gICAgICAgICAgICAxXG4gICAgICAgICAgKX0sJHtjaGFyLnkudG9GaXhlZChcbiAgICAgICAgICAgIDFcbiAgICAgICAgICApfSkgdGlsZSAke2NUVn0oJHtjVFh9LCR7Y1RZfSkgbmVlZHMgbnVkZ2UuIENvbGxpZGU6JHtjb2xsaWRpbmdXYWxsfSxTYWZlU3RhbmQ6JHtzYWZlU3RhbmR9KGFsbG93TGlmdDoke2FsbG93U3RhbmRpbmdPbkxpZnR9KWBcbiAgICAgICAgKTtcbiAgICAgIGxldCBzYWZlU3BvdCA9IG1hcC5maW5kTmVhcmVzdFdhbGthYmxlVGlsZShjaGFyLngsIGNoYXIueSwgOCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICBpZiAoIXNhZmVTcG90KSB7XG4gICAgICAgIGlmIChpc0RlYnVnKVxuICAgICAgICAgIGNvbnNvbGUud2FybihgICBbQW50aVN0dWNrXSBJbml0aWFsIChhdm9pZE5hcnJvdykgZmFpbGVkLiBSZXRyeWluZyBhbGxvd05hcnJvdy4uLmApO1xuICAgICAgICBzYWZlU3BvdCA9IG1hcC5maW5kTmVhcmVzdFdhbGthYmxlVGlsZShjaGFyLngsIGNoYXIueSwgOCwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgfVxuICAgICAgaWYgKCFzYWZlU3BvdCAmJiBpc0xpZnQgJiYgIWFsbG93U3RhbmRpbmdPbkxpZnQpIHtcbiAgICAgICAgaWYgKGlzRGVidWcpXG4gICAgICAgICAgY29uc29sZS53YXJuKGAgIFtBbnRpU3R1Y2tdIEFsbG93TmFycm93IGZhaWxlZC4gVHJ5aW5nIGFueSBzcG90IGluY2wuIGxpZnQuLi5gKTtcbiAgICAgICAgc2FmZVNwb3QgPSBtYXAuZmluZE5lYXJlc3RXYWxrYWJsZVRpbGUoY2hhci54LCBjaGFyLnksIDMsIGZhbHNlLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBpZiAoc2FmZVNwb3QpIHtcbiAgICAgICAgaWYgKGlzRGVidWcpXG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgICBbQW50aVN0dWNrXSBOdWRnaW5nIHRvIHNhZmU6KCR7c2FmZVNwb3QueC50b0ZpeGVkKDEpfSwke3NhZmVTcG90LnkudG9GaXhlZCgxKX0pYFxuICAgICAgICAgICk7XG4gICAgICAgIGNoYXIueCA9IHNhZmVTcG90Lng7XG4gICAgICAgIGNoYXIueSA9IHNhZmVTcG90Lnk7XG4gICAgICAgIHRoaXMuZ2FtZS5yZW5kZXJlcj8uY2VudGVyQ2FtZXJhT25DaGFyYWN0ZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0RlYnVnKSBjb25zb2xlLmVycm9yKGAgIFtBbnRpU3R1Y2tdIENSSVQ6IE5vIHNhZmUgbnVkZ2Ugc3BvdC4gUmFuZG9tIG1hcCBzcGF3bi4uLmApO1xuICAgICAgICBjb25zdCBlbWVyZ2VuY3kgPSBtYXAuZmluZFJhbmRvbUluaXRpYWxTcGF3blBvc2l0aW9uKCk7XG4gICAgICAgIGlmIChlbWVyZ2VuY3kpIHtcbiAgICAgICAgICBpZiAoaXNEZWJ1ZylcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgYCAgW0FudGlTdHVja10gRW1lcmdlbmN5IHJhbmRvbTooJHtlbWVyZ2VuY3kueC50b0ZpeGVkKDEpfSwke2VtZXJnZW5jeS55LnRvRml4ZWQoMSl9KWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgY2hhci54ID0gZW1lcmdlbmN5Lng7XG4gICAgICAgICAgY2hhci55ID0gZW1lcmdlbmN5Lnk7XG4gICAgICAgICAgdGhpcy5nYW1lLnJlbmRlcmVyPy5jZW50ZXJDYW1lcmFPbkNoYXJhY3RlcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpc0RlYnVnKSBjb25zb2xlLmVycm9yKCcgIFtBbnRpU3R1Y2tdIEVWRU4gUkFORE9NIFNQQVdOIEZBSUxFRCEgVW5yZWNvdmVyYWJsZS4nKTtcbiAgICAgICAgICB0aGlzLmdhbWUuX2hhbmRsZUZhdGFsRXJyb3IoJ0FudGktU3R1Y2sgc3lzdGVtIGZhaWxlZDogTm8gc3Bhd25hYmxlIHRpbGVzIGZvdW5kLicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvLyBzcmMvYXVkaW8vQXVkaW9NYW5hZ2VyLmpzXG5cbmltcG9ydCB0cmFjazFTcmMgZnJvbSAnLi4vLi4vYXNzZXRzL2F1ZGlvL2JhY2sxLm1wMyc7IC8vINCf0YDQuNC80LXRgCDQv9GD0YLQuCwg0L3QsNGB0YLRgNC+0LnRgtC1INC/0L7QtCDQstCw0YjRgyDRgdGC0YDRg9C60YLRg9GA0YNcbmltcG9ydCB0cmFjazJTcmMgZnJvbSAnLi4vLi4vYXNzZXRzL2F1ZGlvL2JhY2syLm1wMyc7XG5pbXBvcnQgdHJhY2szU3JjIGZyb20gJy4uLy4uL2Fzc2V0cy9hdWRpby9iYWNrMy5tcDMnO1xuXG5jb25zdCBERUZBVUxUX01VU0lDX1ZPTFVNRSA9IDAuNTtcblxuLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LjQvNC/0L7RgNGC0LjRgNC+0LLQsNC90L3Ri9C1INC40YHRhdC+0LTQvdC40LrQuFxuY29uc3QgTVVTSUNfU09VUkNFUyA9IHtcbiAgLy8g0J/QtdGA0LXQuNC80LXQvdC+0LLQsNC90L4g0LTQu9GPINGP0YHQvdC+0YHRgtC4XG4gIHRyYWNrMTogdHJhY2sxU3JjLFxuICB0cmFjazI6IHRyYWNrMlNyYyxcbiAgdHJhY2szOiB0cmFjazNTcmMsXG59O1xuXG4vLyDQn9C+0YDRj9C00L7Quiwg0LIg0LrQvtGC0L7RgNC+0Lwg0YLRgNC10LrQuCDQsdGD0LTRg9GCINC80LXQvdGP0YLRjNGB0Y8gKNC80L7QttC90L4g0LjQt9C80LXQvdC40YLRjCDQvdCwINC00YDRg9Cz0YPRjiDQu9C+0LPQuNC60YMpXG5jb25zdCBUUkFDS19DWUNMRV9PUkRFUiA9IFsndHJhY2sxJywgJ3RyYWNrMicsICd0cmFjazMnXTtcblxuZXhwb3J0IGNsYXNzIEF1ZGlvTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubXVzaWNWb2x1bWUgPSBERUZBVUxUX01VU0lDX1ZPTFVNRTtcbiAgICB0aGlzLmN1cnJlbnRNdXNpY0VsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuY3VycmVudFRyYWNrS2V5ID0gbnVsbDtcbiAgICB0aGlzLmlzTXVzaWNQbGF5aW5nID0gZmFsc2U7XG5cbiAgICBjb25zdCBzYXZlZFZvbHVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtdXNpY1ZvbHVtZScpO1xuICAgIGlmIChzYXZlZFZvbHVtZSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5tdXNpY1ZvbHVtZSA9IHBhcnNlRmxvYXQoc2F2ZWRWb2x1bWUpO1xuICAgIH1cblxuICAgIHRoaXMuYXVkaW9FbGVtZW50cyA9IHt9O1xuICAgIHRoaXMuX3ByZWxvYWRUcmFja3MoKTtcbiAgfVxuXG4gIF9wcmVsb2FkVHJhY2tzKCkge1xuICAgIGNvbnNvbGUubG9nKCdbQXVkaW9NYW5hZ2VyXSBQcmVsb2FkaW5nIHRyYWNrcyBmcm9tIGltcG9ydGVkIHNvdXJjZXMuLi4nKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBNVVNJQ19TT1VSQ0VTKSB7XG4gICAgICBpZiAoTVVTSUNfU09VUkNFUy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGNvbnN0IGF1ZGlvUGF0aCA9IE1VU0lDX1NPVVJDRVNba2V5XTsgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LjQvNC/0L7RgNGC0LjRgNC+0LLQsNC90L3Ri9C5INC/0YPRgtGMXG4gICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvUGF0aCk7XG4gICAgICAgIGF1ZGlvLnByZWxvYWQgPSAnYXV0byc7XG4gICAgICAgIHRoaXMuYXVkaW9FbGVtZW50c1trZXldID0gYXVkaW87XG4gICAgICAgIGNvbnNvbGUubG9nKGAgIFByZWxvYWRlZCAke2tleX0gZnJvbSAke2F1ZGlvUGF0aH1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRNdXNpY1ZvbHVtZSh2b2x1bWUpIHtcbiAgICB0aGlzLm11c2ljVm9sdW1lID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdm9sdW1lKSk7IC8vINCe0LPRgNCw0L3QuNGH0LjQstCw0LXQvCDQvtGCIDAg0LTQviAxXG4gICAgaWYgKHRoaXMuY3VycmVudE11c2ljRWxlbWVudCkge1xuICAgICAgdGhpcy5jdXJyZW50TXVzaWNFbGVtZW50LnZvbHVtZSA9IHRoaXMubXVzaWNWb2x1bWU7XG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtdXNpY1ZvbHVtZScsIHRoaXMubXVzaWNWb2x1bWUudG9TdHJpbmcoKSk7IC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQs9GA0L7QvNC60L7RgdGC0YxcbiAgICBjb25zb2xlLmxvZyhgW0F1ZGlvTWFuYWdlcl0gTXVzaWMgdm9sdW1lIHNldCB0bzogJHt0aGlzLm11c2ljVm9sdW1lfWApO1xuICB9XG5cbiAgZ2V0TXVzaWNWb2x1bWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubXVzaWNWb2x1bWU7XG4gIH1cblxuICBwbGF5TXVzaWModHJhY2tLZXksIGxvb3AgPSB0cnVlKSB7XG4gICAgaWYgKCF0aGlzLmF1ZGlvRWxlbWVudHNbdHJhY2tLZXldKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFtBdWRpb01hbmFnZXJdIFRyYWNrIFwiJHt0cmFja0tleX1cIiBub3QgZm91bmQgb3Igbm90IHByZWxvYWRlZC5gKTtcbiAgICAgIGlmIChNVVNJQ19TT1VSQ0VTW3RyYWNrS2V5XSkge1xuICAgICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0L3QsNC70LjRh9C40LUg0LIgTVVTSUNfU09VUkNFU1xuICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudHNbdHJhY2tLZXldID0gbmV3IEF1ZGlvKE1VU0lDX1NPVVJDRVNbdHJhY2tLZXldKTsgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LjQvNC/0L7RgNGC0LjRgNC+0LLQsNC90L3Ri9C5INC/0YPRgtGMXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIGBbQXVkaW9NYW5hZ2VyXSBTb3VyY2UgZm9yIHRyYWNrIFwiJHt0cmFja0tleX1cIiBub3QgZGVmaW5lZCBpbiBNVVNJQ19TT1VSQ0VTLmBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmlzTXVzaWNQbGF5aW5nICYmIHRoaXMuY3VycmVudFRyYWNrS2V5ID09PSB0cmFja0tleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnN0b3BNdXNpYygpO1xuXG4gICAgdGhpcy5jdXJyZW50TXVzaWNFbGVtZW50ID0gdGhpcy5hdWRpb0VsZW1lbnRzW3RyYWNrS2V5XTtcbiAgICB0aGlzLmN1cnJlbnRNdXNpY0VsZW1lbnQudm9sdW1lID0gdGhpcy5tdXNpY1ZvbHVtZTtcbiAgICB0aGlzLmN1cnJlbnRNdXNpY0VsZW1lbnQubG9vcCA9IGxvb3A7XG4gICAgdGhpcy5jdXJyZW50VHJhY2tLZXkgPSB0cmFja0tleTtcblxuICAgIHRoaXMuY3VycmVudE11c2ljRWxlbWVudFxuICAgICAgLnBsYXkoKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLmlzTXVzaWNQbGF5aW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFtBdWRpb01hbmFnZXJdIFBsYXlpbmcgbXVzaWM6ICR7dHJhY2tLZXl9IChWb2x1bWU6ICR7dGhpcy5jdXJyZW50TXVzaWNFbGVtZW50LnZvbHVtZX0pYFxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0F1ZGlvTWFuYWdlcl0gRXJyb3IgcGxheWluZyBcIiR7dHJhY2tLZXl9XCI6YCwgZXJyb3IpO1xuICAgICAgICAvLyDQlNC+0LHQsNCy0YzRgtC1INCx0L7Qu9GM0YjQtSDQtNC10YLQsNC70LXQuSDQtNC70Y8g0L7RgtC70LDQtNC60Lgg0L/QvtC70LjRgtC40LrQuCDQsNCy0YLQvtCy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjRj1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIGAgIFBsYXliYWNrIGZhaWx1cmUgZGV0YWlsczogdXNlckludGVyYWN0ZWQgKGNoZWNrIE1lbnUuanMpLCBkb2N1bWVudC5oYXNGb2N1cygpOiAke2RvY3VtZW50Lmhhc0ZvY3VzKCl9YFxuICAgICAgICApO1xuICAgICAgICB0aGlzLmlzTXVzaWNQbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3VycmVudE11c2ljRWxlbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudFRyYWNrS2V5ID0gbnVsbDtcbiAgICAgIH0pO1xuICB9XG5cbiAgc3RvcE11c2ljKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRNdXNpY0VsZW1lbnQpIHtcbiAgICAgIHRoaXMuY3VycmVudE11c2ljRWxlbWVudC5wYXVzZSgpO1xuICAgICAgdGhpcy5jdXJyZW50TXVzaWNFbGVtZW50LmN1cnJlbnRUaW1lID0gMDsgLy8g0KHQsdGA0L7RgSDQvdCwINC90LDRh9Cw0LvQvlxuICAgICAgdGhpcy5pc011c2ljUGxheWluZyA9IGZhbHNlO1xuICAgICAgY29uc29sZS5sb2coYFtBdWRpb01hbmFnZXJdIFN0b3BwZWQgbXVzaWM6ICR7dGhpcy5jdXJyZW50VHJhY2tLZXl9YCk7XG4gICAgICAvLyDQndC1INC+0YfQuNGJ0LDQtdC8IGN1cnJlbnRNdXNpY0VsZW1lbnQg0LggY3VycmVudFRyYWNrS2V5INC30LTQtdGB0Ywg0L/QvtC70L3QvtGB0YLRjNGOLFxuICAgICAgLy8g0YfRgtC+0LHRiyDQvNC+0LbQvdC+INCx0YvQu9C+INCy0L7Qt9C+0LHQvdC+0LLQuNGC0YwsINC10YHQu9C4INC90YPQttC90L4sINC90L4g0LTQu9GPINGB0LzQtdC90Ysg0YLRgNC10LrQsCDRjdGC0L4g0J7Qmi5cbiAgICB9XG4gIH1cblxuICAvLyDQktGL0LfRi9Cy0LDQtdGC0YHRjyDQv9GA0Lgg0YHQvNC10L3QtSDRjdGC0LDQttCwXG4gIGNoYW5nZVRyYWNrRm9yRmxvb3IoZmxvb3JOdW1iZXIpIHtcbiAgICAvLyDQn9GA0L7RgdGC0L4g0YbQuNC60LvQuNGH0LXRgdC60Lgg0LzQtdC90Y/QtdC8INGC0YDQtdC60LguINCt0YLQsNC20Lgg0L7QsdGL0YfQvdC+IDEt0LjQvdC00LXQutGB0LjRgNC+0LLQsNC90L3Ri9C1LlxuICAgIC8vIGZsb29yTnVtYmVyINC80L7QttC10YIg0LHRi9GC0Ywg0LvRjtCx0YvQvCwg0L/QvtGN0YLQvtC80YMg0LHQtdGA0LXQvCDQv9C+INC80L7QtNGD0LvRji5cbiAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCAoZmxvb3JOdW1iZXIgLSAxKSDQtdGB0LvQuCDQstCw0YjQuCDRjdGC0LDQttC4INC90LDRh9C40L3QsNGO0YLRgdGPINGBIDEsINGH0YLQvtCx0Ysg0LjQvdC00LXQutGBINCx0YvQuyDRgSAwLlxuICAgIC8vINCV0YHQu9C4INGN0YLQsNC20Lgg0LzQvtCz0YPRgiDQsdGL0YLRjCAwINC40LvQuCDQvtGC0YDQuNGG0LDRgtC10LvRjNC90YvQvNC4LCDQvdGD0LbQvdCwINC00YDRg9Cz0LDRjyDQu9C+0LPQuNC60LAuXG4gICAgLy8g0J/RgNC10LTQv9C+0LvQvtC20LjQvCwg0Y3RgtCw0LbQuCA+IDAuXG4gICAgY29uc3QgYWRqdXN0ZWRGbG9vckluZGV4ID0gTWF0aC5tYXgoMCwgZmxvb3JOdW1iZXIgLSAxKTtcbiAgICBjb25zdCB0cmFja0luZGV4ID0gYWRqdXN0ZWRGbG9vckluZGV4ICUgVFJBQ0tfQ1lDTEVfT1JERVIubGVuZ3RoO1xuICAgIGNvbnN0IG5ld1RyYWNrS2V5ID0gVFJBQ0tfQ1lDTEVfT1JERVJbdHJhY2tJbmRleF07XG5cbiAgICBpZiAobmV3VHJhY2tLZXkpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbQXVkaW9NYW5hZ2VyXSBGbG9vciAke2Zsb29yTnVtYmVyfSAtPiBNdXNpYyB0cmFjazogJHtuZXdUcmFja0tleX1gKTtcbiAgICAgIHRoaXMucGxheU11c2ljKG5ld1RyYWNrS2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGBbQXVkaW9NYW5hZ2VyXSBObyB0cmFjayBmb3VuZCBmb3IgZmxvb3IgaW5kZXggJHt0cmFja0luZGV4fS5gKTtcbiAgICB9XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INC00LvRjyDQv9C10YDQstC+0L3QsNGH0LDQu9GM0L3QvtCz0L4g0LfQsNC/0YPRgdC60LAg0LzRg9C30YvQutC4LCDQvdCw0L/RgNC40LzQtdGALCDQv9GA0Lgg0YHRgtCw0YDRgtC1INC40LPRgNGLXG4gIHN0YXJ0SW5pdGlhbE11c2ljKGluaXRpYWxGbG9vciA9IDEpIHtcbiAgICAvLyDQo9Cx0LXQtNC40LzRgdGPLCDRh9GC0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINCy0LfQsNC40LzQvtC00LXQudGB0YLQstC+0LLQsNC7INGB0L4g0YHRgtGA0LDQvdC40YbQtdC5LFxuICAgIC8vINC/0YDQtdC20LTQtSDRh9C10Lwg0L/Ri9GC0LDRgtGM0YHRjyDQstC+0YHQv9GA0L7QuNC30LLQtdGB0YLQuCDQt9Cy0YPQuiAo0LHRgNCw0YPQt9C10YDRiyDQsdC70L7QutC40YDRg9GO0YIg0LDQstGC0L7QstC+0YHQv9GA0L7QuNC30LLQtdC00LXQvdC40LUpLlxuICAgIC8vINCt0YLQvtGCINC80LXRgtC+0LQg0LTQvtC70LbQtdC9INCy0YvQt9GL0LLQsNGC0YzRgdGPINC/0L7RgdC70LUg0LrQu9C40LrQsCBcIlBsYXlcIiDQsiDQs9C70LDQstC90L7QvCDQvNC10L3Rji5cbiAgICBjb25zb2xlLmxvZygnW0F1ZGlvTWFuYWdlcl0gQXR0ZW1wdGluZyB0byBzdGFydCBpbml0aWFsIG11c2ljLi4uJyk7XG4gICAgdGhpcy5jaGFuZ2VUcmFja0ZvckZsb29yKGluaXRpYWxGbG9vcik7XG4gIH1cbn1cbiIsIi8vIHNyYy9jb3JlL0dhbWUuanNcbmltcG9ydCB7IElucHV0TWFuYWdlciB9IGZyb20gJy4vSW5wdXRNYW5hZ2VyLmpzJztcbmltcG9ydCB7IFVJTWFuYWdlciB9IGZyb20gJy4uL1VJL1VJTWFuYWdlci5qcyc7XG5pbXBvcnQgeyBDaGFyYWN0ZXIgfSBmcm9tICcuL0NoYXJhY3Rlci5qcyc7XG5pbXBvcnQgeyBMZXZlbCB9IGZyb20gJy4vTGV2ZWwuanMnO1xuaW1wb3J0IHsgR2FtZVN0YXRlLCBxdWVzdGlvbnMsIFRBUkdFVF9CT09LU19UT19XSU4sIExJRlRfQ09PTERPV05fTVMgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgR2FtZVJlbmRlcmVyIH0gZnJvbSAnLi9HYW1lUmVuZGVyZXIuanMnO1xuaW1wb3J0IHsgR2FtZXBsYXlNYW5hZ2VyIH0gZnJvbSAnLi9HYW1lcGxheU1hbmFnZXIuanMnO1xuaW1wb3J0IHsgQXVkaW9NYW5hZ2VyIH0gZnJvbSAnLi4vYXVkaW8vQXVkaW9NYW5hZ2VyLmpzJztcblxuLy8g0JjQvNC/0L7RgNGC0Ysg0YHQv9GA0LDQudGC0L7QsiAo0YPQsdC10LTQuNGB0YwsINGH0YLQviDQv9GD0YLQuCDQutC+0YDRgNC10LrRgtC90YspXG5pbXBvcnQgcmVkU3ByaXRlUGF0aCBmcm9tICcuLi8uLi9hc3NldHMvaW1hZ2VzL2NoYXJhY3Rlcl9yZWQucG5nJztcbmltcG9ydCBibHVlU3ByaXRlUGF0aCBmcm9tICcuLi8uLi9hc3NldHMvaW1hZ2VzL2NoYXJhY3Rlcl9ibHVlLnBuZyc7XG5pbXBvcnQgeWVsbG93U3ByaXRlUGF0aCBmcm9tICcuLi8uLi9hc3NldHMvaW1hZ2VzL2NoYXJhY3Rlcl95ZWxsb3cucG5nJztcbmltcG9ydCBncmVlblNwcml0ZVBhdGggZnJvbSAnLi4vLi4vYXNzZXRzL2ltYWdlcy9jaGFyYWN0ZXJfZ3JlZW4ucG5nJztcbmltcG9ydCBib29rU3ByaXRlSW1hZ2UgZnJvbSAnLi4vLi4vYXNzZXRzL2ltYWdlcy9ib29rLnBuZyc7XG5cbmV4cG9ydCBjbGFzcyBHYW1lIHtcbiAgc3RhdGljIENSRUFUT1JfTkFNRVMgPSBbJ1JhZmHFgicsICdEaW1hJywgJ1ZlbmlhJywgJ0thY3BlciddO1xuICBzdGF0aWMgQ0xBU1NfQVRURU5ESU5HX0lORk8gPSAnS2xhc2EgMlAyVCAvIFByb2pla3Rvd2FuaWUgc3Ryb24gaW50ZXJuZXRvd3ljaCc7XG5cbiAgY29uc3RydWN0b3IoY2hhcmFjdGVyQ29sb3IpIHtcbiAgICBjb25zb2xlLmxvZyhgW0dhbWVdIEluaXRpYWxpemluZyB3aXRoIGNoYXJhY3RlcjogJHtjaGFyYWN0ZXJDb2xvcn1gKTtcbiAgICBpZiAoIWNoYXJhY3RlckNvbG9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9ICdbR2FtZV0gQ1JJVElDQUw6IEdhbWUgaW5pdGlhbGl6ZWQgd2l0aG91dCBhIGNoYXJhY3RlckNvbG9yISc7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yTXNnKTtcbiAgICAgIGFsZXJ0KCdHYW1lIGNhbm5vdCBzdGFydDogbm8gY2hhcmFjdGVyIHdhcyBzZWxlY3RlZC4nKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gICAgfVxuICAgIHRoaXMuY2hhcmFjdGVyQ29sb3IgPSBjaGFyYWN0ZXJDb2xvcjtcbiAgICB0aGlzLl9nYW1lU3RhdGUgPSBHYW1lU3RhdGUuSURMRTtcbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuXG4gICAgdGhpcy50b3RhbEJvb2tzQ29sbGVjdGVkR2xvYmFsbHkgPSAwO1xuICAgIHRoaXMudGFyZ2V0Qm9va3NUb1dpbiA9IFRBUkdFVF9CT09LU19UT19XSU47XG4gICAgdGhpcy5hdmFpbGFibGVRdWVzdGlvbnMgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRCb29rVGFyZ2V0ID0gbnVsbDtcbiAgICB0aGlzLmN1cnJlbnRRdWVzdGlvbkRhdGEgPSBudWxsO1xuICAgIHRoaXMubGlmdENvb2xkb3duQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5saWZ0Q29vbGRvd25UaW1lciA9IG51bGw7XG4gICAgdGhpcy5jYW52YXMgPSBudWxsO1xuICAgIHRoaXMuY3R4ID0gbnVsbDtcbiAgICB0aGlzLmNoYXJhY3RlciA9IG51bGw7XG4gICAgdGhpcy5sZXZlbCA9IG51bGw7XG4gICAgdGhpcy5pbnB1dE1hbmFnZXIgPSBudWxsO1xuICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIHRoaXMuZ2FtZXBsYXlNYW5hZ2VyID0gbnVsbDtcbiAgICB0aGlzLmF1ZGlvTWFuYWdlciA9IG51bGw7XG4gICAgdGhpcy5zcHJpdGVzID0ge1xuICAgICAgcmVkOiByZWRTcHJpdGVQYXRoLFxuICAgICAgYmx1ZTogYmx1ZVNwcml0ZVBhdGgsXG4gICAgICB5ZWxsb3c6IHllbGxvd1Nwcml0ZVBhdGgsXG4gICAgICBncmVlbjogZ3JlZW5TcHJpdGVQYXRoLFxuICAgIH07XG4gICAgdGhpcy5ib29rSW1hZ2UgPSBudWxsO1xuICAgIHRoaXMuZ2FtZUxvb3AgPSB0aGlzLmdhbWVMb29wLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlRmF0YWxFcnJvciA9IHRoaXMuX2hhbmRsZUZhdGFsRXJyb3IuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9ib3VuZEtleURvd25IYW5kbGVyID0gbnVsbDtcbiAgICB0aGlzLl9ib3VuZEtleVVwSGFuZGxlciA9IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5faW5pdGlhbGl6ZUNvcmVDb21wb25lbnRzKCk7XG5cbiAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyID0gbmV3IEF1ZGlvTWFuYWdlcigpO1xuICAgICAgY29uc29sZS5sb2coJ1tHYW1lXSBBdWRpb01hbmFnZXIgY3JlYXRlZC4nKTtcblxuICAgICAgdGhpcy5nYW1lcGxheU1hbmFnZXIgPSBuZXcgR2FtZXBsYXlNYW5hZ2VyKHRoaXMpO1xuICAgICAgY29uc29sZS5sb2coJ1tHYW1lXSBHYW1lcGxheU1hbmFnZXIgY3JlYXRlZC4nKTtcblxuICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBHYW1lUmVuZGVyZXIodGhpcyk7XG4gICAgICBjb25zdCB7IGNhbnZhcywgY3R4IH0gPSB0aGlzLnJlbmRlcmVyLmluaXRpYWxpemVDYW52YXMoKTtcbiAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICBjb25zb2xlLmxvZygnW0dhbWVdIFJlbmRlcmVyIGFuZCBDYW52YXMgaW5pdGlhbGl6ZWQuJyk7XG5cbiAgICAgIFVJTWFuYWdlci5zZXRHYW1lcGxheU1hbmFnZXIodGhpcy5nYW1lcGxheU1hbmFnZXIpO1xuICAgICAgVUlNYW5hZ2VyLmluaXRpYWxpemVVSSh0aGlzLmlucHV0TWFuYWdlcik7IC8vIFRpbWVyIGlzIGluaXRpYWxpemVkIGhlcmUsIGJ1dCBub3Qgc3RhcnRlZFxuICAgICAgY29uc29sZS5sb2coJ1tHYW1lXSBVSU1hbmFnZXIgZm9yIGluLWdhbWUgVUkgaW5pdGlhbGl6ZWQuJyk7XG5cbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbR2FtZV0gQ29yZSBjb21wb25lbnRzIGluaXRpYWxpemVkLiBXYWl0aW5nIGZvciB0cmlnZ2VyR2FtZVN0YXJ0KCkgZnJvbSBNZW51LicpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbR2FtZV0gU3luY2hyb25vdXMgY29yZSBpbml0aWFsaXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgYWxlcnQoYENyaXRpY2FsIGluaXRpYWxpemF0aW9uIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9LiBHYW1lIGNhbm5vdCBzdGFydC5gKTtcbiAgICB9XG4gIH1cblxuICBnZXQgZ2FtZVN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9nYW1lU3RhdGU7XG4gIH1cblxuICBzZXRHYW1lU3RhdGUobmV3U3RhdGUpIHtcbiAgICBpZiAodGhpcy5fZ2FtZVN0YXRlICE9PSBuZXdTdGF0ZSkge1xuICAgICAgY29uc29sZS5sb2coYFtHYW1lIFN0YXRlXSAke3RoaXMuX2dhbWVTdGF0ZX0gLT4gJHtuZXdTdGF0ZX1gKTtcbiAgICAgIHRoaXMuX2dhbWVTdGF0ZSA9IG5ld1N0YXRlO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0aWFsaXplQ29yZUNvbXBvbmVudHMoKSB7XG4gICAgdGhpcy5pbnB1dE1hbmFnZXIgPSBuZXcgSW5wdXRNYW5hZ2VyKCk7XG4gICAgdGhpcy5sZXZlbCA9IG5ldyBMZXZlbCgxLCAzKTsgLy8gbWluRmxvb3IsIG1heEZsb29yXG4gIH1cblxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHRoaXMucmVuZGVyZXI/LnJlc2l6ZUNhbnZhcygpKTtcbiAgfVxuXG4gIGFzeW5jIHRyaWdnZXJHYW1lU3RhcnQoKSB7XG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlICE9PSBHYW1lU3RhdGUuSURMRSkge1xuICAgICAgY29uc29sZS53YXJuKGBbR2FtZV0gdHJpZ2dlckdhbWVTdGFydCBjYWxsZWQgYnV0IGdhbWUgc3RhdGUgaXMgJHt0aGlzLmdhbWVTdGF0ZX0uIEFib3J0aW5nLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBbR2FtZV0gdHJpZ2dlckdhbWVTdGFydCByZWNlaXZlZCBmb3IgY2hhcmFjdGVyOiAke3RoaXMuY2hhcmFjdGVyQ29sb3J9LiBTdGFydGluZyBhc3NldCBsb2FkaW5nLi4uYFxuICAgICk7XG5cbiAgICBjb25zdCBsb2FkaW5nT3ZlcmxheSA9IFVJTWFuYWdlci5nZXRMb2FkaW5nT3ZlcmxheSgpO1xuICAgIGlmIChsb2FkaW5nT3ZlcmxheSkgbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuX2xvYWRBc3NldHNBbmRUaGVuU3RhcnRMb2dpYygpO1xuICAgICAgY29uc29sZS5sb2coJ1tHYW1lXSBHYW1lIHN0YXJ0IHNlcXVlbmNlIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICdbR2FtZV0gRXJyb3IgZHVyaW5nIF9sb2FkQXNzZXRzQW5kVGhlblN0YXJ0TG9naWMgKGZyb20gdHJpZ2dlckdhbWVTdGFydCk6JyxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgICBpZiAobG9hZGluZ092ZXJsYXkpIGxvYWRpbmdPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgIGlmICh0aGlzLmdhbWVTdGF0ZSAhPT0gR2FtZVN0YXRlLkdBTUVfT1ZFUikge1xuICAgICAgICAvLyBBdm9pZCBkb3VibGUgZXJyb3IgaGFuZGxpbmcgaWYgYWxyZWFkeSBoYW5kbGVkXG4gICAgICAgIHRoaXMuX2hhbmRsZUZhdGFsRXJyb3IoYEdhbWUgc3RhcnQgcHJvY2VzcyBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBfbG9hZEFzc2V0c0FuZFRoZW5TdGFydExvZ2ljKCkge1xuICAgIGNvbnN0IGxvYWRpbmdPdmVybGF5ID0gVUlNYW5hZ2VyLmdldExvYWRpbmdPdmVybGF5KCk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5MT0FESU5HKTtcbiAgICAgIGlmIChsb2FkaW5nT3ZlcmxheSAmJiAhbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHtcbiAgICAgICAgbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLl9sb2FkQXNzZXRzKCk7XG4gICAgICBhd2FpdCB0aGlzLl9zdGFydEdhbWVMb2dpYygpO1xuXG4gICAgICBpZiAobG9hZGluZ092ZXJsYXkpIGxvYWRpbmdPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0dhbWVdIF9sb2FkQXNzZXRzQW5kVGhlblN0YXJ0TG9naWMgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIGlmIChsb2FkaW5nT3ZlcmxheSkgbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgdGhpcy5faGFuZGxlRmF0YWxFcnJvcihgQXNzZXQgbG9hZGluZyBvciBnYW1lIGxvZ2ljIHN0YXJ0IGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfbG9hZEFzc2V0cygpIHtcbiAgICBjb25zb2xlLmxvZygnW0dhbWVdIExvYWRpbmcgYXNzZXRzLi4uJyk7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICBjb25zdCBzcHJpdGVQYXRoS2V5ID0gdGhpcy5jaGFyYWN0ZXJDb2xvciB8fCAncmVkJztcbiAgICBjb25zdCBzcHJpdGVQYXRoID0gdGhpcy5zcHJpdGVzW3Nwcml0ZVBhdGhLZXldO1xuXG4gICAgaWYgKCFzcHJpdGVQYXRoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNwcml0ZSBwYXRoIGZvciBjaGFyYWN0ZXIgY29sb3IgXCIke3Nwcml0ZVBhdGhLZXl9XCIgaXMgdW5kZWZpbmVkLmApO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhgW0dhbWVdIFVzaW5nIHNwcml0ZTogJHtzcHJpdGVQYXRofSBmb3IgY2hhcmFjdGVyICR7c3ByaXRlUGF0aEtleX1gKTtcblxuICAgIGlmICghdGhpcy5jdHgpIHRocm93IG5ldyBFcnJvcignQ2FudmFzIGNvbnRleHQgbm90IGF2YWlsYWJsZSBmb3IgQ2hhcmFjdGVyIGNyZWF0aW9uLicpO1xuICAgIHRoaXMuY2hhcmFjdGVyID0gbmV3IENoYXJhY3Rlcih0aGlzLmN0eCwgc3ByaXRlUGF0aCwge1xuICAgICAgc3BlZWQ6IDMsXG4gICAgICBmcmFtZVNpemU6IDMyLFxuICAgICAgc2NhbGU6IDIsXG4gICAgICBhbmltYXRpb25TcGVlZDogMTUwLFxuICAgICAgZnJhbWVDb3VudDogNCxcbiAgICB9KTtcbiAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICB0aGlzLmNoYXJhY3Rlci5zcHJpdGUub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFtBc3NldHNdIENoYXJhY3RlciBzcHJpdGUgbG9hZGVkOiAke3Nwcml0ZVBhdGh9YCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoYXJhY3Rlci5zcHJpdGUub25lcnJvciA9IChlcnIpID0+XG4gICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgRmFpbGVkIHRvIGxvYWQgY2hhcmFjdGVyIHNwcml0ZTogJHtzcHJpdGVQYXRofS4gRGV0YWlsczogJHtlcnIubWVzc2FnZSB8fCBlcnJ9YFxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICB9KVxuICAgICk7XG5cbiAgICBpZiAoYm9va1Nwcml0ZUltYWdlKSB7XG4gICAgICB0aGlzLmJvb2tJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgdGhpcy5ib29rSW1hZ2Uuc3JjID0gYm9va1Nwcml0ZUltYWdlO1xuICAgICAgcHJvbWlzZXMucHVzaChcbiAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICB0aGlzLmJvb2tJbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgICBbQXNzZXRzXSBCb29rIGltYWdlIGxvYWRlZDogJHtib29rU3ByaXRlSW1hZ2V9YCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLmJvb2tJbWFnZS5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICBgIFtBc3NldHNdIEZhaWxlZCB0byBsb2FkIGJvb2sgaW1hZ2U6ICR7Ym9va1Nwcml0ZUltYWdlfS4gVXNpbmcgZmFsbGJhY2suYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuYm9va0ltYWdlID0gbnVsbDtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdbQXNzZXRzXSBObyBib29rIHNwcml0ZS4gRmFsbGJhY2sgcmVuZGVyaW5nIHdpbGwgYmUgdXNlZC4nKTtcbiAgICAgIHRoaXMuYm9va0ltYWdlID0gbnVsbDtcbiAgICB9XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIGNvbnNvbGUubG9nKCdbR2FtZV0gQWxsIHZpc3VhbCBhc3NldHMgbG9hZGVkIHN1Y2Nlc3NmdWxseS4nKTtcbiAgfVxuXG4gIGFzeW5jIF9zdGFydEdhbWVMb2dpYygpIHtcbiAgICBjb25zb2xlLmxvZygnW0dhbWVdIFN0YXJ0aW5nIGNvcmUgZ2FtZSBsb2dpYy4uLicpO1xuICAgIGlmIChcbiAgICAgICF0aGlzLmxldmVsIHx8XG4gICAgICAhdGhpcy5jaGFyYWN0ZXIgfHxcbiAgICAgICF0aGlzLmNhbnZhcyB8fFxuICAgICAgIXRoaXMucmVuZGVyZXIgfHxcbiAgICAgICF0aGlzLmdhbWVwbGF5TWFuYWdlciB8fFxuICAgICAgIXRoaXMuYXVkaW9NYW5hZ2VyXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzdGFydCBnYW1lIC0gZXNzZW50aWFsIGNvbXBvbmVudHMgbWlzc2luZy4nKTtcbiAgICB9XG4gICAgdGhpcy5zZXRHYW1lU3RhdGUoR2FtZVN0YXRlLkxPQURJTkdfTEVWRUwpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMubGV2ZWwubG9hZEZsb29yKHRoaXMubGV2ZWwubWluRmxvb3IsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgY29uc3QgY3VycmVudE1hcCA9IHRoaXMubGV2ZWwuY3VycmVudE1hcDtcbiAgICAgIGlmICghY3VycmVudE1hcCkgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gbG9hZCBpbml0aWFsIG1hcC4nKTtcblxuICAgICAgY29uc3Qgc3RhcnRQb3MgPSBjdXJyZW50TWFwLmZpbmRSYW5kb21Jbml0aWFsU3Bhd25Qb3NpdGlvbih0aGlzLmNoYXJhY3Rlcik7XG4gICAgICBpZiAoIXN0YXJ0UG9zKSB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmaW5kIGEgdmFsaWQgc3RhcnRpbmcgcG9zaXRpb24gb24gdGhlIG1hcCEnKTtcbiAgICAgIHRoaXMuY2hhcmFjdGVyLnggPSBzdGFydFBvcy54O1xuICAgICAgdGhpcy5jaGFyYWN0ZXIueSA9IHN0YXJ0UG9zLnk7XG4gICAgICB0aGlzLmNoYXJhY3Rlci5jdXJyZW50RGlyZWN0aW9uID0gQ2hhcmFjdGVyLkRpcmVjdGlvbi5ET1dOO1xuICAgICAgdGhpcy5jaGFyYWN0ZXIuaXNNb3ZpbmcgPSBmYWxzZTtcblxuICAgICAgdGhpcy5nYW1lcGxheU1hbmFnZXIuZW5zdXJlQ2hhcmFjdGVySXNPbldhbGthYmxlVGlsZShmYWxzZSk7XG5cbiAgICAgIHRoaXMudG90YWxCb29rc0NvbGxlY3RlZEdsb2JhbGx5ID0gMDtcbiAgICAgIHRoaXMuYXZhaWxhYmxlUXVlc3Rpb25zID0gWy4uLnF1ZXN0aW9uc107XG4gICAgICB0aGlzLmxpZnRDb29sZG93bkFjdGl2ZSA9IGZhbHNlO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubGlmdENvb2xkb3duVGltZXIpO1xuICAgICAgdGhpcy5saWZ0Q29vbGRvd25UaW1lciA9IG51bGw7XG4gICAgICB0aGlzLmN1cnJlbnRCb29rVGFyZ2V0ID0gbnVsbDtcbiAgICAgIHRoaXMuY3VycmVudFF1ZXN0aW9uRGF0YSA9IG51bGw7XG5cbiAgICAgIHRoaXMucmVuZGVyZXIuY2VudGVyQ2FtZXJhT25DaGFyYWN0ZXIoKTtcbiAgICAgIFVJTWFuYWdlci51cGRhdGVTY29yZSh0aGlzLnRvdGFsQm9va3NDb2xsZWN0ZWRHbG9iYWxseSwgdGhpcy50YXJnZXRCb29rc1RvV2luKTtcbiAgICAgIFVJTWFuYWdlci5zaG93R2FtZVVJKCk7XG5cbiAgICAgIHRoaXMuX2JvdW5kS2V5RG93bkhhbmRsZXIgPSB0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2JvdW5kS2V5VXBIYW5kbGVyID0gdGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9ib3VuZEtleURvd25IYW5kbGVyKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2JvdW5kS2V5VXBIYW5kbGVyKTtcblxuICAgICAgdGhpcy5hdWRpb01hbmFnZXIuc3RhcnRJbml0aWFsTXVzaWModGhpcy5sZXZlbC5jdXJyZW50Rmxvb3IpO1xuICAgICAgY29uc29sZS5sb2coYFtHYW1lXSBJbml0aWFsIG11c2ljIHN0YXJ0ZWQgZm9yIGZsb29yICR7dGhpcy5sZXZlbC5jdXJyZW50Rmxvb3J9YCk7XG5cbiAgICAgIHRoaXMuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5QTEFZSU5HKTsgLy8gU2V0IHN0YXRlIEJFRk9SRSBzdGFydGluZyB0aW1lclxuICAgICAgVUlNYW5hZ2VyLnN0YXJ0VGltZXIoKTsgLy8gVUlNYW5hZ2VyIGNvbnRyb2xzIHRoZSB0aW1lciBsb2dpY1xuXG4gICAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZ2FtZUxvb3ApO1xuICAgICAgICBjb25zb2xlLmxvZygnW0dhbWVdIEdhbWUgbG9naWMgc3RhcnRlZC4gR2FtZSBsb29wIGlzIHJ1bm5pbmcuJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tHYW1lXSBFcnJvciBkdXJpbmcgX3N0YXJ0R2FtZUxvZ2ljOicsIGVycm9yKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZhdGFsRXJyb3IoYExldmVsIHN0YXJ0IHByb2Nlc3MgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRHYW1lT3Zlcih3aW4gPSB0cnVlKSB7XG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlID09PSBHYW1lU3RhdGUuR0FNRV9PVkVSKSByZXR1cm47XG4gICAgY29uc29sZS5sb2coYFtHYW1lXSBHYW1lIE92ZXIuIFdpbjogJHt3aW59YCk7IC8vIExvZyBiZWZvcmUgY2hhbmdpbmcgc3RhdGVcbiAgICB0aGlzLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuR0FNRV9PVkVSKTtcbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmNoYXJhY3RlcikgdGhpcy5jaGFyYWN0ZXIuaXNNb3ZpbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5saWZ0Q29vbGRvd25UaW1lcik7XG4gICAgaWYgKHRoaXMuYXVkaW9NYW5hZ2VyKSB0aGlzLmF1ZGlvTWFuYWdlci5zdG9wTXVzaWMoKTtcblxuICAgIGlmICh0aGlzLl9ib3VuZEtleURvd25IYW5kbGVyKSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2JvdW5kS2V5RG93bkhhbmRsZXIpO1xuICAgIGlmICh0aGlzLl9ib3VuZEtleVVwSGFuZGxlcikgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5fYm91bmRLZXlVcEhhbmRsZXIpO1xuICAgIHRoaXMuX2JvdW5kS2V5RG93bkhhbmRsZXIgPSBudWxsO1xuICAgIHRoaXMuX2JvdW5kS2V5VXBIYW5kbGVyID0gbnVsbDtcblxuICAgIFVJTWFuYWdlci5zdG9wVGltZXIod2luKTsgLy8gU3RvcCB0aW1lciBPTkNFXG4gICAgVUlNYW5hZ2VyLnNob3dHYW1lT3ZlclNjcmVlbih3aW4sIEdhbWUuQ1JFQVRPUl9OQU1FUywgR2FtZS5DTEFTU19BVFRFTkRJTkdfSU5GTyk7XG4gIH1cblxuICBzdG9wR2FtZSgpIHtcbiAgICBjb25zb2xlLmxvZygnW0dhbWVdIEV4cGxpY2l0IHN0b3BHYW1lIHJlcXVlc3RlZC4nKTtcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUgIT09IEdhbWVTdGF0ZS5HQU1FX09WRVIpIHtcbiAgICAgIHRoaXMuX3NldEdhbWVPdmVyKGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1tHYW1lXSBzdG9wR2FtZSBjYWxsZWQsIGJ1dCBnYW1lIGlzIGFscmVhZHkgb3Zlci4nKTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlRmF0YWxFcnJvcihtZXNzYWdlLCBzaG93QWxlcnQgPSB0cnVlKSB7XG4gICAgY29uc29sZS5lcnJvcignW0dhbWVdIEZBVEFMIEVSUk9SOicsIG1lc3NhZ2UpO1xuICAgIGlmIChzaG93QWxlcnQgJiYgdGhpcy5nYW1lU3RhdGUgIT09IEdhbWVTdGF0ZS5HQU1FX09WRVIpIHtcbiAgICAgIFVJTWFuYWdlci5mbGFzaE1lc3NhZ2UoYEZBVEFMIEVSUk9SOiAke21lc3NhZ2V9YCwgJ2Vycm9yJywgMTUwMDApO1xuICAgIH1cbiAgICBpZiAodGhpcy5nYW1lU3RhdGUgIT09IEdhbWVTdGF0ZS5HQU1FX09WRVIpIHtcbiAgICAgIHRoaXMuX3NldEdhbWVPdmVyKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVLZXlEb3duKGUpIHtcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUgIT09IEdhbWVTdGF0ZS5QTEFZSU5HIHx8ICF0aGlzLmlucHV0TWFuYWdlcikgcmV0dXJuO1xuICAgIGxldCBoYW5kbGVkID0gZmFsc2U7XG4gICAgY29uc3Qga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoWydhcnJvd3VwJywgJ3cnXS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICB0aGlzLmlucHV0TWFuYWdlci5zZXRLZXkoJ3VwJywgdHJ1ZSk7XG4gICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKFsnYXJyb3dkb3duJywgJ3MnXS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICB0aGlzLmlucHV0TWFuYWdlci5zZXRLZXkoJ2Rvd24nLCB0cnVlKTtcbiAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoWydhcnJvd2xlZnQnLCAnYSddLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIHRoaXMuaW5wdXRNYW5hZ2VyLnNldEtleSgnbGVmdCcsIHRydWUpO1xuICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChbJ2Fycm93cmlnaHQnLCAnZCddLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIHRoaXMuaW5wdXRNYW5hZ2VyLnNldEtleSgncmlnaHQnLCB0cnVlKTtcbiAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoaGFuZGxlZCkgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgaGFuZGxlS2V5VXAoZSkge1xuICAgIGlmICghdGhpcy5pbnB1dE1hbmFnZXIpIHJldHVybjtcbiAgICBjb25zdCBrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChbJ2Fycm93dXAnLCAndyddLmluY2x1ZGVzKGtleSkpIHRoaXMuaW5wdXRNYW5hZ2VyLnNldEtleSgndXAnLCBmYWxzZSk7XG4gICAgZWxzZSBpZiAoWydhcnJvd2Rvd24nLCAncyddLmluY2x1ZGVzKGtleSkpIHRoaXMuaW5wdXRNYW5hZ2VyLnNldEtleSgnZG93bicsIGZhbHNlKTtcbiAgICBlbHNlIGlmIChbJ2Fycm93bGVmdCcsICdhJ10uaW5jbHVkZXMoa2V5KSkgdGhpcy5pbnB1dE1hbmFnZXIuc2V0S2V5KCdsZWZ0JywgZmFsc2UpO1xuICAgIGVsc2UgaWYgKFsnYXJyb3dyaWdodCcsICdkJ10uaW5jbHVkZXMoa2V5KSkgdGhpcy5pbnB1dE1hbmFnZXIuc2V0S2V5KCdyaWdodCcsIGZhbHNlKTtcbiAgfVxuXG4gIGdhbWVMb29wKHRpbWVzdGFtcCkge1xuICAgIGlmICghdGhpcy5pc1J1bm5pbmcgfHwgdGhpcy5nYW1lU3RhdGUgPT09IEdhbWVTdGF0ZS5HQU1FX09WRVIpIHJldHVybjtcbiAgICB0aGlzLmdhbWVwbGF5TWFuYWdlcj8udXBkYXRlKHRpbWVzdGFtcCk7XG4gICAgdGhpcy5yZW5kZXJlcj8uY2VudGVyQ2FtZXJhT25DaGFyYWN0ZXIoKTtcbiAgICB0aGlzLnJlbmRlcmVyPy5kcmF3RnJhbWUoKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5nYW1lTG9vcCk7XG4gIH1cblxuICBzdGFydExpZnRDb29sZG93blRpbWVyKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmxpZnRDb29sZG93blRpbWVyKTtcbiAgICBjb25zb2xlLmxvZyhgW0dhbWVdIFN0YXJ0aW5nIGxpZnQgY29vbGRvd246ICR7TElGVF9DT09MRE9XTl9NU31tcy5gKTtcbiAgICB0aGlzLmxpZnRDb29sZG93blRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmxpZnRDb29sZG93bkFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5saWZ0Q29vbGRvd25UaW1lciA9IG51bGw7XG4gICAgICBpZiAodGhpcy5nYW1lU3RhdGUgPT09IEdhbWVTdGF0ZS5UUkFOU0lUSU9OSU5HKSB7XG4gICAgICAgIHRoaXMuc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5QTEFZSU5HKTsgLy8gQmFjayB0byBwbGF5aW5nIGFmdGVyIHRyYW5zaXRpb25cbiAgICAgICAgVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZShgQXJyaXZlZCBhdCBmbG9vciAke3RoaXMubGV2ZWw/LmN1cnJlbnRGbG9vcn1gLCAnc3VjY2VzcycsIDE1MDApO1xuICAgICAgICAvLyBUaW1lciBzaG91bGQgY29udGludWUgcnVubmluZyBpZiBpdCB3YXMgYWxyZWFkeSBydW5uaW5nIGluIFRSQU5TSVRJT05JTkcgc3RhdGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgW0dhbWVUaW1lcl0gTGlmdCBjb29sZG93biBlbmRlZCwgYnV0IHN0YXRlIGlzICR7dGhpcy5nYW1lU3RhdGV9LiBObyBzdGF0ZSBjaGFuZ2UuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sIExJRlRfQ09PTERPV05fTVMpO1xuICB9XG59XG4iLCIvLyBzcmMvVUkvTWVudS5qc1xuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4uL0NvcmUvR2FtZS5qcyc7IC8vINCj0LHQtdC00LjRgdGMLCDRh9GC0L4g0L/Rg9GC0Ywg0LogR2FtZS5qcyDQstC10YDQvdGL0LlcbmltcG9ydCB7IFVJTWFuYWdlciB9IGZyb20gJy4vVUlNYW5hZ2VyLmpzJzsgLy8gVUlNYW5hZ2VyINC00LvRjyBmbGFzaC3RgdC+0L7QsdGJ0LXQvdC40Lkg0Lgg0LfQsNCz0YDRg9C30L7Rh9C90L7Qs9C+INC+0LLQtdGA0LvQtdGPXG5cbmxldCBjdXJyZW50R2FtZUluc3RhbmNlID0gbnVsbDsgLy8g0J/QtdGA0LXQvNC10L3QvdCw0Y8g0LTQu9GPINGF0YDQsNC90LXQvdC40Y8g0YLQtdC60YPRidC10LPQviDRjdC60LfQtdC80L/Qu9GP0YDQsCDQuNCz0YDRi1xuXG5leHBvcnQgY2xhc3MgTWVudSB7XG4gIGNvbnN0cnVjdG9yKGNoYXJhY3RlckltYWdlU291cmNlcykge1xuICAgIHRoaXMuY2hhcmFjdGVySW1hZ2VTb3VyY2VzID0gY2hhcmFjdGVySW1hZ2VTb3VyY2VzO1xuICAgIHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXIgPSBudWxsO1xuICAgIHRoaXMudXNlckludGVyYWN0ZWQgPSBmYWxzZTsgLy8g0JTQu9GPINC+0YLRgdC70LXQttC40LLQsNC90LjRjyDQv9C10YDQstC+0LPQviDQstC30LDQuNC80L7QtNC10LnRgdGC0LLQuNGPXG4gICAgdGhpcy5vdmVybGF5ID0gbnVsbDsgLy8g0J7QstC10YDQu9C10Lkg0LTQu9GPINC80L7QtNCw0LvRjNC90YvRhSDQvtC60L7QvVxuICAgIHRoaXMuYXVkaW9NYW5hZ2VySW5zdGFuY2UgPSBudWxsOyAvLyDQlNC70Y8g0YXRgNCw0L3QtdC90LjRjyDRjdC60LfQtdC80L/Qu9GP0YDQsCBBdWRpb01hbmFnZXJcblxuICAgIGNvbnNvbGUubG9nKCdbTWVudV0gQ29uc3RydWN0b3IgY2FsbGVkLiBJbml0aWFsaXppbmcgZWxlbWVudHMuLi4nKTtcbiAgICB0aGlzLmluaXRpYWxpemVFbGVtZW50cygpO1xuXG4gICAgaWYgKHRoaXMuY2hhcmFjdGVyUGFuZWwgJiYgdGhpcy5jaGFyYWN0ZXJHcmlkKSB7XG4gICAgICAvLyDQn9GA0L7QstC10YDQutCwIGNoYXJhY3RlckdyaWQg0LLQsNC20L3QsFxuICAgICAgdGhpcy5zZXR1cENoYXJhY3RlckltYWdlcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnW01lbnUgQ29uc3RydWN0b3JdIENSSVRJQ0FMOiBjaGFyYWN0ZXJQYW5lbCBvciBjaGFyYWN0ZXJHcmlkIGlzIG51bGwgQUZURVIgaW5pdGlhbGl6ZUVsZW1lbnRzLiBDYW5ub3Qgc2V0dXAgaW1hZ2VzLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1tNZW51XSBBZGRpbmcgZXZlbnQgbGlzdGVuZXJzLi4uJyk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuc2hvdygpOyAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDQvNC10L3RjiDQv9GA0Lgg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40LhcbiAgICBjb25zb2xlLmxvZygnW01lbnVdIEluc3RhbmNlIGNyZWF0ZWQgYW5kIGRpc3BsYXllZC4nKTtcbiAgfVxuXG4gIC8vINCc0LXRgtC+0LQg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyBBdWRpb01hbmFnZXIg0LjQtyBHYW1lLmpzXG4gIHNldEF1ZGlvTWFuYWdlcihhdWRpb01hbmFnZXIpIHtcbiAgICB0aGlzLmF1ZGlvTWFuYWdlckluc3RhbmNlID0gYXVkaW9NYW5hZ2VyO1xuICAgIGNvbnNvbGUubG9nKCdbTWVudV0gQXVkaW9NYW5hZ2VyIGluc3RhbmNlIHJlY2VpdmVkIGluIE1lbnUuJyk7XG4gICAgaWYgKHRoaXMubXVzaWNWb2x1bWUgJiYgdGhpcy5hdWRpb01hbmFnZXJJbnN0YW5jZSkge1xuICAgICAgdGhpcy5tdXNpY1ZvbHVtZS52YWx1ZSA9IHRoaXMuYXVkaW9NYW5hZ2VySW5zdGFuY2UuZ2V0TXVzaWNWb2x1bWUoKSAqIDEwMDtcbiAgICB9IGVsc2UgaWYgKHRoaXMubXVzaWNWb2x1bWUpIHtcbiAgICAgIC8vINCV0YHQu9C4IEF1ZGlvTWFuYWdlciDQtdGJ0LUg0L3QtSDQv9GA0LjRiNC10LssINC90L4g0YHQu9Cw0LnQtNC10YAg0LXRgdGC0YwsINGD0YHRgtCw0L3QvtCy0LjQvCDQt9C90LDRh9C10L3QuNC1INC40LcgbG9jYWxTdG9yYWdlXG4gICAgICBjb25zdCBzYXZlZFZvbHVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtdXNpY1ZvbHVtZScpO1xuICAgICAgaWYgKHNhdmVkVm9sdW1lICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMubXVzaWNWb2x1bWUudmFsdWUgPSBwYXJzZUZsb2F0KHNhdmVkVm9sdW1lKSAqIDEwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubXVzaWNWb2x1bWUudmFsdWUgPSA1MDsgLy8gRGVmYXVsdFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGluaXRpYWxpemVFbGVtZW50cygpIHtcbiAgICB0aGlzLm1lbnVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1jb250YWluZXInKTtcbiAgICBpZiAoIXRoaXMubWVudUNvbnRhaW5lcikge1xuICAgICAgY29uc29sZS5lcnJvcignW01lbnUgSW5pdF0gQ1JJVElDQUw6IC5tZW51LWNvbnRhaW5lciBub3QgZm91bmQhJyk7XG4gICAgICByZXR1cm47IC8vINCf0YDQtdGA0YvQstCw0LXQvCwg0LXRgdC70Lgg0L3QtdGCINC+0YHQvdC+0LLQvdC+0LPQviDQutC+0L3RgtC10LnQvdC10YDQsFxuICAgIH1cblxuICAgIHRoaXMuc2V0dGluZ3NCdXR0b24gPSB0aGlzLm1lbnVDb250YWluZXIucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLWJ1dHRvbicpO1xuICAgIHRoaXMucGxheUJ1dHRvbiA9IHRoaXMubWVudUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucGxheS1idXR0b24nKTtcbiAgICB0aGlzLmNoYXJhY3RlckJ1dHRvbiA9IHRoaXMubWVudUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2hhcmFjdGVyLWJ1dHRvbicpO1xuXG4gICAgaWYgKCF0aGlzLnBsYXlCdXR0b24pIGNvbnNvbGUud2FybignW01lbnUgSW5pdF0gLnBsYXktYnV0dG9uIG5vdCBmb3VuZC4nKTtcbiAgICBlbHNlIHRoaXMucGxheUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICBpZiAoIXRoaXMuY2hhcmFjdGVyQnV0dG9uKSBjb25zb2xlLndhcm4oJ1tNZW51IEluaXRdIC5jaGFyYWN0ZXItYnV0dG9uIG5vdCBmb3VuZC4nKTtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3NCdXR0b24pIGNvbnNvbGUud2FybignW01lbnUgSW5pdF0gLnNldHRpbmdzLWJ1dHRvbiBub3QgZm91bmQuJyk7XG5cbiAgICAvLyDQn9Cw0L3QtdC70Lgg0LvRg9GH0YjQtSDQuNGB0LrQsNGC0Ywg0L/QviDQstGB0LXQvNGDINC00L7QutGD0LzQtdC90YLRgywg0LXRgdC70Lgg0L7QvdC4INC90LUg0LLQu9C+0LbQtdC90Ysg0LIgLm1lbnUtY29udGFpbmVyXG4gICAgdGhpcy5zZXR0aW5nc1BhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLXBhbmVsJyk7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3NQYW5lbCkge1xuICAgICAgLy8g0JXRgdC70Lgg0L/QsNC90LXQu9GMINC90LUg0LIgYm9keSwg0L/QtdGA0LXQvNC10YnQsNC10Lwg0LXQtSDRgtGD0LTQsCDQtNC70Y8g0LrQvtGA0YDQtdC60YLQvdC+0LPQviDQv9C+0LfQuNGG0LjQvtC90LjRgNC+0LLQsNC90LjRjyBmaXhlZFxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnNldHRpbmdzUGFuZWwucGFyZW50Tm9kZSAhPT0gZG9jdW1lbnQuYm9keSAmJlxuICAgICAgICB0aGlzLnNldHRpbmdzUGFuZWwucGFyZW50Tm9kZSAhPT0gdGhpcy5tZW51Q29udGFpbmVyIC8qIGFsbG93IGlmIG5lc3RlZCAqL1xuICAgICAgKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5zZXR0aW5nc1BhbmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zZXR0aW5nc1BhbmVsKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm11c2ljVm9sdW1lID0gdGhpcy5zZXR0aW5nc1BhbmVsLnF1ZXJ5U2VsZWN0b3IoJyNtdXNpYy12b2x1bWUnKTtcbiAgICAgIHRoaXMuc2Z4Vm9sdW1lID0gdGhpcy5zZXR0aW5nc1BhbmVsLnF1ZXJ5U2VsZWN0b3IoJyNzZngtdm9sdW1lJyk7IC8vINCe0YHRgtCw0LLQuNC8LCDQtdGB0LvQuCDQv9C+0L3QsNC00L7QsdC40YLRgdGPXG4gICAgICB0aGlzLmNsb3NlU2V0dGluZ3NCdXR0b24gPSB0aGlzLnNldHRpbmdzUGFuZWwucXVlcnlTZWxlY3RvcignLnBhbmVsLWNsb3NlLWJ1dHRvbicpO1xuICAgICAgaWYgKCF0aGlzLm11c2ljVm9sdW1lKVxuICAgICAgICBjb25zb2xlLndhcm4oJ1tNZW51IEluaXRdICNtdXNpYy12b2x1bWUgc2xpZGVyIG5vdCBmb3VuZCBpbiBzZXR0aW5ncyBwYW5lbC4nKTtcbiAgICAgIGlmICghdGhpcy5jbG9zZVNldHRpbmdzQnV0dG9uKVxuICAgICAgICBjb25zb2xlLndhcm4oJ1tNZW51IEluaXRdIC5wYW5lbC1jbG9zZS1idXR0b24gbm90IGZvdW5kIGluIHNldHRpbmdzIHBhbmVsLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tNZW51IEluaXRdIC5zZXR0aW5ncy1wYW5lbCBub3QgZm91bmQuJyk7XG4gICAgfVxuXG4gICAgdGhpcy5jaGFyYWN0ZXJQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXItcGFuZWwnKTtcbiAgICBpZiAodGhpcy5jaGFyYWN0ZXJQYW5lbCkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmNoYXJhY3RlclBhbmVsLnBhcmVudE5vZGUgIT09IGRvY3VtZW50LmJvZHkgJiZcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJQYW5lbC5wYXJlbnROb2RlICE9PSB0aGlzLm1lbnVDb250YWluZXJcbiAgICAgICkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuY2hhcmFjdGVyUGFuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNoYXJhY3RlclBhbmVsKSk7XG4gICAgICB9XG4gICAgICB0aGlzLmNoYXJhY3RlckdyaWQgPSB0aGlzLmNoYXJhY3RlclBhbmVsLnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXItZ3JpZCcpO1xuICAgICAgdGhpcy5jbG9zZUNoYXJhY3RlclBhbmVsQnV0dG9uID0gdGhpcy5jaGFyYWN0ZXJQYW5lbC5xdWVyeVNlbGVjdG9yKCcucGFuZWwtY2xvc2UtYnV0dG9uJyk7XG4gICAgICBpZiAoIXRoaXMuY2hhcmFjdGVyR3JpZClcbiAgICAgICAgY29uc29sZS5lcnJvcignW01lbnUgSW5pdF0gQ1JJVElDQUw6IC5jaGFyYWN0ZXItZ3JpZCBub3QgZm91bmQgaW4gY2hhcmFjdGVyIHBhbmVsIScpO1xuICAgICAgaWYgKCF0aGlzLmNsb3NlQ2hhcmFjdGVyUGFuZWxCdXR0b24pXG4gICAgICAgIGNvbnNvbGUud2FybignW01lbnUgSW5pdF0gLnBhbmVsLWNsb3NlLWJ1dHRvbiBub3QgZm91bmQgaW4gY2hhcmFjdGVyIHBhbmVsLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbTWVudSBJbml0XSBDUklUSUNBTDogLmNoYXJhY3Rlci1wYW5lbCBub3QgZm91bmQhJyk7XG4gICAgfVxuXG4gICAgLy8g0KHQvtC30LTQsNC10Lwg0LjQu9C4INC90LDRhdC+0LTQuNC8INGN0LvQtdC80LXQvdGCINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINCy0YvQsdGA0LDQvdC90L7Qs9C+INC/0LXRgNGB0L7QvdCw0LbQsFxuICAgIGxldCBkaXNwbGF5Q29udGFpbmVyID0gdGhpcy5tZW51Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW1lbnUtYnV0dG9ucycpO1xuICAgIHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5ID0gZGlzcGxheUNvbnRhaW5lclxuICAgICAgPyBkaXNwbGF5Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1jaGFyYWN0ZXItZGlzcGxheScpXG4gICAgICA6IG51bGw7XG5cbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5KSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGhpcy5zZWxlY3RlZENoYXJhY3RlckRpc3BsYXkuY2xhc3NOYW1lID0gJ3NlbGVjdGVkLWNoYXJhY3Rlci1kaXNwbGF5JztcbiAgICAgIGlmICh0aGlzLnBsYXlCdXR0b24gJiYgdGhpcy5wbGF5QnV0dG9uLnBhcmVudE5vZGUpIHtcbiAgICAgICAgdGhpcy5wbGF5QnV0dG9uLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5LCB0aGlzLnBsYXlCdXR0b24pO1xuICAgICAgfSBlbHNlIGlmIChkaXNwbGF5Q29udGFpbmVyKSB7XG4gICAgICAgIC8vINCS0YHRgtCw0LLQu9GP0LXQvCDQv9C10YDQtdC0INCy0YLQvtGA0L7QuSDQutC90L7Qv9C60L7QuSAo0L/RgNC10LTQv9C+0LvQsNCz0LDRjywg0YfRgtC+INGN0YLQviBQbGF5KSDQuNC70Lgg0LIg0LrQvtC90LXRhlxuICAgICAgICBkaXNwbGF5Q29udGFpbmVyLmluc2VydEJlZm9yZShcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheSxcbiAgICAgICAgICBkaXNwbGF5Q29udGFpbmVyLmNoaWxkcmVuWzFdIHx8IG51bGxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWVudUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheSk7IC8vINC60YDQsNC50L3QuNC5INGB0LvRg9GH0LDQuVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheSgpOyAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0YLQtdC60YHRgiDQv9C+INGD0LzQvtC70YfQsNC90LjRjlxuICB9XG5cbiAgc2V0dXBDaGFyYWN0ZXJJbWFnZXMoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXJhY3RlclBhbmVsIHx8ICF0aGlzLmNoYXJhY3RlckdyaWQpIHtcbiAgICAgIGNvbnNvbGUud2FybignW01lbnUgc2V0dXBDaGFyYWN0ZXJJbWFnZXNdIENoYXJhY3RlciBwYW5lbCBvciBncmlkIG5vdCBmb3VuZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmNoYXJhY3RlckltYWdlU291cmNlcyB8fCBPYmplY3Qua2V5cyh0aGlzLmNoYXJhY3RlckltYWdlU291cmNlcykubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tNZW51IHNldHVwQ2hhcmFjdGVySW1hZ2VzXSBObyBjaGFyYWN0ZXIgaW1hZ2Ugc291cmNlcyBwcm92aWRlZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFyYWN0ZXJDYXJkcyA9IHRoaXMuY2hhcmFjdGVyR3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhcmFjdGVyLWNhcmQnKTtcbiAgICBpZiAoY2hhcmFjdGVyQ2FyZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tNZW51IHNldHVwQ2hhcmFjdGVySW1hZ2VzXSBObyBjaGFyYWN0ZXIgY2FyZHMgZm91bmQgaW4gdGhlIGdyaWQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2hhcmFjdGVyQ2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgY2hhcmFjdGVyS2V5ID0gY2FyZC5kYXRhc2V0LmNoYXJhY3RlcjtcbiAgICAgIGNvbnN0IGltZ0VsZW1lbnQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXItcHJldmlldyBpbWcnKTtcblxuICAgICAgaWYgKGltZ0VsZW1lbnQgJiYgdGhpcy5jaGFyYWN0ZXJJbWFnZVNvdXJjZXNbY2hhcmFjdGVyS2V5XSkge1xuICAgICAgICBpbWdFbGVtZW50LnNyYyA9IHRoaXMuY2hhcmFjdGVySW1hZ2VTb3VyY2VzW2NoYXJhY3RlcktleV07XG4gICAgICB9IGVsc2UgaWYgKGltZ0VsZW1lbnQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBbTWVudSBzZXR1cENoYXJhY3RlckltYWdlc10gSW1hZ2UgZWxlbWVudCBmb3VuZCwgYnV0IG5vIHNvdXJjZSBmb3IgY2hhcmFjdGVyOiAke2NoYXJhY3RlcktleX1gXG4gICAgICAgICk7XG4gICAgICAgIGltZ0VsZW1lbnQuYWx0ID0gYCR7Y2hhcmFjdGVyS2V5fSBwcmV2aWV3IG5vdCBhdmFpbGFibGVgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS53YXJuKGBbTWVudSBzZXR1cENoYXJhY3RlckltYWdlc10gTm8gaW1nIHRhZyBmb3VuZCBpbiBjYXJkIGZvciBjaGFyYWN0ZXI6ICR7Y2hhcmFjdGVyS2V5fWApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8g0J7QsdGA0LDQsdC+0YLQutCwINC/0LXRgNCy0L7Qs9C+INCy0LfQsNC40LzQvtC00LXQudGB0YLQstC40Y8g0LTQu9GPINC/0L7Qu9C40YLQuNC60Lgg0LDQstGC0L7QstC+0YHQv9GA0L7QuNC30LLQtdC00LXQvdC40Y9cbiAgaGFuZGxlRmlyc3RJbnRlcmFjdGlvbigpIHtcbiAgICBpZiAoIXRoaXMudXNlckludGVyYWN0ZWQpIHtcbiAgICAgIHRoaXMudXNlckludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2coJ1tNZW51XSBGaXJzdCB1c2VyIGludGVyYWN0aW9uIHJlY29yZGVkLicpO1xuICAgICAgLy8gQXVkaW9NYW5hZ2VyINCx0YPQtNC10YIg0YHQvtC30LTQsNC9INCyIEdhbWUsINC90L4g0Y3RgtC+INCy0LfQsNC40LzQvtC00LXQudGB0YLQstC40LUg0LLQsNC20L3QviDQtNC70Y8g0LHRgNCw0YPQt9C10YDQsFxuICAgIH1cbiAgfVxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGFkZEludGVyYWN0aXZlTGlzdGVuZXIgPSAoZWxlbWVudCwgZXZlbnRUeXBlLCBoYW5kbGVyRm4pID0+IHtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIChldmVudCkgPT4ge1xuICAgICAgICAgIHRoaXMuaGFuZGxlRmlyc3RJbnRlcmFjdGlvbigpOyAvLyDQoNC10LPQuNGB0YLRgNC40YDRg9C10Lwg0LLQt9Cw0LjQvNC+0LTQtdC50YHRgtCy0LjQtVxuICAgICAgICAgIGhhbmRsZXJGbi5jYWxsKHRoaXMsIGV2ZW50KTsgLy8g0JLRi9C30YvQstCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQulxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUud2FybihgW01lbnUgYWRkRXZlbnRMaXN0ZW5lcnNdIEVsZW1lbnQgbm90IGZvdW5kIGZvciBsaXN0ZW5lcjogJHtlbGVtZW50fWApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBhZGRJbnRlcmFjdGl2ZUxpc3RlbmVyKHRoaXMuc2V0dGluZ3NCdXR0b24sICdjbGljaycsIHRoaXMudG9nZ2xlU2V0dGluZ3MpO1xuICAgIGFkZEludGVyYWN0aXZlTGlzdGVuZXIodGhpcy5wbGF5QnV0dG9uLCAnY2xpY2snLCB0aGlzLnN0YXJ0R2FtZSk7XG4gICAgYWRkSW50ZXJhY3RpdmVMaXN0ZW5lcih0aGlzLmNoYXJhY3RlckJ1dHRvbiwgJ2NsaWNrJywgdGhpcy5vcGVuQ2hhcmFjdGVyTW9kYWwpO1xuXG4gICAgaWYgKHRoaXMuY2xvc2VTZXR0aW5nc0J1dHRvbikge1xuICAgICAgdGhpcy5jbG9zZVNldHRpbmdzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZVNldHRpbmdzKCkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zZXR0aW5nc1BhbmVsKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tNZW51IGFkZEV2ZW50TGlzdGVuZXJzXSBDbG9zZSBidXR0b24gZm9yIHNldHRpbmdzIHBhbmVsIG5vdCBmb3VuZC4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jbG9zZUNoYXJhY3RlclBhbmVsQnV0dG9uKSB7XG4gICAgICB0aGlzLmNsb3NlQ2hhcmFjdGVyUGFuZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlQ2hhcmFjdGVyTW9kYWwoKSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNoYXJhY3RlclBhbmVsKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tNZW51IGFkZEV2ZW50TGlzdGVuZXJzXSBDbG9zZSBidXR0b24gZm9yIGNoYXJhY3RlciBwYW5lbCBub3QgZm91bmQuJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubXVzaWNWb2x1bWUpIHtcbiAgICAgIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC90LDRh9Cw0LvRjNC90L7QtSDQt9C90LDRh9C10L3QuNC1INC40LcgbG9jYWxTdG9yYWdlLCDQtdGB0LvQuCBBdWRpb01hbmFnZXIg0LXRidC1INC90LUg0L/RgNC40YjQtdC7XG4gICAgICBpZiAoIXRoaXMuYXVkaW9NYW5hZ2VySW5zdGFuY2UpIHtcbiAgICAgICAgY29uc3Qgc2F2ZWRWb2x1bWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXVzaWNWb2x1bWUnKTtcbiAgICAgICAgaWYgKHNhdmVkVm9sdW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5tdXNpY1ZvbHVtZS52YWx1ZSA9IHBhcnNlRmxvYXQoc2F2ZWRWb2x1bWUpICogMTAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubXVzaWNWb2x1bWUudmFsdWUgPSA1MDsgLy8g0JTQtdGE0L7Qu9GC0L3QvtC1INC30L3QsNGH0LXQvdC40LUg0LPRgNC+0LzQutC+0YHRgtC4XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5tdXNpY1ZvbHVtZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlRmlyc3RJbnRlcmFjdGlvbigpOyAvLyDQk9GA0L7QvNC60L7RgdGC0Ywg0YLQvtC20LUg0LLQt9Cw0LjQvNC+0LTQtdC50YHRgtCy0LjQtVxuICAgICAgICBjb25zdCBuZXdWb2x1bWUgPSBwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSAvIDEwMDtcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9NYW5hZ2VySW5zdGFuY2UpIHtcbiAgICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlckluc3RhbmNlLnNldE11c2ljVm9sdW1lKG5ld1ZvbHVtZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtNZW51XSBNdXNpYyB2b2x1bWUgY2hhbmdlZCB2aWEgc2xpZGVyIHRvOiAke25ld1ZvbHVtZX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDQldGB0LvQuCBBdWRpb01hbmFnZXIg0LXRidC1INC90LUg0LfQtNC10YHRjCwg0YHQvtGF0YDQsNC90Y/QtdC8INCyIGxvY2FsU3RvcmFnZSwgR2FtZS0+QXVkaW9NYW5hZ2VyINC/0L7QtNGF0LLQsNGC0LjRglxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtdXNpY1ZvbHVtZScsIG5ld1ZvbHVtZS50b1N0cmluZygpKTtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAnW01lbnVdIE11c2ljIHZvbHVtZSBzbGlkZXIgY2hhbmdlZCwgQXVkaW9NYW5hZ2VyIG5vdCBhdmFpbGFibGUuIFNhdmVkIHRvIGxvY2FsU3RvcmFnZS4nXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2Z4Vm9sdW1lKSB7XG4gICAgICAvKiAuLi4g0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPIFNGWCAuLi4gKi9cbiAgICB9XG5cbiAgICBpZiAodGhpcy5jaGFyYWN0ZXJHcmlkKSB7XG4gICAgICB0aGlzLmNoYXJhY3RlckdyaWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2xpY2tlZENhcmQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLmNoYXJhY3Rlci1jYXJkJyk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjbGlja2VkQ2FyZCAmJlxuICAgICAgICAgIHRoaXMuY2hhcmFjdGVyUGFuZWwgJiZcbiAgICAgICAgICB0aGlzLmNoYXJhY3RlclBhbmVsLmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMuaGFuZGxlRmlyc3RJbnRlcmFjdGlvbigpO1xuICAgICAgICAgIHRoaXMuc2VsZWN0Q2hhcmFjdGVyKGNsaWNrZWRDYXJkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgb3BlbkNoYXJhY3Rlck1vZGFsKCkge1xuICAgIGlmICghdGhpcy5jaGFyYWN0ZXJQYW5lbCkge1xuICAgICAgY29uc29sZS5lcnJvcignQ2hhcmFjdGVyIHBhbmVsIG5vdCBmb3VuZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jaGFyYWN0ZXJQYW5lbC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3NQYW5lbD8uY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHRoaXMuY2xvc2VTZXR0aW5ncygpO1xuICAgIHRoaXMuX2Vuc3VyZU92ZXJsYXkoKS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gIH1cblxuICBjbG9zZUNoYXJhY3Rlck1vZGFsKCkge1xuICAgIHRoaXMuY2hhcmFjdGVyUGFuZWw/LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICB0aGlzLm92ZXJsYXk/LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgfVxuXG4gIHNlbGVjdENoYXJhY3RlcihjYXJkRWxlbWVudCkge1xuICAgIGlmICghdGhpcy5jaGFyYWN0ZXJHcmlkIHx8ICFjYXJkRWxlbWVudD8uZGF0YXNldD8uY2hhcmFjdGVyKSByZXR1cm47XG4gICAgdGhpcy5zZWxlY3RlZENoYXJhY3RlciA9IGNhcmRFbGVtZW50LmRhdGFzZXQuY2hhcmFjdGVyO1xuXG4gICAgdGhpcy5jaGFyYWN0ZXJHcmlkXG4gICAgICAucXVlcnlTZWxlY3RvckFsbCgnLmNoYXJhY3Rlci1jYXJkJylcbiAgICAgIC5mb3JFYWNoKChjKSA9PiBjLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpO1xuICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG5cbiAgICBpZiAodGhpcy5wbGF5QnV0dG9uKSB0aGlzLnBsYXlCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5KCk7XG4gICAgdGhpcy5jbG9zZUNoYXJhY3Rlck1vZGFsKCk7XG4gICAgVUlNYW5hZ2VyLmZsYXNoTWVzc2FnZShcbiAgICAgIGBDaGFyYWN0ZXIgJHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYXJhY3Rlci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXIuc2xpY2UoMSlcbiAgICAgIH0gc2VsZWN0ZWQhYCxcbiAgICAgICdzdWNjZXNzJyxcbiAgICAgIDIwMDBcbiAgICApO1xuICB9XG5cbiAgdXBkYXRlU2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5KCkge1xuICAgIGlmICghdGhpcy5zZWxlY3RlZENoYXJhY3RlckRpc3BsYXkpIHJldHVybjtcbiAgICBpZiAoXG4gICAgICB0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyICYmXG4gICAgICB0aGlzLmNoYXJhY3RlckltYWdlU291cmNlcyAmJlxuICAgICAgdGhpcy5jaGFyYWN0ZXJJbWFnZVNvdXJjZXNbdGhpcy5zZWxlY3RlZENoYXJhY3Rlcl1cbiAgICApIHtcbiAgICAgIGNvbnN0IGNoYXJhY3RlcktleSA9IHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXI7XG4gICAgICBjb25zdCBpbWdTcmMgPSB0aGlzLmNoYXJhY3RlckltYWdlU291cmNlc1tjaGFyYWN0ZXJLZXldO1xuICAgICAgbGV0IGRpc3BsYXllZE5hbWUgPSBjaGFyYWN0ZXJLZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjaGFyYWN0ZXJLZXkuc2xpY2UoMSk7XG5cbiAgICAgIC8vINCf0YvRgtCw0LXQvNGB0Y8g0L/QvtC70YPRh9C40YLRjCDQsdC+0LvQtdC1INC/0L7Qu9C90L7QtSDQuNC80Y8g0LjQtyDQutCw0YDRgtC+0YfQutC4XG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJHcmlkKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkQ2FyZEgzID0gdGhpcy5jaGFyYWN0ZXJHcmlkLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgYC5jaGFyYWN0ZXItY2FyZFtkYXRhLWNoYXJhY3Rlcj1cIiR7Y2hhcmFjdGVyS2V5fVwiXSBoM2BcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHNlbGVjdGVkQ2FyZEgzKSBkaXNwbGF5ZWROYW1lID0gc2VsZWN0ZWRDYXJkSDMudGV4dENvbnRlbnQ7XG4gICAgICB9XG4gICAgICB0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheS5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCIke2ltZ1NyY31cIiBhbHQ9XCIke2Rpc3BsYXllZE5hbWV9XCIgY2xhc3M9XCJzZWxlY3RlZC1jaGFyLXByZXZpZXctaW1nXCI+IDxzcGFuIGNsYXNzPVwic2VsZWN0ZWQtY2hhci1uYW1lIGNoYXItbmFtZS0ke2NoYXJhY3RlcktleX1cIj4ke2Rpc3BsYXllZE5hbWV9PC9zcGFuPmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXJEaXNwbGF5LmlubmVySFRNTCA9XG4gICAgICAgICc8c3BhbiBzdHlsZT1cImNvbG9yOiNhYWE7XCI+Tm8gY2hhcmFjdGVyIHNlbGVjdGVkPC9zcGFuPic7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlU2V0dGluZ3MoKSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzUGFuZWwpIHJldHVybjtcbiAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLnNldHRpbmdzUGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJyk7XG4gICAgaXNWaXNpYmxlID8gdGhpcy5jbG9zZVNldHRpbmdzKCkgOiB0aGlzLm9wZW5TZXR0aW5ncygpO1xuICB9XG5cbiAgb3BlblNldHRpbmdzKCkge1xuICAgIGlmICghdGhpcy5zZXR0aW5nc1BhbmVsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTZXR0aW5ncyBwYW5lbCBub3QgZm91bmQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0dGluZ3NQYW5lbC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgaWYgKHRoaXMuY2hhcmFjdGVyUGFuZWw/LmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpKSB0aGlzLmNsb3NlQ2hhcmFjdGVyTW9kYWwoKTtcbiAgICB0aGlzLl9lbnN1cmVPdmVybGF5KCkuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpOyAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDQvtCy0LXRgNC70LXQuSDQuCDQtNC70Y8g0L3QsNGB0YLRgNC+0LXQulxuXG4gICAgaWYgKHRoaXMubXVzaWNWb2x1bWUgJiYgdGhpcy5hdWRpb01hbmFnZXJJbnN0YW5jZSkge1xuICAgICAgdGhpcy5tdXNpY1ZvbHVtZS52YWx1ZSA9IHRoaXMuYXVkaW9NYW5hZ2VySW5zdGFuY2UuZ2V0TXVzaWNWb2x1bWUoKSAqIDEwMDtcbiAgICB9IGVsc2UgaWYgKHRoaXMubXVzaWNWb2x1bWUpIHtcbiAgICAgIGNvbnN0IHNhdmVkVm9sdW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ211c2ljVm9sdW1lJyk7XG4gICAgICB0aGlzLm11c2ljVm9sdW1lLnZhbHVlID0gc2F2ZWRWb2x1bWUgPyBwYXJzZUZsb2F0KHNhdmVkVm9sdW1lKSAqIDEwMCA6IDUwO1xuICAgIH1cbiAgfVxuXG4gIGNsb3NlU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5nc1BhbmVsPy5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgdGhpcy5vdmVybGF5Py5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7IC8vINCh0LrRgNGL0LLQsNC10Lwg0L7QstC10YDQu9C10LlcbiAgfVxuXG4gIF9lbnN1cmVPdmVybGF5KCkge1xuICAgIGlmICghdGhpcy5vdmVybGF5KSB7XG4gICAgICB0aGlzLm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRoaXMub3ZlcmxheS5jbGFzc05hbWUgPSAndWktbW9kYWwtb3ZlcmxheSc7IC8vINCe0LHRidC40Lkg0LrQu9Cw0YHRgSDQtNC70Y8g0L7QstC10YDQu9C10Y9cbiAgICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIC8vINCX0LDQutGA0YvQstCw0LXQvCDQsNC60YLQuNCy0L3Rg9GOINC80L7QtNCw0LvQutGDINC/0YDQuCDQutC70LjQutC1INC90LAg0L7QstC10YDQu9C10LlcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLm92ZXJsYXkpIHtcbiAgICAgICAgICBpZiAodGhpcy5jaGFyYWN0ZXJQYW5lbD8uY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHRoaXMuY2xvc2VDaGFyYWN0ZXJNb2RhbCgpO1xuICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzUGFuZWw/LmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpKSB0aGlzLmNsb3NlU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm92ZXJsYXk7XG4gIH1cblxuICBhc3luYyBzdGFydEdhbWUoKSB7XG4gICAgaWYgKCF0aGlzLnVzZXJJbnRlcmFjdGVkKSB7XG4gICAgICBVSU1hbmFnZXIuZmxhc2hNZXNzYWdlKFxuICAgICAgICAnUGxlYXNlIGludGVyYWN0IHdpdGggdGhlIG1lbnUgZmlyc3QgKGUuZy4sIGNsaWNrIGEgYnV0dG9uIG9yIGNob29zZSBhIGNoYXJhY3RlcikuJyxcbiAgICAgICAgJ3dhcm5pbmcnLFxuICAgICAgICAzMDAwXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXIpIHtcbiAgICAgIFVJTWFuYWdlci5mbGFzaE1lc3NhZ2UoJ1BsZWFzZSBzZWxlY3QgYSBjaGFyYWN0ZXIgZmlyc3QhJywgJ3dhcm5pbmcnLCAyNTAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBsb2FkaW5nT3ZlcmxheSA9IFVJTWFuYWdlci5nZXRMb2FkaW5nT3ZlcmxheSgpOyAvLyBVSU1hbmFnZXIg0YPQv9GA0LDQstC70Y/QtdGCINC40LxcbiAgICBpZiAobG9hZGluZ092ZXJsYXkpIGxvYWRpbmdPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcblxuICAgIHRoaXMuaGlkZSgpOyAvLyDQodC60YDRi9Cy0LDQtdC8INC80LXQvdGOXG5cbiAgICBjb25zdCBnYW1lQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzJyk7XG4gICAgaWYgKGdhbWVDYW52YXMpIHtcbiAgICAgIGdhbWVDYW52YXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IC8vINCf0L7QutCw0LfRi9Cy0LDQtdC8INC60LDQvdCy0LDRgVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbTWVudV0gQ1JJVElDQUw6ICNnYW1lLWNhbnZhcyBub3QgZm91bmQhJyk7XG4gICAgICBpZiAobG9hZGluZ092ZXJsYXkpIGxvYWRpbmdPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgIHRoaXMuc2hvdygpOyAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDQvNC10L3RjiDQvtCx0YDQsNGC0L3Qviwg0LXRgdC70Lgg0LrQsNC90LLQsNGB0LAg0L3QtdGCXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vINCV0YHQu9C4INC10YHRgtGMINGB0YLQsNGA0LDRjyDQuNCz0YDQsCwg0L7RgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0LXRkSAo0YXQvtGC0Y8gcmVsb2FkINC90LAgR2FtZSBPdmVyINC70YPRh9GI0LUpXG4gICAgICBpZiAoY3VycmVudEdhbWVJbnN0YW5jZSAmJiB0eXBlb2YgY3VycmVudEdhbWVJbnN0YW5jZS5zdG9wR2FtZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmxvZygnW01lbnVdIFN0b3BwaW5nIHByZXZpb3VzIGdhbWUgaW5zdGFuY2UuJyk7XG4gICAgICAgIGN1cnJlbnRHYW1lSW5zdGFuY2Uuc3RvcEdhbWUoKTsgLy8g0K3RgtC+INC/0L7QutCw0LbQtdGCIEdhbWUgT3ZlciDRjdC60YDQsNC9INGB0YLQsNGA0L7QuSDQuNCz0YDRi1xuICAgICAgICBjdXJyZW50R2FtZUluc3RhbmNlID0gbnVsbDsgLy8g0J7Rh9C40YnQsNC10Lwg0YHRgdGL0LvQutGDXG4gICAgICAgIC8vINCc0L7QttC10YIg0L/QvtGC0YDQtdCx0L7QstCw0YLRjNGB0Y8g0L3QtdCx0L7Qu9GM0YjQsNGPINC30LDQtNC10YDQttC60LAsINGH0YLQvtCx0YsgRE9NINGB0YLQsNGA0L7QuSDQuNCz0YDRiyDRg9GB0L/QtdC7INC+0YfQuNGB0YLQuNGC0YzRgdGPLFxuICAgICAgICAvLyDQvdC+INC+0LHRi9GH0L3QviByZWxvYWQoKSDQvdCwIEdhbWUgT3ZlciDRgNC10YjQsNC10YIg0Y3RgtGDINC/0YDQvtCx0LvQtdC80YMg0LvRg9GH0YjQtS5cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYFtNZW51XSBDcmVhdGluZyBuZXcgR2FtZSBpbnN0YW5jZSB3aXRoIGNoYXJhY3RlcjogJHt0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyfWApO1xuICAgICAgY3VycmVudEdhbWVJbnN0YW5jZSA9IG5ldyBHYW1lKHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXIpOyAvLyDQn9C10YDQtdC00LDQtdC8INGG0LLQtdGCXG5cbiAgICAgIC8vINCSINC60L7QvdGB0YLRgNGD0LrRgtC+0YDQtSBHYW1lINGB0L7Qt9C00LDQtdGC0YHRjyBBdWRpb01hbmFnZXIuIEdhbWUg0LTQvtC70LbQtdC9INC/0LXRgNC10LTQsNGC0Ywg0LXQs9C+INC+0LHRgNCw0YLQvdC+INCyIE1lbnUuXG4gICAgICAvLyDQlNC70Y8g0Y3RgtC+0LPQviDQsiBHYW1lLmpzINC00L7Qu9C20LXQvSDQsdGL0YLRjCDQstGL0LfQvtCyIG1lbnVJbnN0YW5jZS5zZXRBdWRpb01hbmFnZXIodGhpcy5hdWRpb01hbmFnZXIpO1xuICAgICAgLy8g0K3RgtC+INGC0YDQtdCx0YPQtdGCLCDRh9GC0L7QsdGLIEdhbWUg0LfQvdCw0Lsg0L4gbWVudUluc3RhbmNlLiDQn9GA0L7RidC1LCDQtdGB0LvQuCBHYW1lINGB0LDQvCDRg9C/0YDQsNCy0LvRj9C10YIgVUkg0LPRgNC+0LzQutC+0YHRgtC4XG4gICAgICAvLyDRh9C10YDQtdC3IFVJTWFuYWdlciwg0LjQu9C4INC10YHQu9C4IE1lbnUg0L3QsNC/0YDRj9C80YPRjiDQuNGB0L/QvtC70YzQt9GD0LXRgiBsb2NhbFN0b3JhZ2Ug0LTQu9GPINC90LDRh9Cw0LvRjNC90L7QuSDRg9GB0YLQsNC90L7QstC60Lgg0LPRgNC+0LzQutC+0YHRgtC4LFxuICAgICAgLy8g0LAgQXVkaW9NYW5hZ2VyINC/0YDQuCDRgdGC0LDRgNGC0LUg0YfQuNGC0LDQtdGCINC40LcgbG9jYWxTdG9yYWdlLlxuXG4gICAgICAvLyDQktCQ0JbQndCeOiBHYW1lLmpzINC00L7Qu9C20LXQvSDRgdCw0Lwg0LLRi9C30LLQsNGC0Ywg0YHQstC+0LkgdHJpZ2dlckdhbWVTdGFydCgpINC/0L7RgdC70LUg0YHQstC+0LXQuSDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuC5cbiAgICAgIC8vIE1lbnUuanMg0L/RgNC+0YHRgtC+INGB0L7Qt9C00LDQtdGCINGN0LrQt9C10LzQv9C70Y/RgCBHYW1lLlxuICAgICAgLy8g0JXRgdC70LggR2FtZSDQvdC1INC30LDQv9GD0YHQutCw0LXRgiB0cmlnZ2VyR2FtZVN0YXJ0KCkg0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60Lgg0LjQtyDQutC+0L3RgdGC0YDRg9C60YLQvtGA0LAgKNGH0YLQviDRgdC10LnRh9Cw0YEg0YLQsNC6KSxcbiAgICAgIC8vINGC0L4gTWVudSDQtNC+0LvQttC10L0g0LXQs9C+INCy0YvQt9Cy0LDRgtGMOlxuICAgICAgaWYgKGN1cnJlbnRHYW1lSW5zdGFuY2UgJiYgdHlwZW9mIGN1cnJlbnRHYW1lSW5zdGFuY2UudHJpZ2dlckdhbWVTdGFydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBhd2FpdCBjdXJyZW50R2FtZUluc3RhbmNlLnRyaWdnZXJHYW1lU3RhcnQoKTsgLy8g0JfQsNC/0YPRgdC60LDQtdC8INC/0YDQvtGG0LXRgdGBINC30LDQs9GA0YPQt9C60Lgg0Lgg0YHRgtCw0YDRgtCwINC40LPRgNGLXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dhbWUgaW5zdGFuY2UgY3JlYXRlZCwgYnV0IHRyaWdnZXJHYW1lU3RhcnQgaXMgbm90IGF2YWlsYWJsZS4nKTtcbiAgICAgIH1cblxuICAgICAgLy8g0J/QvtGB0LvQtSDRg9GB0L/QtdGI0L3QvtCz0L4gY3VycmVudEdhbWVJbnN0YW5jZS50cmlnZ2VyR2FtZVN0YXJ0KClcbiAgICAgIC8vIGxvYWRpbmdPdmVybGF5INCx0YPQtNC10YIg0YHQutGA0YvRgiDQstC90YPRgtGA0Lgg0LvQvtCz0LjQutC4IEdhbWUuanNcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW01lbnVdIEVycm9yIGR1cmluZyBnYW1lIGluaXRpYWxpemF0aW9uIG9yIHN0YXJ0OicsIGVycm9yKTtcbiAgICAgIFVJTWFuYWdlci5mbGFzaE1lc3NhZ2UoYEdhbWUgU3RhcnQgRmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ2Vycm9yJywgMTAwMDApO1xuICAgICAgaWYgKGxvYWRpbmdPdmVybGF5KSBsb2FkaW5nT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgICB0aGlzLnNob3coKTsgLy8g0J/QvtC60LDQt9GL0LLQsNC10Lwg0LzQtdC90Y4g0L7QsdGA0LDRgtC90L5cbiAgICAgIGlmIChnYW1lQ2FudmFzKSBnYW1lQ2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vINCh0LrRgNGL0LLQsNC10Lwg0LrQsNC90LLQsNGBXG4gICAgICBjdXJyZW50R2FtZUluc3RhbmNlID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBzaG93KCkge1xuICAgIGlmICh0aGlzLm1lbnVDb250YWluZXIpIHRoaXMubWVudUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyAvLyDQuNC70LggJ2Jsb2NrJ1xuICAgIC8vINCj0LHQtdC00LjQvNGB0Y8sINGH0YLQviDQuNCz0YDQvtCy0YvQtSDRjdC70LXQvNC10L3RgtGLINGB0LrRgNGL0YLRiywg0LXRgdC70Lgg0L/QvtC60LDQt9GL0LLQsNC10Lwg0LzQtdC90Y5cbiAgICBjb25zdCBnYW1lQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzJyk7XG4gICAgaWYgKGdhbWVDYW52YXMpIGdhbWVDYW52YXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBVSU1hbmFnZXIuaGlkZUdhbWVVSSgpOyAvLyDQodC60YDRi9Cy0LDQtdGCINC60L7QvdGC0YDQvtC70YssINC+0YfQutC4LCDRgtCw0LnQvNC10YBcbiAgICBVSU1hbmFnZXIuaGlkZUdhbWVPdmVyU2NyZWVuKCk7XG4gICAgLy8g0JfQsNCz0YDRg9C30L7Rh9C90YvQuSDQvtCy0LXRgNC70LXQuSDRgtC+0LbQtSDQu9GD0YfRiNC1INGB0LrRgNGL0YLRjCwg0LXRgdC70Lgg0LzRiyDQsiDQvNC10L3RjlxuICAgIGNvbnN0IGxvYWRpbmdPdmVybGF5ID0gVUlNYW5hZ2VyLmdldExvYWRpbmdPdmVybGF5KCk7XG4gICAgaWYgKGxvYWRpbmdPdmVybGF5KSBsb2FkaW5nT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIGlmICh0aGlzLm1lbnVDb250YWluZXIpIHRoaXMubWVudUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG59XG5cbi8vINCt0LrRgdC/0L7RgNGC0LjRgNGD0LXQvCBNZW51INC4IGN1cnJlbnRHYW1lSW5zdGFuY2UgKNC10YHQu9C4INC+0L0g0L3Rg9C20LXQvSDQs9C00LUt0YLQviDQtdGJ0LUsINGF0L7RgtGPINC70YPRh9GI0LUg0LjQt9Cx0LXQs9Cw0YLRjCDQs9C70L7QsdCw0LvRjNC90YvRhSDRgdGB0YvQu9C+0LopXG5leHBvcnQgeyBjdXJyZW50R2FtZUluc3RhbmNlIH07XG4iLCIvLyDQn9GA0LXQtNC/0L7Qu9C+0LbQuNC8LCDRjdGC0L4gc3JjL21haW4uanNcbmltcG9ydCB7IE1lbnUgfSBmcm9tICcuL1VJL01lbnUuanMnO1xuXG5pbXBvcnQgJy4uL2Nzcy9zdHlsZXMuY3NzJzsgLy8g0J/Rg9GC0Ywg0LogQ1NTICjQtdGB0LvQuCDQvtC9INGDINGC0LXQsdGPINC10YHRgtGMKVxuLy8g0J/Rg9GC0Lgg0Log0LjQt9C+0LHRgNCw0LbQtdC90LjRj9C8INC00L7Qu9C20L3RiyDQsdGL0YLRjCDQvtGC0L3QvtGB0LjRgtC10LvRjNC90L4gbWFpbi5qc1xuaW1wb3J0IHJlZFN0dWRlbnRJbWcgZnJvbSAnLi4vYXNzZXRzL2ltYWdlcy9yZWQucG5nJzsgLy8g0J/RgNC+0LLQtdGA0Ywg0Y3RgtC4INC/0YPRgtC4IVxuaW1wb3J0IGJsdWVTdHVkZW50SW1nIGZyb20gJy4uL2Fzc2V0cy9pbWFnZXMvYmx1ZS5wbmcnO1xuaW1wb3J0IHllbGxvd1N0dWRlbnRJbWcgZnJvbSAnLi4vYXNzZXRzL2ltYWdlcy95ZWxsb3cucG5nJztcbmltcG9ydCBncmVlblN0dWRlbnRJbWcgZnJvbSAnLi4vYXNzZXRzL2ltYWdlcy9ncmVlbi5wbmcnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnW21haW4uanNdIERPTUNvbnRlbnRMb2FkZWQuIEluaXRpYWxpemluZyBNZW51Li4uJyk7XG5cbiAgY29uc3QgY2hhcmFjdGVySW1hZ2VTb3VyY2VzID0ge1xuICAgIHJlZDogcmVkU3R1ZGVudEltZyxcbiAgICBibHVlOiBibHVlU3R1ZGVudEltZyxcbiAgICB5ZWxsb3c6IHllbGxvd1N0dWRlbnRJbWcsXG4gICAgZ3JlZW46IGdyZWVuU3R1ZGVudEltZyxcbiAgfTtcblxuICBuZXcgTWVudShjaGFyYWN0ZXJJbWFnZVNvdXJjZXMpOyAvLyBNZW51INGC0LXQv9C10YDRjCDQs9C70LDQstC90YvQuSDQutC+0L3RgtGA0L7Qu9C70LXRgCBVSSDQtNC70Y8g0LzQtdC90Y5cbiAgY29uc29sZS5sb2coJ1ttYWluLmpzXSBNZW51IGluc3RhbmNlIGNyZWF0ZWQuJyk7XG59KTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0IiwidGFnTmFtZSIsInRvVXBwZXJDYXNlIiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiaSIsInRlc3QiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiSW5wdXRNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJrZXlzIiwidXAiLCJkb3duIiwibGVmdCIsInJpZ2h0Iiwic2V0S2V5Iiwia2V5IiwiaXNQcmVzc2VkIiwiaGFzT3duUHJvcGVydHkiLCJnZXRJbnB1dERpcmVjdGlvbiIsIngiLCJ5IiwiR2FtZVN0YXRlIiwiTE9BRElORyIsIk1FTlUiLCJQTEFZSU5HIiwiQVNLSU5HX1FVRVNUSU9OIiwiU0VMRUNUSU5HX0ZMT09SIiwiVFJBTlNJVElPTklORyIsIkdBTUVfT1ZFUiIsInF1ZXN0aW9ucyIsInF1ZXN0aW9uIiwib3B0aW9ucyIsImNvcnJlY3RBbnN3ZXIiLCJVSU1hbmFnZXIiLCJzdGF0aWMiLCJzZXRHYW1lcGxheU1hbmFnZXIiLCJtYW5hZ2VyIiwiZ2FtZXBsYXlNYW5hZ2VySW5zdGFuY2UiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJpbml0aWFsaXplVUkiLCJpbnB1dE1hbmFnZXIiLCJ3YXJuIiwiY3JlYXRlQ29udHJvbHMiLCJjcmVhdGVRdWVzdGlvblVJIiwiY3JlYXRlRmxvb3JTZWxlY3Rpb25VSSIsImVuc3VyZUZsYXNoTWVzc2FnZUNvbnRhaW5lciIsImdldExvYWRpbmdPdmVybGF5IiwiY3JlYXRlR2FtZU92ZXJTY3JlZW4iLCJpbml0aWFsaXplVGltZXIiLCJjb250cm9sc0NvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiYm9keSIsImFwcGVuZENoaWxkIiwiaW5uZXJIVE1MIiwiZGlyZWN0aW9uIiwiaWNvbiIsImdyaWRBcmVhIiwiZm9yRWFjaCIsImJ0biIsImNsYXNzTmFtZSIsInRleHRDb250ZW50Iiwic3R5bGUiLCJkYXRhc2V0Iiwic3RhcnQiLCJwcmV2ZW50RGVmYXVsdCIsImVuZCIsInJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwic2NvcmVEaXNwIiwic2NvcmVFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInRhcmdldEVsZW1lbnQiLCJkaXYiLCJxdWVzdGlvbk92ZXJsYXkiLCJxdWVzdGlvblRleHRFbGVtZW50IiwiYW5zd2VyQnV0dG9uc0NvbnRhaW5lciIsImZsb29yU2VsZWN0aW9uUGFuZWwiLCJmbG9vckJ1dHRvbnNDb250YWluZXIiLCJmbGFzaE1lc3NhZ2VDb250YWluZXIiLCJmbGFzaE1lc3NhZ2UiLCJtZXNzYWdlIiwidHlwZSIsImR1cmF0aW9uIiwiY29udGFpbmVyIiwibXNnRWwiLCJtc2dJZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhclRpbWVvdXQiLCJmbGFzaE1lc3NhZ2VUaW1lb3V0cyIsInNldFRpbWVvdXQiLCJlbmRIYW5kbGVyIiwicHJvcGVydHlOYW1lIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwib25jZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJsb2FkaW5nT3ZlcmxheUVsZW1lbnQiLCJ0ZXh0IiwiZ2FtZU92ZXJTY3JlZW5FbGVtZW50IiwiZ2FtZU92ZXJUaXRsZUVsZW1lbnQiLCJjcmVhdG9yTmFtZXNMaXN0RWxlbWVudCIsImNsYXNzSW5mb0VsZW1lbnQiLCJyZXR1cm5Ub01lbnVCdXR0b25FbGVtZW50IiwibGVhZGVyYm9hcmRCb2R5IiwicmVsb2FkIiwic2hvd0dhbWVPdmVyU2NyZWVuIiwiaXNXaW4iLCJjcmVhdG9ycyIsImNsYXNzSW5mb1RleHQiLCJuYW1lIiwibGkiLCJ1cGRhdGVMZWFkZXJib2FyZCIsImhpZGVHYW1lVUkiLCJoaWRlUXVlc3Rpb24iLCJoaWRlRmxvb3JTZWxlY3Rpb25VSSIsImhpZGVHYW1lT3ZlclNjcmVlbiIsInNob3dRdWVzdGlvbiIsInF1ZXN0aW9uRGF0YSIsImhhbmRsZUFuc3dlciIsIm9wdGlvblRleHQiLCJpbmRleCIsInBhcnNlSW50IiwidGFyZ2V0Iiwic2hvd0Zsb29yU2VsZWN0aW9uVUkiLCJtaW5GbG9vciIsIm1heEZsb29yIiwiY3VycmVudEZsb29yIiwiaGFuZGxlRmxvb3JTZWxlY3Rpb24iLCJmbG9vciIsImRpc2FibGVkIiwidXBkYXRlU2NvcmUiLCJzY29yZSIsInNob3dHYW1lVUkiLCJjYW52YXMiLCJzY29yZURpc3BsYXkiLCJkaXNwbGF5IiwidGltZXJFbGVtZW50Iiwic2F2ZWREYXRhIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImxlYWRlcmJvYXJkRGF0YSIsIkpTT04iLCJwYXJzZSIsInJlbW92ZUl0ZW0iLCJzdGFydFRpbWVyIiwidGltZXJJbnRlcnZhbElkIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJnYW1lIiwiZ2FtZVN0YXRlIiwiZ2FtZVN0YXJ0VGltZSIsInVwZGF0ZVRpbWVyIiwiZWxhcHNlZCIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwicGFkU3RhcnQiLCJzdG9wVGltZXIiLCJ3YXNXaW4iLCJ0b3RhbFRpbWUiLCJ0b0ZpeGVkIiwicHVzaCIsInRpbWUiLCJkYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwic29ydCIsImEiLCJiIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNsaWNlIiwiZ29TY3JlZW4iLCJ0b3BTY29yZXMiLCJjZWxsIiwiaW5zZXJ0Um93IiwiaW5zZXJ0Q2VsbCIsImNvbFNwYW4iLCJ0ZXh0QWxpZ24iLCJydW4iLCJtaW5zIiwic2VjcyIsIm1pbGxzIiwicm93IiwiQ2hhcmFjdGVyIiwiRE9XTiIsIlJJR0hUIiwiVVAiLCJMRUZUIiwiY3R4Iiwic3ByaXRlVXJsIiwic3ByaXRlIiwiSW1hZ2UiLCJmcmFtZVNpemUiLCJmcmFtZUNvdW50Iiwic2NhbGUiLCJyZW5kZXJTaXplIiwic3BlZWQiLCJhbmltYXRpb25TcGVlZCIsImNvbGxpc2lvbkJveFdpZHRoUmF0aW8iLCJjb2xsaXNpb25Cb3hIZWlnaHRSYXRpbyIsImNvbGxpc2lvbkJveEZlZXRPZmZzZXRSYXRpbyIsImN1cnJlbnREaXJlY3Rpb24iLCJEaXJlY3Rpb24iLCJjdXJyZW50RnJhbWUiLCJpc01vdmluZyIsImxhc3RGcmFtZVRpbWUiLCJvbmxvYWQiLCJvbmVycm9yIiwidXBkYXRlQW5pbWF0aW9uIiwidGltZXN0YW1wIiwiZ2V0Q29sbGlzaW9uQm94IiwicG9zWCIsInBvc1kiLCJ3aWR0aCIsImhlaWdodCIsImhhbGZXaWR0aCIsImZlZXRPZmZzZXRZIiwidG9wIiwiYm90dG9tIiwiZHJhdyIsIm9mZnNldFgiLCJvZmZzZXRZIiwiY29tcGxldGUiLCJuYXR1cmFsSGVpZ2h0IiwiZnJhbWVYIiwiZnJhbWVZIiwic2NyZWVuWCIsInNjcmVlblkiLCJkcmF3SW1hZ2UiLCJCb29rIiwidGlsZVNpemUiLCJzaXplIiwiY29sbGVjdGVkIiwiaXNDb2xsZWN0ZWQiLCJib29rSW1hZ2UiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsInN0cm9rZVN0eWxlIiwic3Ryb2tlUmVjdCIsImZvbnQiLCJ0ZXh0QmFzZWxpbmUiLCJmaWxsVGV4dCIsInJhbmRvbUludCIsIm1pbiIsIm1heCIsImNlaWwiLCJzaW1wbGVIYXNoIiwic2VlZCIsImgiLCJpbXVsIiwiYWRqdXN0Q29sb3JCcmlnaHRuZXNzIiwiaGV4Q29sb3IiLCJmYWN0b3IiLCJyIiwicm91bmQiLCJNYXBSZW5kZXJlciIsInRpbGVDb2xvcnMiLCJiYXNlV2FsbENvbG9yIiwiYmFzZUNvcnJpZG9yQ29sb3IiLCJiYXNlUm9vbUZsb29yQ29sb3IiLCJsaWZ0Q29sb3IiLCJlcnJvckNvbG9yIiwicmVzZXRDb2xvckNhY2hlIiwiZ2V0VGlsZUNvbG9yIiwiYyIsInRpbGVWYWx1ZSIsInJvb21zIiwiY29sb3IiLCJtYXBEYXRhIiwibWFwIiwiYm9va3MiLCJsaWZ0UG9zaXRpb24iLCJjb2xzIiwicm93cyIsImN1cnJlbnRPZmZzZXRYIiwiY3VycmVudE9mZnNldFkiLCJzdGFydENvbCIsImVuZENvbCIsInN0YXJ0Um93IiwiZW5kUm93Iiwic2F2ZSIsImRyYXdCYXNlVGlsZXMiLCJkcmF3Um9vbURldGFpbHMiLCJkcmF3TGlmdERldGFpbHMiLCJkcmF3Qm9va3MiLCJyZXN0b3JlIiwic2hhZG93Q29sb3IiLCJ3YWxsRWRnZUNvbG9yRGFyayIsIndhbGxFZGdlQ29sb3JMaWdodCIsIndhbGxUb3BFZGdlQ29sb3IiLCJ1bmRlZmluZWQiLCJlZGdlU2l6ZSIsInJvb20iLCJjb2wiLCJyb29tU2NyZWVuWCIsInJvb21TY3JlZW5ZIiwicm9vbVNjcmVlblciLCJyb29tU2NyZWVuSCIsImZsb29yQ29sb3IiLCJmbG9vck51bSIsImZsb29yTnVtYmVyIiwicm9vbVNlZWQiLCJicmlnaHRuZXNzRmFjdG9yIiwibGluZVdpZHRoIiwiZHJhd1Jvb21EZWNvcmF0aW9ucyIsInRpbGVYIiwidGlsZVkiLCJidXR0b25SYWRpdXMiLCJidXR0b25YIiwiYnV0dG9uWSIsImJlZ2luUGF0aCIsImFyYyIsIlBJIiwiZmlsbCIsInciLCJ0cyIsIm1hcmdpbiIsIm9iak1hcmdpbiIsImRyYXdSZWN0IiwicngiLCJyeSIsInJ3IiwicmgiLCJvdXRsaW5lIiwic2NyZWVuVyIsInNjcmVlbkgiLCJkcmF3Q2lyY2xlIiwiY3giLCJjeSIsInJhZGl1cyIsInN0cm9rZSIsImRlc2tXIiwiZGVza0giLCJjaGFpckgiLCJzcGFjZVgiLCJzcGFjZVkiLCJyb3dZIiwiY29sWCIsInRhYmxlVyIsInRhYmxlSCIsImNhYmluZXRXIiwic2hlbGZXIiwic2hlbGZTcGFjaW5nIiwic3giLCJzaGVsZlkiLCJtb3ZlVG8iLCJsaW5lVG8iLCJ0YWJsZUxpYlgiLCJsYWJUYWJsZUgiLCJtZXRhbFNoZWxmVyIsIm1ldGFsU2hlbGZIIiwiYm94U2l6ZSIsImRlZmF1bHRCb29rU2l6ZSIsImJvb2siLCJib29rU2l6ZSIsImNvbnNpc3RlbnRMaWZ0Q29vcmRzIiwiREVGQVVMVF9HRU5fUEFSQU1TIiwibWluUm9vbVNpemUiLCJtYXhSb29tU2l6ZSIsImNvcnJpZG9yVGhpY2tuZXNzIiwibnVtUm9vbXMiLCJtYXhSb29tQXR0ZW1wdHMiLCJyb29tVHlwZVdlaWdodHMiLCJjbGFzc3Jvb20iLCJvZmZpY2UiLCJsaWJyYXJ5IiwiZ3ltIiwidXRpbGl0eSIsImxhYiIsInN0b3JhZ2UiLCJfY2FydmVDb3JyaWRvckJldHdlZW4iLCJyb29tQSIsInJvb21CIiwiY2VudGVyVGlsZVgiLCJheCIsImNlbnRlclRpbGVZIiwiYXkiLCJieCIsImJ5IiwiX2NhcnZlSG9yaXpvbnRhbENvcnJpZG9yIiwiX2NhcnZlVmVydGljYWxDb3JyaWRvciIsImMxIiwiYzIiLCJzdGFydEMiLCJlbmRDIiwicjEiLCJyMiIsInN0YXJ0UiIsImVuZFIiLCJfZ2V0VGlsZU9wZW5uZXNzRGV0YWlscyIsImlzV2Fsa2FibGUiLCJ2YWwiLCJvcGVuU2lkZXMiLCJkZWx0YXMiLCJkeCIsImR5IiwiZmxhZ3MiLCJpc0Nob2tlcG9pbnQiLCJfZm9yY2VDb25uZWN0aW9uVG9Qb2ludCIsInRhcmdldFgiLCJ0YXJnZXRZIiwiZGlycyIsIm50IiwicSIsInZpc2l0ZWQiLCJTZXQiLCJwYXRoYWJsZSIsInRhcmdldHMiLCJjbG9zZXN0IiwibWluRGlzdCIsIkluZmluaXR5IiwiY1giLCJjWSIsImQiLCJzaGlmdCIsIm5YIiwiblkiLCJoYXMiLCJpbmNsdWRlcyIsImRpc3QiLCJfaXNMaWZ0UmVhY2hhYmxlIiwibGlmdFBvcyIsInJlYWNoYWJsZSIsIm1hcEdyaWQiLCJzdGFydFgiLCJzdGFydFkiLCJ3YWxrYWJsZVRpbGVWYWx1ZXMiLCJxdWV1ZSIsImRpcmVjdGlvbnMiLCJjdXJyWCIsImN1cnJZIiwibmV4dFgiLCJuZXh0WSIsInBlcmZvcm1CRlMiLCJsb2dNYXBHcmlkRm9yRGVidWciLCJyUyIsInQiLCJqb2luIiwiUHJvY2VkdXJhbE1hcCIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwicmVuZGVyZXIiLCJnZW5lcmF0aW9uUGFyYW1zIiwiYm9va3NQZXJNYXAiLCJnZW5lcmF0aW9uQ29uZmlnIiwiY29uZmlnIiwidXNlclBhcmFtcyIsImdlblBhcmFtcyIsIkFycmF5IiwiZnJvbSIsInJvb21BdHRlbXB0cyIsIndlaWdodGVkVHlwZXMiLCJ3ZWlnaHQiLCJyb29tV2lkdGgiLCJyb29tSGVpZ2h0Iiwicm9vbUNvbCIsInJvb21Sb3ciLCJuZXdSb29tIiwiY29ubmVjdGVkIiwib3ZlcmxhcHMiLCJidWZmZXIiLCJleGlzdGluZ1Jvb20iLCJfcGxhY2VSb29tcyIsImVycm9yTXNnIiwiY29ubmVjdGVkU2V0IiwidW5jb25uZWN0ZWRSb29tcyIsImJlc3REaXN0U3EiLCJiZXN0VW5jUm9vbSIsImJlc3RDb25Sb29tSWQiLCJiZXN0VW5jSWR4Iiwicm9vbVUiLCJyb29tQyIsImRpc3RTcSIsImJlc3RDb25Sb29tIiwiZmluZCIsInNwbGljZSIsIl9jb25uZWN0Um9vbXNCZXR0ZXIiLCJwbGFjZWRMaWZ0RGF0YSIsImN1cnJlbnRDb25zaXN0ZW50Q29vcmRzIiwicm9vbXNMaXN0IiwiY29vcmRzVG9Vc2UiLCJuZXdseUZvdW5kQ29vcmRzIiwiY2FuZGlkYXRlcyIsInN0YXJ0SUMiLCJlbmRJQyIsInN0YXJ0SVIiLCJlbmRJUiIsImJlc3QiLCJfZmluZExpZnRQbGFjZW1lbnRMb2NhdGlvbiIsInRpbGVWYWx1ZUJlZm9yZUxpZnQiLCJsaWZ0Um9vbU9iamVjdCIsIm1lc3NhZ2VSZWFzb24iLCJhbGNvdmVTaXplIiwiYWxjb3ZlQ29sIiwiYWxjb3ZlUm93IiwibmV3TGlmdFJvb21EYXRhIiwibGlmdFdvcmxkUG9zIiwicm9vbUlkIiwicG9zaXRpb24iLCJjb29yZHMiLCJfcGxhY2VMaWZ0IiwiX2Vuc3VyZU1hcEJvcmRlcnMiLCJnZW5lcmF0ZUxldmVsRGF0YSIsInBsYWNlQm9va3NSZWxpYWJseSIsImxvZ01hcEdyaWQiLCJwb3RlbnRpYWxMb2NzIiwicGxhY2VkQ29vcmRzIiwidGlsZVZhbCIsImlzTGlmdCIsInBsYWNlZCIsInJhbmRJZHgiLCJib29rSWQiLCJ3b3JsZFgiLCJ3b3JsZFkiLCJmaW5kUmFuZG9tSW5pdGlhbFNwYXduUG9zaXRpb24iLCJjaGFyYWN0ZXJGb3JDb2xsaXNpb25DaGVjayIsInN1aXRhYmxlVGlsZXMiLCJ0ZW1wQ2hhckNvbGxpc2lvbkJveCIsImNvbGxpc2lvbkJveFdpZHRoIiwiY29sbGlzaW9uQm94SGVpZ2h0IiwiY2hlY2tDYW5kaWRhdGUiLCJoYWxmQ2hhcldpZHRoIiwiaGFsZkNoYXJIZWlnaHQiLCJwb2ludHNUb1ZlcmlmeSIsInBvaW50IiwiaXNUaWxlT3BlbkVub3VnaCIsInJPZmZzZXQiLCJjT2Zmc2V0IiwiclRlc3QiLCJjVGVzdCIsIm1pbk9wZW5TaWRlcyIsImF2b2lkTmFycm93Iiwib3BlbkNvdW50IiwiaXNPcGVuIiwiZmluZE5lYXJlc3RXYWxrYWJsZVRpbGUiLCJtYXhSIiwiZXhjbHVkZUxpZnQiLCJ0WCIsInRZIiwiYWJzIiwicGF0aGFibGVCRlMiLCJnZXRSb29tQ29udGFpbmluZ1RpbGUiLCJhY3R1YWxUaWxlIiwiZ2V0Um9vbUNlbnRlciIsImdldFNwYXduUG9pbnRJblJvb21PZkxpZnQiLCJsaWZ0VGlsZVgiLCJsaWZ0VGlsZVkiLCJwcmVmZXJyZWREaXN0YW5jZSIsImRpciIsImNoZWNrWCIsImNoZWNrWSIsImZpbmROZWFyYnlVbmFuc3dlcmVkQm9vayIsImNsb3Nlc3RCb29rIiwibWluRGlzdFNxIiwiZFgiLCJkWSIsIm1hcmtCb29rQXNDb2xsZWN0ZWQiLCJib29rVG9Db2xsZWN0IiwiZmluZE5lYXJieUxpZnQiLCJnZXRMaWZ0UG9zaXRpb24iLCJyTiIsIkxldmVsIiwiY3VycmVudE1hcCIsImxvYWRGbG9vciIsIlByb21pc2UiLCJyZXNvbHZlIiwiZ2V0Q3VycmVudEJvb2tzIiwiR2FtZVJlbmRlcmVyIiwiaW5pdGlhbGl6ZUNhbnZhcyIsImdldENvbnRleHQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJyZXNpemVDYW52YXMiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJjaGFyYWN0ZXIiLCJsZXZlbCIsImNlbnRlckNhbWVyYU9uQ2hhcmFjdGVyIiwiZHJhd0ZyYW1lIiwiY2xlYXJSZWN0IiwiY2hhciIsImRyYXdXaW5TY3JlZW4iLCJ0YXJnZXRCb29rc1RvV2luIiwiREVCVUdfR01fRkxPT1IiLCJHYW1lcGxheU1hbmFnZXIiLCJiaW5kIiwidXBkYXRlIiwidXBkYXRlUGxheWluZ1N0YXRlIiwibW92ZWQiLCJoYW5kbGVNb3ZlbWVudCIsImhhbmRsZUludGVyYWN0aW9ucyIsImlucHV0IiwiYWN0dWFsWCIsImFjdHVhbFkiLCJjYW5Nb3ZlWCIsImNoZWNrQ29sbGlzaW9uIiwiY2FuTW92ZVkiLCJib3giLCJwb2ludHMiLCJpbml0aWF0ZVF1ZXN0aW9uIiwibGlmdENvb2xkb3duQWN0aXZlIiwiaW5pdGlhdGVGbG9vclNlbGVjdGlvbiIsInNldEdhbWVTdGF0ZSIsImN1cnJlbnRCb29rVGFyZ2V0IiwiYXZhaWxhYmxlUXVlc3Rpb25zIiwicUlkeCIsImN1cnJlbnRRdWVzdGlvbkRhdGEiLCJzZWxPcHRJZHgiLCJ0b3RhbEJvb2tzQ29sbGVjdGVkR2xvYmFsbHkiLCJfc2V0R2FtZU92ZXIiLCJzZWxGbG9vciIsImhhbmRsZUxpZnRUcmFuc2l0aW9uIiwiY2F0Y2giLCJlcnIiLCJfaGFuZGxlRmF0YWxFcnJvciIsInRhcmdldEZsb29yIiwiaXNEZWJ1ZyIsIkxJRlRfQ09PTERPV05fTVMiLCJtYXBJbnN0IiwibGlmdERhdGEiLCJmaW5hbFNwYXduIiwibGlmdFJvb20iLCJlbnN1cmVDaGFyYWN0ZXJJc09uV2Fsa2FibGVUaWxlIiwic3RhcnRMaWZ0Q29vbGRvd25UaW1lciIsImFsbG93U3RhbmRpbmdPbkxpZnQiLCJjVFgiLCJjVFkiLCJjVFYiLCJzYWZlU3RhbmQiLCJjb2xsaWRpbmdXYWxsIiwibmVlZHNOdWRnZSIsInNhZmVTcG90IiwiZW1lcmdlbmN5IiwiTVVTSUNfU09VUkNFUyIsInRyYWNrMSIsInRyYWNrMiIsInRyYWNrMyIsIlRSQUNLX0NZQ0xFX09SREVSIiwiQXVkaW9NYW5hZ2VyIiwibXVzaWNWb2x1bWUiLCJjdXJyZW50TXVzaWNFbGVtZW50IiwiY3VycmVudFRyYWNrS2V5IiwiaXNNdXNpY1BsYXlpbmciLCJzYXZlZFZvbHVtZSIsInBhcnNlRmxvYXQiLCJhdWRpb0VsZW1lbnRzIiwiX3ByZWxvYWRUcmFja3MiLCJhdWRpb1BhdGgiLCJhdWRpbyIsIkF1ZGlvIiwicHJlbG9hZCIsInNldE11c2ljVm9sdW1lIiwidm9sdW1lIiwiZ2V0TXVzaWNWb2x1bWUiLCJwbGF5TXVzaWMiLCJ0cmFja0tleSIsImxvb3AiLCJzdG9wTXVzaWMiLCJwbGF5IiwidGhlbiIsImhhc0ZvY3VzIiwicGF1c2UiLCJjdXJyZW50VGltZSIsImNoYW5nZVRyYWNrRm9yRmxvb3IiLCJ0cmFja0luZGV4IiwibmV3VHJhY2tLZXkiLCJzdGFydEluaXRpYWxNdXNpYyIsImluaXRpYWxGbG9vciIsIkdhbWUiLCJjaGFyYWN0ZXJDb2xvciIsImFsZXJ0IiwiX2dhbWVTdGF0ZSIsIklETEUiLCJpc1J1bm5pbmciLCJsaWZ0Q29vbGRvd25UaW1lciIsImdhbWVwbGF5TWFuYWdlciIsImF1ZGlvTWFuYWdlciIsInNwcml0ZXMiLCJyZWQiLCJibHVlIiwieWVsbG93IiwiZ3JlZW4iLCJnYW1lTG9vcCIsIl9ib3VuZEtleURvd25IYW5kbGVyIiwiX2JvdW5kS2V5VXBIYW5kbGVyIiwiX2luaXRpYWxpemVDb3JlQ29tcG9uZW50cyIsIl9hZGRFdmVudExpc3RlbmVycyIsIm5ld1N0YXRlIiwidHJpZ2dlckdhbWVTdGFydCIsImxvYWRpbmdPdmVybGF5IiwiX2xvYWRBc3NldHNBbmRUaGVuU3RhcnRMb2dpYyIsImNvbnRhaW5zIiwiX2xvYWRBc3NldHMiLCJfc3RhcnRHYW1lTG9naWMiLCJwcm9taXNlcyIsInNwcml0ZVBhdGhLZXkiLCJzcHJpdGVQYXRoIiwicmVqZWN0IiwiYWxsIiwiTE9BRElOR19MRVZFTCIsInN0YXJ0UG9zIiwiaGFuZGxlS2V5RG93biIsImhhbmRsZUtleVVwIiwid2luIiwiQ1JFQVRPUl9OQU1FUyIsIkNMQVNTX0FUVEVORElOR19JTkZPIiwic3RvcEdhbWUiLCJzaG93QWxlcnQiLCJoYW5kbGVkIiwidG9Mb3dlckNhc2UiLCJjdXJyZW50R2FtZUluc3RhbmNlIiwiTWVudSIsImNoYXJhY3RlckltYWdlU291cmNlcyIsInNlbGVjdGVkQ2hhcmFjdGVyIiwidXNlckludGVyYWN0ZWQiLCJvdmVybGF5IiwiYXVkaW9NYW5hZ2VySW5zdGFuY2UiLCJpbml0aWFsaXplRWxlbWVudHMiLCJjaGFyYWN0ZXJQYW5lbCIsImNoYXJhY3RlckdyaWQiLCJzZXR1cENoYXJhY3RlckltYWdlcyIsImFkZEV2ZW50TGlzdGVuZXJzIiwic2hvdyIsInNldEF1ZGlvTWFuYWdlciIsInZhbHVlIiwibWVudUNvbnRhaW5lciIsInNldHRpbmdzQnV0dG9uIiwicGxheUJ1dHRvbiIsImNoYXJhY3RlckJ1dHRvbiIsInNldHRpbmdzUGFuZWwiLCJzZnhWb2x1bWUiLCJjbG9zZVNldHRpbmdzQnV0dG9uIiwiY2xvc2VDaGFyYWN0ZXJQYW5lbEJ1dHRvbiIsImRpc3BsYXlDb250YWluZXIiLCJzZWxlY3RlZENoYXJhY3RlckRpc3BsYXkiLCJpbnNlcnRCZWZvcmUiLCJjaGlsZHJlbiIsInVwZGF0ZVNlbGVjdGVkQ2hhcmFjdGVyRGlzcGxheSIsIk9iamVjdCIsImNoYXJhY3RlckNhcmRzIiwicXVlcnlTZWxlY3RvckFsbCIsImNhcmQiLCJjaGFyYWN0ZXJLZXkiLCJpbWdFbGVtZW50IiwiYWx0IiwiaGFuZGxlRmlyc3RJbnRlcmFjdGlvbiIsImFkZEludGVyYWN0aXZlTGlzdGVuZXIiLCJlbGVtZW50IiwiZXZlbnRUeXBlIiwiaGFuZGxlckZuIiwiZXZlbnQiLCJjYWxsIiwidG9nZ2xlU2V0dGluZ3MiLCJzdGFydEdhbWUiLCJvcGVuQ2hhcmFjdGVyTW9kYWwiLCJjbG9zZVNldHRpbmdzIiwiY2xvc2VDaGFyYWN0ZXJNb2RhbCIsIm5ld1ZvbHVtZSIsImNsaWNrZWRDYXJkIiwic2VsZWN0Q2hhcmFjdGVyIiwiX2Vuc3VyZU92ZXJsYXkiLCJjYXJkRWxlbWVudCIsImNoYXJBdCIsImltZ1NyYyIsImRpc3BsYXllZE5hbWUiLCJzZWxlY3RlZENhcmRIMyIsIm9wZW5TZXR0aW5ncyIsImhpZGUiLCJnYW1lQ2FudmFzIl0sInNvdXJjZVJvb3QiOiIifQ==